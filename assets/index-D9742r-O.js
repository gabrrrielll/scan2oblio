function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t,n,r={exports:{}},o={};function i(){if(t)return o;t=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),h=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=w.prototype=new b;x.constructor=w,g(x,v.prototype),x.isPureReactComponent=!0;var C=Array.isArray;function E(){}var _={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function S(t,n,r){var o=r.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==o?o:null,props:r}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var I=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function O(t,r,o,i,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l,c,u=!1;if(null===t)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case e:case n:u=!0;break;case f:return O((u=t._init)(t._payload),r,o,i,a)}}if(u)return a=a(t),u=""===i?"."+T(t,0):i,C(a)?(o="",null!=u&&(o=u.replace(I,"$&/")+"/"),O(a,r,o,"",function(e){return e})):null!=a&&(N(a)&&(l=a,c=o+(null==a.key||t&&t.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+u,a=S(l.type,c,l.props)),r.push(a)),1;u=0;var d,p=""===i?".":i+":";if(C(t))for(var m=0;m<t.length;m++)u+=O(i=t[m],r,o,s=p+T(i,m),a);else if("function"==typeof(m=null===(d=t)||"object"!=typeof d?null:"function"==typeof(d=h&&d[h]||d["@@iterator"])?d:null))for(t=m.call(t),m=0;!(i=t.next()).done;)u+=O(i=i.value,r,o,s=p+T(i,m++),a);else if("object"===s){if("function"==typeof t.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,o,i,a);throw r=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",function(e){return t.call(n,e,o++)}),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},j={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return o.Activity=p,o.Children=j,o.Component=v,o.Fragment=r,o.Profiler=a,o.PureComponent=w,o.StrictMode=i,o.Suspense=u,o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,o.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},o.cache=function(e){return function(){return e.apply(null,arguments)}},o.cacheSignal=function(){return null},o.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)!A.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return S(e.type,o,r)},o.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},o.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return S(e,i,o)},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:c,render:e}},o.isValidElement=N,o.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:k}},o.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),o=_.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(E,P)}catch(i){P(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),_.T=t}},o.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},o.use=function(e){return _.H.use(e)},o.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},o.useCallback=function(e,t){return _.H.useCallback(e,t)},o.useContext=function(e){return _.H.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},o.useEffect=function(e,t){return _.H.useEffect(e,t)},o.useEffectEvent=function(e){return _.H.useEffectEvent(e)},o.useId=function(){return _.H.useId()},o.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},o.useMemo=function(e,t){return _.H.useMemo(e,t)},o.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},o.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},o.useRef=function(e){return _.H.useRef(e)},o.useState=function(e){return _.H.useState(e)},o.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},o.useTransition=function(){return _.H.useTransition()},o.version="19.2.3",o}function a(){return n||(n=1,r.exports=i()),r.exports}var s=a();const l=e(s);var c,u,d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(t,n){var r,o,i,a=this.constructor,s=e.call(this,t,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),r=s,o=a.prototype,(i=Object.setPrototypeOf)?i(r,o):r.__proto__=o,function(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}(s),s}return d(t,e),t}(Error),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return p(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(f),m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.kind="ArgumentException",t}(h),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.kind="IllegalArgumentException",t}(h),b=function(){function e(e){if(this.binarizer=e,null===e)throw new v("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,o){var i=this.binarizer.getLuminanceSource().crop(t,n,r,o);return new e(this.binarizer.createBinarizer(i))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},e}(),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(h),C=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}(),E=function(){function e(){}return e.arraycopy=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}(),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _(t,e),t.kind="IndexOutOfBoundsException",t}(h),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return S(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(A),I=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,o){e.rangeCheck(t.length,n,r);for(var i=n;i<r;i++)t[i]=o},e.rangeCheck=function(e,t,n){if(t>n)throw new v("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new N(t);if(n>e)throw new N(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map(function(e){return Array.from({length:t}).fill(n)})},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map(function(e){return Int32Array.from({length:t}).fill(n)})},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next())r=31*r+i.value}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,o=new Int32Array(r);return E.arraycopy(e,t,o,0,r),o},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var o=0,i=t.length-1;o<=i;){var a=i+o>>1,s=r(n,t[a]);if(s>0)o=a+1;else{if(!(s<0))return a;i=a-1}}return-o-1},e.numberComparator=function(e,t){return e-t},e}(),T=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!=(t=e<<16)&&(n-=16,e=t),0!=(t=e<<8)&&(n-=8,e=t),0!=(t=e<<4)&&(n-=4,e=t),0!=(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-(e>>>31)},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),O=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);E.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=n[r];o&=~((1<<(31&e))-1);for(var i=n.length;0===o;){if(++r===i)return t;o=n[r]}var a=32*r+T.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=~n[r];o&=~((1<<(31&e))-1);for(var i=n.length;0===o;){if(++r===i)return t;o=~n[r]}var a=32*r+T.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new v;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits,i=n;i<=r;i++){var a=(2<<(i<r?31:31&t))-(1<<(i>n?0:31&e));o[i]|=a}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new v;if(t===e)return!0;t--;for(var r=Math.floor(e/32),o=Math.floor(t/32),i=this.bits,a=r;a<=o;a++){var s=(2<<(a<o?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((i[a]&s)!==(n?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1==(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new v("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var o=0;o<r;o++){for(var i=0,a=0;a<8;a++)this.get(e)&&(i|=1<<7-a),e++;t[n+o]=i}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,o=0;o<n;o++){var i=r[o];i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16,e[t-o]=i}if(this.size!==32*n){var a=32*n-this.size,s=e[0]>>>a;for(o=1;o<n;o++){var l=e[o];s|=l<<32-a,e[o-1]=s,s=l>>>a}e[n-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&I.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+I.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)7&t||(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},e}();(u=c||(c={}))[u.OTHER=0]="OTHER",u[u.PURE_BARCODE=1]="PURE_BARCODE",u[u.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",u[u.TRY_HARDER=3]="TRY_HARDER",u[u.CHARACTER_SET=4]="CHARACTER_SET",u[u.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",u[u.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",u[u.ASSUME_GS1=7]="ASSUME_GS1",u[u.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",u[u.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",u[u.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";const R=c;var k,P,j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(h);(P=k||(k={}))[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR";var M,L,B=function(){function e(t,n,r){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=a,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var l=this.values,c=0,u=l.length;c!==u;c++){var d=l[c];e.VALUES_TO_ECI.set(d,this)}try{for(var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),p=f.next();!p.done;p=f.next()){var h=p.value;e.NAME_TO_ECI.set(h,this)}}catch(m){o={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new D("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new D("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new D("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(k.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(k.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(k.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(k.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(k.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(k.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(k.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(k.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(k.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(k.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(k.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(k.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(k.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(k.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(k.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(k.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(k.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(k.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(k.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(k.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(k.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(k.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(k.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(k.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(k.Big5,28,"Big5"),e.GB18030=new e(k.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(k.EUC_KR,30,"EUC_KR","EUC-KR"),e}(),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.kind="UnsupportedOperationException",t}(h),H=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"==typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"==typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof B?e:B.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var o="",i=0,a=t.length;i<a;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new U("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(B.UTF8)||e.equals(B.ISO8859_1)||e.equals(B.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}(),V=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return H.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!=n&&void 0!==n.get(R.CHARACTER_SET))return n.get(R.CHARACTER_SET).toString();for(var r=t.length,o=!0,i=!0,a=!0,s=0,l=0,c=0,u=0,d=0,f=0,p=0,h=0,m=0,g=0,y=0,v=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],b=0;b<r&&(o||i||a);b++){var w=255&t[b];a&&(s>0?128&w?s--:a=!1:128&w&&(64&w?(s++,32&w?(s++,16&w?(s++,8&w?a=!1:u++):c++):l++):a=!1)),o&&(w>127&&w<160?o=!1:w>159&&(w<192||215===w||247===w)&&y++),i&&(d>0?w<64||127===w||w>252?i=!1:d--:128===w||160===w||w>239?i=!1:w>160&&w<224?(f++,h=0,++p>m&&(m=p)):w>127?(d++,p=0,++h>g&&(g=h)):(p=0,h=0))}return a&&s>0&&(a=!1),i&&d>0&&(i=!1),a&&(v||l+c+u>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||m>=3||g>=3)?e.SHIFT_JIS:o&&i?2===m&&2===f||10*y>=r?e.SHIFT_JIS:e.ISO88591:o?e.ISO88591:i?e.SHIFT_JIS:a?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=i?parseInt(i.substr(1)):void 0;var l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);for(var u=parseInt(o),d=o&&o[0]+""=="0"?"0":" ";l.length<u;)l=void 0!==n?l+d:d+l;return l}})},e.getBytes=function(e,t){return H.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=B.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=B.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=B.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}(),G=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=V.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},e}(),z=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,null==t&&(t=e),this.height=t,e<1||t<1)throw new v("Both dimensions must be greater than 0");null==n&&(n=Math.floor((e+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,o=new e(r,n),i=0;i<n;i++)for(var a=t[i],s=0;s<r;s++)a[s]&&o.set(s,i);return o},e.parseFromString=function(t,n,r){if(null===t)throw new v("stringRepresentation cannot be null");for(var o=new Array(t.length),i=0,a=0,s=-1,l=0,c=0;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new v("row lengths do not match");a=i,l++}c++}else if(t.substring(c,c+n.length)===n)c+=n.length,o[i]=!0,i++;else{if(t.substring(c,c+r.length)!==r)throw new v("illegal character encountered: "+t.substring(c));c+=r.length,o[i]=!1,i++}if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new v("row lengths do not match");l++}for(var u=new e(s,l),d=0;d<i;d++)o[d]&&u.set(Math.floor(d%s),Math.floor(d/s));return u},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return!!(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new v("input matrix dimensions do not match");for(var t=new O(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,o=0,i=this.height;o<i;o++)for(var a=o*n,s=e.getRow(o,t).getBitArray(),l=0;l<n;l++)r[a+l]^=s[l]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new v("Left and top must be nonnegative");if(r<1||n<1)throw new v("Height and width must be at least 1");var o=e+n,i=t+r;if(i>this.height||o>this.width)throw new v("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,l=t;l<i;l++)for(var c=l*a,u=e;u<o;u++)s[c+Math.floor(u/32)]|=1<<(31&u)&4294967295},e.prototype.getRow=function(e,t){null==t||t.getSize()<this.width?t=new O(this.width):t.clear();for(var n=this.rowSize,r=this.bits,o=e*n,i=0;i<n;i++)t.setBulk(32*i,r[o+i]);return t},e.prototype.setRow=function(e,t){E.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new O(e),r=new O(e),o=0,i=Math.floor((t+1)/2);o<i;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,o=e,i=t,a=-1,s=-1,l=0;l<t;l++)for(var c=0;c<n;c++){var u=r[l*n+c];if(0!==u){if(l<i&&(i=l),l>s&&(s=l),32*c<o){for(var d=0;!(u<<31-d&4294967295);)d++;32*c+d<o&&(o=32*c+d)}if(32*c+31>a){for(d=31;u>>>d===0;)d--;32*c+d>a&&(a=32*c+d)}}}return a<o||s<i?null:Int32Array.from([o,i,a-o+1,s-i+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,o=n%e*32,i=t[n],a=0;!(i<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),o=32*Math.floor(n%e),i=t[n],a=31;i>>>a===0;)a--;return o+=a,Int32Array.from([o,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&I.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+I.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new G,o=0,i=this.height;o<i;o++){for(var a=0,s=this.width;a<s;a++)r.append(this.get(a,o)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}(),q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return q(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(h),X=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return X(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),o=r.getWidth();null==n||n.getSize()<o?n=new O(o):n.clear(),this.initArrays(o);for(var i=r.getRow(e,this.luminances),a=this.buckets,s=0;s<o;s++)a[(255&i[s])>>t.LUMINANCE_SHIFT]++;var l=t.estimateBlackPoint(a);if(o<3)for(s=0;s<o;s++)(255&i[s])<l&&n.set(s);else{var c=255&i[0],u=255&i[1];for(s=1;s<o-1;s++){var d=255&i[s+1];(4*u-c-d)/2<l&&n.set(s),c=u,u=d}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),o=new z(n,r);this.initArrays(n);for(var i=this.buckets,a=1;a<5;a++)for(var s=Math.floor(r*a/5),l=e.getRow(s,this.luminances),c=Math.floor(4*n/5),u=Math.floor(n/5);u<c;u++)i[(255&l[u])>>t.LUMINANCE_SHIFT]++;var d=t.estimateBlackPoint(i),f=e.getMatrix();for(a=0;a<r;a++){var p=a*n;for(u=0;u<n;u++)(255&f[p+u])<d&&o.set(u,a)}return o},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,o=0,i=0,a=0;a<n;a++)e[a]>i&&(o=a,i=e[a]),e[a]>r&&(r=e[a]);var s=0,l=0;for(a=0;a<n;a++){var c=a-o;(p=e[a]*c*c)>l&&(s=a,l=p)}if(o>s){var u=o;o=s,s=u}if(s-o<=n/16)throw new W;var d=s-1,f=-1;for(a=s-1;a>o;a--){var p,h=a-o;(p=h*h*(s-a)*(r-e[a]))>f&&(d=a,f=p)}return d<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(C),$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return $(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&o>=t.MINIMUM_DIMENSION){var i=n.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;0!==(r&t.BLOCK_SIZE_MASK)&&a++;var s=o>>t.BLOCK_SIZE_POWER;0!==(o&t.BLOCK_SIZE_MASK)&&s++;var l=t.calculateBlackPoints(i,a,s,r,o),c=new z(r,o);t.calculateThresholdForBlock(i,a,s,r,o,l,c),this.matrix=c}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,o,i,a,s){for(var l=i-t.BLOCK_SIZE,c=o-t.BLOCK_SIZE,u=0;u<r;u++){var d=u<<t.BLOCK_SIZE_POWER;d>l&&(d=l);for(var f=t.cap(u,2,r-3),p=0;p<n;p++){var h=p<<t.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=t.cap(p,2,n-3),g=0,y=-2;y<=2;y++){var v=a[f+y];g+=v[m-2]+v[m-1]+v[m]+v[m+1]+v[m+2]}var b=g/25;t.thresholdBlock(e,h,d,b,o,s)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,o,i,a){for(var s=0,l=r*i+n;s<t.BLOCK_SIZE;s++,l+=i)for(var c=0;c<t.BLOCK_SIZE;c++)(255&e[l+c])<=o&&a.set(n+c,r+s)},t.calculateBlackPoints=function(e,n,r,o,i){for(var a=i-t.BLOCK_SIZE,s=o-t.BLOCK_SIZE,l=new Array(r),c=0;c<r;c++){l[c]=new Int32Array(n);var u=c<<t.BLOCK_SIZE_POWER;u>a&&(u=a);for(var d=0;d<n;d++){var f=d<<t.BLOCK_SIZE_POWER;f>s&&(f=s);for(var p=0,h=255,m=0,g=0,y=u*o+f;g<t.BLOCK_SIZE;g++,y+=o){for(var v=0;v<t.BLOCK_SIZE;v++){var b=255&e[y+v];p+=b,b<h&&(h=b),b>m&&(m=b)}if(m-h>t.MIN_DYNAMIC_RANGE)for(g++,y+=o;g<t.BLOCK_SIZE;g++,y+=o)for(v=0;v<t.BLOCK_SIZE;v++)p+=255&e[y+v]}var w=p>>2*t.BLOCK_SIZE_POWER;if(m-h<=t.MIN_DYNAMIC_RANGE&&(w=h/2,c>0&&d>0)){var x=(l[c-1][d]+2*l[c][d-1]+l[c-1][d-1])/4;h<x&&(w=x)}l[c][d]=w}}return l},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(Y),J=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new U("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new U("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new U("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new G,n=0;n<this.height;n++){for(var r=this.getRow(n,e),o=0;o<this.width;o++){var i,a=255&r[o];i=a<64?"#":a<128?"+":a<192?".":" ",t.append(i)}t.append("\n")}return t.toString()},e}(),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return Z(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),o=0;o<r;o++)n[o]=255-(255&n[o]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,o){return new t(this.delegate.crop(e,n,r,o))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(J),ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),te=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return ee(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,n,r){var o=new Uint8ClampedArray(n*r);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX)for(var i=0,a=0,s=e.length;i<s;i+=4,a++){var l=void 0;l=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,o[a]=l}else{i=0,a=0;for(var c=e.length;i<c;i+=4,a++)l=void 0,l=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,o[a]=255-l}return o},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new v("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),o=e*t.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);return n.width=s,n.height=l,r.translate(s/2,l/2),r.rotate(o),r.drawImage(this.canvas,i/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new Q(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(J),ne=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),re=function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(i,a)}s((r=r.apply(e,[])).next())})},oe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ie=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return re(this,0,void 0,function(){var e,t,n,r,o,i,a,s,l,c,u,d;return oe(this,function(f){switch(f.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),t=[];try{for(n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(i="video"===o.kind?"videoinput":o.kind)&&(a=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),l=o.groupId,c={deviceId:a,label:s,kind:i,groupId:l},t.push(c))}catch(p){u={error:p}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(u)throw u.error}}return[2,t]}})})},e.prototype.getVideoInputDevices=function(){return re(this,0,void 0,function(){return oe(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(e){return new ne(e.deviceId,e.label)})]}})})},e.prototype.findDeviceById=function(e){return re(this,0,void 0,function(){var t;return oe(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find(function(t){return t.deviceId===e})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(e,t){return re(this,0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return re(this,0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return re(this,0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}})})},e.prototype.decodeOnceFromStream=function(e,t){return re(this,0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return re(this,0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.decodeFromVideoDevice=function(e,t,n){return re(this,0,void 0,function(){var r;return oe(this,function(o){switch(o.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromConstraints=function(e,t,n){return re(this,0,void 0,function(){var r;return oe(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,o.sent()]}})})},e.prototype.decodeFromStream=function(e,t,n){return re(this,0,void 0,function(){var r;return oe(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,o.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return re(this,0,void 0,function(){var n;return oe(this,function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}})})},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,r){return t.playVideoOnLoad(e,function(){return n()})})},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return re(this,0,void 0,function(){return oe(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new g("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new g("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new g("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new g("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new g("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new g("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new g("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new g("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new g("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new g("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(e){return re(this,0,void 0,function(){return oe(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return re(this,0,void 0,function(){return oe(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var o=function(i,a){if(r._stopAsyncDecode)return a(new W("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{i(r.decode(e))}catch(s){if(t&&s instanceof W||(s instanceof x||s instanceof D)&&n)return setTimeout(o,r._timeBetweenDecodingAttempts,i,a);a(s)}};return new Promise(function(e,t){return o(e,t)})},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var r=function(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var o=n.decode(e);t(o,null),setTimeout(r,n.timeBetweenScansMillis)}catch(i){t(null,i),(i instanceof x||i instanceof D||i instanceof W)&&setTimeout(r,n._timeBetweenDecodingAttempts)}};r()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),n=new te(t),r=new K(n);return new b(r)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch(r){n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.drawImageOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(la){e.src=""}this.videoElement.removeAttribute("src")},e}(),ae=function(){function e(e,t,n,r,o,i){void 0===n&&(n=null==t?0:8*t.length),void 0===i&&(i=E.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=i,this.text=e,this.rawBytes=t,this.numBits=null==n?null==t?0:8*t.length:n,this.resultPoints=r,this.format=o,this.resultMetadata=null,this.timestamp=null==i?E.currentTimeMillis():i}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);E.arraycopy(t,0,n,0,t.length),E.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();(L=M||(M={}))[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";const se=M;var le,ce;(ce=le||(le={}))[ce.OTHER=0]="OTHER",ce[ce.ORIENTATION=1]="ORIENTATION",ce[ce.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ce[ce.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ce[ce.ISSUE_NUMBER=4]="ISSUE_NUMBER",ce[ce.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ce[ce.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ce[ce.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ce[ce.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ce[ce.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ce[ce.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";const ue=le;var de,fe,pe=function(){function e(e,t,n,r,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}(),he=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new v;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}(),me=function(){function e(e,t){if(0===t.length)throw new v;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),E.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,o=n.length;r!==o;r++){var i=n[r];t=he.addOrSubtract(t,i)}return t}t=n[0];var a=n.length,s=this.field;for(r=1;r<a;r++)t=he.addOrSubtract(s.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;E.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=he.addOrSubtract(n[s-a],r[s]);return new e(this.field,i)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,o=t.coefficients,i=o.length,a=new Int32Array(r+i-1),s=this.field,l=0;l<r;l++)for(var c=n[l],u=0;u<i;u++)a[l+u]=he.addOrSubtract(a[l+u],s.multiply(c,o[u]));return new e(s,a)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,o=new Int32Array(n),i=this.coefficients,a=0;a<n;a++)o[a]=r.multiply(i[a],t);return new e(r,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new v;if(0===n)return this.field.getZero();for(var r=this.coefficients,o=r.length,i=new Int32Array(o+t),a=this.field,s=0;s<o;s++)i[s]=a.multiply(r[s],n);return new e(a,i)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new v("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new v("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,o=e.getCoefficient(e.getDegree()),i=t.inverse(o);r.getDegree()>=e.getDegree()&&!r.isZero();){var a=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),i),l=e.multiplyByMonomial(a,s),c=t.buildMonomial(a,s);n=n.addOrSubtract(c),r=r.addOrSubtract(l)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}(),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.kind="ArithmeticException",t}(h),ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function t(t,n,r){var o=e.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=r;for(var i=new Int32Array(n),a=1,s=0;s<n;s++)i[s]=a,(a*=2)>=n&&(a^=t,a&=n-1);o.expTable=i;var l=new Int32Array(n);for(s=0;s<n-1;s++)l[i[s]]=s;return o.logTable=l,o.zero=new me(o,Int32Array.from([0])),o.one=new me(o,Int32Array.from([1])),o}return ve(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new v;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new me(this,n)},t.prototype.inverse=function(e){if(0===e)throw new ye;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(he),we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return we(t,e),t.kind="ReedSolomonException",t}(h),Ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ce(t,e),t.kind="IllegalStateException",t}(h),_e=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new me(n,e),o=new Int32Array(t),i=!0,a=0;a<t;a++){var s=r.evaluateAt(n.exp(a+n.getGeneratorBase()));o[o.length-1-a]=s,0!==s&&(i=!1)}if(!i){var l=new me(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(t,1),l,t),u=c[0],d=c[1],f=this.findErrorLocations(u),p=this.findErrorMagnitudes(d,f);for(a=0;a<f.length;a++){var h=e.length-1-n.log(f[a]);if(h<0)throw new xe("Bad error location");e[h]=be.addOrSubtract(e[h],p[a])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=this.field,i=e,a=t,s=o.getZero(),l=o.getOne();a.getDegree()>=(n/2|0);){var c=i,u=s;if(s=l,(i=a).isZero())throw new xe("r_{i-1} was zero");a=c;for(var d=o.getZero(),f=i.getCoefficient(i.getDegree()),p=o.inverse(f);a.getDegree()>=i.getDegree()&&!a.isZero();){var h=a.getDegree()-i.getDegree(),m=o.multiply(a.getCoefficient(a.getDegree()),p);d=d.addOrSubtract(o.buildMonomial(h,m)),a=a.addOrSubtract(i.multiplyByMonomial(h,m))}if(l=d.multiply(s).addOrSubtract(u),a.getDegree()>=i.getDegree())throw new Ee("Division algorithm failed to reduce polynomial?")}var g=l.getCoefficient(0);if(0===g)throw new xe("sigmaTilde(0) was zero");var y=o.inverse(g);return[l.multiplyScalar(y),a.multiplyScalar(y)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,o=this.field,i=1;i<o.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=o.inverse(i),r++);if(r!==t)throw new xe("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),o=this.field,i=0;i<n;i++){for(var a=o.inverse(t[i]),s=1,l=0;l<n;l++)if(i!==l){var c=o.multiply(t[l],a),u=1&c?-2&c:1|c;s=o.multiply(s,u)}r[i]=o.multiply(e.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(r[i]=o.multiply(r[i],a))}return r},e}();(fe=de||(de={}))[fe.UPPER=0]="UPPER",fe[fe.LOWER=1]="LOWER",fe[fe.MIXED=2]="MIXED",fe[fe.DIGIT=3]="DIGIT",fe[fe.PUNCT=4]="PUNCT",fe[fe.BINARY=5]="BINARY";var Ae,Se=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),o=this.correctBits(r),i=e.convertBoolArrayToByteArray(o),a=e.getEncodedData(o),s=new pe(i,a,null,null);return s.setNumBits(o.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=de.UPPER,o=de.UPPER,i="",a=0;a<n;)if(o===de.BINARY){if(n-a<5)break;var s=e.readCode(t,a,5);if(a+=5,0===s){if(n-a<11)break;s=e.readCode(t,a,11)+31,a+=11}for(var l=0;l<s;l++){if(n-a<8){a=n;break}var c=e.readCode(t,a,8);i+=V.castAsNonUtf8Char(c),a+=8}o=r}else{var u=o===de.DIGIT?4:5;if(n-a<u)break;c=e.readCode(t,a,u),a+=u;var d=e.getCharacter(o,c);d.startsWith("CTRL_")?(r=o,o=e.getTable(d.charAt(5)),"L"===d.charAt(6)&&(r=o)):(i+=d,o=r)}return i},e.getTable=function(e){switch(e){case"L":return de.LOWER;case"P":return de.PUNCT;case"M":return de.MIXED;case"D":return de.DIGIT;case"B":return de.BINARY;default:return de.UPPER}},e.getCharacter=function(t,n){switch(t){case de.UPPER:return e.UPPER_TABLE[n];case de.LOWER:return e.LOWER_TABLE[n];case de.MIXED:return e.MIXED_TABLE[n];case de.PUNCT:return e.PUNCT_TABLE[n];case de.DIGIT:return e.DIGIT_TABLE[n];default:throw new Ee("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=be.AZTEC_DATA_10):(r=12,n=be.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=t.length/r;if(i<o)throw new D;for(var a=t.length%r,s=new Int32Array(i),l=0;l<i;l++,a+=r)s[l]=e.readCode(t,a,r);try{new _e(n).decode(s,i-o)}catch(m){throw new D(m)}var c=(1<<r)-1,u=0;for(l=0;l<o;l++){if(0===(p=s[l])||p===c)throw new D;1!==p&&p!==c-1||u++}var d=new Array(o*r-u),f=0;for(l=0;l<o;l++){var p;if(1===(p=s[l])||p===c-1)d.fill(p>1,f,f+r-1),f+=r-1;else for(var h=r-1;h>=0;--h)d[f++]=!!(p&1<<h)}return d},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,o=new Int32Array(r),i=new Array(this.totalBitsInLayer(n,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else{var s=r+1+2*T.truncDivision(T.truncDivision(r,2)-1,15),l=r/2,c=T.truncDivision(s,2);for(a=0;a<l;a++){var u=a+T.truncDivision(a,15);o[l-a-1]=c-u-1,o[l+a]=c+u+1}}a=0;for(var d=0;a<n;a++){for(var f=4*(n-a)+(t?9:12),p=2*a,h=r-1-p,m=0;m<f;m++)for(var g=2*m,y=0;y<2;y++)i[d+g+y]=e.get(o[p+y],o[p+m]),i[d+2*f+g+y]=e.get(o[p+m],o[h-y]),i[d+4*f+g+y]=e.get(o[h-y],o[h-m]),i[d+6*f+g+y]=e.get(o[h-m],o[p+y]);d+=8*f}return i},e.readCode=function(e,t,n){for(var r=0,o=t;o<t+n;o++)r<<=1,e[o]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}(),Ne=function(){function e(){}return e.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++)t+=e[n];return t},e}(),Ie=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),Te=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*Ie.floatToIntBits(this.x)+Ie.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,o=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(i>=o&&i>=a?(n=e[0],t=e[1],r=e[2]):a>=i&&a>=o?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return Ne.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)},e}(),Oe=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),Re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n)||this;return a.compact=r,a.nbDatablocks=o,a.nbLayers=i,a}return Re(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(Oe),Pe=function(){function e(t,n,r,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==n&&(n=e.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==o&&(o=t.getHeight()/2|0);var i=n/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,o=!1,i=!0,a=!1,s=!1,l=!1,c=!1,u=!1,d=this.width,f=this.height;i;){i=!1;for(var p=!0;(p||!s)&&t<d;)(p=this.containsBlackPoint(n,r,t,!1))?(t++,i=!0,s=!0):s||t++;if(t>=d){o=!0;break}for(var h=!0;(h||!l)&&r<f;)(h=this.containsBlackPoint(e,t,r,!0))?(r++,i=!0,l=!0):l||r++;if(r>=f){o=!0;break}for(var m=!0;(m||!c)&&e>=0;)(m=this.containsBlackPoint(n,r,e,!1))?(e--,i=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var g=!0;(g||!u)&&n>=0;)(g=this.containsBlackPoint(e,t,n,!0))?(n--,i=!0,u=!0):u||n--;if(n<0){o=!0;break}i&&(a=!0)}if(!o&&a){for(var y=t-e,v=null,b=1;null===v&&b<y;b++)v=this.getBlackPointOnSegment(e,r-b,e+b,r);if(null==v)throw new W;var w=null;for(b=1;null===w&&b<y;b++)w=this.getBlackPointOnSegment(e,n+b,e+b,n);if(null==w)throw new W;var x=null;for(b=1;null===x&&b<y;b++)x=this.getBlackPointOnSegment(t,n+b,t-b,n);if(null==x)throw new W;var C=null;for(b=1;null===C&&b<y;b++)C=this.getBlackPointOnSegment(t,r-b,t-b,r);if(null==C)throw new W;return this.centerEdges(C,v,x,w)}throw new W},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var o=Ne.round(Ne.distance(e,t,n,r)),i=(n-e)/o,a=(r-t)/o,s=this.image,l=0;l<o;l++){var c=Ne.round(e+l*i),u=Ne.round(t+l*a);if(s.get(c,u))return new Te(c,u)}return null},e.prototype.centerEdges=function(t,n,r,o){var i=t.getX(),a=t.getY(),s=n.getX(),l=n.getY(),c=r.getX(),u=r.getY(),d=o.getX(),f=o.getY(),p=e.CORR;return i<this.width/2?[new Te(d-p,f+p),new Te(s+p,l+p),new Te(c-p,u-p),new Te(i+p,a-p)]:[new Te(d+p,f+p),new Te(s+p,l-p),new Te(c-p,u+p),new Te(i-p,a-p)]},e.prototype.containsBlackPoint=function(e,t,n,r){var o=this.image;if(r){for(var i=e;i<=t;i++)if(o.get(i,n))return!0}else for(var a=e;a<=t;a++)if(o.get(n,a))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}(),je=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),o=!0,i=0;i<t.length&&o;i+=2){var a=Math.floor(t[i]),s=Math.floor(t[i+1]);if(a<-1||a>n||s<-1||s>r)throw new W;o=!1,-1===a?(t[i]=0,o=!0):a===n&&(t[i]=n-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===r&&(t[i+1]=r-1,o=!0)}for(o=!0,i=t.length-2;i>=0&&o;i-=2){if(a=Math.floor(t[i]),s=Math.floor(t[i+1]),a<-1||a>n||s<-1||s>r)throw new W;o=!1,-1===a?(t[i]=0,o=!0):a===n&&(t[i]=n-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===r&&(t[i+1]=r-1,o=!0)}},e}(),De=function(){function e(e,t,n,r,o,i,a,s,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=l}return e.quadrilateralToQuadrilateral=function(t,n,r,o,i,a,s,l,c,u,d,f,p,h,m,g){var y=e.quadrilateralToSquare(t,n,r,o,i,a,s,l);return e.squareToQuadrilateral(c,u,d,f,p,h,m,g).times(y)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=0;d<t;d+=2){var f=e[d],p=e[d+1],h=o*f+s*p+u;e[d]=(n*f+i*p+l)/h,e[d+1]=(r*f+a*p+c)/h}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length,f=0;f<d;f++){var p=e[f],h=t[f],m=o*p+s*h+u;e[f]=(n*p+i*h+l)/m,t[f]=(r*p+a*h+c)/m}},e.squareToQuadrilateral=function(t,n,r,o,i,a,s,l){var c=t-r+i-s,u=n-o+a-l;if(0===c&&0===u)return new e(r-t,i-r,t,o-n,a-o,n,0,0,1);var d=r-i,f=s-i,p=o-a,h=l-a,m=d*h-f*p,g=(c*h-f*u)/m,y=(d*u-c*p)/m;return new e(r-t+g*r,s-t+y*s,t,o-n+g*o,l-n+y*l,n,g,y,1)},e.quadrilateralToSquare=function(t,n,r,o,i,a,s,l){return e.squareToQuadrilateral(t,n,r,o,i,a,s,l).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}(),Me=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Me(t,e),t.prototype.sampleGrid=function(e,t,n,r,o,i,a,s,l,c,u,d,f,p,h,m,g,y,v){var b=De.quadrilateralToQuadrilateral(r,o,i,a,s,l,c,u,d,f,p,h,m,g,y,v);return this.sampleGridWithTransform(e,t,n,b)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new W;for(var o=new z(t,n),i=new Float32Array(2*t),a=0;a<n;a++){for(var s=i.length,l=a+.5,c=0;c<s;c+=2)i[c]=c/2+.5,i[c+1]=l;r.transformPoints(i),je.checkAndNudgePoints(e,i);try{for(c=0;c<s;c+=2)e.get(Math.floor(i[c]),Math.floor(i[c+1]))&&o.set(c/2,a)}catch(u){throw new W}}return o},t}(je),Be=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new Le,e}(),Fe=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new Te(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),Ue=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ke(o,i,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new W;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,o=0;o<4;o++){var i=n[(this.shift+o)%4];this.compact?(r<<=7,r+=i>>1&127):(r<<=10,r+=(i>>2&992)+(i>>1&31))}var a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},e.prototype.getRotation=function(e,t){var n=0;e.forEach(function(e,r,o){n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(T.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new W},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var o=n-r,i=new Int32Array(n),a=n-1;a>=0;--a)i[a]=15&e,e>>=4;try{new _e(be.AZTEC_PARAM).decode(i,o)}catch(l){throw new W}var s=0;for(a=0;a<r;a++)s=(s<<4)+i[a];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,o=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,i,1,-1),s=this.getFirstDifferent(n,i,1,1),l=this.getFirstDifferent(r,i,-1,1),c=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(a,s,l,c))break}t=a,n=s,r=l,o=c,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new W;this.compact=5===this.nbCenterLayers;var d=new Te(t.getX()+.5,t.getY()-.5),f=new Te(n.getX()+.5,n.getY()+.5),p=new Te(r.getX()-.5,r.getY()+.5),h=new Te(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,f,p,h],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(l=new Pe(this.image).detect())[0],t=l[1],n=l[2],r=l[3]}catch(c){var o=this.image.getWidth()/2,i=this.image.getHeight()/2;e=this.getFirstDifferent(new Fe(o+7,i-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Fe(o+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Fe(o-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Fe(o-7,i-7),!1,-1,-1).toResultPoint()}var a=Ne.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Ne.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var l;e=(l=new Pe(this.image,15,a,s).detect())[0],t=l[1],n=l[2],r=l[3]}catch(c){e=this.getFirstDifferent(new Fe(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Fe(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Fe(a-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Fe(a-7,s-7),!1,-1,-1).toResultPoint()}return a=Ne.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Ne.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new Fe(a,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,o){var i=Be.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return i.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,o=this.distanceResultPoint(e,t),i=o/n,a=e.getX(),s=e.getY(),l=i*(t.getX()-e.getX())/o,c=i*(t.getY()-e.getY())/o,u=0;u<n;u++)this.image.get(Ne.round(a+u*l),Ne.round(s+u*c))&&(r|=1<<n-u-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new Fe(e.getX()-3,e.getY()+3),t=new Fe(t.getX()-3,t.getY()-3),n=new Fe(n.getX()+3,n.getY()-3),r=new Fe(r.getX()+3,r.getY()+3);var o=this.getColor(r,e);if(0===o)return!1;var i=this.getColor(e,t);return i===o&&(i=this.getColor(t,n))===o&&(i=this.getColor(n,r))===o},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,i=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),u=0;u<c;u++)a+=r,s+=o,this.image.get(Ne.round(a),Ne.round(s))!==l&&i++;var d=i/n;return d>.1&&d<.9?0:d<=.1===l?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var o=e.getX()+n,i=e.getY()+r;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=n,i+=r;for(o-=n,i-=r;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=n;for(o-=n;this.isValid(o,i)&&this.image.get(o,i)===t;)i+=r;return new Fe(o,i-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),o=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new Te(a+r*o,s+r*i),c=new Te(a-r*o,s-r*i);return o=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new Te(a+r*o,s+r*i),c,new Te(a-r*o,s-r*i)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=Ne.round(e.getX()),n=Ne.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return Ne.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return Ne.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15},e}(),He=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new Ue(e.getBlackMatrix()),o=null,i=null;try{o=(a=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),i=(new Se).decode(a)}catch(u){n=u}if(null==i)try{var a;o=(a=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),i=(new Se).decode(a)}catch(u){if(null!=n)throw n;throw u}var s=new ae(i.getText(),i.getRawBytes(),i.getNumBits(),o,se.AZTEC,E.currentTimeMillis()),l=i.getByteSegments();null!=l&&s.putMetadata(ue.BYTE_SEGMENTS,l);var c=i.getECLevel();return null!=c&&s.putMetadata(ue.ERROR_CORRECTION_LEVEL,c),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(R.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach(function(e,t,r){n.foundPossibleResultPoint(e)})}},e.prototype.reset=function(){},e}(),Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Ve(function(e){return void 0===e&&(e=500),Ae.call(this,new He,e)||this},Ae=ie);var Ge=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(c){if(t&&!0===t.get(R.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),o=r.getResultMetadata(),i=270;null!==o&&!0===o.get(ue.ORIENTATION)&&(i+=o.get(ue.ORIENTATION)%360),r.putMetadata(ue.ORIENTATION,i);var a=r.getResultPoints();if(null!==a)for(var s=n.getHeight(),l=0;l<a.length;l++)a[l]=new Te(s-a[l].getY()-1,a[l].getX());return r}throw new W}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),o=e.getHeight(),i=new O(r),a=t&&!0===t.get(R.TRY_HARDER),s=Math.max(1,o>>(a?8:5));n=a?o:15;for(var l=Math.trunc(o/2),c=0;c<n;c++){var u=Math.trunc((c+1)/2),d=l+s*(1&c?-u:u);if(d<0||d>=o)break;try{i=e.getBlackRow(d,i)}catch(g){continue}for(var f=function(e){if(1===e&&(i.reverse(),t&&!0===t.get(R.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach(function(e,t){return n.set(t,e)}),n.delete(R.NEED_RESULT_POINT_CALLBACK),t=n}try{var o=p.decodeRow(d,i,t);if(1===e){o.putMetadata(ue.ORIENTATION,180);var a=o.getResultPoints();null!==a&&(a[0]=new Te(r-a[0].getX()-1,a[0].getY()),a[1]=new Te(r-a[1].getX()-1,a[1].getY()))}return{value:o}}catch(s){}},p=this,h=0;h<2;h++){var m=f(h);if("object"==typeof m)return m.value}}throw new W},e.recordPattern=function(e,t,n){for(var r=n.length,o=0;o<r;o++)n[o]=0;var i=e.getSize();if(t>=i)throw new W;for(var a=!e.get(t),s=0,l=t;l<i;){if(e.get(l)!==a)n[s]++;else{if(++s===r)break;n[s]=1,a=!a}l++}if(s!==r&&(s!==r-1||l!==i))throw new W},e.recordPatternInReverse=function(t,n,r){for(var o=r.length,i=t.get(n);n>0&&o>=0;)t.get(--n)!==i&&(o--,i=!i);if(o>=0)throw new W;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,i=0,a=0;a<r;a++)o+=e[a],i+=t[a];if(o<i)return Number.POSITIVE_INFINITY;var s=o/i;n*=s;for(var l=0,c=0;c<r;c++){var u=e[c],d=t[c]*s,f=u>d?u-d:d-u;if(f>n)return Number.POSITIVE_INFINITY;l+=f}return l/o},e}(),ze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),o=0,i=Int32Array.from([0,0,0,0,0,0]),a=r,s=!1,l=r;l<n;l++)if(e.get(l)!==s)i[o]++;else{if(5===o){for(var c=t.MAX_AVG_VARIANCE,u=-1,d=t.CODE_START_A;d<=t.CODE_START_C;d++){var f=Ge.patternMatchVariance(i,t.CODE_PATTERNS[d],t.MAX_INDIVIDUAL_VARIANCE);f<c&&(c=f,u=d)}if(u>=0&&e.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,u]);a+=i[0]+i[1],(i=i.slice(2,i.length-1))[o-1]=0,i[o]=0,o--}else o++;i[o]=1,s=!s}throw new W},t.decodeCode=function(e,n,r){Ge.recordPattern(e,r,n);for(var o=t.MAX_AVG_VARIANCE,i=-1,a=0;a<t.CODE_PATTERNS.length;a++){var s=t.CODE_PATTERNS[a],l=this.patternMatchVariance(n,s,t.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,i=a)}if(i>=0)return i;throw new W},t.prototype.decodeRow=function(e,n,r){var o,i=r&&!0===r.get(R.ASSUME_GS1),a=t.findStartPattern(n),s=a[2],l=0,c=new Uint8Array(20);switch(c[l++]=s,s){case t.CODE_START_A:o=t.CODE_CODE_A;break;case t.CODE_START_B:o=t.CODE_CODE_B;break;case t.CODE_START_C:o=t.CODE_CODE_C;break;default:throw new D}for(var u=!1,d=!1,f="",p=a[0],h=a[1],m=Int32Array.from([0,0,0,0,0,0]),g=0,y=0,v=s,b=0,w=!0,C=!1,E=!1;!u;){var _=d;switch(d=!1,g=y,y=t.decodeCode(n,m,h),c[l++]=y,y!==t.CODE_STOP&&(w=!0),y!==t.CODE_STOP&&(v+=++b*y),p=h,h+=m.reduce(function(e,t){return e+t},0),y){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new D}switch(o){case t.CODE_CODE_A:if(y<64)f+=E===C?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else if(y<96)f+=E===C?String.fromCharCode(y-64):String.fromCharCode(y+64),E=!1;else switch(y!==t.CODE_STOP&&(w=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!C&&E?(C=!0,E=!1):C&&E?(C=!1,E=!1):E=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_B;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_B:if(y<96)f+=E===C?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else switch(y!==t.CODE_STOP&&(w=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!C&&E?(C=!0,E=!1):C&&E?(C=!1,E=!1):E=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_A;break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_C:if(y<100)y<10&&(f+="0"),f+=y;else switch(y!==t.CODE_STOP&&(w=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_STOP:u=!0}}_&&(o=o===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var A=h-p;if(h=n.getNextUnset(h),!n.isRange(h,Math.min(n.getSize(),h+(h-p)/2),!1))throw new W;if((v-=b*g)%103!==g)throw new x;var S=f.length;if(0===S)throw new W;S>0&&w&&(f=o===t.CODE_CODE_C?f.substring(0,S-2):f.substring(0,S-1));for(var N=(a[1]+a[0])/2,I=p+A/2,T=c.length,O=new Uint8Array(T),k=0;k<T;k++)O[k]=c[k];var P=[new Te(N,e),new Te(I,e)];return new ae(f,O,0,P,se.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Ge),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ye=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return We(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,l=this.counters;l.fill(0),this.decodeRowResult="";var c,u,d=t.findAsteriskPattern(n,l),f=n.getNextSet(d[1]),p=n.getSize();do{t.recordPattern(n,f,l);var h=t.toNarrowWidePattern(l);if(h<0)throw new W;c=t.patternToChar(h),this.decodeRowResult+=c,u=f;try{for(var m=(o=void 0,Xe(l)),g=m.next();!g.done;g=m.next())f+=g.value}catch(N){o={error:N}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}f=n.getNextSet(f)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y,v=0;try{for(var b=Xe(l),w=b.next();!w.done;w=b.next())v+=w.value}catch(I){a={error:I}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(f!==p&&2*(f-u-v)<v)throw new W;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,E=0,_=0;_<C;_++)E+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_));if(this.decodeRowResult.charAt(C)!==t.ALPHABET_STRING.charAt(E%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(0===this.decodeRowResult.length)throw new W;y=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var A=(d[1]+d[0])/2,S=u+v/2;return new ae(y,null,0,[new Te(A,e),new Te(S,e)],se.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),o=e.getNextSet(0),i=0,a=o,s=!1,l=n.length,c=o;c<r;c++)if(e.get(c)!==s)n[i]++;else{if(i===l-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,s=!s}throw new W},t.toNarrowWidePattern=function(e){var t,n,r,o=e.length,i=0;do{var a=2147483647;try{for(var s=(t=void 0,Xe(e)),l=s.next();!l.done;l=s.next())(f=l.value)<a&&f>i&&(a=f)}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}i=a,r=0;for(var c=0,u=0,d=0;d<o;d++)(f=e[d])>i&&(u|=1<<o-1-d,r++,c+=f);if(3===r){for(d=0;d<o&&r>0;d++){var f;if((f=e[d])>i&&(r--,2*f>=c))return-1}return u}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new W},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if("+"===o||"$"===o||"%"===o||"/"===o){var i=e.charAt(r+1),a="\0";switch(o){case"+":if(!(i>="A"&&i<="Z"))throw new D;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new D;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new D;a=""}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new D;a=":"}}n+=a,r++}else n+=o}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Ge),$e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return $e(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";do{t.recordPattern(n,d,p);var h=this.toPattern(p);if(h<0)throw new W;l=this.patternToChar(h),this.decodeRowResult+=l,c=d;try{for(var m=(o=void 0,Ke(p)),g=m.next();!g.done;g=m.next())d+=g.value}catch(E){o={error:E}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}d=n.getNextSet(d)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var v=Ke(p),b=v.next();!b.done;b=v.next())y+=b.value}catch(_){a={error:_}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(d===f||!n.get(d))throw new W;if(this.decodeRowResult.length<2)throw new W;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var w=this.decodeExtended(this.decodeRowResult),x=(u[1]+u[0])/2,C=c+y/2;return new ae(w,null,0,[new Te(x,e),new Te(C,e)],se.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var n=e.getSize(),r=e.getNextSet(0);this.counters.fill(0);for(var o=this.counters,i=r,a=!1,s=o.length,l=0,c=r;c<n;c++)if(e.get(c)!==a)o[l]++;else{if(l===s-1){if(this.toPattern(o)===t.ASTERISK_ENCODING)return new Int32Array([i,c]);i+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new W},t.prototype.toPattern=function(e){var t,n,r=0;try{for(var o=Ke(e),i=o.next();!i.done;i=o.next())r+=i.value}catch(d){t={error:d}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var a=0,s=e.length,l=0;l<s;l++){var c=Math.round(9*e[l]/r);if(c<1||c>4)return-1;if(1&l)a<<=c;else for(var u=0;u<c;u++)a=a<<1|1}return a},t.prototype.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);throw new W},t.prototype.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if(o>="a"&&o<="d"){if(r>=t-1)throw new D;var i=e.charAt(r+1),a="\0";switch(o){case"d":if(!(i>="A"&&i<="Z"))throw new D;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"a":if(!(i>="A"&&i<="Z"))throw new D;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if(!(i>="X"&&i<="Z"))throw new D;a=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new D;a=":"}}n+=a,r++}else n+=o}return n},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,n,r){for(var o=1,i=0,a=n-1;a>=0;a--)i+=o*t.ALPHABET_STRING.indexOf(e.charAt(a)),++o>r&&(o=1);if(e.charAt(n)!==t.ALPHABET_STRING[i%47])throw new x},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Ge),Ze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return Ze(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a=this.decodeStart(n),s=this.decodeEnd(n),l=new G;t.decodeMiddle(n,a[1],s[0],l);var c=l.toString(),u=null;null!=r&&(u=r.get(R.ALLOWED_LENGTHS)),null==u&&(u=t.DEFAULT_ALLOWED_LENGTHS);var d=c.length,f=!1,p=0;try{for(var h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),m=h.next();!m.done;m=h.next()){var g=m.value;if(d===g){f=!0;break}g>p&&(p=g)}}catch(v){o={error:v}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}if(!f&&d>p&&(f=!0),!f)throw new D;var y=[new Te(a[1],e),new Te(s[0],e)];return new ae(c,null,0,y,se.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,o){var i=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),a.fill(0),s.fill(0);n<r;){Ge.recordPattern(e,n,i);for(var l=0;l<5;l++){var c=2*l;a[l]=i[c],s[l]=i[c+1]}var u=t.decodeDigit(a);o.append(u.toString()),u=this.decodeDigit(s),o.append(u.toString()),i.forEach(function(e){n+=e})}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new W},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new W;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(i){i instanceof W&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var o=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-o,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var o=r.length,i=new Int32Array(o),a=e.getSize(),s=!1,l=0,c=n;i.fill(0);for(var u=n;u<a;u++)if(e.get(u)!==s)i[l]++;else{if(l===o-1){if(Ge.patternMatchVariance(i,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[c,u];c+=i[0]+i[1],E.arraycopy(i,2,i,0,l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,s=!s}throw new W},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,o=t.PATTERNS.length,i=0;i<o;i++){var a=t.PATTERNS[i],s=Ge.patternMatchVariance(e,a,t.MAX_INDIVIDUAL_VARIANCE);s<n?(n=s,r=i):s===n&&(r=-1)}if(r>=0)return r%10;throw new W},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Ge),et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return et(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,o=0,i=Int32Array.from([0,0,0]);!r;){i=Int32Array.from([0,0,0]);var a=(n=t.findGuardPattern(e,o,!1,this.START_END_PATTERN,i))[0],s=a-((o=n[1])-a);s>=0&&(r=e.isRange(s,a,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new D;n+=o}for(n*=3,r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new D;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,o,i){for(var a=e.getSize(),s=0,l=n=r?e.getNextUnset(n):e.getNextSet(n),c=o.length,u=r,d=n;d<a;d++)if(e.get(d)!==u)i[s]++;else{if(s===c-1){if(Ge.patternMatchVariance(i,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=i[0]+i[1];for(var f=i.slice(2,i.length),p=0;p<s-1;p++)i[p]=f[p];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,u=!u}throw new W},t.decodeDigit=function(e,n,r,o){this.recordPattern(e,r,n);for(var i=this.MAX_AVG_VARIANCE,a=-1,s=o.length,l=0;l<s;l++){var c=o[l],u=Ge.patternMatchVariance(n,c,t.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,a=l)}if(a>=0)return a;throw new W},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Ge),nt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rt=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=e.parseExtensionString(a),l=[new Te((r[0]+r[1])/2,t),new Te(i,t)],c=new ae(a,null,0,l,se.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(t,n,r){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),l=n[1],c=0,u=0;u<5&&l<s;u++){var d=tt.decodeDigit(t,a,l,tt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(o=void 0,nt(a)),p=f.next();!p.done;p=f.next())l+=p.value}catch(m){o={error:m}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}d>=10&&(c|=1<<4-u),4!==u&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(5!==r.length)throw new W;var h=this.determineCheckDigit(c);if(e.extensionChecksum(r.toString())!==h)throw new W;return l},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);for(n*=3,r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new W},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[ue.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}(),ot=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},it=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=e.parseExtensionString(a),l=[new Te((r[0]+r[1])/2,t),new Te(i,t)],c=new ae(a,null,0,l,se.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(e,t,n){var r,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),s=t[1],l=0,c=0;c<2&&s<a;c++){var u=tt.decodeDigit(e,i,s,tt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var d=(r=void 0,ot(i)),f=d.next();!f.done;f=d.next())s+=f.value}catch(p){r={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}u>=10&&(l|=1<<1-c),1!==c&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new W;if(parseInt(n.toString())%4!==l)throw new W;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[ue.ISSUE_NUMBER,parseInt(e)]])},e}(),at=function(){function e(){}return e.decodeRow=function(e,t,n){var r=tt.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new rt).decodeRow(e,t,r)}catch(o){return(new it).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}(),st=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(e){return Int32Array.from(e)});for(var r=10;r<20;r++){for(var o=t.L_PATTERNS[r-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];t.L_AND_G_PATTERNS[r]=i}return n}return st(t,e),t.prototype.decodeRow=function(e,n,r){var o=t.findStartGuardPattern(n),i=null==r?null:r.get(R.NEED_RESULT_POINT_CALLBACK);if(null!=i){var a=new Te((o[0]+o[1])/2,e);i.foundPossibleResultPoint(a)}var s=this.decodeMiddle(n,o,this.decodeRowStringBuffer),l=s.rowOffset,c=s.resultString;if(null!=i){var u=new Te(l,e);i.foundPossibleResultPoint(u)}var d=t.decodeEnd(n,l);if(null!=i){var f=new Te((d[0]+d[1])/2,e);i.foundPossibleResultPoint(f)}var p=d[1],h=p+(p-d[0]);if(h>=n.getSize()||!n.isRange(p,h,!1))throw new W;var m=c.toString();if(m.length<8)throw new D;if(!t.checkChecksum(m))throw new x;var g=(o[1]+o[0])/2,y=(d[1]+d[0])/2,v=this.getBarcodeFormat(),b=[new Te(g,e),new Te(y,e)],w=new ae(m,null,0,b,v,(new Date).getTime()),C=0;try{var E=at.decodeRow(e,n,d[1]);w.putMetadata(ue.UPC_EAN_EXTENSION,E.getText()),w.putAllMetadata(E.getResultMetadata()),w.addResultPoints(E.getResultPoints()),C=E.getText().length}catch(N){}var _=null==r?null:r.get(R.ALLOWED_EAN_EXTENSIONS);if(null!=_){var A=!1;for(var S in _)if(C.toString()===S){A=!0;break}if(!A)throw new W}return v===se.EAN_13||se.UPC_A,w},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new D;n+=o}for(n*=3,r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new D;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(tt),ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dt=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return ct(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,i,a,s,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var p=lt.decodeDigit(e,l,u,lt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var h=(o=void 0,ut(l)),m=h.next();!m.done;m=h.next())u+=m.value}catch(v){o={error:v}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}p>=10&&(d|=1<<5-f)}for(r=t.determineFirstDigit(r,d),u=lt.findGuardPattern(e,u,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1],f=0;f<6&&u<c;f++){p=lt.decodeDigit(e,l,u,lt.L_PATTERNS),r+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var g=(a=void 0,ut(l)),y=g.next();!y.done;y=g.next())u+=y.value}catch(b){a={error:b}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}}return{rowOffset:u,resultString:r}},t.prototype.getBarcodeFormat=function(){return se.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return String.fromCharCode("0".charCodeAt(0)+n)+e;throw new W},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(lt),ft=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return ft(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,o,i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],u=0;u<4&&c<l;u++){var d=lt.decodeDigit(e,s,c,lt.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var f=(r=void 0,pt(s)),p=f.next();!p.done;p=f.next())c+=p.value}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}for(c=lt.findGuardPattern(e,c,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1],u=0;u<4&&c<l;u++){d=lt.decodeDigit(e,s,c,lt.L_PATTERNS),n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var h=(i=void 0,pt(s)),m=h.next();!m.done;m=h.next())c+=m.value}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return{rowOffset:c,resultString:n}},t.prototype.getBarcodeFormat=function(){return se.EAN_8},t}(lt),mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new dt,t}return mt(t,e),t.prototype.getBarcodeFormat=function(){return se.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new ae(t.substring(1),null,null,e.getResultPoints(),se.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new W},t.prototype.reset=function(){this.ean13Reader.reset()},t}(lt),yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bt=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return yt(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,i,a=this.decodeMiddleCounters.map(function(e){return e});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=n[1],c=0,u=0;u<6&&l<s;u++){var d=t.decodeDigit(e,a,l,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(o=void 0,vt(a)),p=f.next();!p.done;p=f.next())l+=p.value}catch(h){o={error:h}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-u)}return t.determineNumSysAndCheckDigit(new G(r),c),l},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return lt.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw W.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return se.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map(function(e){return e.charCodeAt(0)}),n=new G;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(lt),wt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(R.POSSIBLE_FORMATS),o=[];return null!=r&&(r.indexOf(se.EAN_13)>-1&&o.push(new dt),r.indexOf(se.UPC_A)>-1&&o.push(new gt),r.indexOf(se.EAN_8)>-1&&o.push(new ht),r.indexOf(se.UPC_E)>-1&&o.push(new bt)),0===o.length&&(o.push(new dt),o.push(new gt),o.push(new ht),o.push(new bt)),n.readers=o,n}return wt(t,e),t.prototype.decodeRow=function(e,t,n){var r,o;try{for(var i=xt(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{var l=s.decodeRow(e,t,n),c=l.getBarcodeFormat()===se.EAN_13&&"0"===l.getText().charAt(0),u=null==n?null:n.get(R.POSSIBLE_FORMATS),d=null==u||u.includes(se.UPC_A);if(c&&d){var f=l.getRawBytes(),p=new ae(l.getText().substring(1),f,f?f.length:null,l.getResultPoints(),se.UPC_A);return p.putAllMetadata(l.getResultMetadata()),p}return l}catch(h){}}}catch(m){r={error:m}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}throw new W},t.prototype.reset=function(){var e,t;try{for(var n=xt(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(Ge),Et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return Et(t,e),t.prototype.decodeRow=function(e,t,n){var r=this.getValidRowData(t);if(!r)throw new W;var o=this.codaBarDecodeRow(r.row);if(!o)throw new W;return new ae(o,null,0,[new Te(r.left,e),new Te(r.right,e)],se.CODABAR,(new Date).getTime())},t.prototype.getValidRowData=function(e){var t=e.toArray(),n=t.indexOf(!0);if(-1===n)return null;var r=t.lastIndexOf(!0);if(r<=n)return null;for(var o=[],i=(t=t.slice(n,r+1))[0],a=1,s=1;s<t.length;s++)t[s]===i?a++:(i=t[s],o.push(a),a=1);return o.push(a),o.length<23&&(o.length+1)%8!=0?null:{row:o,left:n,right:r}},t.prototype.codaBarDecodeRow=function(e){for(var t=[],n=Math.ceil(e.reduce(function(e,t){return(e+t)/2},0));e.length>0;){var r=e.splice(0,8).splice(0,7).map(function(e){return e<n?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[r])return null;t.push(this.CODA_BAR_CHAR_SET[r])}var o=t.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){return/^[A-D].{1,}[A-D]$/.test(e)},t}(Ge),At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),St=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return At(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(Ge.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new W},t.count=function(e){return Ne.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]>r&&(r=t[o],n=o);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]<r&&(r=t[o],n=o);e[n]--},t.isFinderPattern=function(e){var n,r,o=e[0]+e[1],i=o/(o+e[2]+e[3]);if(i>=t.MIN_FINDER_PATTERN_RATIO&&i<=t.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=l.next();!c.done;c=l.next()){var u=c.value;u>s&&(s=u),u<a&&(a=u)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s<10*a}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Ge),Nt=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}(),It=function(){function e(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Te(n,o)),this.resultPoints.push(new Te(r,o))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}(),Tt=function(){function e(){}return e.getRSSvalue=function(t,n,r){var o,i,a=0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),l=s.next();!l.done;l=s.next())a+=l.value}catch(y){o={error:y}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var c=0,u=0,d=t.length,f=0;f<d-1;f++){var p=void 0;for(p=1,u|=1<<f;p<t[f];p++,u&=~(1<<f)){var h=e.combins(a-p-1,d-f-2);if(r&&0===u&&a-p-(d-f-1)>=d-f-1&&(h-=e.combins(a-p-(d-f),d-f-2)),d-f-1>1){for(var m=0,g=a-p-(d-f-2);g>n;g--)m+=e.combins(a-p-g-1,d-f-3);h-=m*(d-1-f)}else a-p>n&&h--;c+=h}a-=p}return c},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var o=1,i=1,a=e;a>n;a--)o*=a,i<=r&&(o/=i,i++);for(;i<=r;)o/=i,i++;return o},e}(),Ot=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new O(12*t),r=0,o=e[0].getRightChar().getValue(),i=11;i>=0;--i)o&1<<i&&n.set(r),r++;for(i=1;i<e.length;++i){for(var a=e[i],s=a.getLeftChar().getValue(),l=11;l>=0;--l)s&1<<l&&n.set(r),r++;if(null!==a.getRightChar()){var c=a.getRightChar().getValue();for(l=11;l>=0;--l)c&1<<l&&n.set(r),r++}}return n},e}(),Rt=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}(),kt=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}(),Pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return Pt(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(kt),Dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mt=function(e){function t(t,n,r){var o=e.call(this,t)||this;return r?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return Dt(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(kt),Lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(e){function t(t,n,r){var o=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new D;return o.firstDigit=n,o.secondDigit=r,o}return Lt(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(kt),Ft=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,o,i,a,s,l,c;if(!t)return null;if(t.length<2)throw new W;var u=t.substring(0,2);try{for(var d=Ft(e.TWO_DIGIT_DATA_LENGTH),f=d.next();!f.done;f=d.next())if((x=f.value)[0]===u)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,x[2],t):e.processFixedAI(2,x[1],t)}catch(C){n={error:C}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(t.length<3)throw new W;var p=t.substring(0,3);try{for(var h=Ft(e.THREE_DIGIT_DATA_LENGTH),m=h.next();!m.done;m=h.next())if((x=m.value)[0]===p)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,x[2],t):e.processFixedAI(3,x[1],t)}catch(E){o={error:E}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}try{for(var g=Ft(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next())if((x=y.value)[0]===p)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}catch(_){a={error:_}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(t.length<4)throw new W;var v=t.substring(0,4);try{for(var b=Ft(e.FOUR_DIGIT_DATA_LENGTH),w=b.next();!w.done;w=b.next()){var x;if((x=w.value)[0]===v)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}}catch(A){l={error:A}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}throw new W},e.processFixedAI=function(t,n,r){if(r.length<t)throw new W;var o=r.substring(0,t);if(r.length<t+n)throw new W;var i=r.substring(t,t+n),a=r.substring(t+n),s="("+o+")"+i,l=e.parseFieldsInGeneralPurpose(a);return null==l?s:s+l},e.processVariableAI=function(t,n,r){var o,i=r.substring(0,t);o=r.length<t+n?r.length:t+n;var a=r.substring(t,o),s=r.substring(o),l="("+i+")"+a,c=e.parseFieldsInGeneralPurpose(s);return null==c?l:l+c},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}(),Ht=function(){function e(e){this.buffer=new G,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var o=this.decodeGeneralPurposeField(n,r),i=Ut.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&e.append(i),r=o.isRemaining()?""+o.getRemainingValue():null,n===o.getNewPosition())break;n=o.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new Bt(this.information.getSize(),0===t?Bt.FNC1:t-1,Bt.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new Bt(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new Mt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Mt(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new Mt(this.current.getPosition(),this.buffer.toString()):new Mt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Rt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return t=new Mt(this.current.getPosition(),this.buffer.toString()),new Rt(!0,t);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Rt(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Mt(this.current.getPosition(),this.buffer.toString());return new Rt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Rt(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Mt(this.current.getPosition(),this.buffer.toString());return new Rt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Rt(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new jt(e+5,jt.FNC1);if(t>=5&&t<15)return new jt(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new jt(e+7,""+(r+1));if(r>=90&&r<116)return new jt(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new D}return new jt(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new jt(e+5,jt.FNC1);if(t>=5&&t<15)return new jt(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new jt(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new Ee("Decoding invalid alphanumeric value: "+r)}return new jt(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}(),Vt=function(){function e(e){this.information=e,this.generalDecoder=new Ht(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}(),Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zt=function(e){function t(t){return e.call(this,t)||this}return Gt(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var o=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=1&r?o:3*o}10==(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(Vt),qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wt=function(e){function t(t){return e.call(this,t)||this}return qt(t,e),t.prototype.parseInformation=function(){var e=new G;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(zt),Xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yt=function(e){function t(t){return e.call(this,t)||this}return Xt(t,e),t.prototype.parseInformation=function(){var e=new G;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(Vt),$t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(e){function t(t){return e.call(this,t)||this}return $t(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var o=this.checkWeight(r),i=1e5,a=0;a<5;++a)o/i===0&&e.append("0"),i/=10;e.append(o)},t}(zt),Jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(e){function t(t){return e.call(this,t)||this}return Jt(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Kt.GTIN_SIZE+t.WEIGHT_SIZE)throw new W;var e=new G;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+Kt.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Kt),Qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),en=function(e){function t(t){return e.call(this,t)||this}return Qt(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(Zt),tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(e){function t(t){return e.call(this,t)||this}return tn(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(Zt),rn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),on=function(e){function t(t){return e.call(this,t)||this}return rn(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+zt.GTIN_SIZE)throw new W;var e=new G;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+zt.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+zt.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(zt),an=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(e){function t(t){return e.call(this,t)||this}return an(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+zt.GTIN_SIZE)throw new W;var e=new G;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+zt.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+zt.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);var o=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+zt.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(zt),ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.dateCode=r,o.firstAIdigits=n,o}return ln(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new W;var e=new G;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!==r){e.append("("),e.append(this.dateCode),e.append(")");var o=r%32,i=(r/=32)%12+1,a=r/=12;a/10==0&&e.append("0"),e.append(a),i/10==0&&e.append("0"),e.append(i),o/10==0&&e.append("0"),e.append(o)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Kt),un=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern)},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}(),dn=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach(function(e,r){t.forEach(function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n},e}(),fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pn=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return fn(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(o){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof W){if(!this.pairs.length)throw new W;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new W},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(n){console.log(n)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,o,i=n;i<this.rows.length;i++){var a=this.rows[i];this.pairs.length=0;try{for(var s=(r=void 0,pn(e)),l=s.next();!l.done;l=s.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(d){r={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}if(this.pairs.push(a.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(e);u.push(a);try{return this.checkRows(u,i+1)}catch(f){console.log(f)}}}throw new W},t.isValidSequence=function(e){var n,r;try{for(var o=pn(t.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(e.length>a.length)){for(var s=!0,l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!==a[l]){s=!1;break}if(s)return!0}}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,o=!1,i=!1;r<this.rows.length;){var a=this.rows[r];if(a.getRowNumber()>e){i=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),r++}i||o||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new dn(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,o,i,a,s;try{for(var l=pn(t),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getPairs().length!==e.length)try{for(var d=(o=void 0,pn(u.getPairs())),f=d.next();!f.done;f=d.next()){var p=f.value;try{for(var h=(a=void 0,pn(e)),m=h.next();!m.done;m=h.next()){var g=m.value;if(un.equals(p,g)){0;break}}}catch(y){a={error:y}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}}catch(v){o={error:v}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,o,i,a,s;try{for(var l=pn(t),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0;try{for(var f=(o=void 0,pn(e)),p=f.next();!p.done;p=f.next()){var h=p.value,m=!1;try{for(var g=(a=void 0,pn(u.getPairs())),y=g.next();!y.done;y=g.next()){var v=y.value;if(h.equals(v)){m=!0;break}}}catch(b){a={error:b}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(!m){d=!1;break}}}catch(w){o={error:w}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}if(d)return!0}}catch(x){n={error:x}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new Wt(e);if(!e.get(2))return new Yt(e);switch(Ht.extractNumericValueFromBitArray(e,1,4)){case 4:return new en(e);case 5:return new nn(e)}switch(Ht.extractNumericValueFromBitArray(e,1,5)){case 12:return new on(e);case 13:return new sn(e)}switch(Ht.extractNumericValueFromBitArray(e,1,7)){case 56:return new cn(e,"310","11");case 57:return new cn(e,"320","11");case 58:return new cn(e,"310","13");case 59:return new cn(e,"320","13");case 60:return new cn(e,"310","15");case 61:return new cn(e,"320","15");case 62:return new cn(e,"310","17");case 63:return new cn(e,"320","17")}}catch(t){throw console.log(t),new Ee("unknown decoder: "+e)}}(Ot.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),o=[n[0],n[1],r[0],r[1]];return new ae(t,null,null,o,se.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null===n)return!1;for(var r=n.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var a=this.pairs.get(i);r+=a.getLeftChar().getChecksumPortion(),o++;var s=a.getRightChar();null!=s&&(r+=s.getChecksumPortion(),o++)}return 211*(o-4)+(r%=211)===t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var o,i=n.length%2==0;this.startFromEven&&(i=!i);var a=!0,s=-1;do{this.findNextPair(e,n,s),null===(o=this.parseFoundFinderPattern(e,r,i))?s=t.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);var l,c=this.decodeDataCharacter(e,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new W;try{l=this.decodeDataCharacter(e,o,i,!1)}catch(u){l=null,console.log(u)}return new un(c,l,o,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var i,a=e.getSize();i=r>=0?r:this.isEmptyPair(n)?0:n[n.length-1].getFinderPattern().getStartEnd()[1];var s=n.length%2!=0;this.startFromEven&&(s=!s);for(var l=!1;i<a&&(l=!e.get(i));)i++;for(var c=0,u=i,d=i;d<a;d++)if(e.get(d)!==l)o[c]++;else{if(3===c){if(s&&t.reverseCounters(o),t.isFinderPattern(o))return this.startEnd[0]=u,void(this.startEnd[1]=d);s&&t.reverseCounters(o),u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,c--}else c++;o[c]=1,l=!l}throw new W},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var o,i,a;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,o=this.startEnd[0]-s,i=s,a=this.startEnd[1]}else i=this.startEnd[0],o=(a=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var l,c=this.getDecodeFinderCounters();E.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{l=this.parseFinderValue(c,t.FINDER_PATTERNS)}catch(u){return null}return new It(l,[i,a],i,a,n)},t.prototype.decodeDataCharacter=function(e,n,r,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)t.recordPatternInReverse(e,n.getStartEnd()[0],i);else{t.recordPattern(e,n.getStartEnd()[1],i);for(var s=0,l=i.length-1;s<l;s++,l--){var c=i[s];i[s]=i[l],i[l]=c}}var u=Ne.sum(new Int32Array(i))/17,d=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(u-d)/d>.3)throw new W;var f=this.getOddCounts(),p=this.getEvenCounts(),h=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(s=0;s<i.length;s++){var g=1*i[s]/u,y=g+.5;if(y<1){if(g<.3)throw new W;y=1}else if(y>8){if(g>8.7)throw new W;y=8}var v=s/2;1&s?(p[v]=y,m[v]=g-y):(f[v]=y,h[v]=g-y)}this.adjustOddEvenCounts(17);var b=4*n.getValue()+(r?0:2)+(o?0:1)-1,w=0,x=0;for(s=f.length-1;s>=0;s--){if(t.isNotA1left(n,r,o)){var C=t.WEIGHTS[b][2*s];x+=f[s]*C}w+=f[s]}var E=0;for(s=p.length-1;s>=0;s--)t.isNotA1left(n,r,o)&&(C=t.WEIGHTS[b][2*s+1],E+=p[s]*C);var _=x+E;if(1&w||w>13||w<4)throw new W;var A=(13-w)/2,S=t.SYMBOL_WIDEST[A],N=9-S,I=Tt.getRSSvalue(f,S,!0),T=Tt.getRSSvalue(p,N,!1),O=t.EVEN_TOTAL_SUBSET[A],R=t.GSUM[A];return new Nt(I*O+T+R,_)},t.isNotA1left=function(e,t,n){return!(0===e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=Ne.sum(new Int32Array(this.getOddCounts())),r=Ne.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;n>13?i=!0:n<4&&(o=!0);var a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var l=n+r-e,c=!(1&~n),u=!(1&r);if(1===l)if(c){if(u)throw new W;i=!0}else{if(!u)throw new W;s=!0}else if(-1===l)if(c){if(u)throw new W;o=!0}else{if(!u)throw new W;a=!0}else{if(0!==l)throw new W;if(c){if(!u)throw new W;n<r?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new W}if(o){if(i)throw new W;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new W;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(St),mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.count=0,o.finderPattern=r,o}return mn(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Nt),yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return yn(t,e),t.prototype.decodeRow=function(e,n,r){var o,i,a,s,l=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,l),n.reverse();var c=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var u=vn(this.possibleLeftPairs),d=u.next();!d.done;d=u.next()){var f=d.value;if(f.getCount()>1)try{for(var p=(a=void 0,vn(this.possibleRightPairs)),h=p.next();!h.done;h=p.next()){var m=h.value;if(m.getCount()>1&&t.checkChecksum(f,m))return t.constructResult(f,m)}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}}catch(y){o={error:y}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}throw new W},t.addOrTally=function(e,t){var n,r;if(null!=t){var o=!1;try{for(var i=vn(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getValue()===t.getValue()){s.incrementCount(),o=!0;break}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}o||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new G,i=13-r.length;i>0;i--)o.append("0");o.append(r);var a=0;for(i=0;i<13;i++){var s=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);a+=1&i?s:3*s}10==(a=10-a%10)&&(a=0),o.append(a.toString());var l=e.getFinderPattern().getResultPoints(),c=t.getFinderPattern().getResultPoints();return new ae(o.toString(),null,0,[l[0],l[1],c[0],c[1]],se.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var o=this.findFinderPattern(e,t),i=this.parseFoundFinderPattern(e,n,t,o),a=null==r?null:r.get(R.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(o[0]+o[1])/2;t&&(s=e.getSize()-1-s),a.foundPossibleResultPoint(new Te(s,n))}var l=this.decodeDataCharacter(e,i,!0),c=this.decodeDataCharacter(e,i,!1);return new gn(1597*l.getValue()+c.getValue(),l.getChecksumPortion()+4*c.getChecksumPortion(),i)}catch(u){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(r)Ge.recordPatternInReverse(e,n.getStartEnd()[0],o);else{Ge.recordPattern(e,n.getStartEnd()[1]+1,o);for(var a=0,s=o.length-1;a<s;a++,s--){var l=o[a];o[a]=o[s],o[s]=l}}var c=r?16:15,u=Ne.sum(new Int32Array(o))/c,d=this.getOddCounts(),f=this.getEvenCounts(),p=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(a=0;a<o.length;a++){var m=o[a]/u,g=Math.floor(m+.5);g<1?g=1:g>8&&(g=8);var y=Math.floor(a/2);1&a?(f[y]=g,h[y]=m-g):(d[y]=g,p[y]=m-g)}this.adjustOddEvenCounts(r,c);var v=0,b=0;for(a=d.length-1;a>=0;a--)b*=9,b+=d[a],v+=d[a];var w=0,x=0;for(a=f.length-1;a>=0;a--)w*=9,w+=f[a],x+=f[a];var C=b+3*w;if(r){if(1&v||v>12||v<4)throw new W;var E=(12-v)/2,_=9-(T=t.OUTSIDE_ODD_WIDEST[E]),A=Tt.getRSSvalue(d,T,!1),S=Tt.getRSSvalue(f,_,!0),N=t.OUTSIDE_EVEN_TOTAL_SUBSET[E],I=t.OUTSIDE_GSUM[E];return new Nt(A*N+S+I,C)}if(1&x||x>10||x<4)throw new W;E=(10-x)/2,_=9-(T=t.INSIDE_ODD_WIDEST[E]),A=Tt.getRSSvalue(d,T,!0),S=Tt.getRSSvalue(f,_,!1);var T,O=t.INSIDE_ODD_TOTAL_SUBSET[E];return I=t.INSIDE_GSUM[E],new Nt(S*O+A+I,C)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),o=!1,i=0;i<r&&t!==(o=!e.get(i));)i++;for(var a=0,s=i,l=i;l<r;l++)if(e.get(l)!==o)n[a]++;else{if(3===a){if(St.isFinderPattern(n))return[s,l];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,o=!o}throw new W},t.prototype.parseFoundFinderPattern=function(e,n,r,o){for(var i=e.get(o[0]),a=o[0]-1;a>=0&&i!==e.get(a);)a--;a++;var s=o[0]-a,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);E.arraycopy(l,0,c,1,l.length-1),c[0]=s;var u=this.parseFinderValue(c,t.FINDER_PATTERNS),d=a,f=o[1];return r&&(d=e.getSize()-1-d,f=e.getSize()-1-f),new It(u,[a,o[1]],d,f,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=Ne.sum(new Int32Array(this.getOddCounts())),r=Ne.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;e?(n>12?i=!0:n<4&&(o=!0),r>12?s=!0:r<4&&(a=!0)):(n>11?i=!0:n<5&&(o=!0),r>10?s=!0:r<4&&(a=!0));var l=n+r-t,c=(1&n)==(e?1:0),u=!(1&~r);if(1===l)if(c){if(u)throw new W;i=!0}else{if(!u)throw new W;s=!0}else if(-1===l)if(c){if(u)throw new W;o=!0}else{if(!u)throw new W;a=!0}else{if(0!==l)throw new W;if(c){if(!u)throw new W;n<r?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new W}if(o){if(i)throw new W;St.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&St.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new W;St.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&St.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(St),wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xn=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(R.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(R.ASSUME_CODE_39_CHECK_DIGIT);return r&&((r.includes(se.EAN_13)||r.includes(se.UPC_A)||r.includes(se.EAN_8)||r.includes(se.UPC_E))&&n.readers.push(new Ct(t)),r.includes(se.CODE_39)&&n.readers.push(new Ye(o)),r.includes(se.CODE_93)&&n.readers.push(new Je),r.includes(se.CODE_128)&&n.readers.push(new qe),r.includes(se.ITF)&&n.readers.push(new Qe),r.includes(se.CODABAR)&&n.readers.push(new _t),r.includes(se.RSS_14)&&n.readers.push(new bn),r.includes(se.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new hn))),0===n.readers.length&&(n.readers.push(new Ct(t)),n.readers.push(new Ye),n.readers.push(new Je),n.readers.push(new Ct(t)),n.readers.push(new qe),n.readers.push(new Qe),n.readers.push(new bn)),n}return wn(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(o){}throw new W},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Ge),Cn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Cn(function(t,n){return void 0===t&&(t=500),e.call(this,new xn(n),t,n)||this},e)}(ie);var En,_n,An=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sn=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),Nn=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),In=function(){function e(e,t,n,r,o,i){var a,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=i;var l=0,c=i.getECCodewords(),u=i.getECBlocks();try{for(var d=An(u),f=d.next();!f.done;f=d.next()){var p=f.value;l+=p.getCount()*(p.getDataCodewords()+c)}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,o;if(1&t||1&n)throw new D;try{for(var i=An(e.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===n)return s}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}throw new D},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new Sn(5,new Nn(1,3))),new e(2,12,12,10,10,new Sn(7,new Nn(1,5))),new e(3,14,14,12,12,new Sn(10,new Nn(1,8))),new e(4,16,16,14,14,new Sn(12,new Nn(1,12))),new e(5,18,18,16,16,new Sn(14,new Nn(1,18))),new e(6,20,20,18,18,new Sn(18,new Nn(1,22))),new e(7,22,22,20,20,new Sn(20,new Nn(1,30))),new e(8,24,24,22,22,new Sn(24,new Nn(1,36))),new e(9,26,26,24,24,new Sn(28,new Nn(1,44))),new e(10,32,32,14,14,new Sn(36,new Nn(1,62))),new e(11,36,36,16,16,new Sn(42,new Nn(1,86))),new e(12,40,40,18,18,new Sn(48,new Nn(1,114))),new e(13,44,44,20,20,new Sn(56,new Nn(1,144))),new e(14,48,48,22,22,new Sn(68,new Nn(1,174))),new e(15,52,52,24,24,new Sn(42,new Nn(2,102))),new e(16,64,64,14,14,new Sn(56,new Nn(2,140))),new e(17,72,72,16,16,new Sn(36,new Nn(4,92))),new e(18,80,80,18,18,new Sn(48,new Nn(4,114))),new e(19,88,88,20,20,new Sn(56,new Nn(4,144))),new e(20,96,96,22,22,new Sn(68,new Nn(4,174))),new e(21,104,104,24,24,new Sn(56,new Nn(6,136))),new e(22,120,120,18,18,new Sn(68,new Nn(6,175))),new e(23,132,132,20,20,new Sn(62,new Nn(8,163))),new e(24,144,144,22,22,new Sn(62,new Nn(8,156),new Nn(2,155))),new e(25,8,18,6,16,new Sn(7,new Nn(1,5))),new e(26,8,32,6,14,new Sn(11,new Nn(1,10))),new e(27,12,26,10,24,new Sn(14,new Nn(1,16))),new e(28,12,36,10,16,new Sn(18,new Nn(1,22))),new e(29,16,36,14,16,new Sn(24,new Nn(1,32))),new e(30,16,48,14,22,new Sn(28,new Nn(1,49)))]},e.VERSIONS=e.buildVersions(),e}(),Tn=function(){function e(t){var n=t.getHeight();if(n<8||n>144||1&n)throw new D;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return In.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),a=!1,s=!1,l=!1,c=!1;do{if(n!==o||0!==r||a)if(n===o-2&&0===r&&3&i&&!s)e[t++]=255&this.readCorner2(o,i),n-=2,r+=2,s=!0;else if(n!==o+4||2!==r||7&i||l)if(n!==o-2||0!==r||4!=(7&i)||c){do{n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,i)),n-=2,r+=2}while(n>=0&&r<i);n+=1,r+=3;do{n>=0&&r<i&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,i)),n+=2,r-=2}while(n<o&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(o,i),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(o,i),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner1(o,i),n-=2,r+=2,a=!0}while(n<o||r<i);if(t!==this.version.getTotalCodewords())throw new D;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new v("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=t/r|0,a=n/o|0,s=new z(a*o,i*r),l=0;l<i;++l)for(var c=l*r,u=0;u<a;++u)for(var d=u*o,f=0;f<r;++f)for(var p=l*(r+2)+1+f,h=c+f,m=0;m<o;++m){var g=u*(o+2)+1+m;if(e.get(g,p)){var y=d+m;s.set(y,h)}}return s},e}(),On=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rn=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,o,i,a,s=n.getECBlocks(),l=0,c=s.getECBlocks();try{for(var u=On(c),d=u.next();!d.done;d=u.next())l+=(g=d.value).getCount()}catch(O){r={error:O}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}var f=new Array(l),p=0;try{for(var h=On(c),m=h.next();!m.done;m=h.next())for(var g=m.value,y=0;y<g.getCount();y++){var b=g.getDataCodewords(),w=s.getECCodewords()+b;f[p++]=new e(b,new Uint8Array(w))}}catch(R){i={error:R}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}var x=f[0].codewords.length-s.getECCodewords(),C=x-1,E=0;for(y=0;y<C;y++)for(var _=0;_<p;_++)f[_].codewords[y]=t[E++];var A=24===n.getVersionNumber(),S=A?8:p;for(_=0;_<S;_++)f[_].codewords[x-1]=t[E++];var N=f[0].codewords.length;for(y=x;y<N;y++)for(_=0;_<p;_++){var I=A?(_+8)%p:_,T=A&&I>7?y-1:y;f[I].codewords[T]=t[E++]}if(E!==t.length)throw new v;return f},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),kn=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new v(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,o=this.bytes;if(n>0){var i=8-n,a=e<i?e:i,s=255>>8-a<<(l=i-a);t=(o[r]&s)>>l,e-=a,8===(n+=a)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&o[r],r++,e-=8;var l;if(e>0)s=255>>(l=8-e)<<l,t=t<<e|(o[r]&s)>>l,n+=e}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();(_n=En||(En={}))[_n.PAD_ENCODE=0]="PAD_ENCODE",_n[_n.ASCII_ENCODE=1]="ASCII_ENCODE",_n[_n.C40_ENCODE=2]="C40_ENCODE",_n[_n.TEXT_ENCODE=3]="TEXT_ENCODE",_n[_n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_n[_n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_n[_n.BASE256_ENCODE=6]="BASE256_ENCODE";var Pn,jn,Dn=function(){function e(){}return e.decode=function(e){var t=new kn(e),n=new G,r=new G,o=new Array,i=En.ASCII_ENCODE;do{if(i===En.ASCII_ENCODE)i=this.decodeAsciiSegment(t,n,r);else{switch(i){case En.C40_ENCODE:this.decodeC40Segment(t,n);break;case En.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case En.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new D}i=En.ASCII_ENCODE}}while(i!==En.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new pe(e,n.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var o=e.readBits(8);if(0===o)throw new D;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),En.ASCII_ENCODE;if(129===o)return En.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&t.append("0"),t.append(""+i)}else switch(o){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new D}}while(e.available()>0);return En.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new D;var l=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length)l=this.C40_SHIFT2_SET_CHARS[s],n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l);else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new D}o=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),o=0;break;default:throw new D}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new D;var l=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length)l=this.TEXT_SHIFT2_SET_CHARS[s],n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l);else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new D}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new D;l=this.TEXT_SHIFT3_SET_CHARS[s],n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l),o=0;break;default:throw new D}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var o=0;o<3;o++){var i=n[o];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new D;t.append(String.fromCharCode(i+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=1600*o,o=Math.floor(r/40),n[1]=o,n[2]=r-40*o},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}32&r||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,o=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),o++);if((r=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new D;for(var a=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new D;a[s]=this.unrandomize255State(e.readBits(8),o++)}n.push(a);try{t.append(H.decode(a,V.ISO88591))}catch(l){throw new Ee("Platform does not support required encoding: "+l.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}(),Mn=function(){function e(){this.rsDecoder=new _e(be.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new Tn(e),o=r.getVersion(),i=r.readCodewords(),a=Rn.getDataBlocks(i,o),s=0;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=l.next();!c.done;c=l.next())s+=c.value.getNumDataCodewords()}catch(y){t={error:y}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}for(var u=new Uint8Array(s),d=a.length,f=0;f<d;f++){var p=a[f],h=p.getCodewords(),m=p.getNumDataCodewords();this.correctErrors(h,m);for(var g=0;g<m;g++)u[g*d+f]=h[g]}return Dn.decode(u)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new x}for(var r=0;r<t;r++)e[r]=n[r]},e}(),Ln=function(){function e(e){this.image=e,this.rectangleDetector=new Pe(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new W;var r=(n=this.shiftToModuleCenter(n))[0],o=n[1],i=n[2],a=n[3],s=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(i,a)+1;1&~s||(s+=1),1&~l||(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=e.sampleGrid(this.image,r,o,i,a,s,l);return new Oe(c,[r,o,i,a])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new Te(e.getX()+r,e.getY()+o)},e.moveAway=function(e,t,n){var r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new Te(r,o)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],o=e[2],i=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,o),l=this.transitionsBetween(o,t),c=i,u=[o,t,n,r];return c>a&&(c=a,u[0]=t,u[1]=n,u[2]=r,u[3]=o),c>s&&(c=s,u[0]=n,u[1]=r,u[2]=o,u[3]=t),c>l&&(u[0]=r,u[1]=o,u[2]=t,u[3]=n),u},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i),s=e.shiftPoint(r,o,4*(a+1)),l=e.shiftPoint(o,r,4*(a+1));return this.transitionsBetween(s,n)<this.transitionsBetween(l,i)?(t[0]=n,t[1]=r,t[2]=o,t[3]=i):(t[0]=r,t[1]=o,t[2]=i,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i),s=this.transitionsBetween(r,i),l=e.shiftPoint(n,r,4*(s+1)),c=e.shiftPoint(o,r,4*(a+1));a=this.transitionsBetween(l,i),s=this.transitionsBetween(c,i);var u=new Te(i.getX()+(o.getX()-r.getX())/(a+1),i.getY()+(o.getY()-r.getY())/(a+1)),d=new Te(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(u)?this.isValid(d)?this.transitionsBetween(l,u)+this.transitionsBetween(c,u)>this.transitionsBetween(l,d)+this.transitionsBetween(c,d)?u:d:u:this.isValid(d)?d:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],o=t[2],i=t[3],a=this.transitionsBetween(n,i)+1,s=this.transitionsBetween(o,i)+1,l=e.shiftPoint(n,r,4*s),c=e.shiftPoint(o,r,4*a);1&~(a=this.transitionsBetween(l,i)+1)||(a+=1),1&~(s=this.transitionsBetween(c,i)+1)||(s+=1);var u,d,f=(n.getX()+r.getX()+o.getX()+i.getX())/4,p=(n.getY()+r.getY()+o.getY()+i.getY())/4;return n=e.moveAway(n,f,p),r=e.moveAway(r,f,p),o=e.moveAway(o,f,p),i=e.moveAway(i,f,p),l=e.shiftPoint(n,r,4*s),l=e.shiftPoint(l,i,4*a),u=e.shiftPoint(r,n,4*s),u=e.shiftPoint(u,o,4*a),c=e.shiftPoint(o,i,4*s),c=e.shiftPoint(c,r,4*a),d=e.shiftPoint(i,o,4*s),[l,u,c,d=e.shiftPoint(d,n,4*a)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,o,i,a){return Be.getInstance().sampleGrid(e,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.abs(i-r)>Math.abs(o-n);if(a){var s=n;n=r,r=s,s=o,o=i,i=s}for(var l=Math.abs(o-n),c=Math.abs(i-r),u=-l/2,d=r<i?1:-1,f=n<o?1:-1,p=0,h=this.image.get(a?r:n,a?n:r),m=n,g=r;m!==o;m+=f){var y=this.image.get(a?g:m,a?m:g);if(y!==h&&(p++,h=y),(u+=c)>0){if(g===i)break;g+=d,u-=l}}return p},e}(),Bn=function(){function e(){this.decoder=new Mn}return e.prototype.decode=function(t,n){var r,o;if(void 0===n&&(n=null),null!=n&&n.has(R.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(i),o=e.NO_POINTS}else{var a=new Ln(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=r.getRawBytes(),l=new ae(r.getText(),s,8*s.length,o,se.DATA_MATRIX,E.currentTimeMillis()),c=r.getByteSegments();null!=c&&l.putMetadata(ue.BYTE_SEGMENTS,c);var u=r.getECLevel();return null!=u&&l.putMetadata(ue.ERROR_CORRECTION_LEVEL,u),l},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new W;var r=this.moduleSize(t,e),o=t[1],i=n[1],a=t[0],s=(n[0]-a+1)/r,l=(i-o+1)/r;if(s<=0||l<=0)throw new W;var c=r/2;o+=c,a+=c;for(var u=new z(s,l),d=0;d<l;d++)for(var f=o+d*r,p=0;p<s;p++)e.get(a+p*r,f)&&u.set(p,d);return u},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],o=e[1];r<n&&t.get(r,o);)r++;if(r===n)throw new W;var i=r-e[0];if(0===i)throw new W;return i},e.NO_POINTS=[],e}(),Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){Fn(function(t){return void 0===t&&(t=500),e.call(this,new Bn,t)||this},e)}(ie),(jn=Pn||(Pn={}))[jn.L=0]="L",jn[jn.M=1]="M",jn[jn.Q=2]="Q",jn[jn.H=3]="H";var Un,Hn,Vn=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new g(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new v;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(Pn.L,"L",1),e.M=new e(Pn.M,"M",0),e.Q=new e(Pn.Q,"Q",3),e.H=new e(Pn.H,"H",2),e}(),Gn=function(){function e(e){this.errorCorrectionLevel=Vn.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return T.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,u=c[0];if(u===t||u===n)return new e(c[1]);var d=e.numBitsDiffering(t,u);d<i&&(a=c[1],i=d),t!==n&&(d=e.numBitsDiffering(n,u))<i&&(a=c[1],i=d)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return i<=3?new e(a):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}(),zn=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),i=o.next();!i.done;i=o.next())n+=i.value.getCount()}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),qn=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),Wn=function(){function e(e,t){for(var n,r,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,s=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),u=c.next();!u.done;u=c.next()){var d=u.value;a+=d.getCount()*(d.getDataCodewords()+s)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.totalCodewords=a}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new D;try{return this.getVersionForNumber((e-17)/4)}catch(la){throw new D}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new v;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,o=0;o<e.VERSION_DECODE_INFO.length;o++){var i=e.VERSION_DECODE_INFO[o];if(i===t)return e.getVersionForNumber(o+7);var a=Gn.numBitsDiffering(t,i);a<n&&(r=o+7,n=a)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new z(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var o=this.alignmentPatternCenters[r]-2,i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new zn(7,new qn(1,19)),new zn(10,new qn(1,16)),new zn(13,new qn(1,13)),new zn(17,new qn(1,9))),new e(2,Int32Array.from([6,18]),new zn(10,new qn(1,34)),new zn(16,new qn(1,28)),new zn(22,new qn(1,22)),new zn(28,new qn(1,16))),new e(3,Int32Array.from([6,22]),new zn(15,new qn(1,55)),new zn(26,new qn(1,44)),new zn(18,new qn(2,17)),new zn(22,new qn(2,13))),new e(4,Int32Array.from([6,26]),new zn(20,new qn(1,80)),new zn(18,new qn(2,32)),new zn(26,new qn(2,24)),new zn(16,new qn(4,9))),new e(5,Int32Array.from([6,30]),new zn(26,new qn(1,108)),new zn(24,new qn(2,43)),new zn(18,new qn(2,15),new qn(2,16)),new zn(22,new qn(2,11),new qn(2,12))),new e(6,Int32Array.from([6,34]),new zn(18,new qn(2,68)),new zn(16,new qn(4,27)),new zn(24,new qn(4,19)),new zn(28,new qn(4,15))),new e(7,Int32Array.from([6,22,38]),new zn(20,new qn(2,78)),new zn(18,new qn(4,31)),new zn(18,new qn(2,14),new qn(4,15)),new zn(26,new qn(4,13),new qn(1,14))),new e(8,Int32Array.from([6,24,42]),new zn(24,new qn(2,97)),new zn(22,new qn(2,38),new qn(2,39)),new zn(22,new qn(4,18),new qn(2,19)),new zn(26,new qn(4,14),new qn(2,15))),new e(9,Int32Array.from([6,26,46]),new zn(30,new qn(2,116)),new zn(22,new qn(3,36),new qn(2,37)),new zn(20,new qn(4,16),new qn(4,17)),new zn(24,new qn(4,12),new qn(4,13))),new e(10,Int32Array.from([6,28,50]),new zn(18,new qn(2,68),new qn(2,69)),new zn(26,new qn(4,43),new qn(1,44)),new zn(24,new qn(6,19),new qn(2,20)),new zn(28,new qn(6,15),new qn(2,16))),new e(11,Int32Array.from([6,30,54]),new zn(20,new qn(4,81)),new zn(30,new qn(1,50),new qn(4,51)),new zn(28,new qn(4,22),new qn(4,23)),new zn(24,new qn(3,12),new qn(8,13))),new e(12,Int32Array.from([6,32,58]),new zn(24,new qn(2,92),new qn(2,93)),new zn(22,new qn(6,36),new qn(2,37)),new zn(26,new qn(4,20),new qn(6,21)),new zn(28,new qn(7,14),new qn(4,15))),new e(13,Int32Array.from([6,34,62]),new zn(26,new qn(4,107)),new zn(22,new qn(8,37),new qn(1,38)),new zn(24,new qn(8,20),new qn(4,21)),new zn(22,new qn(12,11),new qn(4,12))),new e(14,Int32Array.from([6,26,46,66]),new zn(30,new qn(3,115),new qn(1,116)),new zn(24,new qn(4,40),new qn(5,41)),new zn(20,new qn(11,16),new qn(5,17)),new zn(24,new qn(11,12),new qn(5,13))),new e(15,Int32Array.from([6,26,48,70]),new zn(22,new qn(5,87),new qn(1,88)),new zn(24,new qn(5,41),new qn(5,42)),new zn(30,new qn(5,24),new qn(7,25)),new zn(24,new qn(11,12),new qn(7,13))),new e(16,Int32Array.from([6,26,50,74]),new zn(24,new qn(5,98),new qn(1,99)),new zn(28,new qn(7,45),new qn(3,46)),new zn(24,new qn(15,19),new qn(2,20)),new zn(30,new qn(3,15),new qn(13,16))),new e(17,Int32Array.from([6,30,54,78]),new zn(28,new qn(1,107),new qn(5,108)),new zn(28,new qn(10,46),new qn(1,47)),new zn(28,new qn(1,22),new qn(15,23)),new zn(28,new qn(2,14),new qn(17,15))),new e(18,Int32Array.from([6,30,56,82]),new zn(30,new qn(5,120),new qn(1,121)),new zn(26,new qn(9,43),new qn(4,44)),new zn(28,new qn(17,22),new qn(1,23)),new zn(28,new qn(2,14),new qn(19,15))),new e(19,Int32Array.from([6,30,58,86]),new zn(28,new qn(3,113),new qn(4,114)),new zn(26,new qn(3,44),new qn(11,45)),new zn(26,new qn(17,21),new qn(4,22)),new zn(26,new qn(9,13),new qn(16,14))),new e(20,Int32Array.from([6,34,62,90]),new zn(28,new qn(3,107),new qn(5,108)),new zn(26,new qn(3,41),new qn(13,42)),new zn(30,new qn(15,24),new qn(5,25)),new zn(28,new qn(15,15),new qn(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new zn(28,new qn(4,116),new qn(4,117)),new zn(26,new qn(17,42)),new zn(28,new qn(17,22),new qn(6,23)),new zn(30,new qn(19,16),new qn(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new zn(28,new qn(2,111),new qn(7,112)),new zn(28,new qn(17,46)),new zn(30,new qn(7,24),new qn(16,25)),new zn(24,new qn(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new zn(30,new qn(4,121),new qn(5,122)),new zn(28,new qn(4,47),new qn(14,48)),new zn(30,new qn(11,24),new qn(14,25)),new zn(30,new qn(16,15),new qn(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new zn(30,new qn(6,117),new qn(4,118)),new zn(28,new qn(6,45),new qn(14,46)),new zn(30,new qn(11,24),new qn(16,25)),new zn(30,new qn(30,16),new qn(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new zn(26,new qn(8,106),new qn(4,107)),new zn(28,new qn(8,47),new qn(13,48)),new zn(30,new qn(7,24),new qn(22,25)),new zn(30,new qn(22,15),new qn(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new zn(28,new qn(10,114),new qn(2,115)),new zn(28,new qn(19,46),new qn(4,47)),new zn(28,new qn(28,22),new qn(6,23)),new zn(30,new qn(33,16),new qn(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new zn(30,new qn(8,122),new qn(4,123)),new zn(28,new qn(22,45),new qn(3,46)),new zn(30,new qn(8,23),new qn(26,24)),new zn(30,new qn(12,15),new qn(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new zn(30,new qn(3,117),new qn(10,118)),new zn(28,new qn(3,45),new qn(23,46)),new zn(30,new qn(4,24),new qn(31,25)),new zn(30,new qn(11,15),new qn(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new zn(30,new qn(7,116),new qn(7,117)),new zn(28,new qn(21,45),new qn(7,46)),new zn(30,new qn(1,23),new qn(37,24)),new zn(30,new qn(19,15),new qn(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new zn(30,new qn(5,115),new qn(10,116)),new zn(28,new qn(19,47),new qn(10,48)),new zn(30,new qn(15,24),new qn(25,25)),new zn(30,new qn(23,15),new qn(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new zn(30,new qn(13,115),new qn(3,116)),new zn(28,new qn(2,46),new qn(29,47)),new zn(30,new qn(42,24),new qn(1,25)),new zn(30,new qn(23,15),new qn(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new zn(30,new qn(17,115)),new zn(28,new qn(10,46),new qn(23,47)),new zn(30,new qn(10,24),new qn(35,25)),new zn(30,new qn(19,15),new qn(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new zn(30,new qn(17,115),new qn(1,116)),new zn(28,new qn(14,46),new qn(21,47)),new zn(30,new qn(29,24),new qn(19,25)),new zn(30,new qn(11,15),new qn(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new zn(30,new qn(13,115),new qn(6,116)),new zn(28,new qn(14,46),new qn(23,47)),new zn(30,new qn(44,24),new qn(7,25)),new zn(30,new qn(59,16),new qn(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new zn(30,new qn(12,121),new qn(7,122)),new zn(28,new qn(12,47),new qn(26,48)),new zn(30,new qn(39,24),new qn(14,25)),new zn(30,new qn(22,15),new qn(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new zn(30,new qn(6,121),new qn(14,122)),new zn(28,new qn(6,47),new qn(34,48)),new zn(30,new qn(46,24),new qn(10,25)),new zn(30,new qn(2,15),new qn(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new zn(30,new qn(17,122),new qn(4,123)),new zn(28,new qn(29,46),new qn(14,47)),new zn(30,new qn(49,24),new qn(10,25)),new zn(30,new qn(24,15),new qn(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new zn(30,new qn(4,122),new qn(18,123)),new zn(28,new qn(13,46),new qn(32,47)),new zn(30,new qn(48,24),new qn(14,25)),new zn(30,new qn(42,15),new qn(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new zn(30,new qn(20,117),new qn(4,118)),new zn(28,new qn(40,47),new qn(7,48)),new zn(30,new qn(43,24),new qn(22,25)),new zn(30,new qn(10,15),new qn(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new zn(30,new qn(19,118),new qn(6,119)),new zn(28,new qn(18,47),new qn(31,48)),new zn(30,new qn(34,24),new qn(34,25)),new zn(30,new qn(20,15),new qn(61,16)))],e}();(Hn=Un||(Un={}))[Hn.DATA_MASK_000=0]="DATA_MASK_000",Hn[Hn.DATA_MASK_001=1]="DATA_MASK_001",Hn[Hn.DATA_MASK_010=2]="DATA_MASK_010",Hn[Hn.DATA_MASK_011=3]="DATA_MASK_011",Hn[Hn.DATA_MASK_100=4]="DATA_MASK_100",Hn[Hn.DATA_MASK_101=5]="DATA_MASK_101",Hn[Hn.DATA_MASK_110=6]="DATA_MASK_110",Hn[Hn.DATA_MASK_111=7]="DATA_MASK_111";var Xn,Yn,$n=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[Un.DATA_MASK_000,new e(Un.DATA_MASK_000,function(e,t){return!(e+t&1)})],[Un.DATA_MASK_001,new e(Un.DATA_MASK_001,function(e,t){return!(1&e)})],[Un.DATA_MASK_010,new e(Un.DATA_MASK_010,function(e,t){return t%3==0})],[Un.DATA_MASK_011,new e(Un.DATA_MASK_011,function(e,t){return(e+t)%3==0})],[Un.DATA_MASK_100,new e(Un.DATA_MASK_100,function(e,t){return!(Math.floor(e/2)+Math.floor(t/3)&1)})],[Un.DATA_MASK_101,new e(Un.DATA_MASK_101,function(e,t){return e*t%6==0})],[Un.DATA_MASK_110,new e(Un.DATA_MASK_110,function(e,t){return e*t%6<3})],[Un.DATA_MASK_111,new e(Un.DATA_MASK_111,function(e,t){return!(e+t+e*t%3&1)})]]),e}(),Kn=function(){function e(e){var t=e.getHeight();if(t<21||1!=(3&t))throw new D;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),o=0,i=r-7;for(n=r-1;n>=i;n--)o=this.copyBit(8,n,o);for(t=r-8;t<r;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Gn.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new D},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Wn.getVersionForNumber(t);for(var n=0,r=e-11,o=5;o>=0;o--)for(var i=e-9;i>=r;i--)n=this.copyBit(i,o,n);var a=Wn.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;for(n=0,i=5;i>=0;i--)for(o=e-9;o>=r;o--)n=this.copyBit(i,o,n);if(null!==(a=Wn.decodeVersionInformation(n))&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new D},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=$n.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var o=t.buildFunctionPattern(),i=!0,a=new Uint8Array(t.getTotalCodewords()),s=0,l=0,c=0,u=r-1;u>0;u-=2){6===u&&u--;for(var d=0;d<r;d++)for(var f=i?r-1-d:d,p=0;p<2;p++)o.get(u-p,f)||(c++,l<<=1,this.bitMatrix.get(u-p,f)&&(l|=1),8===c&&(a[s++]=l,c=0,l=0));i=!i}if(s!==t.getTotalCodewords())throw new D;return a},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=$n.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}(),Jn=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zn=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var o,i,a,s;if(t.length!==n.getTotalCodewords())throw new v;var l=n.getECBlocksForLevel(r),c=0,u=l.getECBlocks();try{for(var d=Jn(u),f=d.next();!f.done;f=d.next())c+=(y=f.value).getCount()}catch(T){o={error:T}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var p=new Array(c),h=0;try{for(var m=Jn(u),g=m.next();!g.done;g=m.next())for(var y=g.value,b=0;b<y.getCount();b++){var w=y.getDataCodewords(),x=l.getECCodewordsPerBlock()+w;p[h++]=new e(w,new Uint8Array(x))}}catch(O){a={error:O}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}for(var C=p[0].codewords.length,E=p.length-1;E>=0&&p[E].codewords.length!==C;)E--;E++;var _=C-l.getECCodewordsPerBlock(),A=0;for(b=0;b<_;b++)for(var S=0;S<h;S++)p[S].codewords[b]=t[A++];for(S=E;S<h;S++)p[S].codewords[_]=t[A++];var N=p[0].codewords.length;for(b=_;b<N;b++)for(S=0;S<h;S++){var I=S<E?b:b+1;p[S].codewords[I]=t[A++]}return p},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();(Yn=Xn||(Xn={}))[Yn.TERMINATOR=0]="TERMINATOR",Yn[Yn.NUMERIC=1]="NUMERIC",Yn[Yn.ALPHANUMERIC=2]="ALPHANUMERIC",Yn[Yn.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Yn[Yn.BYTE=4]="BYTE",Yn[Yn.ECI=5]="ECI",Yn[Yn.KANJI=6]="KANJI",Yn[Yn.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Yn[Yn.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Yn[Yn.HANZI=9]="HANZI";var Qn,er,tr=function(){function e(t,n,r,o){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=o,e.FOR_BITS.set(o,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new v;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(Xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(Xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(Xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(Xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(Xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(Xn.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(Xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(Xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(Xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(Xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}(),nr=function(){function e(){}return e.decode=function(t,n,r,o){var i=new kn(t),a=new G,s=new Array,l=-1,c=-1;try{var u=null,d=!1,f=void 0;do{if(i.available()<4)f=tr.TERMINATOR;else{var p=i.readBits(4);f=tr.forBits(p)}switch(f){case tr.TERMINATOR:break;case tr.FNC1_FIRST_POSITION:case tr.FNC1_SECOND_POSITION:d=!0;break;case tr.STRUCTURED_APPEND:if(i.available()<16)throw new D;l=i.readBits(8),c=i.readBits(8);break;case tr.ECI:var h=e.parseECIValue(i);if(null===(u=B.getCharacterSetECIByValue(h)))throw new D;break;case tr.HANZI:var m=i.readBits(4),g=i.readBits(f.getCharacterCountBits(n));m===e.GB2312_SUBSET&&e.decodeHanziSegment(i,a,g);break;default:var y=i.readBits(f.getCharacterCountBits(n));switch(f){case tr.NUMERIC:e.decodeNumericSegment(i,a,y);break;case tr.ALPHANUMERIC:e.decodeAlphanumericSegment(i,a,y,d);break;case tr.BYTE:e.decodeByteSegment(i,a,y,u,s,o);break;case tr.KANJI:e.decodeKanjiSegment(i,a,y);break;default:throw new D}}}while(f!==tr.TERMINATOR)}catch(v){throw new D}return new pe(t,a.toString(),0===s.length?null:s,null===r?null:r.toString(),l,c)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new D;for(var r=new Uint8Array(2*n),o=0;n>0;){var i=e.readBits(13),a=i/96<<8&4294967295|i%96;a+=a<959?41377:42657,r[o]=a>>8&255,r[o+1]=255&a,o+=2,n--}try{t.append(H.decode(r,V.GB2312))}catch(s){throw new D(s)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new D;for(var r=new Uint8Array(2*n),o=0;n>0;){var i=e.readBits(13),a=i/192<<8&4294967295|i%192;a+=a<7936?33088:49472,r[o]=a>>8,r[o+1]=a,o+=2,n--}try{t.append(H.decode(r,V.SHIFT_JIS))}catch(s){throw new D(s)}},e.decodeByteSegment=function(e,t,n,r,o,i){if(8*n>e.available())throw new D;for(var a,s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);a=null===r?V.guessEncoding(s,i):r.getName();try{t.append(H.decode(s,a))}catch(c){throw new D(c)}o.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new D;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,o){for(var i=n.length();r>1;){if(t.available()<11)throw new D;var a=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(a/45))),n.append(e.toAlphaNumericChar(a%45)),r-=2}if(1===r){if(t.available()<6)throw new D;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(o)for(var s=i;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new D;var o=t.readBits(10);if(o>=1e3)throw new D;n.append(e.toAlphaNumericChar(Math.floor(o/100))),n.append(e.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(e.toAlphaNumericChar(o%10)),r-=3}if(2===r){if(t.available()<7)throw new D;var i=t.readBits(7);if(i>=100)throw new D;n.append(e.toAlphaNumericChar(Math.floor(i/10))),n.append(e.toAlphaNumericChar(i%10))}else if(1===r){if(t.available()<4)throw new D;var a=t.readBits(4);if(a>=10)throw new D;n.append(e.toAlphaNumericChar(a))}},e.parseECIValue=function(e){var t=e.readBits(8);if(!(128&t))return 127&t;if(128==(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192==(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new D},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}(),rr=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}(),or=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ir=function(){function e(){this.rsDecoder=new _e(be.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(z.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new Kn(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new rr(!0)),o}catch(i){if(null!==r)throw r;throw i}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,o,i,a=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=Zn.getDataBlocks(l,a,s),u=0;try{for(var d=or(c),f=d.next();!f.done;f=d.next())u+=(y=f.value).getNumDataCodewords()}catch(x){n={error:x}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var p=new Uint8Array(u),h=0;try{for(var m=or(c),g=m.next();!g.done;g=m.next()){var y,v=(y=g.value).getCodewords(),b=y.getNumDataCodewords();this.correctErrors(v,b);for(var w=0;w<b;w++)p[h++]=v[w]}}catch(C){o={error:C}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}return nr.decode(p,a,s,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new x}for(var r=0;r<t;r++)e[r]=n[r]},e}(),ar=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o}return ar(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(Te),lr=function(){function e(e,t,n,r,o,i,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,o=new Int32Array(3),i=this.image,a=0;a<t;a++){var s=r+(1&a?-Math.floor((a+1)/2):Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=e;l<n&&!i.get(l,s);)l++;for(var c=0;l<n;){if(i.get(l,s))if(1===c)o[1]++;else if(2===c){var u;if(this.foundPatternCross(o)&&null!==(u=this.handlePossibleCenter(o,s,l)))return u;o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else 1===c&&c++,o[c]++;l++}if(this.foundPatternCross(o)&&null!==(u=this.handlePossibleCenter(o,s,n)))return u}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new W},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=t;l>=0&&i.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&!i.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<a&&i.get(n,l)&&s[1]<=r;)s[1]++,l++;if(l===a||s[1]>r)return NaN;for(;l<a&&!i.get(n,l)&&s[2]<=r;)s[2]++,l++;if(s[2]>r)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-o)>=2*o?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var o,i,a=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),l=this.crossCheckVertical(n,s,2*t[1],a);if(!isNaN(l)){var c=(t[0]+t[1]+t[2])/3;try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),d=u.next();!d.done;d=u.next()){var f=d.value;if(f.aboutEquals(c,l,s))return f.combineEstimate(l,s,c)}}catch(h){o={error:h}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var p=new sr(s,l,c);this.possibleCenters.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},e}(),cr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ur=function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i.estimatedModuleSize=r,i.count=o,void 0===o&&(i.count=1),i}return cr(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var o=this.count+1;return new t((this.count*this.getX()+n)/o,(this.count*this.getY()+e)/o,(this.count*this.estimatedModuleSize+r)/o,o)},t}(Te),dr=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}(),fr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pr=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!=t&&void 0!==t.get(R.TRY_HARDER),r=null!=t&&void 0!==t.get(R.PURE_BARCODE),o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var l=!1,c=new Int32Array(5),u=s-1;u<i&&!l;u+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var d=0,f=0;f<a;f++)if(o.get(f,u))1&~d||d++,c[d]++;else if(1&d)c[d]++;else if(4===d)if(e.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,u,f,r)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,d=3;continue}if(s=2,!0===this.hasSkipped)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>c[2]&&(u+=p-c[2]-s,f=a-1)}d=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,d=3;else c[++d]++;e.foundPatternCross(c)&&!0===this.handlePossibleCenter(c,u,a,r)&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}var h=this.selectBestPatterns();return Te.orderBestPatterns(h),new dr(h)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var o=t/7,i=o/2;return Math.abs(o-e[0])<i&&Math.abs(o-e[1])<i&&Math.abs(3*o-e[2])<3*i&&Math.abs(o-e[3])<i&&Math.abs(o-e[4])<i},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;t>=a&&n>=a&&s.get(n-a,t-a);)i[2]++,a++;if(t<a||n<a)return!1;for(;t>=a&&n>=a&&!s.get(n-a,t-a)&&i[1]<=r;)i[1]++,a++;if(t<a||n<a||i[1]>r)return!1;for(;t>=a&&n>=a&&s.get(n-a,t-a)&&i[0]<=r;)i[0]++,a++;if(i[0]>r)return!1;var l=s.getHeight(),c=s.getWidth();for(a=1;t+a<l&&n+a<c&&s.get(n+a,t+a);)i[2]++,a++;if(t+a>=l||n+a>=c)return!1;for(;t+a<l&&n+a<c&&!s.get(n+a,t+a)&&i[3]<r;)i[3]++,a++;if(t+a>=l||n+a>=c||i[3]>=r)return!1;for(;t+a<l&&n+a<c&&s.get(n+a,t+a)&&i[4]<r;)i[4]++,a++;if(i[4]>=r)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-o)<2*o&&e.foundPatternCross(i)},e.prototype.crossCheckVertical=function(t,n,r,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(n,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<a&&i.get(n,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(n,l)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&i.get(n,l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=2*o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(l,n);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,n)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(l,n)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<a&&i.get(l,n);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(l,n)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&i.get(l,n)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,n,r,o){var i=t[0]+t[1]+t[2]+t[3]+t[4],a=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(a),t[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),t[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),t[2],i)))){for(var l=i/7,c=!1,u=this.possibleCenters,d=0,f=u.length;d<f;d++){var p=u[d];if(p.aboutEquals(l,s,a)){u[d]=p.combineEstimate(s,a,l),c=!0;break}}if(!c){var h=new ur(a,s,l);u.push(h),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(h)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var o=fr(this.possibleCenters),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);r=a}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,o,i=0,a=0,s=this.possibleCenters.length;try{for(var l=fr(this.possibleCenters),c=l.next();!c.done;c=l.next())(h=c.value).getCount()>=e.CENTER_QUORUM&&(i++,a+=h.getEstimatedModuleSize())}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if(i<3)return!1;var u=a/s,d=0;try{for(var f=fr(this.possibleCenters),p=f.next();!p.done;p=f.next()){var h=p.value;d+=Math.abs(h.getEstimatedModuleSize()-u)}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return d<=.05*a},e.prototype.selectBestPatterns=function(){var e,t,n,r,o=this.possibleCenters.length;if(o<3)throw new W;var i,a=this.possibleCenters;if(o>3){var s=0,l=0;try{for(var c=fr(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value.getEstimatedModuleSize();s+=d,l+=d*d}}catch(v){e={error:v}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}i=s/o;var f=Math.sqrt(l/o-i*i);a.sort(function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-i),r=Math.abs(e.getEstimatedModuleSize()-i);return n<r?-1:n>r?1:0});for(var p=Math.max(.2*i,f),h=0;h<a.length&&a.length>3;h++){var m=a[h];Math.abs(m.getEstimatedModuleSize()-i)>p&&(a.splice(h,1),h--)}}if(a.length>3){s=0;try{for(var g=fr(a),y=g.next();!y.done;y=g.next())s+=y.value.getEstimatedModuleSize()}catch(b){n={error:b}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}i=s/a.length,a.sort(function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-i),r=Math.abs(e.getEstimatedModuleSize()-i);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}(),hr=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(R.NEED_RESULT_POINT_CALLBACK);var t=new pr(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),o=t.getBottomLeft(),i=this.calculateModuleSize(n,r,o);if(i<1)throw new W("No pattern found in proccess finder.");var a=e.computeDimension(n,r,o,i),s=Wn.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var u=r.getX()-n.getX()+o.getX(),d=r.getY()-n.getY()+o.getY(),f=1-3/l,p=Math.floor(n.getX()+f*(u-n.getX())),h=Math.floor(n.getY()+f*(d-n.getY())),m=4;m<=16;m<<=1)try{c=this.findAlignmentInRegion(i,p,h,m);break}catch(v){if(!(v instanceof W))throw v}var g=e.createTransform(n,r,o,c,a),y=e.sampleGrid(this.image,g,a);return new Oe(y,null===c?[o,n,r]:[o,n,r,c])},e.createTransform=function(e,t,n,r,o){var i,a,s,l,c=o-3.5;return null!==r?(i=r.getX(),a=r.getY(),l=s=c-3):(i=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),s=c,l=c),De.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,l,3.5,c,e.getX(),e.getY(),t.getX(),t.getY(),i,a,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return Be.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var o=Ne.round(Te.distance(e,t)/r),i=Ne.round(Te.distance(e,n)/r),a=Math.floor((o+i)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new W("Dimensions could be not found.")}return a},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),i=1,a=e-(n-e);a<0?(i=e/(e-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*i),(o+=this.sizeOfBlackWhiteBlackRun(e,t,a,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var o=Math.abs(r-t)>Math.abs(n-e);if(o){var i=e;e=t,t=i,i=n,n=r,r=i}for(var a=Math.abs(n-e),s=Math.abs(r-t),l=-a/2,c=e<n?1:-1,u=t<r?1:-1,d=0,f=n+c,p=e,h=t;p!==f;p+=c){var m=o?h:p,g=o?p:h;if(1===d===this.image.get(m,g)){if(2===d)return Ne.distance(p,h,e,t);d++}if((l+=s)>0){if(h===r)break;h+=u,l-=a}}return 2===d?Ne.distance(n+c,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var o=Math.floor(r*e),i=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-i<3*e)throw new W("Alignment top exceeds estimated module size.");var s=Math.max(0,n-o),l=Math.min(this.image.getHeight()-1,n+o);if(l-s<3*e)throw new W("Alignment bottom exceeds estimated module size.");return new lr(this.image,i,s,a-i,l-s,e,this.resultPointCallback).find()},e}(),mr=function(){function e(){this.decoder=new ir}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,o;if(null!=n&&void 0!==n.get(R.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,n),o=e.NO_POINTS}else{var a=new hr(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),o=a.getPoints()}r.getOther()instanceof rr&&r.getOther().applyMirroredCorrection(o);var s=new ae(r.getText(),r.getRawBytes(),void 0,o,se.QR_CODE,void 0),l=r.getByteSegments();null!==l&&s.putMetadata(ue.BYTE_SEGMENTS,l);var c=r.getECLevel();return null!==c&&s.putMetadata(ue.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(s.putMetadata(ue.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(ue.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new W;var r=this.moduleSize(t,e),o=t[1],i=n[1],a=t[0],s=n[0];if(a>=s||o>=i)throw new W;if(i-o!==s-a&&(s=a+(i-o))>=e.getWidth())throw new W;var l=Math.round((s-a+1)/r),c=Math.round((i-o+1)/r);if(l<=0||c<=0)throw new W;if(c!==l)throw new W;var u=Math.floor(r/2);o+=u;var d=(a+=u)+Math.floor((l-1)*r)-s;if(d>0){if(d>u)throw new W;a-=d}var f=o+Math.floor((c-1)*r)-i;if(f>0){if(f>u)throw new W;o-=f}for(var p=new z(l,c),h=0;h<c;h++)for(var m=o+Math.floor(h*r),g=0;g<l;g++)e.get(a+Math.floor(g*r),m)&&p.set(g,h);return p},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),o=e[0],i=e[1],a=!0,s=0;o<r&&i<n;){if(a!==t.get(o,i)){if(5===++s)break;a=!a}o++,i++}if(o===r||i===n)throw new W;return(o-e[0])/7},e.NO_POINTS=new Array,e}(),gr=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return Ne.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var o=new Int32Array(t.length),i=0;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),s=a.next();!s.done;s=a.next()){var l=s.value;o[i++]=l}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},e.getCodeword=function(t){var n=I.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}(),yr=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),vr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},br=function(){function e(){}return e.detectMultiple=function(t,n,r){var o=t.getBlackMatrix(),i=e.detect(r,o);return i.length||((o=o.clone()).rotate180(),i=e.detect(r,o)),new yr(o,i)},e.detect=function(t,n){for(var r,o,i=new Array,a=0,s=0,l=!1;a<n.getHeight();){var c=e.findVertices(n,a,s);if(null!=c[0]||null!=c[3]){if(l=!0,i.push(c),!t)break;null!=c[2]?(s=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}else{if(!l)break;l=!1,s=0;try{for(var u=(r=void 0,vr(i)),d=u.next();!d.done;d=u.next()){var f=d.value;null!=f[1]&&(a=Math.trunc(Math.max(a,f[1].getY()))),null!=f[3]&&(a=Math.max(a,Math.trunc(f[3].getY())))}}catch(p){r={error:p}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}a+=e.ROW_STEP}}return i},e.findVertices=function(t,n,r){var o=t.getHeight(),i=t.getWidth(),a=new Array(8);return e.copyToResult(a,e.findRowsWithPattern(t,o,i,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=a[4]&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),e.copyToResult(a,e.findRowsWithPattern(t,o,i,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),a},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,o,i,a){for(var s=new Array(4),l=!1,c=new Int32Array(a.length);o<n;o+=e.ROW_STEP)if(null!=(p=e.findGuardPattern(t,i,o,r,!1,a,c))){for(;o>0;){if(null==(f=e.findGuardPattern(t,i,--o,r,!1,a,c))){o++;break}p=f}s[0]=new Te(p[0],o),s[1]=new Te(p[1],o),l=!0;break}var u=o+1;if(l){for(var d=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);u<n;u++){var p;if(null!=(p=e.findGuardPattern(t,f[0],u,r,!1,a,c))&&Math.abs(f[0]-p[0])<e.MAX_PATTERN_DRIFT&&Math.abs(f[1]-p[1])<e.MAX_PATTERN_DRIFT)f=p,d=0;else{if(d>e.SKIPPED_ROW_COUNT_MAX)break;d++}}u-=d+1,s[2]=new Te(f[0],u),s[3]=new Te(f[1],u)}return u-o<e.BARCODE_MIN_HEIGHT&&I.fill(s,null),s},e.findGuardPattern=function(t,n,r,o,i,a,s){I.fillWithin(s,0,s.length,0);for(var l=n,c=0;t.get(l,r)&&l>0&&c++<e.MAX_PIXEL_DRIFT;)l--;for(var u=l,d=0,f=a.length,p=i;u<o;u++)if(t.get(u,r)!==p)s[d]++;else{if(d===f-1){if(e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=s[0]+s[1],E.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,p=!p}return d===f-1&&e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,i=0,a=0;a<r;a++)o+=e[a],i+=t[a];if(o<i)return 1/0;var s=o/i;n*=s;for(var l=0,c=0;c<r;c++){var u=e[c],d=t[c]*s,f=u>d?u-d:d-u;if(f>n)return 1/0;l+=f}return l/o},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}(),wr=function(){function e(e,t){if(0===t.length)throw new v;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),E.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),i=o.next();!i.done;i=o.next()){var a=i.value;r=this.field.add(r,a)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}for(var s=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)s=this.field.add(this.field.multiply(e,s),this.coefficients[c]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;E.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=this.field.add(n[s-a],r[s]);return new e(this.field,i)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new v("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,o=t.coefficients,i=o.length,a=new Int32Array(r+i-1),s=0;s<r;s++)for(var l=n[s],c=0;c<i;c++)a[s+c]=this.field.add(a[s+c],this.field.multiply(l,o[c]));return new e(this.field,a)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new v;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,o=new Int32Array(r+t),i=0;i<r;i++)o[i]=this.field.multiply(this.coefficients[i],n);return new e(this.field,o)},e.prototype.toString=function(){for(var e=new G,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}(),xr=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new v;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new ye;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}(),Cr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var o=1,i=0;i<t;i++)r.expTable[i]=o,o=o*n%t;for(i=0;i<t-1;i++)r.logTable[r.expTable[i]]=i;return r.zero=new wr(r,new Int32Array([0])),r.one=new wr(r,new Int32Array([1])),r}return Cr(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new v;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new wr(this,n)},t.PDF417_GF=new t(gr.NUMBER_OF_CODEWORDS,3),t}(xr),_r=function(){function e(){this.field=Er.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,o,i=new wr(this.field,e),a=new Int32Array(t),s=!1,l=t;l>0;l--){var c=i.evaluateAt(this.field.exp(l));a[t-l]=c,0!==c&&(s=!0)}if(!s)return 0;var u=this.field.getOne();if(null!=n)try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),f=d.next();!f.done;f=d.next()){var p=f.value,h=this.field.exp(e.length-1-p),m=new wr(this.field,new Int32Array([this.field.subtract(0,h),1]));u=u.multiply(m)}}catch(_){r={error:_}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var g=new wr(this.field,a),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),g,t),v=y[0],b=y[1],w=this.findErrorLocations(v),C=this.findErrorMagnitudes(b,v,w);for(l=0;l<w.length;l++){var E=e.length-1-this.field.log(w[l]);if(E<0)throw x.getChecksumInstance();e[E]=this.field.subtract(e[E],C[l])}return w.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=e,i=t,a=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(n/2);){var l=o,c=a;if(a=s,(o=i).isZero())throw x.getChecksumInstance();i=l;for(var u=this.field.getZero(),d=o.getCoefficient(o.getDegree()),f=this.field.inverse(d);i.getDegree()>=o.getDegree()&&!i.isZero();){var p=i.getDegree()-o.getDegree(),h=this.field.multiply(i.getCoefficient(i.getDegree()),f);u=u.add(this.field.buildMonomial(p,h)),i=i.subtract(o.multiplyByMonomial(p,h))}s=u.multiply(a).subtract(c).negative()}var m=s.getCoefficient(0);if(0===m)throw x.getChecksumInstance();var g=this.field.inverse(m);return[s.multiply(g),i.multiply(g)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,o=1;o<this.field.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw x.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),o=new Int32Array(r),i=1;i<=r;i++)o[r-i]=this.field.multiply(i,t.getCoefficient(i));var a=new wr(this.field,o),s=n.length,l=new Int32Array(s);for(i=0;i<s;i++){var c=this.field.inverse(n[i]),u=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(a.evaluateAt(c));l[i]=this.field.multiply(u,d)}return l},e}(),Ar=function(){function e(t,n,r,o,i){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,o,i)}return e.prototype.constructor_1=function(e,t,n,r,o){var i=null==t||null==n,a=null==r||null==o;if(i&&a)throw new W;i?(t=new Te(0,r.getY()),n=new Te(0,o.getY())):a&&(r=new Te(e.getWidth()-1,t.getY()),o=new Te(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,c=Math.trunc(l.getY()-t);c<0&&(c=0);var u=new Te(l.getX(),c);r?o=u:a=u}if(n>0){var d=r?this.bottomLeft:this.bottomRight,f=Math.trunc(d.getY()+n);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var p=new Te(d.getX(),f);r?i=p:s=p}return new e(this.image,o,i,a,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}(),Sr=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}(),Nr=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=i?parseInt(i.substr(1)):void 0;var l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);for(var u=parseInt(o),d=o&&o[0]+""=="0"?"0":" ";l.length<u;)l=void 0!==r?l+d:d+l;return l}})},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}(),Ir=function(){function e(e){this.boundingBox=new Ar(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var o=this.imageRowToCodewordIndex(t)-r;if(o>=0&&null!=(n=this.codewords[o]))return n;if((o=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[o]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new Nr,r=0;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),i=o.next();!i.done;i=o.next()){var a=i.value;null!=a?n.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue()):n.format("%3d:    |   %n",r++)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}(),Tr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Or=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,o=function(e,t){var o=function(){return e},i=function(){return t};i()>n?(n=i(),(r=[]).push(o())):i()===n&&r.push(o())};try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),a=i.next();!a.done;a=i.next()){var s=Tr(a.value,2);o(s[0],s[1])}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return gr.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}(),Rr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pr=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return Rr(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=kr(this.getCodewords()),r=n.next();!r.done;r=n.next()){var o=r.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,l=1,c=0,u=i;u<a;u++)if(null!=t[u]){var d=t[u],f=d.getRowNumber()-s;if(0===f)c++;else if(1===f)l=Math.max(l,c),c=1,s=d.getRowNumber();else if(f<0||d.getRowNumber()>=e.getRowCount()||f>u)t[u]=null;else{for(var p,h=(p=l>2?(l-2)*f:f)>=u,m=1;m<=p&&!h;m++)h=null!=t[u-m];h?t[u]=null:(s=d.getRowNumber(),c=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var o=kr(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){var s=a.getRowNumber();if(s>=r.length)continue;r[s]++}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),s=-1,l=o;l<i;l++)if(null!=a[l]){var c=a[l];c.setRowNumberAsRowIndicatorColumn();var u=c.getRowNumber()-s;0===u||(1===u?s=c.getRowNumber():c.getRowNumber()>=e.getRowCount()?a[l]=null:s=c.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new Or,o=new Or,i=new Or,a=new Or;try{for(var s=kr(n),l=s.next();!l.done;l=s.next()){var c=l.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var u=c.getValue()%30,d=c.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:o.setValue(3*u+1);break;case 1:a.setValue(u/3),i.setValue(u%3);break;case 2:r.setValue(u+1)}}}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===o.getValue().length||0===i.getValue().length||0===a.getValue().length||r.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<gr.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>gr.MAX_ROWS_IN_BARCODE)return null;var f=new Sr(r.getValue()[0],o.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(n,f),f},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var o=r.getValue()%30,i=r.getRowNumber();if(i>t.getRowCount())e[n]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(o/3)===t.getErrorCorrectionLevel()&&o%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(Ir),jr=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=gr.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var o,i;if(null!=this.detectionResultColumns[t-1]){var a=r[n],s=this.detectionResultColumns[t-1].getCodewords(),l=s;null!=this.detectionResultColumns[t+1]&&(l=this.detectionResultColumns[t+1].getCodewords());var c=new Array(14);c[2]=s[n],c[3]=l[n],n>0&&(c[0]=r[n-1],c[4]=s[n-1],c[5]=l[n-1]),n>1&&(c[8]=r[n-2],c[10]=s[n-2],c[11]=l[n-2]),n<r.length-1&&(c[1]=r[n+1],c[6]=s[n+1],c[7]=l[n+1]),n<r.length-2&&(c[9]=r[n+2],c[12]=s[n+2],c[13]=l[n+2]);try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),d=u.next();!d.done;d=u.next()){var f=d.value;if(e.adjustRowNumber(a,f))return}}catch(p){o={error:p}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}},e.adjustRowNumber=function(e,t){return!(null==t||!t.hasValidRowNumber()||t.getBucket()!==e.getBucket()||(e.setRowNumber(t.getRowNumber()),0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Nr,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}(),Dr=function(){function e(t,n,r,o){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}(),Mr=function(){function e(){}return e.initialize=function(){for(var t=0;t<gr.SYMBOL_TABLE.length;t++)for(var n=gr.SYMBOL_TABLE[t],r=1&n,o=0;o<gr.BARS_IN_MODULE;o++){for(var i=0;(1&n)===r;)i+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(gr.BARS_IN_MODULE)),e.RATIOS_TABLE[t][gr.BARS_IN_MODULE-o-1]=Math.fround(i/gr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=Ne.sum(e),n=new Int32Array(gr.BARS_IN_MODULE),r=0,o=0,i=0;i<gr.MODULES_IN_CODEWORD;i++){var a=t/(2*gr.MODULES_IN_CODEWORD)+i*t/gr.MODULES_IN_CODEWORD;o+e[r]<=a&&(o+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===gr.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2==0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=Ne.sum(t),r=new Array(gr.BARS_IN_MODULE);if(n>1)for(var o=0;o<r.length;o++)r[o]=Math.fround(t[o]/n);var i=Ie.MAX_VALUE,a=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var l=0,c=e.RATIOS_TABLE[s],u=0;u<gr.BARS_IN_MODULE;u++){var d=Math.fround(c[u]-r[u]);if((l+=Math.fround(d*d))>=i)break}l<i&&(i=l,a=gr.SYMBOL_TABLE[s])}return a},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(gr.SYMBOL_TABLE.length).map(function(e){return new Array(gr.BARS_IN_MODULE)}),e}(),Lr=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}(),Br=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}(),Fr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fr(t,e),t.kind="NullPointerException",t}(h),Hr=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new Ur;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new A;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}(),Vr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vr(t,e),t}(h),zr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qr=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new v("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return zr(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new Gr;t=T.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new A;this.ensureCapacity(this.count+n),E.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return I.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(Hr);function Wr(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Xr(e){if(void 0===er&&(er=Wr()),null===er)throw new Error("BigInt is not supported!");return er(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Qn||(Qn={}));var Yr=function(){function e(){}return e.decode=function(t,n){var r=new G(""),o=B.ISO8859_1;r.enableDecoding(o);for(var i=1,a=t[i++],s=new Lr;i<t[0];){switch(a){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(a,t,o,i,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,r);break;case e.ECI_CHARSET:B.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new D;default:i--,i=e.textCompaction(t,i,r)}if(!(i<t.length))throw D.getFormatInstance();a=t[i++]}if(0===r.length())throw D.getFormatInstance();var l=new pe(null,r.toString(),null,n);return l.setOther(s),l},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw D.getFormatInstance();for(var o=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,n++)o[i]=t[n];r.setSegmentIndex(T.parseInt(e.decodeBase900toBase10(o,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new G;n=e.textCompaction(t,n,a),r.setFileId(a.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new G;n=e.textCompaction(t,n+1,l),r.setFileName(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new G;n=e.textCompaction(t,n+1,c),r.setSender(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new G;n=e.textCompaction(t,n+1,u),r.setAddressee(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new G;n=e.numericCompaction(t,n+1,d),r.setSegmentCount(T.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new G;n=e.numericCompaction(t,n+1,f),r.setTimestamp(Br.parseLong(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new G;n=e.numericCompaction(t,n+1,p),r.setChecksum(T.parseInt(p.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var h=new G;n=e.numericCompaction(t,n+1,h),r.setFileSize(Br.parseLong(h.toString()));break;default:throw D.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(-1!==s){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData(I.copyOfRange(t,s,s+m))}return n},e.textCompaction=function(t,n,r){for(var o=new Int32Array(2*(t[0]-n)),i=new Int32Array(2*(t[0]-n)),a=0,s=!1;n<t[0]&&!s;){var l=t[n++];if(l<e.TEXT_COMPACTION_MODE_LATCH)o[a]=l/30,o[a+1]=l%30,a+=2;else switch(l){case e.TEXT_COMPACTION_MODE_LATCH:o[a++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[n++],i[a]=l,a++}}return e.decodeTextCompaction(o,i,a,r),n},e.decodeTextCompaction=function(t,n,r,o){for(var i=Qn.ALPHA,a=Qn.ALPHA,s=0;s<r;){var l=t[s],c="";switch(i){case Qn.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.LL:i=Qn.LOWER;break;case e.ML:i=Qn.MIXED;break;case e.PS:a=i,i=Qn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}break;case Qn.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case e.AS:a=i,i=Qn.ALPHA_SHIFT;break;case e.ML:i=Qn.MIXED;break;case e.PS:a=i,i=Qn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}break;case Qn.MIXED:if(l<e.PL)c=e.MIXED_CHARS[l];else switch(l){case e.PL:i=Qn.PUNCT;break;case 26:c=" ";break;case e.LL:i=Qn.LOWER;break;case e.AL:i=Qn.ALPHA;break;case e.PS:a=i,i=Qn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}break;case Qn.PUNCT:if(l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=Qn.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}break;case Qn.ALPHA_SHIFT:if(i=a,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}break;case Qn.PUNCT_SHIFT:if(i=a,l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=Qn.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=Qn.ALPHA}}""!==c&&o.append(c),s++}},e.byteCompaction=function(t,n,r,o,i){var a=new qr,s=0,l=0,c=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),d=n[o++];o<n[0]&&!c;)switch(u[s++]=d,l=900*l+d,d=n[o++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0;break;default:if(s%5==0&&s>0){for(var f=0;f<6;++f)a.write(Number(Xr(l)>>Xr(8*(5-f))));l=0,s=0}}o===n[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=d);for(var p=0;p<s;p++)a.write(u[p]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!c;){var h=n[o++];if(h<e.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+h;else switch(h){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0}if(s%5==0&&s>0){for(f=0;f<6;++f)a.write(Number(Xr(l)>>Xr(8*(5-f))));l=0,s=0}}}return i.append(H.decode(a.toByteArray(),r)),o},e.numericCompaction=function(t,n,r){for(var o=0,i=!1,a=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!i;){var s=t[n++];if(n===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,i=!0}(o%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(r.append(e.decodeBase900toBase10(a,o)),o=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=Xr(0),o=0;o<n;o++)r+=e.EXP900[n-o-1]*Xr(t[o]);var i=r.toString();if("1"!==i.charAt(0))throw new D;return i.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=Wr()?function(){var e=[];e[0]=Xr(1);var t=Xr(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}(),$r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kr=function(){function e(){}return e.decode=function(t,n,r,o,i,a,s){for(var l,c=new Ar(t,n,r,o,i),u=null,d=null,f=!0;;f=!1){if(null!=n&&(u=e.getRowIndicatorColumn(t,c,n,!0,a,s)),null!=o&&(d=e.getRowIndicatorColumn(t,c,o,!1,a,s)),null==(l=e.merge(u,d)))throw W.getNotFoundInstance();var p=l.getBoundingBox();if(!f||null==p||!(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))break;c=p}l.setBoundingBox(c);var h=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,u),l.setDetectionResultColumn(h,d);for(var m=null!=u,g=1;g<=h;g++){var y=m?g:h-g;if(void 0===l.getDetectionResultColumn(y)){var v=void 0;v=0===y||y===h?new Pr(c,0===y):new Ir(c),l.setDetectionResultColumn(y,v);for(var b=-1,w=b,x=c.getMinY();x<=c.getMaxY();x++){if((b=e.getStartColumn(l,y,x,m))<0||b>c.getMaxX()){if(-1===w)continue;b=w}var C=e.detectCodeword(t,c.getMinX(),c.getMaxX(),m,b,x,a,s);null!=C&&(v.setCodeword(x,C),w=b,a=Math.min(a,C.getWidth()),s=Math.max(s,C.getWidth()))}}}return e.createDecoderResult(l)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var o=Ar.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new jr(r,o)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var o=t.getRowHeights();if(null==o)return null;var i=e.getMax(o),a=0;try{for(var s=$r(o),l=s.next();!l.done;l=s.next()){var c=l.value;if(a+=i-c,c>0)break}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var u=t.getCodewords(),d=0;a>0&&null==u[d];d++)a--;var f=0;for(d=o.length-1;d>=0&&(f+=i-o[d],!(o[d]>0));d--);for(d=u.length-1;f>0&&null==u[d];d--)f--;return t.getBoundingBox().addMissingRows(a,f,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var o=$r(e),i=o.next();!i.done;i=o.next()){var a=i.value;r=Math.max(r,a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,o,i,a){for(var s=new Pr(n,o),l=0;l<2;l++)for(var c=0===l?1:-1,u=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=n.getMaxY()&&d>=n.getMinY();d+=c){var f=e.detectCodeword(t,0,t.getWidth(),o,u,d,i,a);null!=f&&(s.setCodeword(d,f),u=o?f.getStartX():f.getEndX())}return s},e.adjustCodewordCount=function(t,n){var r=n[0][1],o=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===o.length){if(i<1||i>gr.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();r.setValue(i)}else o[0]!==i&&r.setValue(i)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],a=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var l=0;l<t.getBarcodeColumnCount();l++){var c=n[s][l+1].getValue(),u=s*t.getBarcodeColumnCount()+l;0===c.length?r.push(u):1===c.length?o[u]=c[0]:(a.push(u),i.push(c))}for(var d=new Array(i.length),f=0;f<d.length;f++)d[f]=i[f];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,gr.toIntArray(r),gr.toIntArray(a),d)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)n[o[l]]=i[l][a[l]];try{return e.decodeCodewords(n,t,r)}catch(c){if(!(c instanceof x))throw c}if(0===a.length)throw x.getChecksumInstance();for(l=0;l<a.length;l++){if(a[l]<i[l].length-1){a[l]++;break}if(a[l]=0,l===a.length-1)throw x.getChecksumInstance()}}throw x.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,o,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]=new Or;var l=0;try{for(var c=$r(e.getDetectionResultColumns()),u=c.next();!u.done;u=c.next()){var d=u.value;if(null!=d)try{for(var f=(r=void 0,$r(d.getCodewords())),p=f.next();!p.done;p=f.next()){var h=p.value;if(null!=h){var m=h.getRowNumber();if(m>=0){if(m>=i.length)continue;i[m][l].setValue(h.getValue())}}}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}l++}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return i},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,o){var i,a,s=o?1:-1,l=null;if(e.isValidBarcodeColumn(t,n-s)&&(l=t.getDetectionResultColumn(n-s).getCodeword(r)),null!=l)return o?l.getEndX():l.getStartX();if(null!=(l=t.getDetectionResultColumn(n).getCodewordNearby(r)))return o?l.getStartX():l.getEndX();if(e.isValidBarcodeColumn(t,n-s)&&(l=t.getDetectionResultColumn(n-s).getCodewordNearby(r)),null!=l)return o?l.getEndX():l.getStartX();for(var c=0;e.isValidBarcodeColumn(t,n-s);){n-=s;try{for(var u=(i=void 0,$r(t.getDetectionResultColumn(n).getCodewords())),d=u.next();!d.done;d=u.next()){var f=d.value;if(null!=f)return(o?f.getEndX():f.getStartX())+s*c*(f.getEndX()-f.getStartX())}}catch(p){i={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}c++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,o,i,a,s,l){i=e.adjustCodewordStartColumn(t,n,r,o,i,a);var c,u=e.getModuleBitCount(t,n,r,o,i,a);if(null==u)return null;var d=Ne.sum(u);if(o)c=i+d;else{for(var f=0;f<u.length/2;f++){var p=u[f];u[f]=u[u.length-1-f],u[u.length-1-f]=p}i=(c=i)-d}if(!e.checkCodewordSkew(d,s,l))return null;var h=Mr.getDecodedValue(u),m=gr.getCodeword(h);return-1===m?null:new Dr(i,c,e.getCodewordBucketNumber(h),m)},e.getModuleBitCount=function(e,t,n,r,o,i){for(var a=o,s=new Int32Array(8),l=0,c=r?1:-1,u=r;(r?a<n:a>=t)&&l<s.length;)e.get(a,i)===u?(s[l]++,a+=c):(l++,u=!u);return l===s.length||a===(r?n:t)&&l===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,o,i,a){for(var s=i,l=o?-1:1,c=0;c<2;c++){for(;(o?s>=n:s<r)&&o===t.get(s,a);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,o=!o}return s},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw D.getFormatInstance();var o=1<<n+1,i=e.correctErrors(t,r,o);e.verifyCodewordCount(t,o);var a=Yr.decode(t,""+n);return a.setErrorsCorrected(i),a.setErasures(r.length),a},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw D.getFormatInstance();var n=e[0];if(n>e.length)throw D.getFormatInstance();if(0===n){if(!(t<e.length))throw D.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new Nr,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var o=e[n][r];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new _r,e}(),Jr=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw W.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(r){if(r instanceof D||r instanceof x)throw W.getNotFoundInstance();throw r}},e.decode=function(t,n,r){var o,i,a=new Array,s=br.detectMultiple(t,n,r);try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s.getPoints()),c=l.next();!c.done;c=l.next()){var u=c.value,d=Kr.decode(s.getBits(),u[4],u[5],u[6],u[7],e.getMinCodewordWidth(u),e.getMaxCodewordWidth(u)),f=new ae(d.getText(),d.getRawBytes(),void 0,u,se.PDF_417);f.putMetadata(ue.ERROR_CORRECTION_LEVEL,d.getECLevel());var p=d.getOther();null!=p&&f.putMetadata(ue.PDF417_EXTRA_METADATA,p),a.push(f)}}catch(h){o={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return a.map(function(e){return e})},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?T.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}(),Zr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zr(t,e),t.kind="ReaderException",t}(h),eo=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},to=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!=e&&void 0!==e.get(R.TRY_HARDER),n=null==e?null:e.get(R.POSSIBLE_FORMATS),r=new Array;if(null!=n){var o=n.some(function(e){return e===se.UPC_A||e===se.UPC_E||e===se.EAN_13||e===se.EAN_8||e===se.CODABAR||e===se.CODE_39||e===se.CODE_93||e===se.CODE_128||e===se.ITF||e===se.RSS_14||e===se.RSS_EXPANDED});o&&!t&&r.push(new xn(e)),n.includes(se.QR_CODE)&&r.push(new mr),n.includes(se.DATA_MATRIX)&&r.push(new Bn),n.includes(se.AZTEC)&&r.push(new He),n.includes(se.PDF_417)&&r.push(new Jr),o&&t&&r.push(new xn(e))}0===r.length&&(t||r.push(new xn(e)),r.push(new mr),r.push(new Bn),r.push(new He),r.push(new Jr),t&&r.push(new xn(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=eo(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new Qr("No readers where selected, nothing can be read.");try{for(var r=eo(this.readers),o=r.next();!o.done;o=r.next()){var i=o.value;try{return i.decode(e,this.hints)}catch(a){if(a instanceof Qr)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new W("No MultiFormat Readers were able to detect the code.")},e}(),no=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ro=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new to;return r.setHints(t),e.call(this,r,n)||this}return no(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(ie),oo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){oo(function(t){return void 0===t&&(t=500),e.call(this,new Jr,t)||this},e)}(ie);var io,ao,so=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){so(function(t){return void 0===t&&(t=500),e.call(this,new mr,t)||this},e)}(ie),(ao=io||(io={}))[ao.ERROR_CORRECTION=0]="ERROR_CORRECTION",ao[ao.CHARACTER_SET=1]="CHARACTER_SET",ao[ao.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ao[ao.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",ao[ao.MIN_SIZE=4]="MIN_SIZE",ao[ao.MAX_SIZE=5]="MAX_SIZE",ao[ao.MARGIN=6]="MARGIN",ao[ao.PDF417_COMPACT=7]="PDF417_COMPACT",ao[ao.PDF417_COMPACTION=8]="PDF417_COMPACTION",ao[ao.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",ao[ao.AZTEC_LAYERS=10]="AZTEC_LAYERS",ao[ao.QR_VERSION=11]="QR_VERSION",ao[ao.GS1_FORMAT=12]="GS1_FORMAT",ao[ao.FORCE_C40=13]="FORCE_C40";var lo=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i-1;a++)for(var s=r[a],l=0;l<o-1;l++){var c=s[l];c===s[l+1]&&c===r[a+1][l]&&c===r[a+1][l+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var l=r[a];s+6<o&&1===l[s]&&0===l[s+1]&&1===l[s+2]&&1===l[s+3]&&1===l[s+4]&&0===l[s+5]&&1===l[s+6]&&(e.isWhiteHorizontal(l,s-4,s)||e.isWhiteHorizontal(l,s+7,s+11))&&n++,a+6<i&&1===r[a][s]&&0===r[a+1][s]&&1===r[a+2][s]&&1===r[a+3][s]&&1===r[a+4][s]&&0===r[a+5][s]&&1===r[a+6][s]&&(e.isWhiteVertical(r,s,a-4,a)||e.isWhiteVertical(r,s,a+7,a+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var o=n;o<r;o++)if(1===e[o][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=r[a],l=0;l<o;l++)1===s[l]&&n++;var c=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-c)/c)*e.N4},e.getDataMaskBit=function(e,t,n){var r,o;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(o=n*t))+o%3;break;case 6:r=(1&(o=n*t))+o%3&1;break;case 7:r=(o=n*t)%3+(n+t&1)&1;break;default:throw new v("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,o=n?t.getHeight():t.getWidth(),i=n?t.getWidth():t.getHeight(),a=t.getArray(),s=0;s<o;s++){for(var l=0,c=-1,u=0;u<i;u++){var d=n?a[s][u]:a[u][s];d===c?l++:(l>=5&&(r+=e.N1+(l-5)),l=1,c=d)}l>=5&&(r+=e.N1+(l-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}(),co=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new G;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}(),uo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uo(t,e),t.kind="WriterException",t}(h);!function(){function e(){}e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,o,i){e.clearMatrix(i),e.embedBasicPatterns(r,i),e.embedTypeInfo(n,o,i),e.maybeEmbedVersionInfo(r,i),e.embedDataBits(t,o,i)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var o=new O;e.makeTypeInfoBits(t,n,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),l=e.TYPE_INFO_COORDINATES[i],c=l[0],u=l[1];if(r.setBoolean(c,u,s),i<8){var d=r.getWidth()-i-1,f=8;r.setBoolean(d,f,s)}else d=8,f=r.getHeight()-7+(i-8),r.setBoolean(d,f,s)}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new O;e.makeVersionInfoBits(t,r);for(var o=17,i=0;i<6;++i)for(var a=0;a<3;++a){var s=r.get(o);o--,n.setBoolean(i,n.getHeight()-11+a,s),n.setBoolean(n.getHeight()-11+a,i,s)}}},e.embedDataBits=function(t,n,r){for(var o=0,i=-1,a=r.getWidth()-1,s=r.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<r.getHeight();){for(var l=0;l<2;++l){var c=a-l;if(e.isEmpty(r.get(c,s))){var u=void 0;o<t.getSize()?(u=t.get(o),++o):u=!1,255!==n&&lo.getDataMaskBit(n,c,s)&&(u=!u),r.setBoolean(c,s,u)}}s+=i}s+=i=-i,a-=2}if(o!==t.getSize())throw new fo("Not all bits consumed: "+o+"/"+t.getSize())},e.findMSBSet=function(e){return 32-T.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new v("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!co.isValidMaskPattern(n))throw new fo("Invalid mask pattern");var o=t.getBits()<<3|n;r.appendBits(o,5);var i=e.calculateBCHCode(o,e.TYPE_INFO_POLY);r.appendBits(i,10);var a=new O;if(a.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(a),15!==r.getSize())throw new fo("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new fo("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new fo;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var o=0;o<8;++o){if(!e.isEmpty(r.get(t+o,n)))throw new fo;r.setNumber(t+o,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var o=0;o<7;++o){if(!e.isEmpty(r.get(t,n+o)))throw new fo;r.setNumber(t,n+o,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var o=0;o<5;++o)for(var i=e.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)r.setNumber(t+a,n+o,i[a])},e.embedPositionDetectionPattern=function(t,n,r){for(var o=0;o<7;++o)for(var i=e.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)r.setNumber(t+a,n+o,i[a])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t),e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,o=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var l=0;l!==a;l++){var c=o[l];c>=0&&e.isEmpty(n.get(c,s))&&e.embedPositionAdjustmentPattern(c-2,s-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522}(),Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),B.UTF8.getName();var po=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,i,a,s,l){var c=e.call(this,a,s)||this;if(c.yuvData=t,c.dataWidth=n,c.dataHeight=r,c.left=o,c.top=i,o+a>n||i+s>r)throw new v("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(a,s),c}po(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new v("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return E.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return E.arraycopy(this.yuvData,o,r,0,n),r;for(var i=0;i<t;i++){var a=i*e;E.arraycopy(this.yuvData,o,r,a,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,o,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),o=this.yuvData,i=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var s=a*e,l=0;l<e;l++){var c=255&o[i+l*t.THUMBNAIL_SCALE_FACTOR];r[s+l]=4278190080|65793*c}i+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,o=this.top*this.dataWidth+this.left;r<t;r++,o+=this.dataWidth)for(var i=o+e/2,a=o,s=o+e-1;a<i;a++,s--){var l=n[a];n[a]=n[s],n[s]=l}},t.prototype.invert=function(){return new Q(this)},t.THUMBNAIL_SCALE_FACTOR=2}(J);var ho=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,i,a,s){var l=e.call(this,n,r)||this;if(l.dataWidth=o,l.dataHeight=i,l.left=a,l.top=s,4===t.BYTES_PER_ELEMENT){for(var c=n*r,u=new Uint8ClampedArray(c),d=0;d<c;d++){var f=t[d],p=f>>16&255,h=f>>7&510,m=255&f;u[d]=(p+h+m)/4&255}l.luminances=u}else l.luminances=t;if(void 0===o&&(l.dataWidth=n),void 0===i&&(l.dataHeight=r),void 0===a&&(l.left=0),void 0===s&&(l.top=0),l.left+n>l.dataWidth||l.top+r>l.dataHeight)throw new v("Crop rectangle does not fit within image data.");return l}ho(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new v("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return E.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return E.arraycopy(this.luminances,o,r,0,n),r;for(var i=0;i<t;i++){var a=i*e;E.arraycopy(this.luminances,o,r,a,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.luminances,r,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new Q(this)}}(J);var mo,go,yo,vo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vo(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(B),wo=function(){function e(){}return e.ISO_8859_1=B.ISO8859_1,e}();(mo=function(e,t){for(var n=1,r=0;r<255;r++)t[r]=n,e[n]=r,(n*=2)>=256&&(n^=301);return{LOG:e,ALOG:t}}([],[])).LOG,mo.ALOG,(yo=go||(go={}))[yo.FORCE_NONE=0]="FORCE_NONE",yo[yo.FORCE_SQUARE=1]="FORCE_SQUARE",yo[yo.FORCE_RECTANGLE=2]="FORCE_RECTANGLE";var xo,Co=function(){function e(){}return e.prototype.getEncodingMode=function(){return 0},e.prototype.encode=function(e){if(Do.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var t=e.getCurrentChar(),n=Do.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(n!==this.getEncodingMode())switch(n){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+n)}else Do.isExtendedASCII(t)?(e.writeCodeword(235),e.writeCodeword(t-128+1),e.pos++):(e.writeCodeword(t+1),e.pos++)}},e.prototype.encodeASCIIDigits=function(e,t){if(Do.isDigit(e)&&Do.isDigit(t))return 10*(e-48)+(t-48)+130;throw new Error("not digits: "+e+t)},e}(),Eo=function(){function e(){}return e.prototype.getEncodingMode=function(){return 5},e.prototype.encode=function(e){var t=new G;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();if(t.append(n),e.pos++,Do.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var r=t.length()-1,o=e.getCodewordCount()+r+1;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||i)if(r<=249)t.setCharAt(0,V.getCharAt(r));else{if(!(r<=1555))throw new Error("Message length not in valid ranges: "+r);t.setCharAt(0,V.getCharAt(Math.floor(r/250)+249)),t.insert(1,V.getCharAt(r%250))}var a=0;for(n=t.length();a<n;a++)e.writeCodeword(this.randomize255State(t.charAt(a).charCodeAt(0),e.getCodewordCount()+1))},e.prototype.randomize255State=function(e,t){var n=e+(149*t%255+1);return n<=255?n:n-256},e}(),_o=function(){function e(){}return e.prototype.getEncodingMode=function(){return 1},e.prototype.encodeMaximal=function(e){for(var t=new G,n=0,r=e.pos,o=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,t),t.length()%3==0&&(r=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),s=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s,c=Math.floor(t.length()%3);(2===c&&2!==l||1===c&&(n>3||1!==l))&&(e.pos=r)}t.length()>0&&e.writeCodeword(230),this.handleEOD(e,t)},e.prototype.encode=function(e){for(var t=new G;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var r=this.encodeChar(n,t),o=2*Math.floor(t.length()/3),i=e.getCodewordCount()+o;e.updateSymbolInfo(i);var a=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var s=new G;for(t.length()%3==2&&2!==a&&(r=this.backtrackOneCharacter(e,t,s,r));t.length()%3==1&&(r>3||1!==a);)r=this.backtrackOneCharacter(e,t,s,r);break}if(t.length()%3==0&&Do.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},e.prototype.backtrackOneCharacter=function(e,t,n,r){var o=t.length(),i=t.toString().substring(0,o-r);t.setLengthToZero(),t.append(i),e.pos--;var a=e.getCurrentChar();return r=this.encodeChar(a,n),e.resetSymbolInfo(),r},e.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},e.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),r=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o;if(2===r){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===i&&1===r){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==r)throw new Error("Unexpected case. Please report!");for(;t.length()>=3;)this.writeNextTriplet(e,t);(i>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},e.prototype.encodeChar=function(e,t){return e===" ".charCodeAt(0)?(t.append(3),1):e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?(t.append(e-48+4),1):e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?(t.append(e-65+14),1):e<" ".charCodeAt(0)?(t.append(0),t.append(e),2):e<="/".charCodeAt(0)?(t.append(1),t.append(e-33),2):e<="@".charCodeAt(0)?(t.append(1),t.append(e-58+15),2):e<="_".charCodeAt(0)?(t.append(1),t.append(e-91+22),2):e<=127?(t.append(2),t.append(e-96),2):(t.append("1"),2+this.encodeChar(e-128,t))},e.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,r=t%256,o=new G;return o.append(n),o.append(r),o.toString()},e}(),Ao=function(){function e(){}return e.prototype.getEncodingMode=function(){return 4},e.prototype.encode=function(e){for(var t=new G;e.hasMoreCharacters();){var n=e.getCurrentChar();if(this.encodeChar(n,t),e.pos++,t.length()>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(4);if(t.setLengthToZero(),t.append(r),Do.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}t.append(V.getCharAt(31)),this.handleEOD(e,t)},e.prototype.handleEOD=function(e,t){try{var n=t.length();if(0===n)return;if(1===n){e.updateSymbolInfo();var r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>r&&(e.updateSymbolInfo(e.getCodewordCount()+1),r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=r&&r<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,a=this.encodeToCodewords(t.toString()),s=!e.hasMoreCharacters()&&i<=2;i<=2&&(e.updateSymbolInfo(e.getCodewordCount()+i),(r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(s=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))),s?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(a)}finally{e.signalEncoderChange(0)}},e.prototype.encodeChar=function(e,t){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?t.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?t.append(V.getCharAt(e-64)):Do.illegalCharacter(V.getCharAt(e))},e.prototype.encodeToCodewords=function(e){var t=e.length;if(0===t)throw new Error("StringBuilder must not be empty");var n=(e.charAt(0).charCodeAt(0)<<18)+((t>=2?e.charAt(1).charCodeAt(0):0)<<12)+((t>=3?e.charAt(2).charCodeAt(0):0)<<6)+(t>=4?e.charAt(3).charCodeAt(0):0),r=n>>16&255,o=n>>8&255,i=255&n,a=new G;return a.append(r),t>=2&&a.append(o),t>=3&&a.append(i),a.toString()},e}(),So=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),No=function(){function e(e,t,n,r,o,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=r,this.matrixHeight=o,this.dataRegions=i,this.rsBlockData=a,this.rsBlockError=s}return e.lookup=function(e,t,n,r,o){var i,a;void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!0);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(To),l=s.next();!l.done;l=s.next()){var c=l.value;if((1!==t||!c.rectangular)&&(2!==t||c.rectangular)&&(null==n||!(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&(null==r||!(c.getSymbolWidth()>r.getWidth()||c.getSymbolHeight()>r.getHeight()))&&e<=c.dataCapacity)return c}}catch(u){i={error:u}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},e.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},e.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},e.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},e.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},e.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},e.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},e.prototype.getDataCapacity=function(){return this.dataCapacity},e.prototype.getErrorCodewords=function(){return this.errorCodewords},e.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},e.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},e}(),Io=function(e){function t(){return e.call(this,!1,1558,620,22,22,36,-1,62)||this}return So(t,e),t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(No),To=[new No(!1,3,5,8,8,1),new No(!1,5,7,10,10,1),new No(!0,5,7,16,6,1),new No(!1,8,10,12,12,1),new No(!0,10,11,14,6,2),new No(!1,12,12,14,14,1),new No(!0,16,14,24,10,1),new No(!1,18,14,16,16,1),new No(!1,22,18,18,18,1),new No(!0,22,18,16,10,2),new No(!1,30,20,20,20,1),new No(!0,32,24,16,14,2),new No(!1,36,24,22,22,1),new No(!1,44,28,24,24,1),new No(!0,49,28,22,14,2),new No(!1,62,36,14,14,4),new No(!1,86,42,16,16,4),new No(!1,114,48,18,18,4),new No(!1,144,56,20,20,4),new No(!1,174,68,22,22,4),new No(!1,204,84,24,24,4,102,42),new No(!1,280,112,14,14,16,140,56),new No(!1,368,144,16,16,16,92,36),new No(!1,456,192,18,18,16,114,48),new No(!1,576,224,20,20,16,144,56),new No(!1,696,272,22,22,16,174,68),new No(!1,816,336,24,24,16,136,56),new No(!1,1050,408,18,18,36,175,68),new No(!1,1304,496,20,20,36,163,62),new Io],Oo=function(){function e(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(e){return e.charCodeAt(0)}),n=new G,r=0,o=t.length;r<o;r++){var i=String.fromCharCode(255&t[r]);if("?"===i&&"?"!==e.charAt(r))throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new G,this.newEncoding=-1}return e.prototype.setSymbolShape=function(e){this.shape=e},e.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},e.prototype.getMessage=function(){return this.msg},e.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},e.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCodewords=function(){return this.codewords},e.prototype.writeCodewords=function(e){this.codewords.append(e)},e.prototype.writeCodeword=function(e){this.codewords.append(e)},e.prototype.getCodewordCount=function(){return this.codewords.length()},e.prototype.getNewEncoding=function(){return this.newEncoding},e.prototype.signalEncoderChange=function(e){this.newEncoding=e},e.prototype.resetEncoderSignal=function(){this.newEncoding=-1},e.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},e.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},e.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},e.prototype.getSymbolInfo=function(){return this.symbolInfo},e.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=No.lookup(e,this.shape,this.minSize,this.maxSize,!0))},e.prototype.resetSymbolInfo=function(){this.symbolInfo=null},e}(),Ro=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ro(t,e),t.prototype.getEncodingMode=function(){return 3},t.prototype.encode=function(e){for(var t=new G;e.hasMoreCharacters();){var n=e.getCurrentChar();if(e.pos++,this.encodeChar(n,t),t.length()%3==0&&(this.writeNextTriplet(e,t),Do.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode())){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},t.prototype.encodeChar=function(e,t){switch(e){case 13:t.append(0);break;case"*".charCodeAt(0):t.append(1);break;case">".charCodeAt(0):t.append(2);break;case" ".charCodeAt(0):t.append(3);break;default:e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?t.append(e-48+4):e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?t.append(e-65+14):Do.illegalCharacter(V.getCharAt(e))}return 1},t.prototype.handleEOD=function(e,t){e.updateSymbolInfo();var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),r=t.length();e.pos-=r,(e.getRemainingCharacters()>1||n>1||e.getRemainingCharacters()!==n)&&e.writeCodeword(254),e.getNewEncoding()<0&&e.signalEncoderChange(0)},t}(_o),Po=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Po(t,e),t.prototype.getEncodingMode=function(){return 2},t.prototype.encodeChar=function(e,t){return e===" ".charCodeAt(0)?(t.append(3),1):e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?(t.append(e-48+4),1):e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)?(t.append(e-97+14),1):e<" ".charCodeAt(0)?(t.append(0),t.append(e),2):e<="/".charCodeAt(0)?(t.append(1),t.append(e-33),2):e<="@".charCodeAt(0)?(t.append(1),t.append(e-58+15),2):e>="[".charCodeAt(0)&&e<="_".charCodeAt(0)?(t.append(1),t.append(e-91+22),2):e==="`".charCodeAt(0)?(t.append(2),t.append(0),2):e<="Z".charCodeAt(0)?(t.append(2),t.append(e-65+1),2):e<=127?(t.append(2),t.append(e-123+27),2):(t.append("1"),2+this.encodeChar(e-128,t))},t}(_o),Do=function(){function e(){}return e.randomize253State=function(e){var t=149*e%253+1+129;return t<=254?t:t-254},e.encodeHighLevel=function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!1);var i=new _o,a=[new Co,i,new jo,new ko,new Ao,new Eo],s=new Oo(e);s.setSymbolShape(t),s.setSizeConstraints(n,r),e.startsWith("[)>05")&&e.endsWith("")?(s.writeCodeword(236),s.setSkipAtEnd(2),s.pos+=7):e.startsWith("[)>06")&&e.endsWith("")&&(s.writeCodeword(237),s.setSkipAtEnd(2),s.pos+=7);var l=0;for(o&&(i.encodeMaximal(s),l=s.getNewEncoding(),s.resetEncoderSignal());s.hasMoreCharacters();)a[l].encode(s),s.getNewEncoding()>=0&&(l=s.getNewEncoding(),s.resetEncoderSignal());var c=s.getCodewordCount();s.updateSymbolInfo();var u=s.getSymbolInfo().getDataCapacity();c<u&&0!==l&&5!==l&&4!==l&&s.writeCodeword("");var d=s.getCodewords();for(d.length()<u&&d.append(129);d.length()<u;)d.append(this.randomize253State(d.length()+1));return s.getCodewords().toString()},e.lookAheadTest=function(e,t,n){var r=this.lookAheadTestIntern(e,t,n);if(3===n&&3===r){for(var o=Math.min(t+3,e.length),i=t;i<o;i++)if(!this.isNativeX12(e.charCodeAt(i)))return 0}else if(4===n&&4===r)for(o=Math.min(t+4,e.length),i=t;i<o;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return 0;return r},e.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var r;0===n?r=[0,1,1,1,1,1.25]:(r=[1,2,2,2,2,2.25])[n]=0;for(var o=0,i=new Uint8Array(6),a=[];;){if(t+o===e.length){I.fill(i,0),I.fill(a,0);var s=this.findMinimums(r,a,T.MAX_VALUE,i),l=this.getMinimumCount(i);if(a[0]===s)return 0;if(1===l){if(i[5]>0)return 5;if(i[4]>0)return 4;if(i[2]>0)return 2;if(i[3]>0)return 3}return 1}var c=e.charCodeAt(t+o);if(o++,this.isDigit(c)?r[0]+=.5:this.isExtendedASCII(c)?(r[0]=Math.ceil(r[0]),r[0]+=2):(r[0]=Math.ceil(r[0]),r[0]++),this.isNativeC40(c)?r[1]+=2/3:this.isExtendedASCII(c)?r[1]+=8/3:r[1]+=4/3,this.isNativeText(c)?r[2]+=2/3:this.isExtendedASCII(c)?r[2]+=8/3:r[2]+=4/3,this.isNativeX12(c)?r[3]+=2/3:this.isExtendedASCII(c)?r[3]+=13/3:r[3]+=10/3,this.isNativeEDIFACT(c)?r[4]+=3/4:this.isExtendedASCII(c)?r[4]+=4.25:r[4]+=3.25,this.isSpecialB256(c)?r[5]+=4:r[5]++,o>=4){if(I.fill(i,0),I.fill(a,0),this.findMinimums(r,a,T.MAX_VALUE,i),a[0]<this.min(a[5],a[1],a[2],a[3],a[4]))return 0;if(a[5]<a[0]||a[5]+1<this.min(a[1],a[2],a[3],a[4]))return 5;if(a[4]+1<this.min(a[5],a[1],a[2],a[3],a[0]))return 4;if(a[2]+1<this.min(a[5],a[1],a[4],a[3],a[0]))return 2;if(a[3]+1<this.min(a[5],a[1],a[4],a[2],a[0]))return 3;if(a[1]+1<this.min(a[0],a[5],a[4],a[2])){if(a[1]<a[3])return 1;if(a[1]===a[3]){for(var u=t+o+1;u<e.length;){var d=e.charCodeAt(u);if(this.isX12TermSep(d))return 3;if(!this.isNativeX12(d))break;u++}return 1}}}}},e.min=function(e,t,n,r,o){var i=Math.min(e,Math.min(t,Math.min(n,r)));return void 0===o?i:Math.min(i,o)},e.findMinimums=function(e,t,n,r){for(var o=0;o<6;o++){var i=t[o]=Math.ceil(e[o]);n>i&&(n=i,I.fill(r,0)),n===i&&(r[o]=r[o]+1)}return n},e.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},e.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},e.isExtendedASCII=function(e){return e>=128&&e<=255},e.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},e.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isX12TermSep=function(e){return 13===e||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},e.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},e.isSpecialB256=function(e){return!1},e.determineConsecutiveDigitCount=function(e,t){void 0===t&&(t=0);for(var n=e.length,r=t;r<n&&this.isDigit(e.charCodeAt(r));)r++;return r-t},e.illegalCharacter=function(e){var t=T.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},e}(),Mo=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function e(e){this.charset=e,this.name=e.name}return e.prototype.canEncode=function(e){try{return null!=H.encode(e,this.charset)}catch(la){return!1}},e}(),Bo=function(){function e(e,t,n){var r,o,i,a,s,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(e){return new Lo(bo.forName(e))}),this.encoders=[];var c=[];c.push(new Lo(wo.ISO_8859_1));for(var u=null!=t&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var f=!1;try{for(var p=(r=void 0,Mo(c)),h=p.next();!h.done;h=p.next()){var m=h.value,g=e.charAt(d);if(g.charCodeAt(0)===n||m.canEncode(g)){f=!0;break}}}catch(E){r={error:E}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}if(!f)try{for(var y=(i=void 0,Mo(this.ENCODERS)),v=y.next();!v.done;v=y.next())if((m=v.value).canEncode(e.charAt(d))){c.push(m),f=!0;break}}catch(_){i={error:_}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}f||(u=!0)}if(1!==c.length||u){this.encoders=[];var b=0;try{for(var w=Mo(c),x=w.next();!x.done;x=w.next())m=x.value,this.encoders[b++]=m}catch(A){s={error:A}}finally{try{x&&!x.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}else this.encoders=[c[0]];var C=-1;if(null!=t)for(d=0;d<this.encoders.length;d++)if(null!=this.encoders[d]&&t.name===this.encoders[d].name){C=d;break}this.priorityEncoderIndex=C}return e.prototype.length=function(){return this.encoders.length},e.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},e.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},e.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},e.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},e.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},e.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return H.encode(V.getCharAt(e),this.encoders[t].name)},e}(),Fo=function(){function e(e,t,n){this.fnc1=n;var r=new Bo(e,t,n);if(1===r.length())for(var o=0;o<this.bytes.length;o++){var i=e.charAt(o).charCodeAt(0);this.bytes[o]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,r,n)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},e.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},e.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new G,r=e;r<t;r++){if(this.isECI(r))throw new Error("value at "+r+" is not a character but an ECI");n.append(this.charAt(r))}return n.toString()},e.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},e.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},e.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},e.prototype.addEdge=function(e,t,n){(null==e[t][n.encoderIndex]||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},e.prototype.addEdges=function(e,t,n,r,o,i){var a=e.charAt(r).charCodeAt(0),s=0,l=t.length();t.getPriorityEncoderIndex()>=0&&(a===i||t.canEncode(a,t.getPriorityEncoderIndex()))&&(l=(s=t.getPriorityEncoderIndex())+1);for(var c=s;c<l;c++)(a===i||t.canEncode(a,c))&&this.addEdge(n,r+1,new Uo(a,t,c,o,i))},e.prototype.encodeMinimally=function(e,t,n){var r=e.length,o=new(Uo[r+1][t.length()]);this.addEdges(e,t,o,0,null,n);for(var i=1;i<=r;i++){for(var a=0;a<t.length();a++)null!=o[i][a]&&i<r&&this.addEdges(e,t,o,i,o[i][a],n);for(a=0;a<t.length();a++)o[i-1][a]=null}var s=-1,l=T.MAX_VALUE;for(a=0;a<t.length();a++)if(null!=o[r][a]){var c=o[r][a];c.cachedTotalSize<l&&(l=c.cachedTotalSize,s=a)}if(s<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],d=o[r][s];null!=d;){if(d.isFNC1())u.unshift(1e3);else{var f=t.encode(d.c,d.encoderIndex);for(i=f.length-1;i>=0;i--)u.unshift(255&f[i])}(null===d.previous?0:d.previous.encoderIndex)!==d.encoderIndex&&u.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}var p=[];for(i=0;i<p.length;i++)p[i]=u[i];return p},e}(),Uo=function(){function e(e,t,n,r,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=r,this.fnc1=o,this.c=e===o?1e3:e;var i=this.isFNC1()?1:t.encode(e,n).length;(null===r?0:r.encoderIndex)!==n&&(i+=3),null!=r&&(i+=r.cachedTotalSize),this.cachedTotalSize=i}return e.prototype.isFNC1=function(){return 1e3===this.c},e}(),Ho=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.ASCII=0]="ASCII",e[e.C40=1]="C40",e[e.TEXT=2]="TEXT",e[e.X12=3]="X12",e[e.EDF=4]="EDF",e[e.B256=5]="B256"}(xo||(xo={})),function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r)||this;return a.shape=o,a.macroId=i,a}Ho(t,e),t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape}}(Fo);var Vo=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}(),Go=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zo=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.value=n,o.bitCount=r,o}return Go(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+T.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(Vo),qo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r){var o=e.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=r,o}qo(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}(zo),new zo(null,0,0),Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0]),function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=r.next();!o.done;o=r.next()){var i=o.value;I.fill(i,-1)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15}(I.createInt32Array(6,6)),function(e){var t=V.getCharCode(" "),n=V.getCharCode("."),r=V.getCharCode(",");e[0][t]=1;for(var o=V.getCharCode("Z"),i=V.getCharCode("A"),a=i;a<=o;a++)e[0][a]=a-i+2;e[1][t]=1;var s=V.getCharCode("z"),l=V.getCharCode("a");for(a=l;a<=s;a++)e[1][a]=a-l+2;e[2][t]=1;var c=V.getCharCode("9"),u=V.getCharCode("0");for(a=u;a<=c;a++)e[2][a]=a-u+2;e[2][r]=12,e[2][n]=13;for(var d=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""],f=0;f<d.length;f++)e[3][V.getCharCode(d[f])]=f;var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(f=0;f<p.length;f++)V.getCharCode(p[f])>0&&(e[4][V.getCharCode(p[f])]=f)}(I.createInt32Array(5,256)),Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);var Wo,Xo,Yo={audio:!1,video:{facingMode:"environment"}},$o=function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(i,a)}s((r=r.apply(e,[])).next())})},Ko=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Jo=function(e,t,n,r){return new(n||(n=Promise))(function(t,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(i,a)}s((r=r.apply(e,[])).next())})},Zo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Qo={exports:{}},ei={};function ti(){return Xo||(Xo=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(Ae){console.error(Ae)}}(),Qo.exports=function(){if(Wo)return ei;Wo=1;var e=a();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal"),i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ei.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},ei.flushSync=function(e){var t=i.T,n=r.p;try{if(i.T=null,r.p=2,e)return e()}finally{i.T=t,r.p=n,r.d.f()}},ei.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,r.d.C(e,t))},ei.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},ei.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,o=s(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:o,integrity:i,fetchPriority:a}):"script"===n&&r.d.X(e,{crossOrigin:o,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},ei.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=s(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},ei.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,o=s(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:o,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},ei.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=s(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},ei.requestFormReset=function(e){r.d.r(e)},ei.unstable_batchedUpdates=function(e,t){return e(t)},ei.useFormState=function(e,t,n){return i.H.useFormState(e,t,n)},ei.useFormStatus=function(){return i.H.useHostTransitionStatus()},ei.version="19.2.3",ei}()),Qo.exports}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ni,ri,oi,ii,ai,si,li={exports:{}},ci={},ui=(ri||(ri=1,li.exports=function(){if(ni)return ci;ni=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==n.key&&(o=""+n.key),"key"in n)for(var i in r={},n)"key"!==i&&(r[i]=n[i]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:o,ref:void 0!==n?n:null,props:r}}return ci.Fragment=t,ci.jsx=n,ci.jsxs=n,ci}()),li.exports),di={exports:{}},fi={},pi={exports:{}},hi={};const mi=e((si||(si=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(Ae){console.error(Ae)}}(),di.exports=
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function(){if(ai)return fi;ai=1;var e=(ii||(ii=1,pi.exports=(oi||(oi=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,f=3,p=!1,h=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var o=n(c);null!==o;){if(null===o.callback)r(c);else{if(!(o.startTime<=e))break;r(c),o.sortIndex=o.expirationTime,t(l,o)}o=n(c)}}function x(e){if(m=!1,w(e),!h)if(null!==n(l))h=!0,E||(E=!0,C());else{var t=n(c);null!==t&&R(x,t.startTime-e)}}var C,E=!1,_=-1,A=5,S=-1;function N(){return!(!g&&e.unstable_now()-S<A)}function I(){if(g=!1,E){var t=e.unstable_now();S=t;var o=!0;try{e:{h=!1,m&&(m=!1,v(_),_=-1),p=!0;var i=f;try{t:{for(w(t),d=n(l);null!==d&&!(d.expirationTime>t&&N());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,w(t),o=!0;break t}d===n(l)&&r(l),w(t)}else r(l);d=n(l)}if(null!==d)o=!0;else{var u=n(c);null!==u&&R(x,u.startTime-t),o=!1}}break e}finally{d=null,f=i,p=!1}o=void 0}}finally{o?C():E=!1}}}if("function"==typeof b)C=function(){b(I)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=I,C=function(){O.postMessage(null)}}else C=function(){y(I,0)};function R(t,n){_=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,o,i){var a=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:o,priorityLevel:r,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(m?(v(_),_=-1):m=!0,R(x,i-a))):(r.sortIndex=s,t(l,r),h||p||(h=!0,E||(E=!0,C()))),r},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(hi)),hi)),pi.exports),t=a(),n=ti();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function s(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function l(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(i(e)!==e)throw Error(r(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function I(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case x:return"Suspense";case C:return"SuspenseList";case A:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case b:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var R=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},D=[],M=-1;function L(e){return{current:e}}function B(e){0>M||(e.current=D[M],D[M]=null,M--)}function F(e,t){M++,D[M]=e.current,e.current=t}var U,H,V=L(null),G=L(null),z=L(null),q=L(null);function W(e,t){switch(F(z,t),F(G,e),F(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Cd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=Ed(t=Cd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(V),F(V,e)}function X(){B(V),B(G),B(z)}function Y(e){null!==e.memoizedState&&F(q,e);var t=V.current,n=Ed(t,e.type);t!==n&&(F(G,e),F(V,n))}function $(e){G.current===e&&(B(V),B(G)),q.current===e&&(B(q),gf._currentValue=j)}function K(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+U+e+H}var J=!1;function Z(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"==typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===c.length)for(r=l.length-1,o=c.length-1;1<=r&&0<=o&&l[r]!==c[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==c[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==c[o]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?K(n):""}function Q(e,t){switch(e.tag){case 26:case 27:case 5:return K(e.type);case 16:return K("Lazy");case 13:return e.child!==t&&null!==t?K("Suspense Fallback"):K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return Z(e.type,!1);case 11:return Z(e.type.render,!1);case 1:return Z(e.type,!0);case 31:return K("Activity");default:return""}}function ee(e){try{var t="",n=null;do{t+=Q(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var te=Object.prototype.hasOwnProperty,ne=e.unstable_scheduleCallback,re=e.unstable_cancelCallback,oe=e.unstable_shouldYield,ie=e.unstable_requestPaint,ae=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,le=e.unstable_ImmediatePriority,ce=e.unstable_UserBlockingPriority,ue=e.unstable_NormalPriority,de=e.unstable_LowPriority,fe=e.unstable_IdlePriority,pe=e.log,he=e.unstable_setDisableYieldValue,me=null,ge=null;function ye(e){if("function"==typeof pe&&he(e),ge&&"function"==typeof ge.setStrictMode)try{ge.setStrictMode(me,e)}catch(t){}}var ve=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(be(e)/we|0)|0},be=Math.log,we=Math.LN2,xe=256,Ce=262144,Ee=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?o=_e(r):0!==(a&=s)?o=_e(a):n||0!==(n=s&~e)&&(o=_e(n)):0!==(s=r&~i)?o=_e(s):0!==a?o=_e(a):n||0!==(n=r&~e)&&(o=_e(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&4194048&n)?t:o}function Se(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ie(){var e=Ee;return!(62914560&(Ee<<=1))&&(Ee=4194304),e}function Te(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ve(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function ke(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ve(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Pe(e,t){var n=t&-t;return 0!==((n=42&n?1:je(n))&(e.suspendedLanes|t))?0:n}function je(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Me(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:kf(e.type)}function Le(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var Be=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Be,Ue="__reactProps$"+Be,He="__reactContainer$"+Be,Ve="__reactEvents$"+Be,Ge="__reactListeners$"+Be,ze="__reactHandles$"+Be,qe="__reactResources$"+Be,We="__reactMarker$"+Be;function Xe(e){delete e[Fe],delete e[Ue],delete e[Ve],delete e[Ge],delete e[ze]}function Ye(e){var t=e[Fe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Fe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hd(e);null!==e;){if(n=e[Fe])return n;e=Hd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Fe]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ke(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Je(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[We]=!0}var Qe=new Set,et={};function tt(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(et[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},it={};function at(e,t,n){if(o=t,te.call(it,o)||!te.call(ot,o)&&(rt.test(o)?it[o]=!0:(ot[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function st(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){if(!e._valueTracker){var t=ut(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ht=/[\n"\\]/g;function mt(e){return e.replace(ht,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!=typeof o&&"symbol"!=typeof o),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ct(s):e.removeAttribute("name")}function yt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=n){if(("submit"===i||"reset"===i)&&null==t)return void dt(e);n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:o)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a),dt(e)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,o){if(null==t){if(null!=o){if(null!=n)throw Error(r(92));if(R(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(o=e.textContent)===n&&""!==o&&null!==o&&(e.value=o),dt(e)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var o in n)!n.hasOwnProperty(o)||null!=t&&t.hasOwnProperty(o)||(0===o.indexOf("--")?e.setProperty(o,""):"float"===o?e.cssFloat="":e[o]="");for(var i in t)o=t[i],t.hasOwnProperty(i)&&n[i]!==o&&_t(e,i,o)}else for(var a in t)t.hasOwnProperty(a)&&_t(e,a,t[a])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),It=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return It.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ot(){}var Rt=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,jt=null;function Dt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=o[Ue]||null;if(!i)throw Error(r(90));gt(o,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(o=n[t]).form===e.form&&ft(o)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Lt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Pt||null!==jt)&&(ou(),Pt&&(t=Pt,e=jt,jt=Pt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var o=n[Ue]||null;if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Ft=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ut=!1;if(Ft)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(rp){Ut=!1}var Vt=null,Gt=null,zt=null;function qt(){if(zt)return zt;var e,t,n=Gt,r=n.length,o="value"in Vt?Vt.value:Vt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return zt=o.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Yt(){return!1}function $t(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Xt:Yt,this.isPropagationStopped=Yt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Kt,Jt,Zt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=$t(Qt),tn=d({},Qt,{view:0,detail:0}),nn=$t(tn),rn=d({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Kt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Kt=0,Zt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=$t(rn),an=$t(d({},rn,{dataTransfer:0})),sn=$t(d({},tn,{relatedTarget:0})),ln=$t(d({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=$t(d({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=$t(d({},Qt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function mn(){return hn}var gn=$t(d({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=$t(d({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=$t(d({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),bn=$t(d({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=$t(d({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=$t(d({},Qt,{newState:0,oldState:0})),Cn=[9,13,27,32],En=Ft&&"CompositionEvent"in window,_n=null;Ft&&"documentMode"in document&&(_n=document.documentMode);var An=Ft&&"TextEvent"in window&&!_n,Sn=Ft&&(!En||_n&&8<_n&&11>=_n),Nn=String.fromCharCode(32),In=!1;function Tn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1,kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!kn[e.type]:"textarea"===t}function jn(e,t,n,r){Pt?jt?jt.push(r):jt=[r]:Pt=r,0<(t=ld(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,Mn=null;function Ln(e){ed(e,0)}function Bn(e){if(ft(Ke(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Hn;if(Ft){var Vn="oninput"in document;if(!Vn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Vn="function"==typeof Gn.oninput}Hn=Vn}else Hn=!1;Un=Hn&&(!document.documentMode||9<document.documentMode)}function zn(){Dn&&(Dn.detachEvent("onpropertychange",qn),Mn=Dn=null)}function qn(e){if("value"===e.propertyName&&Bn(Mn)){var t=[];jn(t,Mn,e,kt(e)),Lt(Ln,t)}}function Wn(e,t,n){"focusin"===e?(zn(),Mn=n,(Dn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&zn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Mn)}function Yn(e,t){if("click"===e)return Bn(t)}function $n(e,t){if("input"===e||"change"===e)return Bn(t)}var Kn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Jn(e,t){if(Kn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!te.call(t,o)||!Kn(e[o],t[o]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=Ft&&"documentMode"in document&&11>=document.documentMode,or=null,ir=null,ar=null,sr=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==or||or!==pt(r)||(r="selectionStart"in(r=or)&&nr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Jn(ar,r)||(ar=r,0<(r=ld(ir,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},dr={},fr={};function pr(e){if(dr[e])return dr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return dr[e]=n[t];return e}Ft&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var hr=pr("animationend"),mr=pr("animationiteration"),gr=pr("animationstart"),yr=pr("transitionrun"),vr=pr("transitionstart"),br=pr("transitioncancel"),wr=pr("transitionend"),xr=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){xr.set(e,t),tt(t,[e])}Cr.push("scrollEnd");var _r="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ar=[],Sr=0,Nr=0;function Ir(){for(var e=Sr,t=Nr=Sr=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var o=Ar[t];Ar[t++]=null;var i=Ar[t];if(Ar[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&kr(n,o,i)}}function Tr(e,t,n,r){Ar[Sr++]=e,Ar[Sr++]=t,Ar[Sr++]=n,Ar[Sr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Tr(e,t,n,r),Pr(e)}function Rr(e,t){return Tr(e,null,null,t),Pr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-ve(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Pr(e){if(50<$c)throw $c=0,Kc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var jr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Dr(e,t,n,r)}function Lr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,o,i,a){var s=0;if(o=e,"function"==typeof e)Lr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Mr(31,n,t,i)).elementType=A,e.lanes=a,e;case m:return Hr(n.children,i,a,t);case g:s=8,i|=24;break;case y:return(e=Mr(12,n,t,2|i)).elementType=y,e.lanes=a,e;case x:return(e=Mr(13,n,t,i)).elementType=x,e.lanes=a,e;case C:return(e=Mr(19,n,t,i)).elementType=C,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:s=10;break e;case v:s=9;break e;case w:s=11;break e;case E:s=14;break e;case _:s=16,o=null;break e}s=29,n=Error(r(130,null===e?"null":typeof e,"")),o=null}return(t=Mr(s,n,t,i)).elementType=e,t.type=o,t.lanes=a,t}function Hr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Gr(e){var t=Mr(18,null,null,0);return t.stateNode=e,t}function zr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Wr(e,t){if("object"==typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ee(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ee(t)}}var Xr=[],Yr=0,$r=null,Kr=0,Jr=[],Zr=0,Qr=null,eo=1,to="";function no(e,t){Xr[Yr++]=Kr,Xr[Yr++]=$r,$r=e,Kr=t}function ro(e,t,n){Jr[Zr++]=eo,Jr[Zr++]=to,Jr[Zr++]=Qr,Qr=e;var r=eo;e=to;var o=32-ve(r)-1;r&=~(1<<o),n+=1;var i=32-ve(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,eo=1<<32-ve(t)+o|n<<o|r,to=i+e}else eo=1<<i|n<<o|r,to=e}function oo(e){null!==e.return&&(no(e,1),ro(e,1,0))}function io(e){for(;e===$r;)$r=Xr[--Yr],Xr[Yr]=null,Kr=Xr[--Yr],Xr[Yr]=null;for(;e===Qr;)Qr=Jr[--Zr],Jr[Zr]=null,to=Jr[--Zr],Jr[Zr]=null,eo=Jr[--Zr],Jr[Zr]=null}function ao(e,t){Jr[Zr++]=eo,Jr[Zr++]=to,Jr[Zr++]=Qr,eo=t.id,to=t.overflow,Qr=e}var so=null,lo=null,co=!1,uo=null,fo=!1,po=Error(r(519));function ho(e){throw wo(Wr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),po}function mo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Fe]=e,t[Ue]=r,n){case"dialog":td("cancel",t),td("close",t);break;case"iframe":case"object":case"embed":td("load",t);break;case"video":case"audio":for(n=0;n<Zu.length;n++)td(Zu[n],t);break;case"source":td("error",t);break;case"img":case"image":case"link":td("error",t),td("load",t);break;case"details":td("toggle",t);break;case"input":td("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":td("invalid",t);break;case"textarea":td("invalid",t),xt(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||hd(t.textContent,n)?(null!=r.popover&&(td("beforetoggle",t),td("toggle",t)),null!=r.onScroll&&td("scroll",t),null!=r.onScrollEnd&&td("scrollend",t),null!=r.onClick&&(t.onclick=Ot),t=!0):t=!1,t||ho(e,!0)}function go(e){for(so=e.return;so;)switch(so.tag){case 5:case 31:case 13:return void(fo=!1);case 27:case 3:return void(fo=!0);default:so=so.return}}function yo(e){if(e!==so)return!1;if(!co)return go(e),co=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||_d(e.type,e.memoizedProps)),t=!t),t&&lo&&ho(e),go(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));lo=Ud(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));lo=Ud(e)}else 27===n?(n=lo,Rd(e.type)?(e=Fd,Fd=null,lo=e):lo=n):lo=so?Bd(e.stateNode.nextSibling):null;return!0}function vo(){lo=so=null,co=!1}function bo(){var e=uo;return null!==e&&(null===Dc?Dc=e:Dc.push.apply(Dc,e),uo=null),e}function wo(e){null===uo?uo=[e]:uo.push(e)}var xo=L(null),Co=null,Eo=null;function _o(e,t,n){F(xo,t._currentValue),t._currentValue=n}function Ao(e){e._currentValue=xo.current,B(xo)}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t,n,o){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var s=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a.return,n,e),o||(s=null);break e}a=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(r(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),So(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function Io(e,t,n,o){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=i.type;Kn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(s=i.alternate))throw Error(r(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(gf):e=[gf])}i=i.return}null!==e&&No(t,e,n,o),t.flags|=262144}function To(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oo(e){Co=e,Eo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ro(e){return Po(Co,e)}function ko(e,t){return null===Co&&Oo(e),Po(e,t)}function Po(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Eo){if(null===e)throw Error(r(308));Eo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Eo=Eo.next=t;return n}var jo="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Do=e.unstable_scheduleCallback,Mo=e.unstable_NormalPriority,Lo={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bo(){return{controller:new jo,data:new Map,refCount:0}}function Fo(e){e.refCount--,0===e.refCount&&Do(Mo,function(){e.controller.abort()})}var Uo=null,Ho=0,Vo=0,Go=null;function zo(){if(0===--Ho&&null!==Uo){null!==Go&&(Go.status="fulfilled");var e=Uo;Uo=null,Vo=0,Go=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qo=k.S;k.S=function(e,t){Bc=ae(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Uo){var n=Uo=[];Ho=0,Vo=Xu(),Go={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ho++,t.then(zo,zo)}(0,t),null!==qo&&qo(e,t)};var Wo=L(null);function Xo(){var e=Wo.current;return null!==e?e:bc.pooledCache}function Yo(e,t){F(Wo,null===t?Wo.current:t.pool)}function $o(){var e=Xo();return null===e?null:{parent:Lo._currentValue,pool:e}}var Ko=Error(r(460)),Jo=Error(r(474)),Zo=Error(r(542)),Qo={then:function(){}};function ei(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ot,Ot),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ci(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ot,Ot);else{if(null!==(e=bc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ci(e=t.reason),e}throw si=t,Ko}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw si=t,Ko;throw t}}var si=null;function li(){if(null===si)throw Error(r(459));var e=si;return si=null,e}function ci(e){if(e===Ko||e===Zo)throw Error(r(483))}var ui=null,di=0;function mi(e){var t=di;return di+=1,null===ui&&(ui=[]),ni(ui,e,t)}function gi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function yi(e,t){if(t.$$typeof===f)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===_&&ri(o)===t.type)?(gi(t=i(t,n.props),n),t.return=e,t):(gi(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return gi(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=zr(t,e.mode,n)).return=e,t;case _:return f(e,t=ri(t),n)}if(R(t)||I(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,mi(t),n);if(t.$$typeof===b)return f(e,ko(e,t),n);yi(e,t)}return null}function g(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===o?c(e,t,n,r):null;case h:return n.key===o?u(e,t,n,r):null;case _:return g(e,t,n=ri(n),r)}if(R(n)||I(n))return null!==o?null:d(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,mi(n),r);if(n.$$typeof===b)return g(e,t,ko(e,n),r);yi(e,n)}return null}function y(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case _:return y(e,t,n,r=ri(r),o)}if(R(r)||I(r))return d(t,e=e.get(n)||null,r,o,null);if("function"==typeof r.then)return y(e,t,n,mi(r),o);if(r.$$typeof===b)return y(e,t,n,ko(t,r),o);yi(t,r)}return null}function v(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===m){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"==typeof w&&null!==w&&w.$$typeof===_&&ri(w)===c.type){n(l,c.sibling),gi(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(gi(d=Ur(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case h:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=zr(u,l.mode,d)).return=l,l=d}return s(l);case _:return v(l,c,u=ri(u),d)}if(R(u))return function(r,i,s,l){for(var c=null,u=null,d=i,p=i=0,h=null;null!==d&&p<s.length;p++){d.index>p?(h=d,d=null):h=d.sibling;var m=g(r,d,s[p],l);if(null===m){null===d&&(d=h);break}e&&d&&null===m.alternate&&t(r,d),i=a(m,i,p),null===u?c=m:u.sibling=m,u=m,d=h}if(p===s.length)return n(r,d),co&&no(r,p),c;if(null===d){for(;p<s.length;p++)null!==(d=f(r,s[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return co&&no(r,p),c}for(d=o(d);p<s.length;p++)null!==(h=y(d,r,p,s[p],l))&&(e&&null!==h.alternate&&d.delete(null===h.key?p:h.key),i=a(h,i,p),null===u?c=h:u.sibling=h,u=h);return e&&d.forEach(function(e){return t(r,e)}),co&&no(r,p),c}(l,c,u,d);if(I(u)){if("function"!=typeof(w=I(u)))throw Error(r(150));return function(i,s,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,p=s,h=s=0,m=null,v=l.next();null!==p&&!v.done;h++,v=l.next()){p.index>h?(m=p,p=null):m=p.sibling;var b=g(i,p,v.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),s=a(b,s,h),null===d?u=b:d.sibling=b,d=b,p=m}if(v.done)return n(i,p),co&&no(i,h),u;if(null===p){for(;!v.done;h++,v=l.next())null!==(v=f(i,v.value,c))&&(s=a(v,s,h),null===d?u=v:d.sibling=v,d=v);return co&&no(i,h),u}for(p=o(p);!v.done;h++,v=l.next())null!==(v=y(p,i,h,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?h:v.key),s=a(v,s,h),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),co&&no(i,h),u}(l,c,u=w.call(u),d)}if("function"==typeof u.then)return v(l,c,mi(u),d);if(u.$$typeof===b)return v(l,c,ko(l,u),d);yi(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Vr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{di=0;var o=v(e,t,n,r);return ui=null,o}catch(a){if(a===Ko||a===Zo)throw a;var i=Mr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var bi=vi(!0),wi=vi(!1),xi=!1;function Ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ei(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _i(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&vc){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Pr(e),kr(e,null,n),t}return Tr(e,r,t,n),Pr(e)}function Si(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}function Ni(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ii=!1;function Ti(){if(Ii&&null!==Go)throw Go}function Oi(e,t,n,r){Ii=!1;var o=e.updateQueue;xi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==i){var f=o.baseState;for(a=0,u=c=l=null,s=i;;){var p=-536870913&s.lane,h=p!==s.lane;if(h?(xc&p)===p:(r&p)===p){0!==p&&p===Vo&&(Ii=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){f=m.call(y,f,p);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(y,f,p):m))break e;f=d({},f,p);break e;case 2:xi=!0}}null!==(p=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=o.callbacks)?o.callbacks=[p]:h.push(p))}else h={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=f):u=u.next=h,a|=p;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}null===u&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),Tc|=a,e.lanes=a,e.memoizedState=f}}function Ri(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function ki(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ri(n[e],t)}var Pi=L(null),ji=L(0);function Di(e,t){F(ji,e=Nc),F(Pi,t),Nc=e|t.baseLanes}function Mi(){F(ji,Nc),F(Pi,Pi.current)}function Li(){Nc=ji.current,B(Pi),B(ji)}var Bi=L(null),Fi=null;function Ui(e){var t=e.alternate;F(qi,1&qi.current),F(Bi,e),null===Fi&&(null===t||null!==Pi.current||null!==t.memoizedState)&&(Fi=e)}function Hi(e){F(qi,qi.current),F(Bi,e),null===Fi&&(Fi=e)}function Vi(e){22===e.tag?(F(qi,qi.current),F(Bi,e),null===Fi&&(Fi=e)):Gi()}function Gi(){F(qi,qi.current),F(Bi,Bi.current)}function zi(e){B(Bi),Fi===e&&(Fi=null),B(qi)}var qi=L(0);function Wi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Md(n)||Ld(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xi=0,Yi=null,$i=null,Ki=null,Ji=!1,Zi=!1,Qi=!1,ea=0,ta=0,na=null,ra=0;function oa(){throw Error(r(321))}function ia(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function aa(e,t,n,r,o,i){return Xi=i,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=null===e||null===e.memoizedState?xs:Cs,Qi=!1,i=n(r,o),Qi=!1,Zi&&(i=la(t,n,r,o)),sa(e),i}function sa(e){k.H=ws;var t=null!==$i&&null!==$i.next;if(Xi=0,Ki=$i=Yi=null,Ji=!1,ta=0,na=null,t)throw Error(r(300));null===e||Bs||null!==(e=e.dependencies)&&To(e)&&(Bs=!0)}function la(e,t,n,o){Yi=e;var i=0;do{if(Zi&&(na=null),ta=0,Zi=!1,25<=i)throw Error(r(301));if(i+=1,Ki=$i=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}k.H=Es,a=t(n,o)}while(Zi);return a}function ca(){var e=k.H,t=e.useState()[0];return t="function"==typeof t.then?ma(t):t,e=e.useState()[0],(null!==$i?$i.memoizedState:null)!==e&&(Yi.flags|=1024),t}function ua(){var e=0!==ea;return ea=0,e}function da(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fa(e){if(Ji){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ji=!1}Xi=0,Ki=$i=Yi=null,Zi=!1,ta=ea=0,na=null}function pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ki?Yi.memoizedState=Ki=e:Ki=Ki.next=e,Ki}function ha(){if(null===$i){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=$i.next;var t=null===Ki?Yi.memoizedState:Ki.next;if(null!==t)Ki=t,$i=e;else{if(null===e){if(null===Yi.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:($i=e).memoizedState,baseState:$i.baseState,baseQueue:$i.baseQueue,queue:$i.queue,next:null},null===Ki?Yi.memoizedState=Ki=e:Ki=Ki.next=e}return Ki}function ma(e){var t=ta;return ta+=1,null===na&&(na=[]),e=ni(na,e,t),t=Yi,null===(null===Ki?t.memoizedState:Ki.next)&&(t=t.alternate,k.H=null===t||null===t.memoizedState?xs:Cs),e}function ga(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ma(e);if(e.$$typeof===b)return Ro(e)}throw Error(r(438,String(e)))}function ya(e){var t=null,n=Yi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Yi.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Yi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=S;return t.index++,n}function va(e,t){return"function"==typeof t?t(e):t}function ba(e){return wa(ha(),$i,e)}function wa(e,t,n){var o=e.queue;if(null===o)throw Error(r(311));o.lastRenderedReducer=n;var i=e.baseQueue,a=o.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}t.baseQueue=i=a,o.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=s=null,c=null,u=t=i.next,d=!1;do{var f=-536870913&u.lane;if(f!==u.lane?(xc&f)===f:(Xi&f)===f){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Vo&&(d=!0);else{if((Xi&p)===p){u=u.next,p===Vo&&(d=!0);continue}f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,s=a):c=c.next=f,Yi.lanes|=p,Tc|=p}f=u.action,Qi&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=a):c=c.next=p,Yi.lanes|=f,Tc|=f;u=u.next}while(null!==u&&u!==t);if(null===c?s=a:c.next=l,!Kn(a,e.memoizedState)&&(Bs=!0,d&&null!==(n=Go)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=c,o.lastRenderedState=a}return null===i&&(o.lanes=0),[e.memoizedState,o.dispatch]}function xa(e){var t=ha(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Kn(a,t.memoizedState)||(Bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,o]}function Ca(e,t,n){var o=Yi,i=ha(),a=co;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!Kn(($i||i).memoizedState,n);if(s&&(i.memoizedState=n,Bs=!0),i=i.queue,Xa(Aa.bind(null,o,i,e),[e]),i.getSnapshot!==t||s||null!==Ki&&1&Ki.memoizedState.tag){if(o.flags|=2048,Va(9,{destroy:void 0},_a.bind(null,o,i,n,t),null),null===bc)throw Error(r(349));a||127&Xi||Ea(o,t,n)}return n}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Yi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Yi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&Na(e)}function Aa(e,t,n){return n(function(){Sa(t)&&Na(e)})}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(r){return!0}}function Na(e){var t=Rr(e,2);null!==t&&Qc(t,e,2)}function Ia(e){var t=pa();if("function"==typeof e){var n=e;if(e=n(),Qi){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t}function Ta(e,t,n,r){return e.baseState=n,wa(e,$i,"function"==typeof r?r:va)}function Oa(e,t,n,o,i){if(ys(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==k.T?n(!0):a.isTransition=!1,o(a),null===(n=t.pending)?(a.next=t.pending=a,Ra(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Ra(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=k.T,a={};k.T=a;try{var s=n(o,r),l=k.S;null!==l&&l(a,s),ka(e,t,s)}catch(c){ja(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),k.T=i}}else try{ka(e,t,i=n(o,r))}catch(u){ja(e,t,u)}}function ka(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Pa(e,t,n)},function(n){return ja(e,t,n)}):Pa(e,t,n)}function Pa(e,t,n){t.status="fulfilled",t.value=n,Da(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ra(e,n)))}function ja(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Da(t),t=t.next}while(t!==r)}e.action=null}function Da(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ma(e,t){return t}function La(e,t){if(co){var n=bc.formState;if(null!==n){e:{var r=Yi;if(co){if(lo){t:{for(var o=lo,i=fo;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=Bd(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){lo=Bd(o.nextSibling),r="F!"===o.data;break e}}ho(r)}r=!1}r&&(t=n[0])}}return(n=pa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},n.queue=r,n=hs.bind(null,Yi,r),r.dispatch=n,r=Ia(!1),i=gs.bind(null,Yi,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=pa()).queue=o,n=Oa.bind(null,Yi,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ba(e){return Fa(ha(),$i,e)}function Fa(e,t,n){if(t=wa(e,t,Ma)[0],e=ba(va)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ma(t)}catch(a){if(a===Ko)throw Zo;throw a}else r=t;var o=(t=ha()).queue,i=o.dispatch;return n!==t.memoizedState&&(Yi.flags|=2048,Va(9,{destroy:void 0},Ua.bind(null,o,n),null)),[r,i,e]}function Ua(e,t){e.action=t}function Ha(e){var t=ha(),n=$i;if(null!==n)return Fa(t,n,e);ha(),t=t.memoizedState;var r=(n=ha()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Va(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Yi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Yi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ga(){return ha().memoizedState}function za(e,t,n,r){var o=pa();Yi.flags|=e,o.memoizedState=Va(1|t,{destroy:void 0},n,void 0===r?null:r)}function qa(e,t,n,r){var o=ha();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==$i&&null!==r&&ia(r,$i.memoizedState.deps)?o.memoizedState=Va(t,i,n,r):(Yi.flags|=e,o.memoizedState=Va(1|t,i,n,r))}function Wa(e,t){za(8390656,8,e,t)}function Xa(e,t){qa(2048,8,e,t)}function Ya(e){var t=ha().memoizedState;return function(e){Yi.flags|=4;var t=Yi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Yi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&vc)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function $a(e,t){return qa(4,2,e,t)}function Ka(e,t){return qa(4,4,e,t)}function Ja(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Za(e,t,n){n=null!=n?n.concat([e]):null,qa(4,4,Ja.bind(null,t,e),n)}function Qa(){}function es(e,t){var n=ha();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ia(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ts(e,t){var n=ha();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ia(t,r[1]))return r[0];if(r=e(),Qi){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r}function ns(e,t,n){return void 0===n||1073741824&Xi&&!(261930&xc)?e.memoizedState=t:(e.memoizedState=n,e=Zc(),Yi.lanes|=e,Tc|=e,n)}function rs(e,t,n,r){return Kn(n,t)?n:null!==Pi.current?(e=ns(e,n,r),Kn(e,t)||(Bs=!0),e):42&Xi&&(!(1073741824&Xi)||261930&xc)?(e=Zc(),Yi.lanes|=e,Tc|=e,t):(Bs=!0,e.memoizedState=n)}function os(e,t,n,r,o){var i=P.p;P.p=0!==i&&8>i?i:8;var a,s,l,c=k.T,u={};k.T=u,gs(e,!1,t,n);try{var d=o(),f=k.S;null!==f&&f(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?ms(e,t,(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),Jc()):ms(e,t,r,Jc())}catch(p){ms(e,t,{then:function(){},status:"rejected",reason:p},Jc())}finally{P.p=i,null!==c&&null!==u.types&&(c.types=u.types),k.T=c}}function is(){}function as(e,t,n,o){if(5!==e.tag)throw Error(r(476));var i=ss(e).queue;os(e,i,t,j,null===n?is:function(){return ls(e),n(o)})}function ss(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ls(e){var t=ss(e);null===t.next&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},Jc())}function cs(){return Ro(gf)}function us(){return ha().memoizedState}function ds(){return ha().memoizedState}function fs(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Jc(),r=Ai(t,e=_i(n),n);return null!==r&&(Qc(r,t,n),Si(r,t,n)),t={cache:Bo()},void(e.payload=t)}t=t.return}}function ps(e,t,n){var r=Jc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ys(e)?vs(t,n):null!==(n=Or(e,t,n,r))&&(Qc(n,e,r),bs(n,t,r))}function hs(e,t,n){ms(e,t,n,Jc())}function ms(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ys(e))vs(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Kn(s,a))return Tr(e,t,o,0),null===bc&&Ir(),!1}catch(l){}if(null!==(n=Or(e,t,o,r)))return Qc(n,e,r),bs(n,t,r),!0}return!1}function gs(e,t,n,o){if(o={lane:2,revertLane:Xu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ys(e)){if(t)throw Error(r(479))}else null!==(t=Or(e,n,o,2))&&Qc(t,e,2)}function ys(e){var t=e.alternate;return e===Yi||null!==t&&t===Yi}function vs(e,t){Zi=Ji=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bs(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}var ws={readContext:Ro,use:ga,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa};ws.useEffectEvent=oa;var xs={readContext:Ro,use:ga,useCallback:function(e,t){return pa().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Wa,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,za(4194308,4,Ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){za(4,2,e,t)},useMemo:function(e,t){var n=pa();t=void 0===t?null:t;var r=e();if(Qi){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=pa();if(void 0!==n){var o=n(t);if(Qi){ye(!0);try{n(t)}finally{ye(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=ps.bind(null,Yi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},pa().memoizedState=e},useState:function(e){var t=(e=Ia(e)).queue,n=hs.bind(null,Yi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return ns(pa(),e,t)},useTransition:function(){var e=Ia(!1);return e=os.bind(null,Yi,e.queue,!0,!1),pa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var o=Yi,i=pa();if(co){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===bc)throw Error(r(349));127&xc||Ea(o,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Wa(Aa.bind(null,o,a,e),[e]),o.flags|=2048,Va(9,{destroy:void 0},_a.bind(null,o,a,n,t),null),n},useId:function(){var e=pa(),t=bc.identifierPrefix;if(co){var n=to;t="_"+t+"R_"+(n=(eo&~(1<<32-ve(eo)-1)).toString(32)+n),0<(n=ea++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=ra++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:cs,useFormState:La,useActionState:La,useOptimistic:function(e){var t=pa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=gs.bind(null,Yi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ya,useCacheRefresh:function(){return pa().memoizedState=fs.bind(null,Yi)},useEffectEvent:function(e){var t=pa(),n={impl:e};return t.memoizedState=n,function(){if(2&vc)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},Cs={readContext:Ro,use:ga,useCallback:es,useContext:Ro,useEffect:Xa,useImperativeHandle:Za,useInsertionEffect:$a,useLayoutEffect:Ka,useMemo:ts,useReducer:ba,useRef:Ga,useState:function(){return ba(va)},useDebugValue:Qa,useDeferredValue:function(e,t){return rs(ha(),$i.memoizedState,e,t)},useTransition:function(){var e=ba(va)[0],t=ha().memoizedState;return["boolean"==typeof e?e:ma(e),t]},useSyncExternalStore:Ca,useId:us,useHostTransitionStatus:cs,useFormState:Ba,useActionState:Ba,useOptimistic:function(e,t){return Ta(ha(),0,e,t)},useMemoCache:ya,useCacheRefresh:ds};Cs.useEffectEvent=Ya;var Es={readContext:Ro,use:ga,useCallback:es,useContext:Ro,useEffect:Xa,useImperativeHandle:Za,useInsertionEffect:$a,useLayoutEffect:Ka,useMemo:ts,useReducer:xa,useRef:Ga,useState:function(){return xa(va)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=ha();return null===$i?ns(n,e,t):rs(n,$i.memoizedState,e,t)},useTransition:function(){var e=xa(va)[0],t=ha().memoizedState;return["boolean"==typeof e?e:ma(e),t]},useSyncExternalStore:Ca,useId:us,useHostTransitionStatus:cs,useFormState:Ha,useActionState:Ha,useOptimistic:function(e,t){var n=ha();return null!==$i?Ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ya,useCacheRefresh:ds};function _s(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Es.useEffectEvent=Ya;var As={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jc(),o=_i(r);o.payload=t,null!=n&&(o.callback=n),null!==(t=Ai(e,o,r))&&(Qc(t,e,r),Si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jc(),o=_i(r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Ai(e,o,r))&&(Qc(t,e,r),Si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jc(),r=_i(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=Ai(e,r,n))&&(Qc(t,e,n),Si(t,e,n))}};function Ss(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!(t.prototype&&t.prototype.isPureReactComponent&&Jn(n,r)&&Jn(o,i))}function Ns(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&As.enqueueReplaceState(t,t.state,null)}function Is(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=d({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function Ts(e){_r(e)}function Os(e){console.error(e)}function Rs(e){_r(e)}function ks(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ps(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function js(e,t,n){return(n=_i(n)).tag=3,n.payload={element:null},n.callback=function(){ks(e,t)},n}function Ds(e){return(e=_i(e)).tag=3,e}function Ms(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"==typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){Ps(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Ps(t,n,r),"function"!=typeof o&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ls=Error(r(461)),Bs=!1;function Fs(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function Us(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Oo(t),r=aa(e,t,n,a,i,o),s=ua(),null===e||Bs?(co&&s&&oo(t),t.flags|=1,Fs(e,t,r,o),t.child):(da(e,t,o),cl(e,t,o))}function Hs(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||Lr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Vs(e,t,i,r,o))}if(i=e.child,!ul(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,r)&&e.ref===t.ref)return cl(e,t,o)}return t.flags|=1,(e=Br(i,r)).ref=t.ref,e.return=t,t.child=e}function Vs(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(Bs=!1,t.pendingProps=r=i,!ul(e,o))return t.lanes=e.lanes,cl(e,t,o);131072&e.flags&&(Bs=!0)}}return $s(e,t,n,r,o)}function Gs(e,t,n,r){var o=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~i}else r=0,t.child=null;return qs(e,t,i,n,r)}if(!(536870912&n))return r=t.lanes=536870912,qs(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yo(0,null!==i?i.cachePool:null),null!==i?Di(t,i):Mi(),Vi(t)}else null!==i?(Yo(0,i.cachePool),Di(t,i),Gi(),t.memoizedState=null):(null!==e&&Yo(0,null),Mi(),Gi());return Fs(e,t,o,n),t.child}function zs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qs(e,t,n,r,o){var i=Xo();return i=null===i?null:{parent:Lo._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Yo(0,null),Mi(),Vi(t),null!==e&&Io(e,t,r,!0),t.childLanes=o,null}function Ws(e,t){return(t=ol({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Xs(e,t,n){return bi(t,e.child,null,n),(e=Ws(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function Ys(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function $s(e,t,n,r,o){return Oo(t),n=aa(e,t,n,r,void 0,o),r=ua(),null===e||Bs?(co&&r&&oo(t),t.flags|=1,Fs(e,t,n,o),t.child):(da(e,t,o),cl(e,t,o))}function Ks(e,t,n,r,o,i){return Oo(t),t.updateQueue=null,n=la(t,r,n,o),sa(e),r=ua(),null===e||Bs?(co&&r&&oo(t),t.flags|=1,Fs(e,t,n,i),t.child):(da(e,t,i),cl(e,t,i))}function Js(e,t,n,r,o){if(Oo(t),null===t.stateNode){var i=jr,a=n.contextType;"object"==typeof a&&null!==a&&(i=Ro(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=As,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},Ci(t),a=n.contextType,i.context="object"==typeof a&&null!==a?Ro(a):jr,i.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(_s(t,n,a,r),i.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(a=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&As.enqueueReplaceState(i,i.state,null),Oi(t,r,i,o),Ti(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=Is(n,s);i.props=l;var c=i.context,u=n.contextType;a=jr,"object"==typeof u&&null!==u&&(a=Ro(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s||c!==a)&&Ns(t,i,r,a),xi=!1;var f=t.memoizedState;i.state=f,Oi(t,r,i,o),Ti(),c=t.memoizedState,s||f!==c||xi?("function"==typeof d&&(_s(t,n,d,r),c=t.memoizedState),(l=xi||Ss(t,n,l,r,f,c,a))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ei(e,t),u=Is(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,f=i.context,c=n.contextType,l=jr,"object"==typeof c&&null!==c&&(l=Ro(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a!==d||f!==l)&&Ns(t,i,r,l),xi=!1,f=t.memoizedState,i.state=f,Oi(t,r,i,o),Ti();var p=t.memoizedState;a!==d||f!==p||xi||null!==e&&null!==e.dependencies&&To(e.dependencies)?("function"==typeof s&&(_s(t,n,s,r),p=t.memoizedState),(u=xi||Ss(t,n,u,r,f,p,l)||null!==e&&null!==e.dependencies&&To(e.dependencies))?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ys(e,t),r=!!(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=bi(t,e.child,null,o),t.child=bi(t,null,n,o)):Fs(e,t,n,o),t.memoizedState=i.state,e=t.child):e=cl(e,t,o),e}function Zs(e,t,n,r){return vo(),t.flags|=256,Fs(e,t,n,r),t.child}var Qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function el(e){return{baseLanes:e,cachePool:$o()}}function tl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=kc),e}function nl(e,t,n){var o,i=t.pendingProps,a=!1,s=!!(128&t.flags);if((o=s)||(o=(null===e||null!==e.memoizedState)&&!!(2&qi.current)),o&&(a=!0,t.flags&=-129),o=!!(32&t.flags),t.flags&=-33,null===e){if(co){if(a?Ui(t):Gi(),(e=lo)?null!==(e=null!==(e=Dd(e,fo))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==Qr?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,so=t,lo=null):e=null,null===e)throw ho(t);return Ld(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Gi(),l=ol({mode:"hidden",children:l},a=t.mode),i=Hr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=el(n),i.childLanes=tl(e,o,n),t.memoizedState=Qs,zs(null,i)):(Ui(t),rl(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Ui(t),t.flags&=-257,t=il(e,t,n)):null!==t.memoizedState?(Gi(),t.child=e.child,t.flags|=128,t=null):(Gi(),l=i.fallback,a=t.mode,i=ol({mode:"visible",children:i.children},a),(l=Hr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,bi(t,e.child,null,n),(i=t.child).memoizedState=el(n),i.childLanes=tl(e,o,n),t.memoizedState=Qs,t=zs(null,i));else if(Ui(t),Ld(l)){if(o=l.nextSibling&&l.nextSibling.dataset)var u=o.dgst;o=u,(i=Error(r(419))).stack="",i.digest=o,wo({value:i,source:null,stack:null}),t=il(e,t,n)}else if(Bs||Io(e,t,n,!1),o=0!==(n&e.childLanes),Bs||o){if(null!==(o=bc)&&0!==(i=Pe(o,n))&&i!==c.retryLane)throw c.retryLane=i,Rr(e,i),Qc(o,e,i),Ls;Md(l)||du(),t=il(e,t,n)}else Md(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,lo=Bd(l.nextSibling),so=t,co=!0,uo=null,fo=!1,null!==e&&ao(t,e),(t=rl(t,i.children)).flags|=4096);return t}return a?(Gi(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=Br(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Hr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,zs(null,i),i=t.child,null===(l=e.child.memoizedState)?l=el(n):(null!==(a=l.cachePool)?(c=Lo._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=$o(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=tl(e,o,n),t.memoizedState=Qs,zs(e.child,i)):(Ui(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(o=t.deletions)?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function rl(e,t){return(t=ol({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ol(e,t){return(e=Mr(22,e,null,t)).lanes=0,e}function il(e,t,n){return bi(t,e.child,null,n),(e=rl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function al(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function sl(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o,a.treeForkCount=i)}function ll(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;r=r.children;var a=qi.current,s=!!(2&a);if(s?(a=1&a|2,t.flags|=128):a&=1,F(qi,a),Fs(e,t,r,n),r=co?Kr:0,!s&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&al(e,n,t);else if(19===e.tag)al(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Wi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),sl(t,!1,o,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Wi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}sl(t,!0,n,null,i,r);break;case"together":sl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function cl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Io(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ul(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!To(e))}function dl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Bs=!0;else{if(!(ul(e,n)||128&t.flags))return Bs=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),_o(0,Lo,e.memoizedState.cache),vo();break;case 27:case 5:Y(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:_o(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Hi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ui(t),t.flags|=128,null):0!==(n&t.child.childLanes)?nl(e,t,n):(Ui(t),null!==(e=cl(e,t,n))?e.sibling:null);Ui(t);break;case 19:var o=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Io(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return ll(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),F(qi,qi.current),r)break;return null;case 22:return t.lanes=0,Gs(e,t,n,t.pendingProps);case 24:_o(0,Lo,e.memoizedState.cache)}return cl(e,t,n)}(e,t,n);Bs=!!(131072&e.flags)}else Bs=!1,co&&1048576&t.flags&&ro(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var i=e.$$typeof;if(i===w){t.tag=11,t=Us(null,t,e,o,n);break e}if(i===E){t.tag=14,t=Hs(null,t,e,o,n);break e}}throw t=O(e)||e,Error(r(306,t,""))}Lr(e)?(o=Is(e,o),t.tag=1,t=Js(null,t,e,o,n)):(t.tag=0,t=$s(null,t,e,o,n))}return t;case 0:return $s(e,t,t.type,t.pendingProps,n);case 1:return Js(e,t,o=t.type,i=Is(o,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(r(387));o=t.pendingProps;var a=t.memoizedState;i=a.element,Ei(e,t),Oi(t,o,null,n);var s=t.memoizedState;if(o=s.cache,_o(0,Lo,o),o!==a.cache&&No(t,[Lo],n,!0),Ti(),o=s.element,a.isDehydrated){if(a={element:o,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Zs(e,t,o,n);break e}if(o!==i){wo(i=Wr(Error(r(424)),t)),t=Zs(e,t,o,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,lo=Bd(e.firstChild),so=t,co=!0,uo=null,fo=!0,n=wi(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vo(),o===i){t=cl(e,t,n);break e}Fs(e,t,o,n)}t=t.child}return t;case 26:return Ys(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:co||(n=t.type,e=t.pendingProps,(o=xd(z.current).createElement(n))[Fe]=t,o[Ue]=e,yd(o,n,e),Ze(o),t.stateNode=o):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&co&&(o=t.stateNode=Vd(t.type,t.pendingProps,z.current),so=t,fo=!0,i=lo,Rd(t.type)?(Fd=i,lo=Bd(o.firstChild)):lo=i),Fs(e,t,t.pendingProps.children,n),Ys(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&co&&((i=o=lo)&&(null!==(o=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=Bd(e.nextSibling)))break}return null}(o,t.type,t.pendingProps,fo))?(t.stateNode=o,so=t,lo=Bd(o.firstChild),fo=!1,i=!0):i=!1),i||ho(t)),Y(t),i=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,_d(i,a)?o=null:null!==s&&_d(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=aa(e,t,ca,null,null,n),gf._currentValue=i),Ys(e,t),Fs(e,t,o,n),t.child;case 6:return null===e&&co&&((e=n=lo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Bd(e.nextSibling)))return null}return e}(n,t.pendingProps,fo))?(t.stateNode=n,so=t,lo=null,e=!0):e=!1),e||ho(t)),null;case 13:return nl(e,t,n);case 4:return W(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=bi(t,null,o,n):Fs(e,t,o,n),t.child;case 11:return Us(e,t,t.type,t.pendingProps,n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:return o=t.pendingProps,_o(0,t.type,o.value),Fs(e,t,o.children,n),t.child;case 9:return i=t.type._context,o=t.pendingProps.children,Oo(t),o=o(i=Ro(i)),t.flags|=1,Fs(e,t,o,n),t.child;case 14:return Hs(e,t,t.type,t.pendingProps,n);case 15:return Vs(e,t,t.type,t.pendingProps,n);case 19:return ll(e,t,n);case 31:return function(e,t,n){var o=t.pendingProps,i=!!(128&t.flags);if(t.flags&=-129,null===e){if(co){if("hidden"===o.mode)return e=Ws(t,o),t.lanes=536870912,zs(null,e);if(Hi(t),(e=lo)?null!==(e=null!==(e=Dd(e,fo))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==Qr?{id:eo,overflow:to}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,so=t,lo=null):e=null,null===e)throw ho(t);return t.lanes=536870912,null}return Ws(t,o)}var a=e.memoizedState;if(null!==a){var s=a.dehydrated;if(Hi(t),i)if(256&t.flags)t.flags&=-257,t=Xs(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Bs||Io(e,t,n,!1),i=0!==(n&e.childLanes),Bs||i){if(null!==(o=bc)&&0!==(s=Pe(o,n))&&s!==a.retryLane)throw a.retryLane=s,Rr(e,s),Qc(o,e,s),Ls;du(),t=Xs(e,t,n)}else e=a.treeContext,lo=Bd(s.nextSibling),so=t,co=!0,uo=null,fo=!1,null!==e&&ao(t,e),(t=Ws(t,o)).flags|=4096;return t}return(e=Br(e.child,{mode:o.mode,children:o.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Gs(e,t,n,t.pendingProps);case 24:return Oo(t),o=Ro(Lo),null===e?(null===(i=Xo())&&(i=bc,a=Bo(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:o,cache:i},Ci(t),_o(0,Lo,i)):(0!==(e.lanes&n)&&(Ei(e,t),Oi(t,null,null,n),Ti()),i=e.memoizedState,a=t.memoizedState,i.parent!==o?(i={parent:o,cache:o},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_o(0,Lo,o)):(o=a.cache,_o(0,Lo,o),o!==i.cache&&No(t,[Lo],n,!0))),Fs(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function fl(e){e.flags|=4}function pl(e,t,n,r,o){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!lu())throw si=Qo,Jo;e.flags|=8192}}else e.flags&=-16777217}function hl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!uf(t)){if(!lu())throw si=Qo,Jo;e.flags|=8192}}function ml(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,Pc|=t)}function gl(e,t){if(!co)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vl(e,t,n){var o=t.pendingProps;switch(io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return yl(t),null;case 3:return n=t.stateNode,o=null,null!==e&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Ao(Lo),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yo(t)?fl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,bo())),yl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(fl(t),null!==a?(yl(t),hl(t,a)):(yl(t),pl(t,i,0,0,n))):a?a!==e.memoizedState?(fl(t),yl(t),hl(t,a)):(yl(t),t.flags&=-16777217):((e=e.memoizedProps)!==o&&fl(t),yl(t),pl(t,i,0,0,n)),null;case 27:if($(t),n=z.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&fl(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return yl(t),null}e=V.current,yo(t)?mo(t):(e=Vd(i,o,n),t.stateNode=e,fl(t))}return yl(t),null;case 5:if($(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&fl(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return yl(t),null}if(a=V.current,yo(t))mo(t);else{var s=xd(z.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=s.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof o.is?s.createElement("select",{is:o.is}):s.createElement("select"),o.multiple?a.multiple=!0:o.size&&(a.size=o.size);break;default:a="string"==typeof o.is?s.createElement(i,{is:o.is}):s.createElement(i)}}a[Fe]=t,a[Ue]=o;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)a.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;e:switch(yd(a,i,o),i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&fl(t)}}return yl(t),pl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==o&&fl(t);else{if("string"!=typeof o&&null===t.stateNode)throw Error(r(166));if(e=z.current,yo(t)){if(e=t.stateNode,n=t.memoizedProps,o=null,null!==(i=so))switch(i.tag){case 27:case 5:o=i.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===n||null!==o&&!0===o.suppressHydrationWarning||hd(e.nodeValue,n)))||ho(t,!0)}else(e=xd(e).createTextNode(o))[Fe]=t,t.stateNode=e}return yl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(o=yo(t),null!==n){if(null===e){if(!o)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[Fe]=t}else vo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;yl(t),e=!1}else n=bo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(128&t.flags)throw Error(r(558))}return yl(t),null;case 13:if(o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=yo(t),null!==o&&null!==o.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[Fe]=t}else vo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;yl(t),i=!1}else i=bo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),128&t.flags?(t.lanes=n,t):(n=null!==o,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(o=t.child).alternate&&null!==o.alternate.memoizedState&&null!==o.alternate.memoizedState.cachePool&&(i=o.alternate.memoizedState.cachePool.pool),a=null,null!==o.memoizedState&&null!==o.memoizedState.cachePool&&(a=o.memoizedState.cachePool.pool),a!==i&&(o.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ml(t,t.updateQueue),yl(t),null);case 4:return X(),null===e&&od(t.stateNode.containerInfo),yl(t),null;case 10:return Ao(t.type),yl(t),null;case 19:if(B(qi),null===(o=t.memoizedState))return yl(t),null;if(i=!!(128&t.flags),null===(a=o.rendering))if(i)gl(o,!1);else{if(0!==Ic||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=Wi(e))){for(t.flags|=128,gl(o,!1),e=a.updateQueue,t.updateQueue=e,ml(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return F(qi,1&qi.current|2),co&&no(t,o.treeForkCount),t.child}e=e.sibling}null!==o.tail&&ae()>Fc&&(t.flags|=128,i=!0,gl(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Wi(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ml(t,e),gl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!co)return yl(t),null}else 2*ae()-o.renderingStartTime>Fc&&536870912!==n&&(t.flags|=128,i=!0,gl(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=o.last)?e.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ae(),e.sibling=null,n=qi.current,F(qi,i?1&n|2:1&n),co&&no(t,o.treeForkCount),e):(yl(t),null);case 22:case 23:return zi(t),Li(),o=null!==t.memoizedState,null!==e?null!==e.memoizedState!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?!!(536870912&n)&&!(128&t.flags)&&(yl(t),6&t.subtreeFlags&&(t.flags|=8192)):yl(t),null!==(n=t.updateQueue)&&ml(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),o=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(o=t.memoizedState.cachePool.pool),o!==n&&(t.flags|=2048),null!==e&&B(Wo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ao(Lo),yl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function bl(e,t){switch(io(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ao(Lo),X(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(r(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(qi),null;case 4:return X(),null;case 10:return Ao(t.type),null;case 22:case 23:return zi(t),Li(),null!==e&&B(Wo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ao(Lo),null;default:return null}}function wl(e,t){switch(io(t),t.tag){case 3:Ao(Lo),X();break;case 26:case 27:case 5:$(t);break;case 4:X();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:B(qi);break;case 10:Ao(t.type);break;case 22:case 23:zi(t),Li(),null!==e&&B(Wo);break;case 24:Ao(Lo)}}function xl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(s){Iu(t,t.return,s)}}function Cl(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var l=n,c=s;try{c()}catch(u){Iu(o,l,u)}}}r=r.next}while(r!==i)}}catch(u){Iu(t,t.return,u)}}function El(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ki(t,n)}catch(r){Iu(e,e.return,r)}}}function _l(e,t,n){n.props=Is(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Iu(e,t,r)}}function Al(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Iu(e,t,o)}}function Sl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(o){Iu(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(i){Iu(e,t,i)}else n.current=null}function Nl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Iu(e,e.return,o)}}function Il(e,t,n){try{var o=e.stateNode;!function(e,t,n,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,l=null,c=null,u=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&null!=f)switch(h){case"checked":case"value":break;case"defaultValue":c=f;default:o.hasOwnProperty(h)||md(e,t,h,null,o,f)}}for(var p in o){var h=o[p];if(f=n[p],o.hasOwnProperty(p)&&(null!=h||null!=f))switch(p){case"type":a=h;break;case"name":i=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:h!==f&&md(e,t,p,h,o,f)}}return void gt(e,s,l,c,u,d,a,i);case"select":for(a in h=s=l=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":h=c;default:o.hasOwnProperty(a)||md(e,t,a,null,o,c)}for(i in o)if(a=o[i],c=n[i],o.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==c&&md(e,t,i,a,o,c)}return t=l,n=s,o=h,void(null!=p?bt(e,!!n,p,!1):!!o!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in h=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!o.hasOwnProperty(l))switch(l){case"value":case"children":break;default:md(e,t,l,null,o,i)}for(s in o)if(i=o[s],a=n[s],o.hasOwnProperty(s)&&(null!=i||null!=a))switch(s){case"value":p=i;break;case"defaultValue":h=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(r(91));break;default:i!==a&&md(e,t,s,i,o,a)}return void wt(e,p,h);case"option":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!o.hasOwnProperty(m)&&("selected"===m?e.selected=!1:md(e,t,m,null,o,p));for(c in o)p=o[c],h=n[c],!o.hasOwnProperty(c)||p===h||null==p&&null==h||("selected"===c?e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p:md(e,t,c,p,o,h));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!o.hasOwnProperty(g)&&md(e,t,g,null,o,p);for(u in o)if(p=o[u],h=n[u],o.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:md(e,t,u,p,o,h)}return;default:if(St(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!o.hasOwnProperty(y)&&gd(e,t,y,void 0,o,p);for(d in o)p=o[d],h=n[d],!o.hasOwnProperty(d)||p===h||void 0===p&&void 0===h||gd(e,t,d,p,o,h);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!o.hasOwnProperty(v)&&md(e,t,v,null,o,p);for(f in o)p=o[f],h=n[f],!o.hasOwnProperty(f)||p===h||null==p&&null==h||md(e,t,f,p,o,h)}(o,e.type,n,t),o[Ue]=t}catch(i){Iu(e,e.return,i)}}function Tl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Rd(e.type)||4===e.tag}function Ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Tl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Rd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Rl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ot));else if(4!==r&&(27===r&&Rd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Rl(e,t,n),e=e.sibling;null!==e;)Rl(e,t,n),e=e.sibling}function kl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Rd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(kl(e,t,n),e=e.sibling;null!==e;)kl(e,t,n),e=e.sibling}function Pl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);yd(t,r,n),t[Fe]=e,t[Ue]=n}catch(i){Iu(e,e.return,i)}}var jl=!1,Dl=!1,Ml=!1,Ll="function"==typeof WeakSet?WeakSet:Set,Bl=null;function Fl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ql(e,n),4&r&&xl(5,n);break;case 1:if(Ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Iu(n,n.return,a)}else{var o=Is(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Iu(n,n.return,s)}}64&r&&El(n),512&r&&Al(n,n.return);break;case 3:if(Ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ki(e,t)}catch(a){Iu(n,n.return,a)}}break;case 27:null===t&&4&r&&Pl(n);case 26:case 5:Ql(e,n),null===t&&4&r&&Nl(n),512&r&&Al(n,n.return);break;case 12:Ql(e,n);break;case 31:Ql(e,n),4&r&&ql(e,n);break;case 13:Ql(e,n),4&r&&Wl(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=ku.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||jl)){t=null!==t&&null!==t.memoizedState||Dl,o=jl;var i=Dl;jl=r,(Dl=t)&&!i?tc(e,n,!!(8772&n.subtreeFlags)):Ql(e,n),jl=o,Dl=i}break;case 30:break;default:Ql(e,n)}}function Ul(e){var t=e.alternate;null!==t&&(e.alternate=null,Ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Xe(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Hl=null,Vl=!1;function Gl(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ge&&"function"==typeof ge.onCommitFiberUnmount)try{ge.onCommitFiberUnmount(me,n)}catch(i){}switch(n.tag){case 26:Dl||Sl(n,t),Gl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Dl||Sl(n,t);var r=Hl,o=Vl;Rd(n.type)&&(Hl=n.stateNode,Vl=!1),Gl(e,t,n),Gd(n.stateNode),Hl=r,Vl=o;break;case 5:Dl||Sl(n,t);case 6:if(r=Hl,o=Vl,Hl=null,Gl(e,t,n),Vl=o,null!==(Hl=r))if(Vl)try{(9===Hl.nodeType?Hl.body:"HTML"===Hl.nodeName?Hl.ownerDocument.body:Hl).removeChild(n.stateNode)}catch(a){Iu(n,t,a)}else try{Hl.removeChild(n.stateNode)}catch(a){Iu(n,t,a)}break;case 18:null!==Hl&&(Vl?(kd(9===(e=Hl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Kf(e)):kd(Hl,n.stateNode));break;case 4:r=Hl,o=Vl,Hl=n.stateNode.containerInfo,Vl=!0,Gl(e,t,n),Hl=r,Vl=o;break;case 0:case 11:case 14:case 15:Cl(2,n,t),Dl||Cl(4,n,t),Gl(e,t,n);break;case 1:Dl||(Sl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&_l(n,t,r)),Gl(e,t,n);break;case 21:Gl(e,t,n);break;case 22:Dl=(r=Dl)||null!==n.memoizedState,Gl(e,t,n),Dl=r;break;default:Gl(e,t,n)}}function ql(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{Kf(e)}catch(n){Iu(t,t.return,n)}}}function Wl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Kf(e)}catch(n){Iu(t,t.return,n)}}function Xl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ll),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ll),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Pu.bind(null,e,t);t.then(r,r)}})}function Yl(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var i=n[o],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Rd(l.type)){Hl=l.stateNode,Vl=!1;break e}break;case 5:Hl=l.stateNode,Vl=!1;break e;case 3:case 4:Hl=l.stateNode.containerInfo,Vl=!0;break e}l=l.return}if(null===Hl)throw Error(r(160));zl(a,s,i),Hl=null,Vl=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var $l=null;function Kl(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yl(t,e),Jl(e),4&o&&(Cl(3,e,e.return),xl(3,e),Cl(5,e,e.return));break;case 1:Yl(t,e),Jl(e),512&o&&(Dl||null===n||Sl(n,n.return)),64&o&&jl&&null!==(e=e.updateQueue)&&null!==(o=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?o:n.concat(o));break;case 26:var i=$l;if(Yl(t,e),Jl(e),512&o&&(Dl||null===n||Sl(n,n.return)),4&o){var a=null!==n?n.memoizedState:null;if(o=e.memoizedState,null===n)if(null===o)if(null===e.stateNode){e:{o=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(o){case"title":(!(a=i.getElementsByTagName("title")[0])||a[We]||a[Fe]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(o),i.head.insertBefore(a,i.querySelector("head > title"))),yd(a,o,n),a[Fe]=e,Ze(a),o=a;break e;case"link":var s=lf("link","href",i).get(o+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}yd(a=i.createElement(o),o,n),i.head.appendChild(a);break;case"meta":if(s=lf("meta","content",i).get(o+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}yd(a=i.createElement(o),o,n),i.head.appendChild(a);break;default:throw Error(r(468,o))}a[Fe]=e,Ze(a),o=a}e.stateNode=o}else cf(i,e.type,e.stateNode);else e.stateNode=nf(i,o,e.memoizedProps);else a!==o?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===o?cf(i,e.type,e.stateNode):nf(i,o,e.memoizedProps)):null===o&&null!==e.stateNode&&Il(e,e.memoizedProps,n.memoizedProps)}break;case 27:Yl(t,e),Jl(e),512&o&&(Dl||null===n||Sl(n,n.return)),null!==n&&4&o&&Il(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Yl(t,e),Jl(e),512&o&&(Dl||null===n||Sl(n,n.return)),32&e.flags){i=e.stateNode;try{Ct(i,"")}catch(m){Iu(e,e.return,m)}}4&o&&null!=e.stateNode&&Il(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&o&&(Ml=!0);break;case 6:if(Yl(t,e),Jl(e),4&o){if(null===e.stateNode)throw Error(r(162));o=e.memoizedProps,n=e.stateNode;try{n.nodeValue=o}catch(m){Iu(e,e.return,m)}}break;case 3:if(sf=null,i=$l,$l=Wd(t.containerInfo),Yl(t,e),$l=i,Jl(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Kf(t.containerInfo)}catch(m){Iu(e,e.return,m)}Ml&&(Ml=!1,Zl(e));break;case 4:o=$l,$l=Wd(e.stateNode.containerInfo),Yl(t,e),Jl(e),$l=o;break;case 12:default:Yl(t,e),Jl(e);break;case 31:case 19:Yl(t,e),Jl(e),4&o&&null!==(o=e.updateQueue)&&(e.updateQueue=null,Xl(e,o));break;case 13:Yl(t,e),Jl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Lc=ae()),4&o&&null!==(o=e.updateQueue)&&(e.updateQueue=null,Xl(e,o));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=jl,d=Dl;if(jl=u||i,Dl=d||c,Yl(t,e),Dl=d,jl=u,Jl(e),8192&o)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||jl||Dl||ec(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,p=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(m){Iu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Iu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var h=c.stateNode;i?Pd(h,!0):Pd(c.stateNode,!1)}catch(m){Iu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&o&&null!==(o=e.updateQueue)&&null!==(n=o.retryQueue)&&(o.retryQueue=null,Xl(e,n));case 30:case 21:}}function Jl(e){var t=e.flags;if(2&t){try{for(var n,o=e.return;null!==o;){if(Tl(o)){n=o;break}o=o.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var i=n.stateNode;kl(e,Ol(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(Ct(a,""),n.flags&=-33),kl(e,Ol(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;Rl(e,Ol(e),s);break;default:throw Error(r(161))}}catch(l){Iu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Zl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Zl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Fl(e,t.alternate,t),t=t.sibling}function ec(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Cl(4,t,t.return),ec(t);break;case 1:Sl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&_l(t,t.return,n),ec(t);break;case 27:Gd(t.stateNode);case 26:case 5:Sl(t,t.return),ec(t);break;case 22:null===t.memoizedState&&ec(t);break;default:ec(t)}e=e.sibling}}function tc(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:tc(o,i,n),xl(4,i);break;case 1:if(tc(o,i,n),"function"==typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(c){Iu(r,r.return,c)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Ri(l[o],s)}catch(c){Iu(r,r.return,c)}}n&&64&a&&El(i),Al(i,i.return);break;case 27:Pl(i);case 26:case 5:tc(o,i,n),n&&null===r&&4&a&&Nl(i),Al(i,i.return);break;case 12:tc(o,i,n);break;case 31:tc(o,i,n),n&&4&a&&ql(o,i);break;case 13:tc(o,i,n),n&&4&a&&Wl(o,i);break;case 22:null===i.memoizedState&&tc(o,i,n),Al(i,i.return);break;case 30:break;default:tc(o,i,n)}t=t.sibling}}function nc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Fo(n))}function rc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fo(e))}function oc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ic(e,t,n,r),t=t.sibling}function ic(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:oc(e,t,n,r),2048&o&&xl(9,t);break;case 1:case 31:case 13:default:oc(e,t,n,r);break;case 3:oc(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fo(e)));break;case 12:if(2048&o){oc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Iu(t,t.return,l)}}else oc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?oc(e,t,n,r):sc(e,t):2&i._visibility?oc(e,t,n,r):(i._visibility|=2,ac(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&o&&nc(a,t);break;case 24:oc(e,t,n,r),2048&o&&rc(t.alternate,t)}}function ac(e,t,n,r,o){for(o=o&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,s=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:ac(i,a,s,l,o),xl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?ac(i,a,s,l,o):sc(i,a):(u._visibility|=2,ac(i,a,s,l,o)),o&&2048&c&&nc(a.alternate,a);break;case 24:ac(i,a,s,l,o),o&&2048&c&&rc(a.alternate,a);break;default:ac(i,a,s,l,o)}t=t.sibling}}function sc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:sc(n,r),2048&o&&nc(r.alternate,r);break;case 24:sc(n,r),2048&o&&rc(r.alternate,r);break;default:sc(n,r)}t=t.sibling}}var lc=8192;function cc(e,t,n){if(e.subtreeFlags&lc)for(e=e.child;null!==e;)uc(e,t,n),e=e.sibling}function uc(e,t,n){switch(e.tag){case 26:cc(e,t,n),e.flags&lc&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var o=Jd(r.href),i=t.querySelector(Zd(o));if(i)return null!==(t=i._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=ff.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void Ze(i);i=t.ownerDocument||t,r=Qd(r),(o=zd.get(o))&&of(r,o),Ze(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),yd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=ff.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,$l,e.memoizedState,e.memoizedProps);break;case 5:default:cc(e,t,n);break;case 3:case 4:var r=$l;$l=Wd(e.stateNode.containerInfo),cc(e,t,n),$l=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=lc,lc=16777216,cc(e,t,n),lc=r):cc(e,t,n))}}function dc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function fc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bl=r,mc(r,e)}dc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)pc(e),e=e.sibling}function pc(e){switch(e.tag){case 0:case 11:case 15:fc(e),2048&e.flags&&Cl(9,e,e.return);break;case 3:case 12:default:fc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,hc(e)):fc(e)}}function hc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bl=r,mc(r,e)}dc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Cl(8,t,t.return),hc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,hc(t));break;default:hc(t)}e=e.sibling}}function mc(e,t){for(;null!==Bl;){var n=Bl;switch(n.tag){case 0:case 11:case 15:Cl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Fo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Bl=r;else e:for(n=e;null!==Bl;){var o=(r=Bl).sibling,i=r.return;if(Ul(r),r===n){Bl=null;break e}if(null!==o){o.return=i,Bl=o;break e}Bl=i}}}var gc={getCacheForType:function(e){var t=Ro(Lo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ro(Lo).controller.signal}},yc="function"==typeof WeakMap?WeakMap:Map,vc=0,bc=null,wc=null,xc=0,Cc=0,Ec=null,_c=!1,Ac=!1,Sc=!1,Nc=0,Ic=0,Tc=0,Oc=0,Rc=0,kc=0,Pc=0,jc=null,Dc=null,Mc=!1,Lc=0,Bc=0,Fc=1/0,Uc=null,Hc=null,Vc=0,Gc=null,zc=null,qc=0,Wc=0,Xc=null,Yc=null,$c=0,Kc=null;function Jc(){return 2&vc&&0!==xc?xc&-xc:null!==k.T?Xu():Me()}function Zc(){if(0===kc)if(536870912&xc&&!co)kc=536870912;else{var e=Ce;!(3932160&(Ce<<=1))&&(Ce=262144),kc=e}return null!==(e=Bi.current)&&(e.flags|=32),kc}function Qc(e,t,n){(e!==bc||2!==Cc&&9!==Cc)&&null===e.cancelPendingCommit||(au(e,0),ru(e,xc,kc,!1)),Oe(e,n),2&vc&&e===bc||(e===bc&&(!(2&vc)&&(Oc|=n),4===Ic&&ru(e,xc,kc,!1)),Uu(e))}function eu(e,t,n){if(6&vc)throw Error(r(327));for(var o=!n&&!(127&t)&&0===(t&e.expiredLanes)||Se(e,t),i=o?function(e,t){var n=vc;vc|=2;var o=cu(),i=uu();bc!==e||xc!==t?(Uc=null,Fc=ae()+500,au(e,t)):Ac=Se(e,t);e:for(;;)try{if(0!==Cc&&null!==wc){t=wc;var a=Ec;t:switch(Cc){case 1:Cc=0,Ec=null,yu(e,t,a,1);break;case 2:case 9:if(ei(a)){Cc=0,Ec=null,gu(t);break}t=function(){2!==Cc&&9!==Cc||bc!==e||(Cc=7),Uu(e)},a.then(t,t);break e;case 3:Cc=7;break e;case 4:Cc=5;break e;case 7:ei(a)?(Cc=0,Ec=null,gu(t)):(Cc=0,Ec=null,yu(e,t,a,7));break;case 5:var s=null;switch(wc.tag){case 26:s=wc.memoizedState;case 5:case 27:var l=wc;if(s?uf(s):l.stateNode.complete){Cc=0,Ec=null;var c=l.sibling;if(null!==c)wc=c;else{var u=l.return;null!==u?(wc=u,vu(u)):wc=null}break t}}Cc=0,Ec=null,yu(e,t,a,5);break;case 6:Cc=0,Ec=null,yu(e,t,a,6);break;case 8:iu(),Ic=6;break e;default:throw Error(r(462))}}hu();break}catch(d){su(e,d)}return Eo=Co=null,k.H=o,k.A=i,vc=n,null!==wc?0:(bc=null,xc=0,Ir(),Ic)}(e,t):fu(e,t,!0),a=o;;){if(0===i){Ac&&!o&&ru(e,t,0,!1);break}if(n=e.current.alternate,!a||nu(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=jc;var c=l.current.memoizedState.isDehydrated;if(c&&(au(l,s).flags|=256),2!==(s=fu(l,s,!1))){if(Sc&&!c){l.errorRecoveryDisabledLanes|=a,Oc|=a,i=4;break e}a=Dc,Dc=i,null!==a&&(null===Dc?Dc=a:Dc.push.apply(Dc,a))}i=s}if(a=!1,2!==i)continue}}if(1===i){au(e,0),ru(e,t,0,!0);break}e:{switch(o=e,a=i){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:ru(o,t,kc,!_c);break e;case 2:Dc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(i=Lc+300-ae())){if(ru(o,t,kc,!_c),0!==Ae(o,0,!0))break e;qc=t,o.timeoutHandle=Sd(tu.bind(null,o,n,Dc,Uc,Mc,t,kc,Oc,Pc,_c,a,"Throttled",-0,0),i)}else tu(o,n,Dc,Uc,Mc,t,kc,Oc,Pc,_c,a,null,-0,0)}break}i=fu(e,t,!1),a=!1}Uu(e)}function tu(e,t,n,r,o,i,a,s,l,c,u,d,f,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){uc(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot});var h=(62914560&i)===i?Lc-ae():(4194048&i)===i?Bc-ae():0;if(null!==(g=h,(m=d).stylesheets&&0===m.count&&hf(m,m.stylesheets),h=0<m.count||0<m.imgCount?function(e){var t=setTimeout(function(){if(m.stylesheets&&hf(m,m.stylesheets),m.unsuspend){var e=m.unsuspend;m.unsuspend=null,e()}},6e4+g);0<m.imgBytes&&0===df&&(df=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],i=o.transferSize,a=o.initiatorType,s=o.duration;if(i&&s&&vd(a)){for(a=0,s=o.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>s)break;var u=l.transferSize,d=l.initiatorType;u&&vd(d)&&(a+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--r,t+=8*(i+a)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var n=setTimeout(function(){if(m.waitingForImages=!1,0===m.count&&(m.stylesheets&&hf(m,m.stylesheets),m.unsuspend)){var e=m.unsuspend;m.unsuspend=null,e()}},(m.imgBytes>df?50:800)+g);return m.unsuspend=e,function(){m.unsuspend=null,clearTimeout(t),clearTimeout(n)}}:null))return qc=i,e.cancelPendingCommit=h(wu.bind(null,e,t,i,n,r,o,a,s,l,u,d,null,f,p)),void ru(e,i,a,!c)}var m,g;wu(e,t,i,n,r,o,a,s,l)}function nu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Kn(i(),o))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ru(e,t,n,r){t&=~Rc,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-ve(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Re(e,n,t)}function ou(){return!!(6&vc)||(Hu(0),!1)}function iu(){if(null!==wc){if(0===Cc)var e=wc.return;else Eo=Co=null,fa(e=wc),ui=null,di=0,e=wc;for(;null!==e;)wl(e.alternate,e),e=e.return;wc=null}}function au(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Nd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc=0,iu(),bc=e,wc=n=Br(e.current,null),xc=t,Cc=0,Ec=null,_c=!1,Ac=Se(e,t),Sc=!1,Pc=kc=Rc=Oc=Tc=Ic=0,Dc=jc=null,Mc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-ve(r),i=1<<o;t|=e[o],r&=~i}return Nc=t,Ir(),n}function su(e,t){Yi=null,k.H=ws,t===Ko||t===Zo?(t=li(),Cc=3):t===Jo?(t=li(),Cc=4):Cc=t===Ls?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,Ec=t,null===wc&&(Ic=1,ks(e,Wr(t,e.current)))}function lu(){var e=Bi.current;return null===e||((4194048&xc)===xc?null===Fi:!!((62914560&xc)===xc||536870912&xc)&&e===Fi)}function cu(){var e=k.H;return k.H=ws,null===e?ws:e}function uu(){var e=k.A;return k.A=gc,e}function du(){Ic=4,_c||(4194048&xc)!==xc&&null!==Bi.current||(Ac=!0),!(134217727&Tc)&&!(134217727&Oc)||null===bc||ru(bc,xc,kc,!1)}function fu(e,t,n){var r=vc;vc|=2;var o=cu(),i=uu();bc===e&&xc===t||(Uc=null,au(e,t)),t=!1;var a=Ic;e:for(;;)try{if(0!==Cc&&null!==wc){var s=wc,l=Ec;switch(Cc){case 8:iu(),a=6;break e;case 3:case 2:case 9:case 6:null===Bi.current&&(t=!0);var c=Cc;if(Cc=0,Ec=null,yu(e,s,l,c),n&&Ac){a=0;break e}break;default:c=Cc,Cc=0,Ec=null,yu(e,s,l,c)}}pu(),a=Ic;break}catch(u){su(e,u)}return t&&e.shellSuspendCounter++,Eo=Co=null,vc=r,k.H=o,k.A=i,null===wc&&(bc=null,xc=0,Ir()),a}function pu(){for(;null!==wc;)mu(wc)}function hu(){for(;null!==wc&&!oe();)mu(wc)}function mu(e){var t=dl(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?vu(e):wc=t}function gu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ks(n,t,t.pendingProps,t.type,void 0,xc);break;case 11:t=Ks(n,t,t.pendingProps,t.type.render,t.ref,xc);break;case 5:fa(t);default:wl(n,t),t=dl(n,t=wc=Fr(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?vu(e):wc=t}function yu(e,t,n,o){Eo=Co=null,fa(t),ui=null,di=0;var i=t.return;try{if(function(e,t,n,o,i){if(n.flags|=32768,null!==o&&"object"==typeof o&&"function"==typeof o.then){if(null!==(t=n.alternate)&&Io(t,n,i,!0),null!==(n=Bi.current)){switch(n.tag){case 31:case 13:return null===Fi?du():null===n.alternate&&0===Ic&&(Ic=3),n.flags&=-257,n.flags|=65536,n.lanes=i,o===Qo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([o]):t.add(o),Tu(e,o,i)),!1;case 22:return n.flags|=65536,o===Qo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([o]):n.add(o),Tu(e,o,i)),!1}throw Error(r(435,n.tag))}return Tu(e,o,i),du(),!1}if(co)return null!==(t=Bi.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,o!==po&&wo(Wr(e=Error(r(422),{cause:o}),n))):(o!==po&&wo(Wr(t=Error(r(423),{cause:o}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,o=Wr(o,n),Ni(e,i=js(e.stateNode,o,i)),4!==Ic&&(Ic=2)),!1;var a=Error(r(520),{cause:o});if(a=Wr(a,n),null===jc?jc=[a]:jc.push(a),4!==Ic&&(Ic=2),null===t)return!0;o=Wr(o,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ni(n,e=js(n.stateNode,o,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Hc&&Hc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Ms(i=Ds(i),e,n,o),Ni(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,xc))return Ic=1,ks(e,Wr(n,e.current)),void(wc=null)}catch(a){if(null!==i)throw wc=i,a;return Ic=1,ks(e,Wr(n,e.current)),void(wc=null)}32768&t.flags?(co||1===o?e=!0:Ac||536870912&xc?e=!1:(_c=e=!0,(2===o||9===o||3===o||6===o)&&null!==(o=Bi.current)&&13===o.tag&&(o.flags|=16384)),bu(t,e)):vu(t)}function vu(e){var t=e;do{if(32768&t.flags)return void bu(t,_c);e=t.return;var n=vl(t.alternate,t,Nc);if(null!==n)return void(wc=n);if(null!==(t=t.sibling))return void(wc=t);wc=t=e}while(null!==t);0===Ic&&(Ic=5)}function bu(e,t){do{var n=bl(e.alternate,e);if(null!==n)return n.flags&=32767,void(wc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(wc=e);wc=e=n}while(null!==e);Ic=6,wc=null}function wu(e,t,n,o,i,a,s,l,c){e.cancelPendingCommit=null;do{Au()}while(0!==Vc);if(6&vc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-ve(n),d=1<<u;s[u]=0,l[u]=-1;var f=c[u];if(null!==f)for(c[u]=null,u=0;u<f.length;u++){var p=f[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,a|=Nr,s,l,c),e===bc&&(wc=bc=null,xc=0),zc=t,Gc=e,qc=n,Wc=a,Xc=i,Yc=o,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ne(ue,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),o=!!(13878&t.flags),13878&t.subtreeFlags||o){o=k.T,k.T=null,i=P.p,P.p=2,s=vc,vc|=4;try{!function(e,t){if(e=e.containerInfo,bd=Af,nr(e=tr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var i=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==o&&3!==f.nodeType||(c=s+o),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++d===o&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:e,selectionRange:n},Af=!1,Bl=t;null!==Bl;)if(e=(t=Bl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Bl=e;else for(;null!==Bl;){switch(a=(t=Bl).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,o=n.stateNode;try{var m=Is(n.type,i);e=o.getSnapshotBeforeUpdate(m,a),o.__reactInternalSnapshotBeforeUpdate=e}catch(y){Iu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))jd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Bl=e;break}Bl=t.return}}(e,t)}finally{vc=s,P.p=i,k.T=o}}Vc=1,xu(),Cu(),Eu()}}function xu(){if(1===Vc){Vc=0;var e=Gc,t=zc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=k.T,k.T=null;var r=P.p;P.p=2;var o=vc;vc|=4;try{Kl(t,e);var i=wd,a=tr(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&er(s.ownerDocument.documentElement,s)){if(null!==l&&nr(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),g=void 0===l.end?m:Math.min(l.end,h);!p.extend&&m>g&&(a=g,g=m,m=a);var y=Qn(s,m),v=Qn(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Af=!!bd,wd=bd=null}finally{vc=o,P.p=r,k.T=n}}e.current=t,Vc=2}}function Cu(){if(2===Vc){Vc=0;var e=Gc,t=zc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=k.T,k.T=null;var r=P.p;P.p=2;var o=vc;vc|=4;try{Fl(e,t.alternate,t)}finally{vc=o,P.p=r,k.T=n}}Vc=3}}function Eu(){if(4===Vc||3===Vc){Vc=0,ie();var e=Gc,t=zc,n=qc,r=Yc;10256&t.subtreeFlags||10256&t.flags?Vc=5:(Vc=0,zc=Gc=null,_u(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Hc=null),De(n),t=t.stateNode,ge&&"function"==typeof ge.onCommitFiberRoot)try{ge.onCommitFiberRoot(me,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=k.T,o=P.p,P.p=2,k.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];i(s.value,{componentStack:s.stack})}}finally{k.T=t,P.p=o}}3&qc&&Au(),Uu(e),o=e.pendingLanes,261930&n&&42&o?e===Kc?$c++:($c=0,Kc=e):$c=0,Hu(0)}}function _u(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Fo(t))}function Au(){return xu(),Cu(),Eu(),Su()}function Su(){if(5!==Vc)return!1;var e=Gc,t=Wc;Wc=0;var n=De(qc),o=k.T,i=P.p;try{P.p=32>n?32:n,k.T=null,n=Xc,Xc=null;var a=Gc,s=qc;if(Vc=0,zc=Gc=null,qc=0,6&vc)throw Error(r(331));var l=vc;if(vc|=4,pc(a.current),ic(a,a.current,s,n),vc=l,Hu(0,!1),ge&&"function"==typeof ge.onPostCommitFiberRoot)try{ge.onPostCommitFiberRoot(me,a)}catch(c){}return!0}finally{P.p=i,k.T=o,_u(e,t)}}function Nu(e,t,n){t=Wr(n,t),null!==(e=Ai(e,t=js(e.stateNode,t,2),2))&&(Oe(e,2),Uu(e))}function Iu(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){e=Wr(n,e),null!==(r=Ai(t,n=Ds(2),2))&&(Ms(n,r,t,e),Oe(r,2),Uu(r));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new yc;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(Sc=!0,o.add(n),e=Ou.bind(null,e,t,n),t.then(e,e))}function Ou(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,bc===e&&(xc&n)===n&&(4===Ic||3===Ic&&(62914560&xc)===xc&&300>ae()-Lc?!(2&vc)&&au(e,0):Rc|=n,Pc===xc&&(Pc=0)),Uu(e)}function Ru(e,t){0===t&&(t=Ie()),null!==(e=Rr(e,t))&&(Oe(e,t),Uu(e))}function ku(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ru(e,n)}function Pu(e,t){var n=0;switch(e.tag){case 31:case 13:var o=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==o&&o.delete(t),Ru(e,n)}var ju=null,Du=null,Mu=!1,Lu=!1,Bu=!1,Fu=0;function Uu(e){e!==Du&&null===e.next&&(null===Du?ju=Du=e:Du=Du.next=e),Lu=!0,Mu||(Mu=!0,Td(function(){6&vc?ne(le,Vu):Gu()}))}function Hu(e,t){if(!Bu&&Lu){Bu=!0;do{for(var n=!1,r=ju;null!==r;){if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-ve(42|e)+1)-1,i=201326741&(i&=o&~(a&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Wu(r,i))}else i=xc,!(3&(i=Ae(r,r===bc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Se(r,i)||(n=!0,Wu(r,i));r=r.next}}while(n);Bu=!1}}function Vu(){Gu()}function Gu(){Lu=Mu=!1;var e,t=0;0!==Fu&&((e=window.event)&&"popstate"===e.type?e!==Ad&&(Ad=e,1):(Ad=null,0))&&(t=Fu);for(var n=ae(),r=null,o=ju;null!==o;){var i=o.next,a=zu(o,n);0===a?(o.next=null,null===r?ju=i:r.next=i,null===i&&(Du=r)):(r=o,(0!==t||3&a)&&(Lu=!0)),o=i}0!==Vc&&5!==Vc||Hu(t),0!==Fu&&(Fu=0)}function zu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-ve(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=Ne(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(n=xc,n=Ae(e,e===(t=bc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===Cc||9===Cc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&re(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Se(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&re(r),De(n)){case 2:case 8:n=ce;break;case 32:default:n=ue;break;case 268435456:n=fe}return r=qu.bind(null,e),n=ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&re(r),e.callbackPriority=2,e.callbackNode=null,2}function qu(e,t){if(0!==Vc&&5!==Vc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Au()&&e.callbackNode!==n)return null;var r=xc;return 0===(r=Ae(e,e===bc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(eu(e,r,t),zu(e,ae()),null!=e.callbackNode&&e.callbackNode===n?qu.bind(null,e):null)}function Wu(e,t){if(Au())return null;eu(e,t,!0)}function Xu(){if(0===Fu){var e=Vo;0===e&&(e=xe,!(261888&(xe<<=1))&&(xe=256)),Fu=e}return Fu}function Yu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Tt(""+e)}function $u(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Cr.length;Ku++){var Ju=Cr[Ku];Er(Ju.toLowerCase(),"on"+(Ju[0].toUpperCase()+Ju.slice(1)))}Er(hr,"onAnimationEnd"),Er(mr,"onAnimationIteration"),Er(gr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(yr,"onTransitionRun"),Er(vr,"onTransitionStart"),Er(br,"onTransitionCancel"),Er(wr,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zu));function ed(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=c;try{i(o)}catch(u){_r(u)}o.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=c;try{i(o)}catch(u){_r(u)}o.currentTarget=null,i=l}}}}function td(e,t){var n=t[Ve];void 0===n&&(n=t[Ve]=new Set);var r=e+"__bubble";n.has(r)||(id(t,e,2,!1),n.add(r))}function nd(e,t,n){var r=0;t&&(r|=4),id(n,e,r,t)}var rd="_reactListening"+Math.random().toString(36).slice(2);function od(e){if(!e[rd]){e[rd]=!0,Qe.forEach(function(t){"selectionchange"!==t&&(Qu.has(t)||nd(t,!1,e),nd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[rd]||(t[rd]=!0,nd("selectionchange",!1,t))}}function id(e,t,n,r){switch(kf(t)){case 2:var o=Sf;break;case 8:o=Nf;break;default:o=If}n=o.bind(null,t,n,e),o=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ad(e,t,n,r,o){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var l=r.stateNode.containerInfo;if(l===o)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===o)return;s=s.return}for(;null!==l;){if(null===(s=Ye(l)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}l=l.parentNode}}r=r.return}Lt(function(){var r=a,o=kt(n),s=[];e:{var l=xr.get(e);if(void 0!==l){var c=en,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case hr:case mr:case gr:c=ln;break;case wr:c=bn;break;case"scroll":case"scrollend":c=nn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=xn}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var h,m=r;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===p||null!=(g=Bt(m,p))&&d.push(sd(m,g,h)),f)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,o),s.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Ye(u)&&!u[He])&&(c||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ye(u):null)&&(f=i(u),d=u.tag,u!==f||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",p="onPointerEnter",m="pointer"),f=null==c?l:Ke(c),h=null==u?l:Ke(u),(l=new d(g,m+"leave",c,n,o)).target=f,l.relatedTarget=h,g=null,Ye(o)===r&&((d=new d(p,m+"enter",u,n,o)).target=h,d.relatedTarget=f,g=d),f=g,c&&u)e:{for(d=cd,m=u,h=0,g=p=c;g;g=d(g))h++;g=0;for(var y=m;y;y=d(y))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&ud(s,l,c,d,!1),null!==u&&null!==f&&ud(s,f,u,d,!0)}if("select"===(c=(l=r?Ke(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Fn;else if(Pn(l))if(Un)v=$n;else{v=Xn;var b=Wn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&St(r.elementType)&&(v=Fn):v=Yn;switch(v&&(v=v(e,r))?jn(s,v,n,o):(b&&b(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&vt(l,"number",l.value)),b=r?Ke(r):window,e){case"focusin":(Pn(b)||"true"===b.contentEditable)&&(or=b,ir=r,ar=null);break;case"focusout":ar=ir=or=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,lr(s,n,o);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(s,n,o)}var w;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Rn?Tn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Sn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Rn&&(w=qt()):(Gt="value"in(Vt=o)?Vt.value:Vt.textContent,Rn=!0)),0<(b=ld(r,x)).length&&(x=new un(x,e,null,n,o),s.push({event:x,listeners:b}),(w||null!==(w=On(n)))&&(x.data=w))),(w=An?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(In=!0,Nn);case"textInput":return(e=t.data)===Nn&&In?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!En&&Tn(e,t)?(e=qt(),zt=Gt=Vt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(x=ld(r,"onBeforeInput")).length&&(b=new un("onBeforeInput","beforeinput",null,n,o),s.push({event:b,listeners:x}),b.data=w),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Yu((o[Ue]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ue]||null)?Yu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new en("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Fu){var e=a?$u(o,a):new FormData(o);as(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"==typeof i&&(s.preventDefault(),e=a?$u(o,a):new FormData(o),as(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(s,e,r,n,o)}ed(s,t)})}function sd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ld(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Bt(e,n))&&r.unshift(sd(e,o,i)),null!=(o=Bt(e,t))&&r.push(sd(e,o,i))),3===e.tag)return r;e=e.return}return[]}function cd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ud(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,o?null!=(c=Bt(n,i))&&a.unshift(sd(n,c,l)):o||null!=(c=Bt(n,i))&&a.push(sd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var dd=/\r\n?/g,fd=/\u0000|\uFFFD/g;function pd(e){return("string"==typeof e?e:""+e).replace(dd,"\n").replace(fd,"")}function hd(e,t){return t=pd(t),pd(e)===t}function md(e,t,n,o,i,a){switch(n){case"children":"string"==typeof o?"body"===t||"textarea"===t&&""===o||Ct(e,o):("number"==typeof o||"bigint"==typeof o)&&"body"!==t&&Ct(e,""+o);break;case"className":st(e,"class",o);break;case"tabIndex":st(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,n,o);break;case"style":At(e,o,a);break;case"data":if("object"!==t){st(e,"data",o);break}case"src":case"href":if(""===o&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==o||"function"==typeof o||"symbol"==typeof o||"boolean"==typeof o){e.removeAttribute(n);break}o=Tt(""+o),e.setAttribute(n,o);break;case"action":case"formAction":if("function"==typeof o){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&md(e,t,"name",i.name,i,null),md(e,t,"formEncType",i.formEncType,i,null),md(e,t,"formMethod",i.formMethod,i,null),md(e,t,"formTarget",i.formTarget,i,null)):(md(e,t,"encType",i.encType,i,null),md(e,t,"method",i.method,i,null),md(e,t,"target",i.target,i,null))),null==o||"symbol"==typeof o||"boolean"==typeof o){e.removeAttribute(n);break}o=Tt(""+o),e.setAttribute(n,o);break;case"onClick":null!=o&&(e.onclick=Ot);break;case"onScroll":null!=o&&td("scroll",e);break;case"onScrollEnd":null!=o&&td("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!=typeof o||!("__html"in o))throw Error(r(61));if(null!=(n=o.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=o&&"function"!=typeof o&&"symbol"!=typeof o;break;case"muted":e.muted=o&&"function"!=typeof o&&"symbol"!=typeof o;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==o||"function"==typeof o||"boolean"==typeof o||"symbol"==typeof o){e.removeAttribute("xlink:href");break}n=Tt(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,""+o):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===o?e.setAttribute(n,""):!1!==o&&null!=o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,o):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&!isNaN(o)&&1<=o?e.setAttribute(n,o):e.removeAttribute(n);break;case"rowSpan":case"start":null==o||"function"==typeof o||"symbol"==typeof o||isNaN(o)?e.removeAttribute(n):e.setAttribute(n,o);break;case"popover":td("beforetoggle",e),td("toggle",e),at(e,"popover",o);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":at(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=Nt.get(n)||n,o)}}function gd(e,t,n,o,i,a){switch(n){case"style":At(e,o,a);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!=typeof o||!("__html"in o))throw Error(r(61));if(null!=(n=o.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof o?Ct(e,o):("number"==typeof o||"bigint"==typeof o)&&Ct(e,""+o);break;case"onScroll":null!=o&&td("scroll",e);break;case"onScrollEnd":null!=o&&td("scrollend",e);break;case"onClick":null!=o&&(e.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:et.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Ue]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!=typeof o)?n in e?e[n]=o:!0===o?e.setAttribute(n,""):at(e,n,o):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,o,i)))}}function yd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":td("error",e),td("load",e);var o,i=!1,a=!1;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(null!=s)switch(o){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:md(e,t,o,s,n,null)}}return a&&md(e,t,"srcSet",n.srcSet,n,null),void(i&&md(e,t,"src",n.src,n,null));case"input":td("invalid",e);var l=o=s=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":o=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:md(e,t,i,d,n,null)}}return void yt(e,o,l,c,u,s,a,!1);case"select":for(a in td("invalid",e),i=s=o=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":o=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:md(e,t,a,l,n,null)}return t=o,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in td("invalid",e),o=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":a=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:md(e,t,s,l,n,null)}return void xt(e,i,a,o);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(i=n[c])&&("selected"===c?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:md(e,t,c,i,n,null));return;case"dialog":td("beforetoggle",e),td("toggle",e),td("cancel",e),td("close",e);break;case"iframe":case"object":td("load",e);break;case"video":case"audio":for(i=0;i<Zu.length;i++)td(Zu[i],e);break;case"image":td("error",e),td("load",e);break;case"details":td("toggle",e);break;case"embed":case"source":case"link":td("error",e),td("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:md(e,t,u,i,n,null)}return;default:if(St(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(i=n[d])&&gd(e,t,d,i,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(i=n[l])&&md(e,t,l,i,n,null)}function vd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var bd=null,wd=null;function xd(e){return 9===e.nodeType?e:e.ownerDocument}function Cd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ed(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function _d(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ad=null,Sd="function"==typeof setTimeout?setTimeout:void 0,Nd="function"==typeof clearTimeout?clearTimeout:void 0,Id="function"==typeof Promise?Promise:void 0,Td="function"==typeof queueMicrotask?queueMicrotask:void 0!==Id?function(e){return Id.resolve(null).then(e).catch(Od)}:Sd;function Od(e){setTimeout(function(){throw e})}function Rd(e){return"head"===e}function kd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void Kf(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Gd(e.ownerDocument.documentElement);else if("head"===n){Gd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,s=i.nodeName;i[We]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Gd(e.ownerDocument.body);n=o}while(n);Kf(t)}function Pd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function jd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Dd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Bd(e.nextSibling)))return null}return e}function Md(e){return"$?"===e.data||"$~"===e.data}function Ld(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Fd=null;function Ud(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Bd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Hd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Vd(e,t,n){switch(t=xd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Gd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var zd=new Map,qd=new Set;function Wd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Xd=P.d;P.d={f:function(){var e=Xd.f(),t=ou();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?ls(t):Xd.r(e)},D:function(e){Xd.D(e),$d("dns-prefetch",e,null)},C:function(e,t){Xd.C(e,t),$d("preconnect",e,t)},L:function(e,t,n){Xd.L(e,t,n);var r=Yd;if(r&&e&&t){var o='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(o+='[imagesizes="'+mt(n.imageSizes)+'"]')):o+='[href="'+mt(e)+'"]';var i=o;switch(t){case"style":i=Jd(e);break;case"script":i=ef(e)}zd.has(i)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zd.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Zd(i))||"script"===t&&r.querySelector(tf(i))||(yd(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}},m:function(e,t){Xd.m(e,t);var n=Yd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ef(e)}if(!zd.has(i)&&(e=d({rel:"modulepreload",href:e},t),zd.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(tf(i)))return}yd(r=n.createElement("link"),"link",e),Ze(r),n.head.appendChild(r)}}},X:function(e,t){Xd.X(e,t);var n=Yd;if(n&&e){var r=Je(n).hoistableScripts,o=ef(e),i=r.get(o);i||((i=n.querySelector(tf(o)))||(e=d({src:e,async:!0},t),(t=zd.get(o))&&af(e,t),Ze(i=n.createElement("script")),yd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){Xd.S(e,t,n);var r=Yd;if(r&&e){var o=Je(r).hoistableStyles,i=Jd(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Zd(i)))s.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zd.get(i))&&of(e,n);var l=a=r.createElement("link");Ze(l),yd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,rf(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){Xd.M(e,t);var n=Yd;if(n&&e){var r=Je(n).hoistableScripts,o=ef(e),i=r.get(o);i||((i=n.querySelector(tf(o)))||(e=d({src:e,async:!0,type:"module"},t),(t=zd.get(o))&&af(e,t),Ze(i=n.createElement("script")),yd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var Yd="undefined"==typeof document?null:document;function $d(e,t,n){var r=Yd;if(r&&"string"==typeof t&&t){var o=mt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"==typeof n&&(o+='[crossorigin="'+n+'"]'),qd.has(o)||(qd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(yd(t=r.createElement("link"),"link",e),Ze(t),r.head.appendChild(t)))}}function Kd(e,t,n,o){var i,a,s,l,c=(c=z.current)?Wd(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Jd(n.href),(o=(n=Je(c).hoistableStyles).get(t))||(o={type:"style",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Jd(n.href);var u=Je(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Zd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),zd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zd.set(e,n),u||(i=c,a=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),yd(a,"link",s),Ze(a),i.head.appendChild(a))))),t&&null===o)throw Error(r(528,""));return d}if(t&&null!==o)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=ef(n),(o=(n=Je(c).hoistableScripts).get(t))||(o={type:"script",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Jd(e){return'href="'+mt(e)+'"'}function Zd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function ef(e){return'[src="'+mt(e)+'"]'}function tf(e){return"script[async]"+e}function nf(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(o)return t.instance=o,Ze(o),o;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ze(o=(e.ownerDocument||e).createElement("style")),yd(o,"style",i),rf(o,n.precedence,e),t.instance=o;case"stylesheet":i=Jd(n.href);var a=e.querySelector(Zd(i));if(a)return t.state.loading|=4,t.instance=a,Ze(a),a;o=Qd(n),(i=zd.get(i))&&of(o,i),Ze(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),yd(a,"link",o),t.state.loading|=4,rf(a,n.precedence,e),t.instance=a;case"script":return a=ef(n.src),(i=e.querySelector(tf(a)))?(t.instance=i,Ze(i),i):(o=n,(i=zd.get(a))&&af(o=d({},n),i),Ze(i=(e=e.ownerDocument||e).createElement("script")),yd(i,"link",o),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(o=t.instance,t.state.loading|=4,rf(o,n.precedence,e));return t.instance}function rf(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function of(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function af(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var sf=null;function lf(e,t,n){if(null===sf){var r=new Map,o=sf=new Map;o.set(n,r)}else(r=(o=sf).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[We]||i[Fe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function cf(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function uf(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var df=0;function ff(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)hf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var pf=null;function hf(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,pf=new Map,t.forEach(mf,e),pf=null,ff.call(e))}function mf(e,t){if(!(4&t.state.loading)){var n=pf.get(e);if(n)var r=n.get(null);else{n=new Map,pf.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=ff.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var gf={$$typeof:b,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function yf(e,t,n,r,o,i,a,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function vf(e,t,n,r,o,i,a,s,l,c,u,d){return e=new yf(e,t,n,a,l,c,u,d,s),t=1,!0===i&&(t|=24),i=Mr(3,null,null,t),e.current=i,i.stateNode=e,(t=Bo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},Ci(i),e}function bf(e){return e?e=jr:jr}function wf(e,t,n,r,o,i){o=bf(o),null===r.context?r.context=o:r.pendingContext=o,(r=_i(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=Ai(e,r,t))&&(Qc(n,0,t),Si(n,e,t))}function xf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Cf(e,t){xf(e,t),(e=e.alternate)&&xf(e,t)}function Ef(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Qc(t,0,67108864),Cf(e,67108864)}}function _f(e){if(13===e.tag||31===e.tag){var t=Jc(),n=Rr(e,t=je(t));null!==n&&Qc(n,0,t),Cf(e,t)}}var Af=!0;function Sf(e,t,n,r){var o=k.T;k.T=null;var i=P.p;try{P.p=2,If(e,t,n,r)}finally{P.p=i,k.T=o}}function Nf(e,t,n,r){var o=k.T;k.T=null;var i=P.p;try{P.p=8,If(e,t,n,r)}finally{P.p=i,k.T=o}}function If(e,t,n,r){if(Af){var o=Tf(r);if(null===o)ad(e,t,r,Of,n),Hf(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return jf=Vf(jf,e,t,n,r,o),!0;case"dragenter":return Df=Vf(Df,e,t,n,r,o),!0;case"mouseover":return Mf=Vf(Mf,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Lf.set(i,Vf(Lf.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Bf.set(i,Vf(Bf.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Hf(e,r),4&t&&-1<Uf.indexOf(e)){for(;null!==o;){var i=$e(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=_e(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-ve(a);s.entanglements[1]|=l,a&=~l}Uu(i),!(6&vc)&&(Fc=ae()+500,Hu(0))}}break;case 31:case 13:null!==(s=Rr(i,2))&&Qc(s,0,2),ou(),Cf(i,2)}if(null===(i=Tf(r))&&ad(e,t,r,Of,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else ad(e,t,r,null,n)}}function Tf(e){return Rf(e=kt(e))}var Of=null;function Rf(e){if(Of=null,null!==(e=Ye(e))){var t=i(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=s(t)))return e;e=null}else if(31===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Of=e,null}function kf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case le:return 2;case ce:return 8;case ue:case de:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Pf=!1,jf=null,Df=null,Mf=null,Lf=new Map,Bf=new Map,Ff=[],Uf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hf(e,t){switch(e){case"focusin":case"focusout":jf=null;break;case"dragenter":case"dragleave":Df=null;break;case"mouseover":case"mouseout":Mf=null;break;case"pointerover":case"pointerout":Lf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(t.pointerId)}}function Vf(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=$e(t))&&Ef(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Gf(e){var t=Ye(e.target);if(null!==t){var n=i(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=s(n)))return e.blockedOn=t,void Le(e.priority,function(){_f(n)})}else if(31===t){if(null!==(t=l(n)))return e.blockedOn=t,void Le(e.priority,function(){_f(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tf(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&Ef(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function qf(e,t,n){zf(e)&&n.delete(t)}function Wf(){Pf=!1,null!==jf&&zf(jf)&&(jf=null),null!==Df&&zf(Df)&&(Df=null),null!==Mf&&zf(Mf)&&(Mf=null),Lf.forEach(qf),Bf.forEach(qf)}function Xf(t,n){t.blockedOn===n&&(t.blockedOn=null,Pf||(Pf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wf)))}var Yf=null;function $f(t){Yf!==t&&(Yf=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Yf===t&&(Yf=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],o=t[e+2];if("function"!=typeof r){if(null===Rf(r||n))continue;break}var i=$e(n);null!==i&&(t.splice(e,3),e-=3,as(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Kf(e){function t(t){return Xf(t,e)}null!==jf&&Xf(jf,e),null!==Df&&Xf(Df,e),null!==Mf&&Xf(Mf,e),Lf.forEach(t),Bf.forEach(t);for(var n=0;n<Ff.length;n++){var r=Ff[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ff.length&&null===(n=Ff[0]).blockedOn;)Gf(n),null===n.blockedOn&&Ff.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[Ue]||null;if("function"==typeof i)a||$f(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[Ue]||null)s=a.formAction;else if(null!==Rf(o))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),$f(n)}}}function Jf(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Zf(e){this._internalRoot=e}function Qf(e){this._internalRoot=e}Qf.prototype.render=Zf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));wf(t.current,Jc(),e,t,null,null)},Qf.prototype.unmount=Zf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;wf(e.current,2,null,e,null,null),ou(),t[He]=null}},Qf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Me();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ff.length&&0!==t&&t<Ff[n].priority;n++);Ff.splice(n,0,e),0===n&&Gf(e)}};var ep=t.version;if("19.2.3"!==ep)throw Error(r(527,ep,"19.2.3"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=i(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,o=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(o=a.return)){n=o;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return c(a),e;if(s===o)return c(a),t;s=s.sibling}throw Error(r(188))}if(n.return!==o.return)n=a,o=s;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,o=s;break}if(u===o){l=!0,o=a,n=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===n){l=!0,n=s,o=a;break}if(u===o){l=!0,o=s,n=a;break}u=u.sibling}if(!l)throw Error(r(189))}}if(n.alternate!==o)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t))?u(e):null)?null:e.stateNode};var tp={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!np.isDisabled&&np.supportsFiber)try{me=np.inject(tp),ge=np}catch(op){}}return fi.createRoot=function(e,t){if(!o(e))throw Error(r(299));var n=!1,i="",a=Ts,s=Os,l=Rs;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=vf(e,1,!1,null,0,n,i,null,a,s,l,Jf),e[He]=t.current,od(e),new Zf(t)},fi.hydrateRoot=function(e,t,n){if(!o(e))throw Error(r(299));var i=!1,a="",s=Ts,l=Os,c=Rs,u=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=vf(e,1,!0,t,0,i,a,u,s,l,c,Jf)).context=bf(null),n=t.current,(a=_i(i=je(i=Jc()))).callback=null,Ai(n,a,i),n=i,t.current.lanes=n,Oe(t,n),Uu(t),e[He]=t.current,od(e),new Qf(t)},fi.version="19.2.3",fi}()),di.exports)),gi=e=>{const t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},yi=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),vi=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=s.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:a,...l},c)=>s.createElement("svg",{ref:c,...bi,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:yi("lucide",o),...!i&&!vi(l)&&{"aria-hidden":"true"},...l},[...a.map(([e,t])=>s.createElement(e,t)),...Array.isArray(i)?i:[i]])),xi=(e,t)=>{const n=s.forwardRef(({className:n,...r},o)=>{return s.createElement(wi,{ref:o,iconNode:t,className:yi(`lucide-${i=gi(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var i});return n.displayName=gi(e),n},Ci=xi("beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]),Ei=xi("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),_i=xi("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Ai=xi("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Si=xi("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ni=xi("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ii=xi("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ti=xi("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Oi=xi("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ri=xi("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ki=xi("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),Pi=xi("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ji=xi("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Di=xi("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Mi=xi("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Li=xi("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Bi=xi("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Fi=xi("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Ui=xi("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Hi=xi("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Vi=xi("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Gi=xi("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),zi=xi("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qi=xi("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Wi=xi("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Xi=xi("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Yi=xi("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),$i=xi("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ki=xi("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ji=xi("scan-line",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Zi=xi("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Qi=xi("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ea=xi("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),ta=xi("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),na=xi("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ra=xi("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),oa=xi("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ia=xi("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),aa=xi("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),sa=xi("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var la,ca=((la=ca||{}).IDLE="IDLE",la.SCANNING="SCANNING",la.SENDING_OBLIO="SENDING_OBLIO",la.SUCCESS="SUCCESS",la.WARNING="WARNING",la.ERROR="ERROR",la);const ua=({onScan:e,onClose:t,allowDuplicates:n=!1,duplicateDelayMs:r=1200,children:o})=>{const[i,a]=s.useState(!1),[l,c]=s.useState(null),[u,d]=s.useState(""),[f,p]=s.useState(0),{ref:h}=function(e){void 0===e&&(e={});var t,n,r,o,i,a=e.paused,l=void 0!==a&&a,c=e.hints,u=e.timeBetweenDecodingAttempts,d=e.onDecodeResult,f=void 0===d?function(){}:d,p=e.onDecodeError,h=void 0===p?function(){}:p,m=e.onError,g=void 0===m?function(){}:m,y="deviceId"in e?e.deviceId:void 0,v=s.useState("constraints"in e?e.constraints:void 0),b=v[0],w=v[1],x=s.useRef(f),C=s.useRef(h),E=s.useRef(g),_=s.useRef(null),A=(o=void 0===(r=(n=void 0===(t={hints:c,timeBetweenDecodingAttempts:u})?{}:t).timeBetweenDecodingAttempts)?300:r,i=n.hints,s.useMemo(function(){var e=new ro(i);return e.timeBetweenDecodingAttempts=o,e},[i,o])),S=function(e){var t=e.resetStream,n=s.useState(!1),r=n[0],o=n[1],i=s.useState(null),a=i[0],l=i[1],c=s.useRef(null),u=s.useRef(t),d=s.useCallback(function(e){c.current=e,l("function"==typeof e.getCapabilities&&void 0!==e.getCapabilities().torch)},[]),f=s.useCallback(function(){return $o(void 0,0,void 0,function(){return Ko(this,function(e){switch(e.label){case 0:return c.current&&a?[4,c.current.applyConstraints({advanced:[{torch:!0}]})]:[2];case 1:return e.sent(),o(!0),[2]}})})},[a]),p=s.useCallback(function(){return $o(void 0,0,void 0,function(){return Ko(this,function(e){switch(e.label){case 0:return c.current&&a?(c.current=null,l(null),o(!1),[4,u.current()]):[2];case 1:return e.sent(),[2]}})})},[a]);return s.useEffect(function(){u.current=t},[t]),{init:d,isOn:r,isAvailable:a,on:f,off:p}}({resetStream:function(){return Jo(void 0,0,void 0,function(){return Zo(this,function(e){switch(e.label){case 0:return R(),[4,O()];case 1:return e.sent(),[2]}})})}}),N=S.init,I=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(S,["init"]),T=s.useCallback(function(e,t){e&&x.current(e),t&&C.current(t)},[]),O=s.useCallback(function(){return Jo(void 0,0,void 0,function(){var e,t,n;return Zo(this,function(r){switch(r.label){case 0:if(!_.current)return[2];if(l)return[2];r.label=1;case 1:return r.trys.push([1,6,,7]),y?[4,A.decodeFromVideoDevice(y,_.current,T)]:[3,3];case 2:return r.sent(),[3,5];case 3:return[4,A.decodeFromConstraints(null!=b?b:Yo,_.current,T)];case 4:r.sent(),r.label=5;case 5:return[3,7];case 6:return e=r.sent(),E.current(e),[2];case 7:return _.current?(t=_.current.srcObject,(n=t.getVideoTracks()[0])&&N(n),[2]):[2]}})})},[A,y,b,l,T,N]),R=s.useCallback(function(){A.reset()},[A]);return s.useEffect(function(){x.current=f},[f]),s.useEffect(function(){C.current=h},[h]),s.useEffect(function(){E.current=g},[g]),s.useEffect(function(){var t,n;t=b,n=e.constraints,JSON.stringify(t)===JSON.stringify(n)||w(e.constraints)},[b,e]),s.useEffect(function(){return O(),function(){R()}},[O,R]),{ref:_,torch:I}}({onDecodeResult(t){const o=t.getText(),i=t.getBarcodeFormat();if(console.log("Scanner detected code:",o,"format:",i,"length:",null==o?void 0:o.length),o&&o.trim()){const t=o.trim();console.log("Trimmed code:",t,"matches last:",t===u);const a=t.length>=8&&t.length<=18,s=/^\d+$/.test(t),l=13===t.length&&s,c=8===t.length&&s,h=12===t.length&&s,m=l||c||h||a&&s;console.log("Code validation:",{code:t,length:t.length,isNumeric:s,isEAN13:l,isEAN8:c,isUPCA:h,isValidFormat:m,format:i});const g=Date.now(),y=t===u;!m||y&&(!n||y&&g-f<r)?y?console.log("Skipping duplicate scan"):console.log("Skipping invalid code - length:",t.length,"isNumeric:",s,"format:",i):(d(t),p(g),console.log("Calling onScan with:",t),e(t))}else console.log("Empty or invalid code detected")},onError(e){console.error("Scanner error:",e),c((null==e?void 0:e.message)||"Eroare la scanare")},constraints:{video:{facingMode:"environment",width:{ideal:1920,min:1280},height:{ideal:1080,min:720},focusMode:"continuous",exposureMode:"continuous"}},timeBetweenDecodingAttempts:300});return ui.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-center",children:[ui.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/70 to-transparent",children:[ui.jsx("h2",{className:"text-white font-semibold",children:"Scanare Cod de Bare"}),ui.jsx("button",{onClick:t,className:"bg-white/20 p-2 rounded-full backdrop-blur-sm active:bg-white/30",children:ui.jsx(sa,{className:"w-6 h-6 text-white"})})]}),ui.jsxs("div",{className:"relative w-full h-full flex items-center justify-center bg-black",children:[l?ui.jsxs("div",{className:"text-white text-center p-6",children:[ui.jsx("p",{className:"text-red-400 mb-2",children:"Eroare camer"}),ui.jsx("p",{className:"text-sm text-gray-400",children:l})]}):ui.jsx("video",{ref:h,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),ui.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:ui.jsx("div",{className:"w-64 h-48 border-2 border-emerald-500/70 rounded-lg relative bg-transparent shadow-[0_0_0_9999px_rgba(0,0,0,0.5)]",children:ui.jsx("div",{className:"absolute top-2 left-0 right-0 flex justify-center",children:ui.jsx("span",{className:"text-emerald-400 text-xs bg-black/60 px-2 py-1 rounded",children:"ncadreaz codul"})})})})]}),ui.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 md:p-8 flex flex-col gap-4 items-center bg-gradient-to-t from-black/90 to-transparent z-20",children:o})]})},da={email:"VALLLLMIH@GMAIL.COM",apiSecret:"2d0b545eb566a056355fc3bb2fbb1817a3daaeee",cif:"28360867",seriesName:"CFB",workStation:"Sediu"},fa=({config:e,onSave:t,onClose:n})=>{const[r,o]=s.useState(!1),[i,a]=s.useState(e),l=e=>{const{name:t,value:n}=e.target;a(e=>({...e,[t]:n}))};return ui.jsxs("div",{className:"p-6 bg-slate-800 rounded-lg shadow-xl border border-slate-700 max-w-md w-full mx-auto",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-6 text-emerald-400",children:[ui.jsx(Vi,{className:"w-6 h-6"}),ui.jsx("h2",{className:"text-xl font-bold text-white",children:"Configurare Oblio"})]}),ui.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-800 rounded text-sm text-blue-200 flex gap-2",children:[ui.jsx(Oi,{className:"w-5 h-5 shrink-0"}),ui.jsxs("p",{children:["Introducei datele din contul dvs. Oblio (Setri ",">"," API) pentru a permite trimiterea facturilor."]})]}),ui.jsxs("div",{className:"mb-4 p-3 bg-slate-900 border border-slate-700 rounded-lg",children:[ui.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[ui.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Folosete date salvate"}),ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"checkbox",checked:r,onChange:t=>{return n=t.target.checked,o(n),void a(n?da:e);var n},className:"sr-only"}),ui.jsx("div",{className:"w-11 h-6 rounded-full transition-colors duration-200 "+(r?"bg-emerald-600":"bg-slate-600"),children:ui.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-200 ${r?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})]}),r&&ui.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Se vor folosi datele salvate pentru conectare."})]}),ui.jsxs("form",{onSubmit:e=>{e.preventDefault(),t(i),n()},className:"space-y-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Email Cont Oblio"}),ui.jsx("input",{type:"email",name:"email",value:i.email,onChange:l,className:"w-full bg-slate-900 border border-slate-700 text-white rounded p-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none",placeholder:"email@companie.ro",disabled:r,required:!0})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"API Secret / Token"}),ui.jsx("input",{type:"password",name:"apiSecret",value:i.apiSecret,onChange:l,className:"w-full bg-slate-900 border border-slate-700 text-white rounded p-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none",placeholder:"Token-ul API din Oblio",disabled:r,required:!0})]}),ui.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"CIF Companie"}),ui.jsx("input",{type:"text",name:"cif",value:i.cif,onChange:l,className:"w-full bg-slate-900 border border-slate-700 text-white rounded p-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none",placeholder:"RO123456",disabled:r,required:!0})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Serie Facturi"}),ui.jsx("input",{type:"text",name:"seriesName",value:i.seriesName,onChange:l,className:"w-full bg-slate-900 border border-slate-700 text-white rounded p-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none",placeholder:"Ex: XYZ",disabled:r})]})]}),ui.jsx("div",{}),ui.jsxs("div",{className:"pt-4 flex gap-3",children:[ui.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 px-4 bg-slate-700 text-white rounded font-medium hover:bg-slate-600 transition-colors",children:"Anuleaz"}),ui.jsxs("button",{type:"submit",className:"flex-1 py-3 px-4 bg-emerald-600 text-white rounded font-medium hover:bg-emerald-500 transition-colors flex items-center justify-center gap-2",children:[ui.jsx(Ki,{className:"w-4 h-4"}),"Salveaz"]})]})]})]})},pa=({inventory:e,onClose:t,onAddToCart:n})=>{const[r,o]=s.useState(""),[i,a]=s.useState({}),l=e.filter(e=>{var t,n;return e.name.toLowerCase().includes(r.toLowerCase())||(null==(t=e.code)?void 0:t.includes(r))||(null==(n=e.productCode)?void 0:n.includes(r))}),c=e=>i[e]||1;return ui.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:ui.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-700 w-full max-w-lg max-h-[80vh] flex flex-col shadow-2xl",children:[ui.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900 rounded-t-xl sticky top-0 z-10",children:[ui.jsxs("div",{className:"flex items-center gap-2",children:[ui.jsx(qi,{className:"w-5 h-5 text-emerald-400"}),ui.jsx("h2",{className:"text-lg font-bold text-white",children:"Inventar Oblio"}),ui.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-0.5 rounded-full border border-slate-700",children:e.length})]}),ui.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors",children:ui.jsx(sa,{className:"w-5 h-5"})})]}),ui.jsx("div",{className:"p-4 pb-2 bg-slate-900",children:ui.jsxs("div",{className:"relative",children:[ui.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),ui.jsx("input",{type:"text",placeholder:"Caut dup nume sau cod...",value:r,onChange:e=>o(e.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-lg pl-9 pr-4 py-3 text-sm text-white focus:outline-none focus:border-emerald-500/50 transition-colors"})]})}),ui.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar bg-slate-900 rounded-b-xl",children:0===l.length?ui.jsxs("div",{className:"text-center py-12 text-slate-500 text-sm flex flex-col items-center gap-2",children:[ui.jsx(Zi,{className:"w-8 h-8 opacity-20"}),ui.jsx("p",{children:"Nu s-au gsit produse."})]}):l.map((e,t)=>{const r=e.code||e.productCode||`idx_${t}`;return ui.jsxs("div",{className:"bg-slate-800/40 p-3 rounded-lg border border-slate-800 hover:border-slate-700 transition-colors flex justify-between items-center group",children:[ui.jsxs("div",{className:"flex-1 pr-4",children:[ui.jsx("div",{className:"font-medium text-slate-200 text-sm leading-tight mb-1",children:e.name}),ui.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.productCode&&""!==e.productCode.trim()&&ui.jsxs(ui.Fragment,{children:[ui.jsxs("span",{className:"text-[10px] bg-emerald-900/30 text-emerald-300 px-1.5 py-0.5 rounded font-mono border border-emerald-700/50",children:["EAN: ",e.productCode]}),e.code&&""!==e.code.trim()&&e.code!==e.productCode&&ui.jsx("span",{className:"text-xs text-slate-500",children:"|"})]}),e.code&&""!==e.code.trim()&&e.code!==e.productCode&&ui.jsxs("span",{className:"text-[10px] bg-slate-900 text-slate-400 px-1.5 py-0.5 rounded font-mono border border-slate-800",children:["CPV: ",e.code]}),e.productCode&&""!==e.productCode.trim()||e.code&&""!==e.code.trim()&&e.code!==e.productCode?ui.jsx("span",{className:"text-xs text-slate-500",children:"|"}):null,ui.jsx("span",{className:"text-xs text-slate-400",children:e.measuringUnit})]})]}),ui.jsxs("div",{className:"flex items-center gap-3",children:[ui.jsxs("div",{className:"flex flex-col items-end gap-1 min-w-[80px]",children:[ui.jsx("div",{className:"text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider border "+(e.stock>0?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"),children:e.stock>0?`${e.stock} STOC`:"STOC 0"}),ui.jsxs("div",{className:"text-sm font-semibold text-white",children:[e.price," ",ui.jsx("span",{className:"text-[10px] text-slate-400 font-normal",children:"RON"})]})]}),ui.jsxs("div",{className:"flex items-center gap-2 pl-3 border-l border-slate-700/50",children:[ui.jsx("input",{type:"number",min:"1",value:c(r),onChange:e=>{return t=r,n=parseFloat(e.target.value)||1,void a(e=>({...e,[t]:Math.max(1,n)}));var t,n},disabled:e.stock<=0,className:"w-12 bg-slate-950 border border-slate-700 rounded-md py-1 px-1 text-center text-sm text-white focus:ring-1 focus:ring-emerald-500 outline-none "+(e.stock<=0?"opacity-50 cursor-not-allowed":"")}),ui.jsx("button",{onClick:()=>n(e,c(r)),disabled:e.stock<=0,className:"p-1.5 rounded-lg transition-colors shadow-lg flex items-center justify-center "+(e.stock<=0?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-500/10"),title:e.stock<=0?"Stoc epuizat":"Adaug n co",children:ui.jsx(qi,{className:"w-4 h-4"})})]})]})]},t)})})]})})},ha="./api.php",ma=async e=>{if(console.log("Fetching inventory from Oblio via PHP backend..."),!e.email||!e.apiSecret||!e.cif)throw new Error("Credeniale Oblio lips (Email, Secret, CIF).");const t=encodeURIComponent(e.cif.trim()),n=encodeURIComponent(e.email.trim()),r=encodeURIComponent(e.apiSecret.trim()),o=`${ha}?action=products&email=${n}&apiSecret=${r}&cif=${t}`;try{const t=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();if(!n.success)throw new Error(n.error||"Eroare la obinerea produselor din Oblio.");return n.data&&Array.isArray(n.data)?(n.data.length>0&&(console.log("Toate produsele primite de la server (Raw):",n.data),console.log("Se filtreaza dupa Gestiunea:",e.workStation)),n.data.reduce((t,n)=>{if(e.workStation&&n.raw_stock&&Array.isArray(n.raw_stock)){const r=n.raw_stock.find(t=>t.management===e.workStation||t.workStation===e.workStation);r&&t.push({...n,stock:parseFloat(r.quantity||0),price:parseFloat(r.price||n.price),currency:r.currency||n.currency})}else t.push(n);return t},[])):(console.warn("Unexpected API response format:",n),[])}catch(i){if(console.error("Oblio API Fetch Error:",i),i.message.includes("Failed to fetch"))throw new Error("Eroare Conexiune. Verificai c backend-ul PHP este accesibil.");throw i}};var ga={};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ya{}function va(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function ba(e,t,n){for(let i=0;i<t.length-1;i++){const r=t[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(!(o in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${r}`);e[o]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[o])){const r=e[o];if(Array.isArray(n))for(let e=0;e<r.length;e++)ba(r[e],t.slice(i+1),n[e]);else for(const e of r)ba(e,t.slice(i+1),n)}return}if(r.endsWith("[0]")){const o=r.slice(0,-3);return o in e||(e[o]=[{}]),void ba(e[o][0],t.slice(i+1),n)}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],o=e[r];if(void 0!==o){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===o)return;if("object"!=typeof o||"object"!=typeof n||null===o||null===n)throw new Error(`Cannot set value for an existing key. Key: ${r}`);Object.assign(o,n)}else if("_self"!==r||"object"!=typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function wa(e,t,n=void 0){try{if(1===t.length&&"_self"===t[0])return e;for(let r=0;r<t.length;r++){if("object"!=typeof e||null===e)return n;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const o=e[i];return Array.isArray(o)?o.map(e=>wa(e,t.slice(r+1),n)):n}return n}e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function xa(e,t,n,r,o){if(r>=t.length)return;if("object"!=typeof e||null===e)return;const i=t[r];if(i.endsWith("[]")){const a=i.slice(0,-2),s=e;if(a in s&&Array.isArray(s[a]))for(const e of s[a])xa(e,t,n,r+1,o)}else if("*"===i){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=e,i=Object.keys(t).filter(e=>!e.startsWith("_")&&!o.has(e)),a={};for(const e of i)a[e]=t[e];for(const[e,o]of Object.entries(a)){const i=[];for(const t of n.slice(r))"*"===t?i.push(e):i.push(t);ba(t,i,o)}for(const e of i)delete t[e]}}else i in e&&xa(e[i],t,n,r+1,o)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ca(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ea(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["parent"]);null!=r&&ba(t,["parent"],r);const o=wa(e,["documentName"]);return null!=o&&ba(t,["documentName"],o),t}(a)),t}var _a,Aa,Sa,Na,Ia,Ta,Oa,Ra,ka,Pa,ja,Da,Ma,La,Ba,Fa,Ua,Ha,Va,Ga,za,qa,Wa,Xa,Ya,$a,Ka,Ja,Za,Qa,es,ts,ns,rs,os,is,as,ss,ls,cs,us,ds,fs,ps,hs,ms,gs,ys,vs,bs,ws,xs,Cs,Es,_s,As,Ss,Ns,Is,Ts,Os,Rs,ks,Ps,js,Ds,Ms,Ls,Bs,Fs,Us,Hs,Vs,Gs,zs,qs,Ws,Xs,Ys,$s,Ks,Js,Zs,Qs,el,tl,nl,rl,ol,il,al,sl,ll,cl,ul,dl,fl,pl,hl,ml,gl,yl,vl,bl,wl,xl,Cl,El,_l,Al,Sl,Nl,Il,Tl,Ol;(Aa=_a||(_a={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",Aa.OUTCOME_OK="OUTCOME_OK",Aa.OUTCOME_FAILED="OUTCOME_FAILED",Aa.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(Na=Sa||(Sa={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",Na.PYTHON="PYTHON",(Ta=Ia||(Ia={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",Ta.SILENT="SILENT",Ta.WHEN_IDLE="WHEN_IDLE",Ta.INTERRUPT="INTERRUPT",(Ra=Oa||(Oa={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",Ra.STRING="STRING",Ra.NUMBER="NUMBER",Ra.INTEGER="INTEGER",Ra.BOOLEAN="BOOLEAN",Ra.ARRAY="ARRAY",Ra.OBJECT="OBJECT",Ra.NULL="NULL",(Pa=ka||(ka={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",Pa.SIMPLE_SEARCH="SIMPLE_SEARCH",Pa.ELASTIC_SEARCH="ELASTIC_SEARCH",(Da=ja||(ja={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",Da.NO_AUTH="NO_AUTH",Da.API_KEY_AUTH="API_KEY_AUTH",Da.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",Da.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",Da.OAUTH="OAUTH",Da.OIDC_AUTH="OIDC_AUTH",(La=Ma||(Ma={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",La.HTTP_IN_QUERY="HTTP_IN_QUERY",La.HTTP_IN_HEADER="HTTP_IN_HEADER",La.HTTP_IN_PATH="HTTP_IN_PATH",La.HTTP_IN_BODY="HTTP_IN_BODY",La.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(Fa=Ba||(Ba={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",Fa.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Fa.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Fa.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",Fa.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",Fa.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",Fa.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(Ha=Ua||(Ua={})).UNSPECIFIED="UNSPECIFIED",Ha.BLOCKING="BLOCKING",Ha.NON_BLOCKING="NON_BLOCKING",(Ga=Va||(Va={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Ga.MODE_DYNAMIC="MODE_DYNAMIC",(qa=za||(za={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",qa.AUTO="AUTO",qa.ANY="ANY",qa.NONE="NONE",qa.VALIDATED="VALIDATED",(Xa=Wa||(Wa={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",Xa.LOW="LOW",Xa.MEDIUM="MEDIUM",Xa.HIGH="HIGH",Xa.MINIMAL="MINIMAL",($a=Ya||(Ya={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",$a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",$a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",$a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",$a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",$a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",$a.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",$a.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",$a.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",$a.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",$a.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(Ja=Ka||(Ka={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",Ja.SEVERITY="SEVERITY",Ja.PROBABILITY="PROBABILITY",(Qa=Za||(Za={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",Qa.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Qa.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Qa.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Qa.BLOCK_NONE="BLOCK_NONE",Qa.OFF="OFF",(ts=es||(es={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",ts.STOP="STOP",ts.MAX_TOKENS="MAX_TOKENS",ts.SAFETY="SAFETY",ts.RECITATION="RECITATION",ts.LANGUAGE="LANGUAGE",ts.OTHER="OTHER",ts.BLOCKLIST="BLOCKLIST",ts.PROHIBITED_CONTENT="PROHIBITED_CONTENT",ts.SPII="SPII",ts.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",ts.IMAGE_SAFETY="IMAGE_SAFETY",ts.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",ts.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",ts.NO_IMAGE="NO_IMAGE",ts.IMAGE_RECITATION="IMAGE_RECITATION",ts.IMAGE_OTHER="IMAGE_OTHER",(rs=ns||(ns={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",rs.NEGLIGIBLE="NEGLIGIBLE",rs.LOW="LOW",rs.MEDIUM="MEDIUM",rs.HIGH="HIGH",(is=os||(os={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",is.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",is.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",is.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",is.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(ss=as||(as={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",ss.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",ss.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",ss.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",ss.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(cs=ls||(ls={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",cs.SAFETY="SAFETY",cs.OTHER="OTHER",cs.BLOCKLIST="BLOCKLIST",cs.PROHIBITED_CONTENT="PROHIBITED_CONTENT",cs.IMAGE_SAFETY="IMAGE_SAFETY",cs.MODEL_ARMOR="MODEL_ARMOR",cs.JAILBREAK="JAILBREAK",(ds=us||(us={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",ds.ON_DEMAND="ON_DEMAND",ds.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(ps=fs||(fs={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ps.TEXT="TEXT",ps.IMAGE="IMAGE",ps.AUDIO="AUDIO",(ms=hs||(hs={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",ms.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",ms.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",ms.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(ys=gs||(gs={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",ys.TUNING_MODE_FULL="TUNING_MODE_FULL",ys.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(bs=vs||(vs={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",bs.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",bs.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",bs.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",bs.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",bs.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",bs.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(xs=ws||(ws={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",xs.JOB_STATE_QUEUED="JOB_STATE_QUEUED",xs.JOB_STATE_PENDING="JOB_STATE_PENDING",xs.JOB_STATE_RUNNING="JOB_STATE_RUNNING",xs.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",xs.JOB_STATE_FAILED="JOB_STATE_FAILED",xs.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",xs.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",xs.JOB_STATE_PAUSED="JOB_STATE_PAUSED",xs.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",xs.JOB_STATE_UPDATING="JOB_STATE_UPDATING",xs.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(Es=Cs||(Cs={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",Es.TUNING_TASK_I2V="TUNING_TASK_I2V",Es.TUNING_TASK_T2V="TUNING_TASK_T2V",Es.TUNING_TASK_R2V="TUNING_TASK_R2V",(As=_s||(_s={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",As.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",As.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",As.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",As.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH",(Ss||(Ss={})).COLLECTION="COLLECTION",(Is=Ns||(Ns={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",Is.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",Is.BALANCED="BALANCED",Is.PRIORITIZE_COST="PRIORITIZE_COST",(Os=Ts||(Ts={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Os.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(ks=Rs||(Rs={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",ks.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",ks.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",ks.BLOCK_NONE="BLOCK_NONE",(js=Ps||(Ps={})).DONT_ALLOW="DONT_ALLOW",js.ALLOW_ADULT="ALLOW_ADULT",js.ALLOW_ALL="ALLOW_ALL",(Ms=Ds||(Ds={})).auto="auto",Ms.en="en",Ms.ja="ja",Ms.ko="ko",Ms.hi="hi",Ms.zh="zh",Ms.pt="pt",Ms.es="es",(Bs=Ls||(Ls={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Bs.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Bs.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Bs.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Bs.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(Us=Fs||(Fs={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",Us.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",Us.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",Us.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(Vs=Hs||(Hs={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",Vs.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",Vs.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",Vs.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(zs=Gs||(Gs={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",zs.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",zs.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",zs.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",zs.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",zs.EDIT_MODE_STYLE="EDIT_MODE_STYLE",zs.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",zs.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(Ws=qs||(qs={})).FOREGROUND="FOREGROUND",Ws.BACKGROUND="BACKGROUND",Ws.PROMPT="PROMPT",Ws.SEMANTIC="SEMANTIC",Ws.INTERACTIVE="INTERACTIVE",(Ys=Xs||(Xs={})).ASSET="ASSET",Ys.STYLE="STYLE",(Ks=$s||($s={})).INSERT="INSERT",Ks.REMOVE="REMOVE",Ks.REMOVE_STATIC="REMOVE_STATIC",Ks.OUTPAINT="OUTPAINT",(Zs=Js||(Js={})).OPTIMIZED="OPTIMIZED",Zs.LOSSLESS="LOSSLESS",(el=Qs||(Qs={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",el.PREFERENCE_TUNING="PREFERENCE_TUNING",(nl=tl||(tl={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",nl.STATE_PENDING="STATE_PENDING",nl.STATE_ACTIVE="STATE_ACTIVE",nl.STATE_FAILED="STATE_FAILED",(ol=rl||(rl={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",ol.PROCESSING="PROCESSING",ol.ACTIVE="ACTIVE",ol.FAILED="FAILED",(al=il||(il={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",al.UPLOADED="UPLOADED",al.GENERATED="GENERATED",al.REGISTERED="REGISTERED",(ll=sl||(sl={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",ll.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",ll.RESPONSE_REJECTED="RESPONSE_REJECTED",ll.NEED_MORE_INPUT="NEED_MORE_INPUT",(ul=cl||(cl={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ul.TEXT="TEXT",ul.IMAGE="IMAGE",ul.VIDEO="VIDEO",ul.AUDIO="AUDIO",ul.DOCUMENT="DOCUMENT",(fl=dl||(dl={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",fl.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",fl.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(hl=pl||(pl={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",hl.ACTIVITY_START="ACTIVITY_START",hl.ACTIVITY_END="ACTIVITY_END",(gl=ml||(ml={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",gl.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",gl.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(vl=yl||(yl={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",vl.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",vl.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(wl=bl||(bl={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",wl.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",wl.NO_INTERRUPTION="NO_INTERRUPTION",(Cl=xl||(xl={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Cl.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Cl.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(_l=El||(El={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",_l.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",_l.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",_l.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",_l.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",_l.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",_l.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",_l.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",_l.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",_l.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",_l.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",_l.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",_l.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(Sl=Al||(Al={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",Sl.QUALITY="QUALITY",Sl.DIVERSITY="DIVERSITY",Sl.VOCALIZATION="VOCALIZATION",(Il=Nl||(Nl={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",Il.PLAY="PLAY",Il.PAUSE="PAUSE",Il.STOP="STOP",Il.RESET_CONTEXT="RESET_CONTEXT";class Rl{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class kl{get text(){var e,t,n,r,o,i,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",c=!1;const u=[];for(const d of null!==(s=null===(a=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||u.push(e);if("string"==typeof d.text){if("boolean"==typeof d.thought&&d.thought)continue;c=!0,l+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?l:void 0}get data(){var e,t,n,r,o,i,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const c=[];for(const u of null!==(s=null===(a=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(u))"inlineData"===e||null===t&&void 0===t||c.push(e);u.inlineData&&"string"==typeof u.inlineData.data&&(l+=atob(u.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,o,i,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(s=null===(a=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,o,i,a,s,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(s=null===(a=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,o,i,a,s,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(s=null===(a=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class Pl{}class jl{}class Dl{}class Ml{}class Ll{}class Bl{}class Fl{}class Ul{}class Hl{}class Vl{}class Gl{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new Gl;let r;const o=e;return r=t?function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["_self"]);return null!=n&&ba(t,["video"],function(e){const t={},n=wa(e,["gcsUri"]);null!=n&&ba(t,["uri"],n);const r=wa(e,["bytesBase64Encoded"]);null!=r&&ba(t,["videoBytes"],Ca(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["mimeType"],o),t}(n)),t}(e))),ba(t,["generatedVideos"],e)}const r=wa(e,["raiMediaFilteredCount"]);null!=r&&ba(t,["raiMediaFilteredCount"],r);const o=wa(e,["raiMediaFilteredReasons"]);return null!=o&&ba(t,["raiMediaFilteredReasons"],o),t}(a)),t}(o):function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response","generateVideoResponse"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["video"]);return null!=n&&ba(t,["video"],function(e){const t={},n=wa(e,["uri"]);null!=n&&ba(t,["uri"],n);const r=wa(e,["encodedVideo"]);null!=r&&ba(t,["videoBytes"],Ca(r));const o=wa(e,["encoding"]);return null!=o&&ba(t,["mimeType"],o),t}(n)),t}(e))),ba(t,["generatedVideos"],e)}const r=wa(e,["raiMediaFilteredCount"]);null!=r&&ba(t,["raiMediaFilteredCount"],r);const o=wa(e,["raiMediaFilteredReasons"]);return null!=o&&ba(t,["raiMediaFilteredReasons"],o),t}(a)),t}(o),Object.assign(n,r),n}}class zl{}class ql{}class Wl{}class Xl{}class Yl{}class $l{}class Kl{}class Jl{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new Jl,r=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["parent"]);null!=r&&ba(t,["parent"],r);const o=wa(e,["documentName"]);return null!=o&&ba(t,["documentName"],o),t}(a)),t}(e);return Object.assign(n,r),n}}class Zl{}class Ql{}class ec{}class tc{}class nc{get text(){var e,t,n;let r="",o=!1;const i=[];for(const a of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(a))"text"!==e&&"thought"!==e&&null!==t&&i.push(e);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;o=!0,r+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,n;let r="";const o=[];for(const i of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(i))"inlineData"!==e&&null!==t&&o.push(e);i.inlineData&&"string"==typeof i.inlineData.data&&(r+=atob(i.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class rc{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class oc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new oc,r=Ea(e);return Object.assign(n,r),n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ic(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function ac(e,t){const n=ic(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function sc(e){return Array.isArray(e)?e.map(e=>lc(e)):[lc(e)]}function lc(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function cc(e){const t=lc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function uc(e){const t=lc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function dc(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function fc(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>dc(e)):[dc(e)]}function pc(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function hc(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function mc(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function gc(e){if(null==e)throw new Error("ContentUnion is required");return pc(e)?e:{role:"user",parts:fc(e)}}function yc(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=gc(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=gc(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>gc(e)):[gc(t)]}function vc(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(hc(e)||mc(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gc(e)]}const t=[],n=[],r=pc(e[0]);for(const o of e){const e=pc(o);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(o);else{if(hc(o)||mc(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:fc(n)}),t}function bc(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(t.nullable=!0,e=i[1]):"null"===i[1].type&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(Oa).includes(n[0].toUpperCase())?n[0].toUpperCase():Oa.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(Oa).includes(e.toUpperCase())?e.toUpperCase():Oa.TYPE_UNSPECIFIED})}}(e.type,t);for(const[a,s]of Object.entries(e))if(null!=s)if("type"==a){if("null"===s)throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;t.type=Object.values(Oa).includes(s.toUpperCase())?s.toUpperCase():Oa.TYPE_UNSPECIFIED}else if(n.includes(a))t[a]=bc(s);else if(r.includes(a)){const e=[];for(const n of s)"null"!=n.type?e.push(bc(n)):t.nullable=!0;t[a]=e}else if(o.includes(a)){const e={};for(const[t,n]of Object.entries(s))e[t]=bc(n);t[a]=e}else{if("additionalProperties"===a)continue;t[a]=s}return t}function wc(e){return bc(e)}function xc(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function Cc(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ec(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=bc(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=bc(t.response));return e}function _c(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Ac(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}(e,t,"cachedContents")}function Sc(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Nc(e){return Ca(e)}function Ic(e){var t;let n;var r,o;if(null!=(r=e)&&"object"==typeof r&&"name"in r&&(n=e.name),!(null!=(o=e)&&"object"==typeof o&&"uri"in o&&(n=e.uri,void 0===n)||function(e){return null!=e&&"object"==typeof e&&"video"in e}(e)&&(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===n))){if("string"==typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Tc(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function Oc(e){for(const t of["models","tunedModels","publisherModels"])if(Rc(e,t))return e[t];return[]}function Rc(e,t){return null!==e&&"object"==typeof e&&t in e}function kc(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function Pc(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${t}`);n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${t}`);n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==o)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jc(e){if("object"!=typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!=typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let o=!1;for(const i of r){if("object"!=typeof i||null===i)continue;const e=i.response;if("object"==typeof e&&null!==e&&void 0!==e.embedding){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Dc(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Mc(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lc(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata","displayName"]);null!=r&&ba(t,["displayName"],r);const o=wa(e,["metadata","state"]);null!=o&&ba(t,["state"],Mc(o));const i=wa(e,["metadata","createTime"]);null!=i&&ba(t,["createTime"],i);const a=wa(e,["metadata","endTime"]);null!=a&&ba(t,["endTime"],a);const s=wa(e,["metadata","updateTime"]);null!=s&&ba(t,["updateTime"],s);const l=wa(e,["metadata","model"]);null!=l&&ba(t,["model"],l);const c=wa(e,["metadata","output"]);return null!=c&&ba(t,["dest"],function(e){const t={},n=wa(e,["responsesFile"]);null!=n&&ba(t,["fileName"],n);const r=wa(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["response"]);null!=n&&ba(t,["response"],function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["content"]);null!=n&&ba(t,["content"],n);const r=wa(e,["citationMetadata"]);null!=r&&ba(t,["citationMetadata"],function(e){const t={},n=wa(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["citations"],e)}return t}(r));const o=wa(e,["tokenCount"]);null!=o&&ba(t,["tokenCount"],o);const i=wa(e,["finishReason"]);null!=i&&ba(t,["finishReason"],i);const a=wa(e,["avgLogprobs"]);null!=a&&ba(t,["avgLogprobs"],a);const s=wa(e,["groundingMetadata"]);null!=s&&ba(t,["groundingMetadata"],s);const l=wa(e,["index"]);null!=l&&ba(t,["index"],l);const c=wa(e,["logprobsResult"]);null!=c&&ba(t,["logprobsResult"],c);const u=wa(e,["safetyRatings"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["safetyRatings"],e)}const d=wa(e,["urlContextMetadata"]);return null!=d&&ba(t,["urlContextMetadata"],d),t}(e))),ba(t,["candidates"],e)}const o=wa(e,["modelVersion"]);null!=o&&ba(t,["modelVersion"],o);const i=wa(e,["promptFeedback"]);null!=i&&ba(t,["promptFeedback"],i);const a=wa(e,["responseId"]);null!=a&&ba(t,["responseId"],a);const s=wa(e,["usageMetadata"]);return null!=s&&ba(t,["usageMetadata"],s),t}(n));const r=wa(e,["error"]);return null!=r&&ba(t,["error"],r),t}(e))),ba(t,["inlinedResponses"],e)}const o=wa(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["inlinedEmbedContentResponses"],e)}return t}(jc(c))),t}function Bc(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["displayName"]);null!=r&&ba(t,["displayName"],r);const o=wa(e,["state"]);null!=o&&ba(t,["state"],Mc(o));const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["createTime"]);null!=a&&ba(t,["createTime"],a);const s=wa(e,["startTime"]);null!=s&&ba(t,["startTime"],s);const l=wa(e,["endTime"]);null!=l&&ba(t,["endTime"],l);const c=wa(e,["updateTime"]);null!=c&&ba(t,["updateTime"],c);const u=wa(e,["model"]);null!=u&&ba(t,["model"],u);const d=wa(e,["inputConfig"]);null!=d&&ba(t,["src"],function(e){const t={},n=wa(e,["instancesFormat"]);null!=n&&ba(t,["format"],n);const r=wa(e,["gcsSource","uris"]);null!=r&&ba(t,["gcsUri"],r);const o=wa(e,["bigquerySource","inputUri"]);return null!=o&&ba(t,["bigqueryUri"],o),t}(d));const f=wa(e,["outputConfig"]);null!=f&&ba(t,["dest"],function(e){const t={},n=wa(e,["predictionsFormat"]);null!=n&&ba(t,["format"],n);const r=wa(e,["gcsDestination","outputUriPrefix"]);null!=r&&ba(t,["gcsUri"],r);const o=wa(e,["bigqueryDestination","outputUri"]);return null!=o&&ba(t,["bigqueryUri"],o),t}(jc(f)));const p=wa(e,["completionStats"]);return null!=p&&ba(t,["completionStats"],p),t}function Fc(e){const t={},n=wa(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["mediaResolution"]);null!=n&&ba(t,["mediaResolution"],n);const r=wa(e,["codeExecutionResult"]);null!=r&&ba(t,["codeExecutionResult"],r);const o=wa(e,["executableCode"]);null!=o&&ba(t,["executableCode"],o);const i=wa(e,["fileData"]);null!=i&&ba(t,["fileData"],function(e){const t={};if(void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wa(e,["fileUri"]);null!=n&&ba(t,["fileUri"],n);const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(i));const a=wa(e,["functionCall"]);null!=a&&ba(t,["functionCall"],function(e){const t={},n=wa(e,["id"]);null!=n&&ba(t,["id"],n);const r=wa(e,["args"]);null!=r&&ba(t,["args"],r);const o=wa(e,["name"]);if(null!=o&&ba(t,["name"],o),void 0!==wa(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wa(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(a));const s=wa(e,["functionResponse"]);null!=s&&ba(t,["functionResponse"],s);const l=wa(e,["inlineData"]);null!=l&&ba(t,["inlineData"],function(e){const t={},n=wa(e,["data"]);if(null!=n&&ba(t,["data"],n),void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(l));const c=wa(e,["text"]);null!=c&&ba(t,["text"],c);const u=wa(e,["thought"]);null!=u&&ba(t,["thought"],u);const d=wa(e,["thoughtSignature"]);null!=d&&ba(t,["thoughtSignature"],d);const f=wa(e,["videoMetadata"]);return null!=f&&ba(t,["videoMetadata"],f),t}(e))),ba(t,["parts"],e)}const r=wa(e,["role"]);return null!=r&&ba(t,["role"],r),t}function Uc(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["src"]);null!=o&&ba(n,["batch","inputConfig"],function(e,t){const n={};if(void 0!==wa(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==wa(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==wa(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=wa(t,["fileName"]);null!=r&&ba(n,["fileName"],r);const o=wa(t,["inlinedRequests"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["request","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>Fc(e))),ba(n,["request","contents"],e)}const i=wa(t,["metadata"]);null!=i&&ba(n,["metadata"],i);const a=wa(t,["config"]);return null!=a&&ba(n,["request","generationConfig"],function(e,t,n){const r={},o=wa(t,["systemInstruction"]);void 0!==n&&null!=o&&ba(n,["systemInstruction"],Fc(gc(o)));const i=wa(t,["temperature"]);null!=i&&ba(r,["temperature"],i);const a=wa(t,["topP"]);null!=a&&ba(r,["topP"],a);const s=wa(t,["topK"]);null!=s&&ba(r,["topK"],s);const l=wa(t,["candidateCount"]);null!=l&&ba(r,["candidateCount"],l);const c=wa(t,["maxOutputTokens"]);null!=c&&ba(r,["maxOutputTokens"],c);const u=wa(t,["stopSequences"]);null!=u&&ba(r,["stopSequences"],u);const d=wa(t,["responseLogprobs"]);null!=d&&ba(r,["responseLogprobs"],d);const f=wa(t,["logprobs"]);null!=f&&ba(r,["logprobs"],f);const p=wa(t,["presencePenalty"]);null!=p&&ba(r,["presencePenalty"],p);const h=wa(t,["frequencyPenalty"]);null!=h&&ba(r,["frequencyPenalty"],h);const m=wa(t,["seed"]);null!=m&&ba(r,["seed"],m);const g=wa(t,["responseMimeType"]);null!=g&&ba(r,["responseMimeType"],g);const y=wa(t,["responseSchema"]);null!=y&&ba(r,["responseSchema"],wc(y));const v=wa(t,["responseJsonSchema"]);if(null!=v&&ba(r,["responseJsonSchema"],v),void 0!==wa(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==wa(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=wa(t,["safetySettings"]);if(void 0!==n&&null!=b){let e=b;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["category"]);if(null!=n&&ba(t,["category"],n),void 0!==wa(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=wa(e,["threshold"]);return null!=r&&ba(t,["threshold"],r),t}(e))),ba(n,["safetySettings"],e)}const w=wa(t,["tools"]);if(void 0!==n&&null!=w){let e=_c(w);Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wa(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const n=wa(e,["computerUse"]);null!=n&&ba(t,["computerUse"],n);const r=wa(e,["fileSearch"]);null!=r&&ba(t,["fileSearch"],r);const o=wa(e,["codeExecution"]);if(null!=o&&ba(t,["codeExecution"],o),void 0!==wa(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=wa(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["functionDeclarations"],e)}const a=wa(e,["googleMaps"]);null!=a&&ba(t,["googleMaps"],function(e){const t={};if(void 0!==wa(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wa(e,["enableWidget"]);return null!=n&&ba(t,["enableWidget"],n),t}(a));const s=wa(e,["googleSearch"]);null!=s&&ba(t,["googleSearch"],function(e){const t={};if(void 0!==wa(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wa(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wa(e,["timeRangeFilter"]);return null!=n&&ba(t,["timeRangeFilter"],n),t}(s));const l=wa(e,["googleSearchRetrieval"]);null!=l&&ba(t,["googleSearchRetrieval"],l);const c=wa(e,["urlContext"]);return null!=c&&ba(t,["urlContext"],c),t}(Ec(e)))),ba(n,["tools"],e)}const x=wa(t,["toolConfig"]);if(void 0!==n&&null!=x&&ba(n,["toolConfig"],function(e){const t={},n=wa(e,["retrievalConfig"]);null!=n&&ba(t,["retrievalConfig"],n);const r=wa(e,["functionCallingConfig"]);return null!=r&&ba(t,["functionCallingConfig"],function(e){const t={},n=wa(e,["allowedFunctionNames"]);null!=n&&ba(t,["allowedFunctionNames"],n);const r=wa(e,["mode"]);if(null!=r&&ba(t,["mode"],r),void 0!==wa(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(r)),t}(x)),void 0!==wa(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const C=wa(t,["cachedContent"]);void 0!==n&&null!=C&&ba(n,["cachedContent"],Ac(e,C));const E=wa(t,["responseModalities"]);null!=E&&ba(r,["responseModalities"],E);const _=wa(t,["mediaResolution"]);null!=_&&ba(r,["mediaResolution"],_);const A=wa(t,["speechConfig"]);if(null!=A&&ba(r,["speechConfig"],xc(A)),void 0!==wa(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=wa(t,["thinkingConfig"]);null!=S&&ba(r,["thinkingConfig"],S);const N=wa(t,["imageConfig"]);null!=N&&ba(r,["imageConfig"],function(e){const t={},n=wa(e,["aspectRatio"]);null!=n&&ba(t,["aspectRatio"],n);const r=wa(e,["imageSize"]);if(null!=r&&ba(t,["imageSize"],r),void 0!==wa(e,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==wa(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==wa(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N));const I=wa(t,["enableEnhancedCivicAnswers"]);if(null!=I&&ba(r,["enableEnhancedCivicAnswers"],I),void 0!==wa(t,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}(e,a,wa(n,["request"],{}))),n}(e,t))),ba(n,["requests","requests"],t)}return n}(e,Pc(e,o)));const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["displayName"]);if(void 0!==t&&null!=n&&ba(t,["batch","displayName"],n),void 0!==wa(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,n),n}function Hc(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["model"],ic(e,r));const o=wa(t,["src"]);null!=o&&ba(n,["inputConfig"],function(e){const t={},n=wa(e,["format"]);null!=n&&ba(t,["instancesFormat"],n);const r=wa(e,["gcsUri"]);null!=r&&ba(t,["gcsSource","uris"],r);const o=wa(e,["bigqueryUri"]);if(null!=o&&ba(t,["bigquerySource","inputUri"],o),void 0!==wa(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==wa(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(Pc(e,o)));const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["displayName"]);void 0!==t&&null!=n&&ba(t,["displayName"],n);const r=wa(e,["dest"]);void 0!==t&&null!=r&&ba(t,["outputConfig"],function(e){const t={},n=wa(e,["format"]);null!=n&&ba(t,["predictionsFormat"],n);const r=wa(e,["gcsUri"]);null!=r&&ba(t,["gcsDestination","outputUriPrefix"],r);const o=wa(e,["bigqueryUri"]);if(null!=o&&ba(t,["bigqueryDestination","outputUri"],o),void 0!==wa(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==wa(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==wa(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}(r)))}(i,n),n}(Ol=Tl||(Tl={})).PAGED_ITEM_BATCH_JOBS="batchJobs",Ol.PAGED_ITEM_MODELS="models",Ol.PAGED_ITEM_TUNING_JOBS="tuningJobs",Ol.PAGED_ITEM_FILES="files",Ol.PAGED_ITEM_CACHED_CONTENTS="cachedContents",Ol.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",Ol.PAGED_ITEM_DOCUMENTS="documents";class Vc{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}},i.config&&(i.config.pageToken=t.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(o=null===(r=i.config)||void 0===r?void 0:r.pageSize)&&void 0!==o?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gc extends ya{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Vc(Tl.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){const t=Uc(this.apiClient,e),n=va("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,o=r.requests,i=[];for(const a of o){const e=Object.assign({},a);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}i.push(e)}return r.requests=i,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${r}`),void 0===n.dest){const t=this.getGcsUri(e),o=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${r}`;else{if(!o)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest=`${o}_dest_${r}`}}return n}async createInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=Hc(this.apiClient,e);return a=va("batchPredictionJobs",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Bc(e))}{const t=Uc(this.apiClient,e);return a=va("{model}:batchGenerateContent",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Lc(e))}}async createEmbeddingsInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["src"]);null!=o&&ba(n,["batch","inputConfig"],function(e,t){const n={},r=wa(t,["fileName"]);null!=r&&ba(n,["file_name"],r);const o=wa(t,["inlinedRequests"]);return null!=o&&ba(n,["requests"],function(e,t){const n={},r=wa(t,["contents"]);if(null!=r){let t=yc(e,r);Array.isArray(t)&&(t=t.map(e=>e)),ba(n,["requests[]","request","content"],t)}const o=wa(t,["config"]);return null!=o&&(ba(n,["_self"],function(e,t){const n=wa(e,["taskType"]);void 0!==t&&null!=n&&ba(t,["requests[]","taskType"],n);const r=wa(e,["title"]);void 0!==t&&null!=r&&ba(t,["requests[]","title"],r);const o=wa(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&ba(t,["requests[]","outputDimensionality"],o),void 0!==wa(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==wa(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(o,n)),function(e){for(const[t,n]of Object.entries({"requests[].*":"requests[].request.*"})){const r=t.split("."),o=n.split("."),i=new Set;let a=-1;for(let e=0;e<r.length;e++)if("*"===r[e]){a=e;break}if(-1!==a&&o.length>a)for(let e=a;e<o.length;e++){const t=o[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||i.add(t)}xa(e,r,o,0,i)}}(n)),n}(e,o)),n}(e,o));const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["displayName"]);void 0!==t&&null!=n&&ba(t,["batch","displayName"],n)}(i,n),n}(this.apiClient,e);return o=va("{model}:asyncBatchEmbedContent",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>Lc(e))}}async get(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);return a=va("batchPredictionJobs/{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Bc(e))}{const t=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);return a=va("batches/{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>Lc(e))}}async cancel(e){var t,n,r,o;let i="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);i=va("batchPredictionJobs/{name}:cancel",r._url),a=r._query,delete r._url,delete r._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);i=va("batches/{name}:cancel",t._url),a=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async listInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r);const o=wa(e,["filter"]);void 0!==t&&null!=o&&ba(t,["_query","filter"],o)}(n,t),t}(e);return a=va("batchPredictionJobs",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["batchPredictionJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Bc(e))),ba(t,["batchJobs"],e)}return t}(e),n=new tc;return Object.assign(n,t),n})}{const t=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);if(void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r),void 0!==wa(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}(e);return a=va("batches",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["operations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Lc(e))),ba(t,["batchJobs"],e)}return t}(e),n=new tc;return Object.assign(n,t),n})}}async delete(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);return a=va("batchPredictionJobs/{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);return null!=i&&ba(t,["error"],i),t}(e))}{const t=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Dc(e,r)),n}(this.apiClient,e);return a=va("batches/{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);return null!=i&&ba(t,["error"],i),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zc(e){const t={},n=wa(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["mediaResolution"]);null!=n&&ba(t,["mediaResolution"],n);const r=wa(e,["codeExecutionResult"]);null!=r&&ba(t,["codeExecutionResult"],r);const o=wa(e,["executableCode"]);null!=o&&ba(t,["executableCode"],o);const i=wa(e,["fileData"]);null!=i&&ba(t,["fileData"],function(e){const t={};if(void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wa(e,["fileUri"]);null!=n&&ba(t,["fileUri"],n);const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(i));const a=wa(e,["functionCall"]);null!=a&&ba(t,["functionCall"],function(e){const t={},n=wa(e,["id"]);null!=n&&ba(t,["id"],n);const r=wa(e,["args"]);null!=r&&ba(t,["args"],r);const o=wa(e,["name"]);if(null!=o&&ba(t,["name"],o),void 0!==wa(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wa(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(a));const s=wa(e,["functionResponse"]);null!=s&&ba(t,["functionResponse"],s);const l=wa(e,["inlineData"]);null!=l&&ba(t,["inlineData"],function(e){const t={},n=wa(e,["data"]);if(null!=n&&ba(t,["data"],n),void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(l));const c=wa(e,["text"]);null!=c&&ba(t,["text"],c);const u=wa(e,["thought"]);null!=u&&ba(t,["thought"],u);const d=wa(e,["thoughtSignature"]);null!=d&&ba(t,["thoughtSignature"],d);const f=wa(e,["videoMetadata"]);return null!=f&&ba(t,["videoMetadata"],f),t}(e))),ba(t,["parts"],e)}const r=wa(e,["role"]);return null!=r&&ba(t,["role"],r),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class qc extends ya{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Vc(Tl.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["model"],ac(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["ttl"]);void 0!==t&&null!=n&&ba(t,["ttl"],n);const r=wa(e,["expireTime"]);void 0!==t&&null!=r&&ba(t,["expireTime"],r);const o=wa(e,["displayName"]);void 0!==t&&null!=o&&ba(t,["displayName"],o);const i=wa(e,["contents"]);if(void 0!==t&&null!=i){let e=vc(i);Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["contents"],e)}const a=wa(e,["systemInstruction"]);void 0!==t&&null!=a&&ba(t,["systemInstruction"],gc(a));const s=wa(e,["tools"]);if(void 0!==t&&null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["retrieval"]);null!=n&&ba(t,["retrieval"],n);const r=wa(e,["computerUse"]);if(null!=r&&ba(t,["computerUse"],r),void 0!==wa(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=wa(e,["codeExecution"]);null!=o&&ba(t,["codeExecution"],o);const i=wa(e,["enterpriseWebSearch"]);null!=i&&ba(t,["enterpriseWebSearch"],i);const a=wa(e,["functionDeclarations"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["description"]);null!=n&&ba(t,["description"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["parameters"]);null!=o&&ba(t,["parameters"],o);const i=wa(e,["parametersJsonSchema"]);null!=i&&ba(t,["parametersJsonSchema"],i);const a=wa(e,["response"]);null!=a&&ba(t,["response"],a);const s=wa(e,["responseJsonSchema"]);if(null!=s&&ba(t,["responseJsonSchema"],s),void 0!==wa(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return t}(e))),ba(t,["functionDeclarations"],e)}const s=wa(e,["googleMaps"]);null!=s&&ba(t,["googleMaps"],s);const l=wa(e,["googleSearch"]);null!=l&&ba(t,["googleSearch"],l);const c=wa(e,["googleSearchRetrieval"]);null!=c&&ba(t,["googleSearchRetrieval"],c);const u=wa(e,["urlContext"]);return null!=u&&ba(t,["urlContext"],u),t}(e))),ba(t,["tools"],e)}const l=wa(e,["toolConfig"]);void 0!==t&&null!=l&&ba(t,["toolConfig"],l);const c=wa(e,["kmsKeyName"]);void 0!==t&&null!=c&&ba(t,["encryption_spec","kmsKeyName"],c)}(o,n),n}(this.apiClient,e);return a=va("cachedContents",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["model"],ac(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["ttl"]);void 0!==t&&null!=n&&ba(t,["ttl"],n);const r=wa(e,["expireTime"]);void 0!==t&&null!=r&&ba(t,["expireTime"],r);const o=wa(e,["displayName"]);void 0!==t&&null!=o&&ba(t,["displayName"],o);const i=wa(e,["contents"]);if(void 0!==t&&null!=i){let e=vc(i);Array.isArray(e)&&(e=e.map(e=>zc(e))),ba(t,["contents"],e)}const a=wa(e,["systemInstruction"]);void 0!==t&&null!=a&&ba(t,["systemInstruction"],zc(gc(a)));const s=wa(e,["tools"]);if(void 0!==t&&null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wa(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const n=wa(e,["computerUse"]);null!=n&&ba(t,["computerUse"],n);const r=wa(e,["fileSearch"]);null!=r&&ba(t,["fileSearch"],r);const o=wa(e,["codeExecution"]);if(null!=o&&ba(t,["codeExecution"],o),void 0!==wa(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=wa(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["functionDeclarations"],e)}const a=wa(e,["googleMaps"]);null!=a&&ba(t,["googleMaps"],function(e){const t={};if(void 0!==wa(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wa(e,["enableWidget"]);return null!=n&&ba(t,["enableWidget"],n),t}(a));const s=wa(e,["googleSearch"]);null!=s&&ba(t,["googleSearch"],function(e){const t={};if(void 0!==wa(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wa(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wa(e,["timeRangeFilter"]);return null!=n&&ba(t,["timeRangeFilter"],n),t}(s));const l=wa(e,["googleSearchRetrieval"]);null!=l&&ba(t,["googleSearchRetrieval"],l);const c=wa(e,["urlContext"]);return null!=c&&ba(t,["urlContext"],c),t}(e))),ba(t,["tools"],e)}const l=wa(e,["toolConfig"]);if(void 0!==t&&null!=l&&ba(t,["toolConfig"],function(e){const t={},n=wa(e,["retrievalConfig"]);null!=n&&ba(t,["retrievalConfig"],n);const r=wa(e,["functionCallingConfig"]);return null!=r&&ba(t,["functionCallingConfig"],function(e){const t={},n=wa(e,["allowedFunctionNames"]);null!=n&&ba(t,["allowedFunctionNames"],n);const r=wa(e,["mode"]);if(null!=r&&ba(t,["mode"],r),void 0!==wa(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(r)),t}(l)),void 0!==wa(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.")}(o,n),n}(this.apiClient,e);return a=va("cachedContents",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async get(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Ac(e,r)),n}(this.apiClient,e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Ac(e,r)),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async delete(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Ac(e,r)),n}(this.apiClient,e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Wl;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["name"]);return null!=r&&ba(n,["_url","name"],Ac(e,r)),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Wl;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["name"]);null!=r&&ba(n,["_url","name"],Ac(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["ttl"]);void 0!==t&&null!=n&&ba(t,["ttl"],n);const r=wa(e,["expireTime"]);void 0!==t&&null!=r&&ba(t,["expireTime"],r)}(o,n),n}(this.apiClient,e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=wa(t,["name"]);null!=r&&ba(n,["_url","name"],Ac(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["ttl"]);void 0!==t&&null!=n&&ba(t,["ttl"],n);const r=wa(e,["expireTime"]);void 0!==t&&null!=r&&ba(t,["expireTime"],r)}(o,n),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async listInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r)}(n,t),t}(e);return a=va("cachedContents",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["cachedContents"],e)}return t}(e),n=new Xl;return Object.assign(n,t),n})}{const t=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r)}(n,t),t}(e);return a=va("cachedContents",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["cachedContents"],e)}return t}(e),n=new Xl;return Object.assign(n,t),n})}}}function Wc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Xc(e){return this instanceof Xc?(this.v=e,this):new Xc(e)}function Yc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{(n=o[e](t)).value instanceof Xc?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(r){u(i[0][3],r)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function $c(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){var i,a,s,l;i=r,a=o,s=(t=e[n](t)).done,l=t.value,Promise.resolve(l).then(function(e){i({value:e,done:s})},a)})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kc(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&Jc(n)}function Jc(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function Zc(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const o=[];let i=!0;for(;r<n&&"model"===e[r].role;)o.push(e[r]),i&&!Jc(e[r])&&(i=!1),r++;i?t.push(...o):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class Qc{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new eu(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class eu{constructor(e,t,n,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}(o)}async sendMessage(e){var t;await this.sendPromise;const n=gc(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,o;const i=await r,a=null===(t=null===(e=i.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,s=i.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=s&&(c=null!==(o=s.slice(l))&&void 0!==o?o:[]);const u=a?[a]:[];this.recordHistory(n,u,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=gc(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,n)}getHistory(e=!1){const t=e?Zc(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Yc(this,arguments,function*(){var n,r,o,i,a,s;const l=[];try{for(var c,u=!0,d=$c(e);!(n=(c=yield Xc(d.next())).done);u=!0){i=c.value,u=!1;const e=i;if(Kc(e)){const t=null===(s=null===(a=e.candidates)||void 0===a?void 0:a[0])||void 0===s?void 0:s.content;void 0!==t&&l.push(t)}yield yield Xc(e)}}catch(f){r={error:f}}finally{try{u||n||!(o=d.return)||(yield Xc(o.call(d)))}finally{if(r)throw r.error}}this.recordHistory(t,l)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(e=>void 0!==e.role)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Zc(n)):this.history.push(e),this.history.push(...r)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,tu.prototype)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class nu extends ya{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Vc(Tl.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r)}(n,t),t}(e);return o=va("files",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["files"],e)}return t}(e),n=new Zl;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["file"]);return null!=n&&ba(t,["file"],n),t}(e);return o=va("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Ql;return Object.assign(n,t),n})}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","file"],Ic(n)),t}(e);return o=va("files/{file}",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","file"],Ic(n)),t}(e);return o=va("files/{file}",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new ec;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ru(e){const t={},n=wa(e,["data"]);if(null!=n&&ba(t,["data"],n),void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}function ou(e,t){const n=wa(e,["generationConfig"]);void 0!==t&&null!=n&&ba(t,["setup","generationConfig"],n);const r=wa(e,["responseModalities"]);void 0!==t&&null!=r&&ba(t,["setup","generationConfig","responseModalities"],r);const o=wa(e,["temperature"]);void 0!==t&&null!=o&&ba(t,["setup","generationConfig","temperature"],o);const i=wa(e,["topP"]);void 0!==t&&null!=i&&ba(t,["setup","generationConfig","topP"],i);const a=wa(e,["topK"]);void 0!==t&&null!=a&&ba(t,["setup","generationConfig","topK"],a);const s=wa(e,["maxOutputTokens"]);void 0!==t&&null!=s&&ba(t,["setup","generationConfig","maxOutputTokens"],s);const l=wa(e,["mediaResolution"]);void 0!==t&&null!=l&&ba(t,["setup","generationConfig","mediaResolution"],l);const c=wa(e,["seed"]);void 0!==t&&null!=c&&ba(t,["setup","generationConfig","seed"],c);const u=wa(e,["speechConfig"]);void 0!==t&&null!=u&&ba(t,["setup","generationConfig","speechConfig"],Cc(u));const d=wa(e,["thinkingConfig"]);void 0!==t&&null!=d&&ba(t,["setup","generationConfig","thinkingConfig"],d);const f=wa(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&ba(t,["setup","generationConfig","enableAffectiveDialog"],f);const p=wa(e,["systemInstruction"]);void 0!==t&&null!=p&&ba(t,["setup","systemInstruction"],function(e){const t={},n=wa(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["mediaResolution"]);null!=n&&ba(t,["mediaResolution"],n);const r=wa(e,["codeExecutionResult"]);null!=r&&ba(t,["codeExecutionResult"],r);const o=wa(e,["executableCode"]);null!=o&&ba(t,["executableCode"],o);const i=wa(e,["fileData"]);null!=i&&ba(t,["fileData"],function(e){const t={};if(void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wa(e,["fileUri"]);null!=n&&ba(t,["fileUri"],n);const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(i));const a=wa(e,["functionCall"]);null!=a&&ba(t,["functionCall"],function(e){const t={},n=wa(e,["id"]);null!=n&&ba(t,["id"],n);const r=wa(e,["args"]);null!=r&&ba(t,["args"],r);const o=wa(e,["name"]);if(null!=o&&ba(t,["name"],o),void 0!==wa(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wa(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(a));const s=wa(e,["functionResponse"]);null!=s&&ba(t,["functionResponse"],s);const l=wa(e,["inlineData"]);null!=l&&ba(t,["inlineData"],ru(l));const c=wa(e,["text"]);null!=c&&ba(t,["text"],c);const u=wa(e,["thought"]);null!=u&&ba(t,["thought"],u);const d=wa(e,["thoughtSignature"]);null!=d&&ba(t,["thoughtSignature"],d);const f=wa(e,["videoMetadata"]);return null!=f&&ba(t,["videoMetadata"],f),t}(e))),ba(t,["parts"],e)}const r=wa(e,["role"]);return null!=r&&ba(t,["role"],r),t}(gc(p)));const h=wa(e,["tools"]);if(void 0!==t&&null!=h){let e=_c(h);Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wa(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const n=wa(e,["computerUse"]);null!=n&&ba(t,["computerUse"],n);const r=wa(e,["fileSearch"]);null!=r&&ba(t,["fileSearch"],r);const o=wa(e,["codeExecution"]);if(null!=o&&ba(t,["codeExecution"],o),void 0!==wa(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=wa(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["functionDeclarations"],e)}const a=wa(e,["googleMaps"]);null!=a&&ba(t,["googleMaps"],function(e){const t={};if(void 0!==wa(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wa(e,["enableWidget"]);return null!=n&&ba(t,["enableWidget"],n),t}(a));const s=wa(e,["googleSearch"]);null!=s&&ba(t,["googleSearch"],function(e){const t={};if(void 0!==wa(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wa(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wa(e,["timeRangeFilter"]);return null!=n&&ba(t,["timeRangeFilter"],n),t}(s));const l=wa(e,["googleSearchRetrieval"]);null!=l&&ba(t,["googleSearchRetrieval"],l);const c=wa(e,["urlContext"]);return null!=c&&ba(t,["urlContext"],c),t}(Ec(e)))),ba(t,["setup","tools"],e)}const m=wa(e,["sessionResumption"]);void 0!==t&&null!=m&&ba(t,["setup","sessionResumption"],function(e){const t={},n=wa(e,["handle"]);if(null!=n&&ba(t,["handle"],n),void 0!==wa(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(m));const g=wa(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&ba(t,["setup","inputAudioTranscription"],g);const y=wa(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ba(t,["setup","outputAudioTranscription"],y);const v=wa(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&ba(t,["setup","realtimeInputConfig"],v);const b=wa(e,["contextWindowCompression"]);void 0!==t&&null!=b&&ba(t,["setup","contextWindowCompression"],b);const w=wa(e,["proactivity"]);if(void 0!==t&&null!=w&&ba(t,["setup","proactivity"],w),void 0!==wa(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}function iu(e){const t={},n=wa(e,["media"]);if(null!=n){let e=sc(n);Array.isArray(e)&&(e=e.map(e=>ru(e))),ba(t,["mediaChunks"],e)}const r=wa(e,["audio"]);null!=r&&ba(t,["audio"],ru(uc(r)));const o=wa(e,["audioStreamEnd"]);null!=o&&ba(t,["audioStreamEnd"],o);const i=wa(e,["video"]);null!=i&&ba(t,["video"],ru(cc(i)));const a=wa(e,["text"]);null!=a&&ba(t,["text"],a);const s=wa(e,["activityStart"]);null!=s&&ba(t,["activityStart"],s);const l=wa(e,["activityEnd"]);return null!=l&&ba(t,["activityEnd"],l),t}function au(e){const t={},n=wa(e,["media"]);if(null!=n){let e=sc(n);Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["mediaChunks"],e)}const r=wa(e,["audio"]);null!=r&&ba(t,["audio"],uc(r));const o=wa(e,["audioStreamEnd"]);null!=o&&ba(t,["audioStreamEnd"],o);const i=wa(e,["video"]);null!=i&&ba(t,["video"],cc(i));const a=wa(e,["text"]);null!=a&&ba(t,["text"],a);const s=wa(e,["activityStart"]);null!=s&&ba(t,["activityStart"],s);const l=wa(e,["activityEnd"]);return null!=l&&ba(t,["activityEnd"],l),t}function su(e){const t={},n=wa(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["mediaResolution"]);null!=n&&ba(t,["mediaResolution"],n);const r=wa(e,["codeExecutionResult"]);null!=r&&ba(t,["codeExecutionResult"],r);const o=wa(e,["executableCode"]);null!=o&&ba(t,["executableCode"],o);const i=wa(e,["fileData"]);null!=i&&ba(t,["fileData"],function(e){const t={};if(void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wa(e,["fileUri"]);null!=n&&ba(t,["fileUri"],n);const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(i));const a=wa(e,["functionCall"]);null!=a&&ba(t,["functionCall"],function(e){const t={},n=wa(e,["id"]);null!=n&&ba(t,["id"],n);const r=wa(e,["args"]);null!=r&&ba(t,["args"],r);const o=wa(e,["name"]);if(null!=o&&ba(t,["name"],o),void 0!==wa(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wa(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(a));const s=wa(e,["functionResponse"]);null!=s&&ba(t,["functionResponse"],s);const l=wa(e,["inlineData"]);null!=l&&ba(t,["inlineData"],function(e){const t={},n=wa(e,["data"]);if(null!=n&&ba(t,["data"],n),void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(l));const c=wa(e,["text"]);null!=c&&ba(t,["text"],c);const u=wa(e,["thought"]);null!=u&&ba(t,["thought"],u);const d=wa(e,["thoughtSignature"]);null!=d&&ba(t,["thoughtSignature"],d);const f=wa(e,["videoMetadata"]);return null!=f&&ba(t,["videoMetadata"],f),t}(e))),ba(t,["parts"],e)}const r=wa(e,["role"]);return null!=r&&ba(t,["role"],r),t}function lu(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>su(e))),ba(n,["contents"],e)}const i=wa(t,["config"]);return null!=i&&ba(n,["generationConfig"],function(e,t,n){const r={},o=wa(t,["systemInstruction"]);void 0!==n&&null!=o&&ba(n,["systemInstruction"],su(gc(o)));const i=wa(t,["temperature"]);null!=i&&ba(r,["temperature"],i);const a=wa(t,["topP"]);null!=a&&ba(r,["topP"],a);const s=wa(t,["topK"]);null!=s&&ba(r,["topK"],s);const l=wa(t,["candidateCount"]);null!=l&&ba(r,["candidateCount"],l);const c=wa(t,["maxOutputTokens"]);null!=c&&ba(r,["maxOutputTokens"],c);const u=wa(t,["stopSequences"]);null!=u&&ba(r,["stopSequences"],u);const d=wa(t,["responseLogprobs"]);null!=d&&ba(r,["responseLogprobs"],d);const f=wa(t,["logprobs"]);null!=f&&ba(r,["logprobs"],f);const p=wa(t,["presencePenalty"]);null!=p&&ba(r,["presencePenalty"],p);const h=wa(t,["frequencyPenalty"]);null!=h&&ba(r,["frequencyPenalty"],h);const m=wa(t,["seed"]);null!=m&&ba(r,["seed"],m);const g=wa(t,["responseMimeType"]);null!=g&&ba(r,["responseMimeType"],g);const y=wa(t,["responseSchema"]);null!=y&&ba(r,["responseSchema"],wc(y));const v=wa(t,["responseJsonSchema"]);if(null!=v&&ba(r,["responseJsonSchema"],v),void 0!==wa(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==wa(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=wa(t,["safetySettings"]);if(void 0!==n&&null!=b){let e=b;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["category"]);if(null!=n&&ba(t,["category"],n),void 0!==wa(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=wa(e,["threshold"]);return null!=r&&ba(t,["threshold"],r),t}(e))),ba(n,["safetySettings"],e)}const w=wa(t,["tools"]);if(void 0!==n&&null!=w){let e=_c(w);Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wa(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const n=wa(e,["computerUse"]);null!=n&&ba(t,["computerUse"],n);const r=wa(e,["fileSearch"]);null!=r&&ba(t,["fileSearch"],r);const o=wa(e,["codeExecution"]);if(null!=o&&ba(t,["codeExecution"],o),void 0!==wa(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=wa(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["functionDeclarations"],e)}const a=wa(e,["googleMaps"]);null!=a&&ba(t,["googleMaps"],function(e){const t={};if(void 0!==wa(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wa(e,["enableWidget"]);return null!=n&&ba(t,["enableWidget"],n),t}(a));const s=wa(e,["googleSearch"]);null!=s&&ba(t,["googleSearch"],function(e){const t={};if(void 0!==wa(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wa(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wa(e,["timeRangeFilter"]);return null!=n&&ba(t,["timeRangeFilter"],n),t}(s));const l=wa(e,["googleSearchRetrieval"]);null!=l&&ba(t,["googleSearchRetrieval"],l);const c=wa(e,["urlContext"]);return null!=c&&ba(t,["urlContext"],c),t}(Ec(e)))),ba(n,["tools"],e)}const x=wa(t,["toolConfig"]);if(void 0!==n&&null!=x&&ba(n,["toolConfig"],function(e){const t={},n=wa(e,["retrievalConfig"]);null!=n&&ba(t,["retrievalConfig"],n);const r=wa(e,["functionCallingConfig"]);return null!=r&&ba(t,["functionCallingConfig"],function(e){const t={},n=wa(e,["allowedFunctionNames"]);null!=n&&ba(t,["allowedFunctionNames"],n);const r=wa(e,["mode"]);if(null!=r&&ba(t,["mode"],r),void 0!==wa(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(r)),t}(x)),void 0!==wa(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const C=wa(t,["cachedContent"]);void 0!==n&&null!=C&&ba(n,["cachedContent"],Ac(e,C));const E=wa(t,["responseModalities"]);null!=E&&ba(r,["responseModalities"],E);const _=wa(t,["mediaResolution"]);null!=_&&ba(r,["mediaResolution"],_);const A=wa(t,["speechConfig"]);if(null!=A&&ba(r,["speechConfig"],xc(A)),void 0!==wa(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=wa(t,["thinkingConfig"]);null!=S&&ba(r,["thinkingConfig"],S);const N=wa(t,["imageConfig"]);null!=N&&ba(r,["imageConfig"],function(e){const t={},n=wa(e,["aspectRatio"]);null!=n&&ba(t,["aspectRatio"],n);const r=wa(e,["imageSize"]);if(null!=r&&ba(t,["imageSize"],r),void 0!==wa(e,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==wa(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==wa(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(N));const I=wa(t,["enableEnhancedCivicAnswers"]);if(null!=I&&ba(r,["enableEnhancedCivicAnswers"],I),void 0!==wa(t,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}(e,i,n)),n}function cu(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>e)),ba(n,["contents"],e)}const i=wa(t,["config"]);return null!=i&&ba(n,["generationConfig"],function(e,t,n){const r={},o=wa(t,["systemInstruction"]);void 0!==n&&null!=o&&ba(n,["systemInstruction"],gc(o));const i=wa(t,["temperature"]);null!=i&&ba(r,["temperature"],i);const a=wa(t,["topP"]);null!=a&&ba(r,["topP"],a);const s=wa(t,["topK"]);null!=s&&ba(r,["topK"],s);const l=wa(t,["candidateCount"]);null!=l&&ba(r,["candidateCount"],l);const c=wa(t,["maxOutputTokens"]);null!=c&&ba(r,["maxOutputTokens"],c);const u=wa(t,["stopSequences"]);null!=u&&ba(r,["stopSequences"],u);const d=wa(t,["responseLogprobs"]);null!=d&&ba(r,["responseLogprobs"],d);const f=wa(t,["logprobs"]);null!=f&&ba(r,["logprobs"],f);const p=wa(t,["presencePenalty"]);null!=p&&ba(r,["presencePenalty"],p);const h=wa(t,["frequencyPenalty"]);null!=h&&ba(r,["frequencyPenalty"],h);const m=wa(t,["seed"]);null!=m&&ba(r,["seed"],m);const g=wa(t,["responseMimeType"]);null!=g&&ba(r,["responseMimeType"],g);const y=wa(t,["responseSchema"]);null!=y&&ba(r,["responseSchema"],wc(y));const v=wa(t,["responseJsonSchema"]);null!=v&&ba(r,["responseJsonSchema"],v);const b=wa(t,["routingConfig"]);null!=b&&ba(r,["routingConfig"],b);const w=wa(t,["modelSelectionConfig"]);null!=w&&ba(r,["modelConfig"],w);const x=wa(t,["safetySettings"]);if(void 0!==n&&null!=x){let e=x;Array.isArray(e)&&(e=e.map(e=>e)),ba(n,["safetySettings"],e)}const C=wa(t,["tools"]);if(void 0!==n&&null!=C){let e=_c(C);Array.isArray(e)&&(e=e.map(e=>Cu(Ec(e)))),ba(n,["tools"],e)}const E=wa(t,["toolConfig"]);void 0!==n&&null!=E&&ba(n,["toolConfig"],E);const _=wa(t,["labels"]);void 0!==n&&null!=_&&ba(n,["labels"],_);const A=wa(t,["cachedContent"]);void 0!==n&&null!=A&&ba(n,["cachedContent"],Ac(e,A));const S=wa(t,["responseModalities"]);null!=S&&ba(r,["responseModalities"],S);const N=wa(t,["mediaResolution"]);null!=N&&ba(r,["mediaResolution"],N);const I=wa(t,["speechConfig"]);null!=I&&ba(r,["speechConfig"],xc(I));const T=wa(t,["audioTimestamp"]);null!=T&&ba(r,["audioTimestamp"],T);const O=wa(t,["thinkingConfig"]);null!=O&&ba(r,["thinkingConfig"],O);const R=wa(t,["imageConfig"]);if(null!=R&&ba(r,["imageConfig"],function(e){const t={},n=wa(e,["aspectRatio"]);null!=n&&ba(t,["aspectRatio"],n);const r=wa(e,["imageSize"]);null!=r&&ba(t,["imageSize"],r);const o=wa(e,["personGeneration"]);null!=o&&ba(t,["personGeneration"],o);const i=wa(e,["outputMimeType"]);null!=i&&ba(t,["imageOutputOptions","mimeType"],i);const a=wa(e,["outputCompressionQuality"]);return null!=a&&ba(t,["imageOutputOptions","compressionQuality"],a),t}(R)),void 0!==wa(t,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const k=wa(t,["modelArmorConfig"]);return void 0!==n&&null!=k&&ba(n,["modelArmorConfig"],k),r}(e,i,n)),n}function uu(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["content"]);null!=n&&ba(t,["content"],n);const r=wa(e,["citationMetadata"]);null!=r&&ba(t,["citationMetadata"],function(e){const t={},n=wa(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["citations"],e)}return t}(r));const o=wa(e,["tokenCount"]);null!=o&&ba(t,["tokenCount"],o);const i=wa(e,["finishReason"]);null!=i&&ba(t,["finishReason"],i);const a=wa(e,["avgLogprobs"]);null!=a&&ba(t,["avgLogprobs"],a);const s=wa(e,["groundingMetadata"]);null!=s&&ba(t,["groundingMetadata"],s);const l=wa(e,["index"]);null!=l&&ba(t,["index"],l);const c=wa(e,["logprobsResult"]);null!=c&&ba(t,["logprobsResult"],c);const u=wa(e,["safetyRatings"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["safetyRatings"],e)}const d=wa(e,["urlContextMetadata"]);return null!=d&&ba(t,["urlContextMetadata"],d),t}(e))),ba(t,["candidates"],e)}const o=wa(e,["modelVersion"]);null!=o&&ba(t,["modelVersion"],o);const i=wa(e,["promptFeedback"]);null!=i&&ba(t,["promptFeedback"],i);const a=wa(e,["responseId"]);null!=a&&ba(t,["responseId"],a);const s=wa(e,["usageMetadata"]);return null!=s&&ba(t,["usageMetadata"],s),t}function du(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["candidates"],e)}const o=wa(e,["createTime"]);null!=o&&ba(t,["createTime"],o);const i=wa(e,["modelVersion"]);null!=i&&ba(t,["modelVersion"],i);const a=wa(e,["promptFeedback"]);null!=a&&ba(t,["promptFeedback"],a);const s=wa(e,["responseId"]);null!=s&&ba(t,["responseId"],s);const l=wa(e,["usageMetadata"]);return null!=l&&ba(t,["usageMetadata"],l),t}function fu(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["prompt"]);null!=o&&ba(n,["instances[0]","prompt"],o);const i=wa(t,["image"]);null!=i&&ba(n,["instances[0]","image"],gu(i));const a=wa(t,["video"]);null!=a&&ba(n,["instances[0]","video"],Eu(a));const s=wa(t,["source"]);null!=s&&function(e,t){const n=wa(e,["prompt"]);void 0!==t&&null!=n&&ba(t,["instances[0]","prompt"],n);const r=wa(e,["image"]);void 0!==t&&null!=r&&ba(t,["instances[0]","image"],gu(r));const o=wa(e,["video"]);void 0!==t&&null!=o&&ba(t,["instances[0]","video"],Eu(o))}(s,n);const l=wa(t,["config"]);return null!=l&&function(e,t){const n=wa(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&ba(t,["parameters","sampleCount"],n),void 0!==wa(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==wa(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=wa(e,["durationSeconds"]);if(void 0!==t&&null!=r&&ba(t,["parameters","durationSeconds"],r),void 0!==wa(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=wa(e,["aspectRatio"]);void 0!==t&&null!=o&&ba(t,["parameters","aspectRatio"],o);const i=wa(e,["resolution"]);void 0!==t&&null!=i&&ba(t,["parameters","resolution"],i);const a=wa(e,["personGeneration"]);if(void 0!==t&&null!=a&&ba(t,["parameters","personGeneration"],a),void 0!==wa(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const s=wa(e,["negativePrompt"]);void 0!==t&&null!=s&&ba(t,["parameters","negativePrompt"],s);const l=wa(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&ba(t,["parameters","enhancePrompt"],l),void 0!==wa(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const c=wa(e,["lastFrame"]);void 0!==t&&null!=c&&ba(t,["instances[0]","lastFrame"],gu(c));const u=wa(e,["referenceImages"]);if(void 0!==t&&null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["image"]);null!=n&&ba(t,["image"],gu(n));const r=wa(e,["referenceType"]);return null!=r&&ba(t,["referenceType"],r),t}(e))),ba(t,["instances[0]","referenceImages"],e)}if(void 0!==wa(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==wa(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.")}(l,n),n}function pu(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["prompt"]);null!=o&&ba(n,["instances[0]","prompt"],o);const i=wa(t,["image"]);null!=i&&ba(n,["instances[0]","image"],yu(i));const a=wa(t,["video"]);null!=a&&ba(n,["instances[0]","video"],_u(a));const s=wa(t,["source"]);null!=s&&function(e,t){const n=wa(e,["prompt"]);void 0!==t&&null!=n&&ba(t,["instances[0]","prompt"],n);const r=wa(e,["image"]);void 0!==t&&null!=r&&ba(t,["instances[0]","image"],yu(r));const o=wa(e,["video"]);void 0!==t&&null!=o&&ba(t,["instances[0]","video"],_u(o))}(s,n);const l=wa(t,["config"]);return null!=l&&function(e,t){const n=wa(e,["numberOfVideos"]);void 0!==t&&null!=n&&ba(t,["parameters","sampleCount"],n);const r=wa(e,["outputGcsUri"]);void 0!==t&&null!=r&&ba(t,["parameters","storageUri"],r);const o=wa(e,["fps"]);void 0!==t&&null!=o&&ba(t,["parameters","fps"],o);const i=wa(e,["durationSeconds"]);void 0!==t&&null!=i&&ba(t,["parameters","durationSeconds"],i);const a=wa(e,["seed"]);void 0!==t&&null!=a&&ba(t,["parameters","seed"],a);const s=wa(e,["aspectRatio"]);void 0!==t&&null!=s&&ba(t,["parameters","aspectRatio"],s);const l=wa(e,["resolution"]);void 0!==t&&null!=l&&ba(t,["parameters","resolution"],l);const c=wa(e,["personGeneration"]);void 0!==t&&null!=c&&ba(t,["parameters","personGeneration"],c);const u=wa(e,["pubsubTopic"]);void 0!==t&&null!=u&&ba(t,["parameters","pubsubTopic"],u);const d=wa(e,["negativePrompt"]);void 0!==t&&null!=d&&ba(t,["parameters","negativePrompt"],d);const f=wa(e,["enhancePrompt"]);void 0!==t&&null!=f&&ba(t,["parameters","enhancePrompt"],f);const p=wa(e,["generateAudio"]);void 0!==t&&null!=p&&ba(t,["parameters","generateAudio"],p);const h=wa(e,["lastFrame"]);void 0!==t&&null!=h&&ba(t,["instances[0]","lastFrame"],yu(h));const m=wa(e,["referenceImages"]);if(void 0!==t&&null!=m){let e=m;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["image"]);null!=n&&ba(t,["image"],yu(n));const r=wa(e,["referenceType"]);return null!=r&&ba(t,["referenceType"],r),t}(e))),ba(t,["instances[0]","referenceImages"],e)}const g=wa(e,["mask"]);void 0!==t&&null!=g&&ba(t,["instances[0]","mask"],function(e){const t={},n=wa(e,["image"]);null!=n&&ba(t,["_self"],yu(n));const r=wa(e,["maskMode"]);return null!=r&&ba(t,["maskMode"],r),t}(g));const y=wa(e,["compressionQuality"]);void 0!==t&&null!=y&&ba(t,["parameters","compressionQuality"],y)}(l,n),n}function hu(e){const t={},n=wa(e,["_self"]);null!=n&&ba(t,["image"],mu(n));const r=wa(e,["raiFilteredReason"]);null!=r&&ba(t,["raiFilteredReason"],r);const o=wa(e,["_self"]);null!=o&&ba(t,["safetyAttributes"],xu(o));const i=wa(e,["prompt"]);return null!=i&&ba(t,["enhancedPrompt"],i),t}function mu(e){const t={},n=wa(e,["gcsUri"]);null!=n&&ba(t,["gcsUri"],n);const r=wa(e,["bytesBase64Encoded"]);null!=r&&ba(t,["imageBytes"],Nc(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["mimeType"],o),t}function gu(e){const t={};if(void 0!==wa(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=wa(e,["imageBytes"]);null!=n&&ba(t,["bytesBase64Encoded"],Nc(n));const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}function yu(e){const t={},n=wa(e,["gcsUri"]);null!=n&&ba(t,["gcsUri"],n);const r=wa(e,["imageBytes"]);null!=r&&ba(t,["bytesBase64Encoded"],Nc(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["mimeType"],o),t}function vu(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["displayName"]);null!=r&&ba(t,["displayName"],r);const o=wa(e,["description"]);null!=o&&ba(t,["description"],o);const i=wa(e,["version"]);null!=i&&ba(t,["version"],i);const a=wa(e,["_self"]);null!=a&&ba(t,["tunedModelInfo"],function(e){const t={},n=wa(e,["baseModel"]);null!=n&&ba(t,["baseModel"],n);const r=wa(e,["createTime"]);null!=r&&ba(t,["createTime"],r);const o=wa(e,["updateTime"]);return null!=o&&ba(t,["updateTime"],o),t}(a));const s=wa(e,["inputTokenLimit"]);null!=s&&ba(t,["inputTokenLimit"],s);const l=wa(e,["outputTokenLimit"]);null!=l&&ba(t,["outputTokenLimit"],l);const c=wa(e,["supportedGenerationMethods"]);null!=c&&ba(t,["supportedActions"],c);const u=wa(e,["temperature"]);null!=u&&ba(t,["temperature"],u);const d=wa(e,["maxTemperature"]);null!=d&&ba(t,["maxTemperature"],d);const f=wa(e,["topP"]);null!=f&&ba(t,["topP"],f);const p=wa(e,["topK"]);null!=p&&ba(t,["topK"],p);const h=wa(e,["thinking"]);return null!=h&&ba(t,["thinking"],h),t}function bu(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["displayName"]);null!=r&&ba(t,["displayName"],r);const o=wa(e,["description"]);null!=o&&ba(t,["description"],o);const i=wa(e,["versionId"]);null!=i&&ba(t,["version"],i);const a=wa(e,["deployedModels"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["endpoint"]);null!=n&&ba(t,["name"],n);const r=wa(e,["deployedModelId"]);return null!=r&&ba(t,["deployedModelId"],r),t}(e))),ba(t,["endpoints"],e)}const s=wa(e,["labels"]);null!=s&&ba(t,["labels"],s);const l=wa(e,["_self"]);null!=l&&ba(t,["tunedModelInfo"],function(e){const t={},n=wa(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&ba(t,["baseModel"],n);const r=wa(e,["createTime"]);null!=r&&ba(t,["createTime"],r);const o=wa(e,["updateTime"]);return null!=o&&ba(t,["updateTime"],o),t}(l));const c=wa(e,["defaultCheckpointId"]);null!=c&&ba(t,["defaultCheckpointId"],c);const u=wa(e,["checkpoints"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["checkpoints"],e)}return t}function wu(e){const t={},n=wa(e,["safetyAttributes","categories"]);null!=n&&ba(t,["categories"],n);const r=wa(e,["safetyAttributes","scores"]);null!=r&&ba(t,["scores"],r);const o=wa(e,["contentType"]);return null!=o&&ba(t,["contentType"],o),t}function xu(e){const t={},n=wa(e,["safetyAttributes","categories"]);null!=n&&ba(t,["categories"],n);const r=wa(e,["safetyAttributes","scores"]);null!=r&&ba(t,["scores"],r);const o=wa(e,["contentType"]);return null!=o&&ba(t,["contentType"],o),t}function Cu(e){const t={},n=wa(e,["retrieval"]);null!=n&&ba(t,["retrieval"],n);const r=wa(e,["computerUse"]);if(null!=r&&ba(t,["computerUse"],r),void 0!==wa(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=wa(e,["codeExecution"]);null!=o&&ba(t,["codeExecution"],o);const i=wa(e,["enterpriseWebSearch"]);null!=i&&ba(t,["enterpriseWebSearch"],i);const a=wa(e,["functionDeclarations"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["description"]);null!=n&&ba(t,["description"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["parameters"]);null!=o&&ba(t,["parameters"],o);const i=wa(e,["parametersJsonSchema"]);null!=i&&ba(t,["parametersJsonSchema"],i);const a=wa(e,["response"]);null!=a&&ba(t,["response"],a);const s=wa(e,["responseJsonSchema"]);if(null!=s&&ba(t,["responseJsonSchema"],s),void 0!==wa(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return t}(e))),ba(t,["functionDeclarations"],e)}const s=wa(e,["googleMaps"]);null!=s&&ba(t,["googleMaps"],s);const l=wa(e,["googleSearch"]);null!=l&&ba(t,["googleSearch"],l);const c=wa(e,["googleSearchRetrieval"]);null!=c&&ba(t,["googleSearchRetrieval"],c);const u=wa(e,["urlContext"]);return null!=u&&ba(t,["urlContext"],u),t}function Eu(e){const t={},n=wa(e,["uri"]);null!=n&&ba(t,["uri"],n);const r=wa(e,["videoBytes"]);null!=r&&ba(t,["encodedVideo"],Nc(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["encoding"],o),t}function _u(e){const t={},n=wa(e,["uri"]);null!=n&&ba(t,["gcsUri"],n);const r=wa(e,["videoBytes"]);null!=r&&ba(t,["bytesBase64Encoded"],Nc(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["mimeType"],o),t
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */}function Au(e,t){const n=wa(e,["mimeType"]);void 0!==t&&null!=n&&ba(t,["mimeType"],n);const r=wa(e,["displayName"]);void 0!==t&&null!=r&&ba(t,["displayName"],r);const o=wa(e,["customMetadata"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["customMetadata"],e)}const i=wa(e,["chunkingConfig"]);return void 0!==t&&null!=i&&ba(t,["chunkingConfig"],i),{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */}const Su="x-goog-api-client";class Nu{constructor(e){var t,n,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=null===(t=e.httpOptions)||void 0===t?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl||(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl))throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const t=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!t?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||"global"===this.clientOptions.location?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta1"}else{if(!this.clientOptions.apiKey)throw new tu({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=null!==(r=this.clientOptions.apiVersion)&&void 0!==r?r:"v1beta",o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];return n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Ss.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[i,a]of Object.entries(e.queryParams))r.searchParams.append(i,String(a));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))"object"==typeof o?n[r]=Object.assign(Object.assign({},n[r]),o):void 0!==o&&(n[r]=o);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const n=new AbortController,o=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){const e=setTimeout(()=>n.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}r&&r.addEventListener("abort",()=>{n.abort()}),e.signal=o}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(o){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}const r=function e(t,n){const r=Object.assign({},t);for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const t=n[o],i=r[o];t&&"object"==typeof t&&!Array.isArray(t)&&i&&"object"==typeof i&&!Array.isArray(i)?r[o]=e(i,t):(i&&t&&typeof i!=typeof t&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${o}". Original type: ${typeof i}, New type: ${typeof t}. Overwriting.`),r[o]=t)}return r}(n,t);e.body=JSON.stringify(r)}(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Iu(e),new Rl(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Iu(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){return Yc(this,arguments,function*(){var t;const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";const i="data:",a=["\n\n","\r\r","\r\n\r\n"];for(;;){const{done:s,value:l}=yield Xc(n.read());if(s){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(l,{stream:!0});try{const e=JSON.parse(c);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,o=`got status: ${n}. ${JSON.stringify(e)}`;if(r>=400&&r<600)throw new tu({message:o,status:r})}}catch(o){if("ApiError"===o.name)throw o}t+=c;let u=-1,d=0;for(;;){u=-1,d=0;for(const e of a){const n=t.indexOf(e);-1!==n&&(-1===u||n<u)&&(u=n,d=e.length)}if(-1===u)break;const n=t.substring(0,u);t=t.substring(u+d);const r=n.trim();if(r.startsWith(i)){const t=r.substring(i.length).trim();try{const n=new Response(t,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield Xc(new Rl(n))}catch(o){throw new Error(`exception parsing stream chunk ${t}. ${o}`)}}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error(`exception ${e} sending request`)})}getDefaultHeaders(){const e={},t="google-genai-sdk/1.38.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[Su]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,r]of Object.entries(e.headers))n.append(t,r);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,i=await o.stat(e);r.sizeBytes=String(i.size);const a=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:i.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const s={file:r},l=this.getFileName(e),c=va("upload/v1beta/files",s._url),u=await this.fetchUploadUrl(c,r.sizeBytes,r.mimeType,l,s,null==t?void 0:t.httpOptions);return o.upload(e,u,this)}async uploadFileToFileSearchStore(e,t,n){var r;const o=this.clientOptions.uploader,i=await o.stat(t),a=String(i.size),s=null!==(r=null==n?void 0:n.mimeType)&&void 0!==r?r:i.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(t),u={};null!=n&&Au(n,u);const d=await this.fetchUploadUrl(l,a,s,c,u,null==n?void 0:n.httpOptions);return o.uploadToFileSearchStore(t,d,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,r,o,i){var a;let s={};s=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},r?{"X-Goog-Upload-File-Name":r}:{})};const l=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!l||!(null==l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=null===(a=null==l?void 0:l.headers)||void 0===a?void 0:a["x-goog-upload-url"];if(void 0===c)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function Iu(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);if(n>=400&&n<600)throw new tu({message:o,status:n});throw new Error(o)}}function Tu(e){for(const t of e){if(Ru(t))return!0;if("object"==typeof t&&"inputSchema"in t)return!0}return!1}function Ou(e){var t;const n=null!==(t=e[Su])&&void 0!==t?t:"";e[Su]=(n+" mcp_used/unknown").trimStart()}function Ru(e){return null!==e&&"object"==typeof e&&e instanceof Pu}function ku(e){return Yc(this,arguments,function*(e,t=100){let n,r=0;for(;r<t;){const t=yield Xc(e.listTools({cursor:n}));for(const e of t.tools)yield yield Xc(e),r++;if(!t.nextCursor)break;n=t.nextCursor}})}class Pu{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Pu(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const o={},i=[];for(const u of this.mcpClients)try{for(var a,s=!0,l=(t=void 0,$c(ku(u)));!(e=(a=await l.next()).done);s=!0){r=a.value,s=!1;const e=r;i.push(e);const t=e.name;if(o[t])throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);o[t]=u}}catch(c){t={error:c}}finally{try{s||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),function(e,t={}){const n=[],r=new Set;for(const o of e){const e=o.name;if(r.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r.add(e);const i=kc(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(this.apiClient.getDefaultHeaders()),a=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let s=()=>{};const l=new Promise(e=>{s=e}),c=e.callbacks,u=(this.apiClient,{onopen:function(){s({})},onmessage:e=>{!async function(e,t,n){const r=new rc;let o;o=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(r,o),t(r)}(0,c.onmessage,e)},onerror:null!==(t=null==c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),d=this.webSocketFactory.create(a,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(i),u);d.connect(),await l;const f={setup:{model:ic(this.apiClient,e.model)}};return d.send(JSON.stringify(f)),new Du(d,this.apiClient)}}class Du{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=wa(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=wa(e,["musicGenerationConfig"]);return null!=n&&ba(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Nl.PLAY)}pause(){this.sendPlaybackControl(Nl.PAUSE)}stop(){this.sendPlaybackControl(Nl.STOP)}resetContext(){this.sendPlaybackControl(Nl.RESET_CONTEXT)}close(){this.conn.close()}}class Mu{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new ju(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,o,i,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=this.apiClient.getHeaders();e.config&&e.config.tools&&Tu(e.config.tools)&&Ou(u);const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(u);if(this.apiClient.isVertexAI()){const e=this.apiClient.getProject(),t=this.apiClient.getLocation(),n=this.apiClient.getApiKey(),r=!!e&&!!t||!!n;this.apiClient.getCustomBaseUrl()&&!r?c=s:(c=`${s}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d,c))}else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==l&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),c=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.${t}?${n}=${e}`}let f=()=>{};const p=new Promise(e=>{f=e}),h=e.callbacks,m=this.apiClient,g={onopen:function(){var e;null===(e=null==h?void 0:h.onopen)||void 0===e||e.call(h),f({})},onmessage:e=>{!async function(e,t,n){const r=new nc;let o;o=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const i=JSON.parse(o);if(e.isVertexAI()){const e=function(e){const t={},n=wa(e,["setupComplete"]);null!=n&&ba(t,["setupComplete"],n);const r=wa(e,["serverContent"]);null!=r&&ba(t,["serverContent"],r);const o=wa(e,["toolCall"]);null!=o&&ba(t,["toolCall"],o);const i=wa(e,["toolCallCancellation"]);null!=i&&ba(t,["toolCallCancellation"],i);const a=wa(e,["usageMetadata"]);null!=a&&ba(t,["usageMetadata"],function(e){const t={},n=wa(e,["promptTokenCount"]);null!=n&&ba(t,["promptTokenCount"],n);const r=wa(e,["cachedContentTokenCount"]);null!=r&&ba(t,["cachedContentTokenCount"],r);const o=wa(e,["candidatesTokenCount"]);null!=o&&ba(t,["responseTokenCount"],o);const i=wa(e,["toolUsePromptTokenCount"]);null!=i&&ba(t,["toolUsePromptTokenCount"],i);const a=wa(e,["thoughtsTokenCount"]);null!=a&&ba(t,["thoughtsTokenCount"],a);const s=wa(e,["totalTokenCount"]);null!=s&&ba(t,["totalTokenCount"],s);const l=wa(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["promptTokensDetails"],e)}const c=wa(e,["cacheTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["cacheTokensDetails"],e)}const u=wa(e,["candidatesTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["responseTokensDetails"],e)}const d=wa(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["toolUsePromptTokensDetails"],e)}const f=wa(e,["trafficType"]);return null!=f&&ba(t,["trafficType"],f),t}(a));const s=wa(e,["goAway"]);null!=s&&ba(t,["goAway"],s);const l=wa(e,["sessionResumptionUpdate"]);null!=l&&ba(t,["sessionResumptionUpdate"],l);const c=wa(e,["voiceActivityDetectionSignal"]);null!=c&&ba(t,["voiceActivityDetectionSignal"],c);const u=wa(e,["voiceActivity"]);return null!=u&&ba(t,["voiceActivity"],function(e){const t={},n=wa(e,["type"]);return null!=n&&ba(t,["voiceActivityType"],n),t}(u)),t}(i);Object.assign(r,e)}else{const e=i;Object.assign(r,e)}t(r)}(m,h.onmessage,e)},onerror:null!==(t=null==h?void 0:h.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==h?void 0:h.onclose)&&void 0!==n?n:function(e){}},y=this.webSocketFactory.create(c,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(d),g);y.connect(),await p;let v=ic(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){const e=this.apiClient.getProject(),t=this.apiClient.getLocation();e&&t&&(v=`projects/${e}/locations/${t}/`+v)}let b={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[fs.AUDIO]}:e.config.responseModalities=[fs.AUDIO]),(null===(o=e.config)||void 0===o?void 0:o.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const w=null!==(a=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==a?a:[],x=[];for(const E of w)if(this.isCallableTool(E)){const e=E;x.push(await e.tool())}else x.push(E);x.length>0&&(e.config.tools=x);const C={model:v,config:e.config,callbacks:e.callbacks};return b=this.apiClient.isVertexAI()?function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["setup","model"],ic(e,r));const o=wa(t,["config"]);return null!=o&&ba(n,["config"],function(e,t){const n=wa(e,["generationConfig"]);void 0!==t&&null!=n&&ba(t,["setup","generationConfig"],function(e){const t={},n=wa(e,["modelSelectionConfig"]);null!=n&&ba(t,["modelConfig"],n);const r=wa(e,["responseJsonSchema"]);null!=r&&ba(t,["responseJsonSchema"],r);const o=wa(e,["audioTimestamp"]);null!=o&&ba(t,["audioTimestamp"],o);const i=wa(e,["candidateCount"]);null!=i&&ba(t,["candidateCount"],i);const a=wa(e,["enableAffectiveDialog"]);null!=a&&ba(t,["enableAffectiveDialog"],a);const s=wa(e,["frequencyPenalty"]);null!=s&&ba(t,["frequencyPenalty"],s);const l=wa(e,["logprobs"]);null!=l&&ba(t,["logprobs"],l);const c=wa(e,["maxOutputTokens"]);null!=c&&ba(t,["maxOutputTokens"],c);const u=wa(e,["mediaResolution"]);null!=u&&ba(t,["mediaResolution"],u);const d=wa(e,["presencePenalty"]);null!=d&&ba(t,["presencePenalty"],d);const f=wa(e,["responseLogprobs"]);null!=f&&ba(t,["responseLogprobs"],f);const p=wa(e,["responseMimeType"]);null!=p&&ba(t,["responseMimeType"],p);const h=wa(e,["responseModalities"]);null!=h&&ba(t,["responseModalities"],h);const m=wa(e,["responseSchema"]);null!=m&&ba(t,["responseSchema"],m);const g=wa(e,["routingConfig"]);null!=g&&ba(t,["routingConfig"],g);const y=wa(e,["seed"]);null!=y&&ba(t,["seed"],y);const v=wa(e,["speechConfig"]);null!=v&&ba(t,["speechConfig"],v);const b=wa(e,["stopSequences"]);null!=b&&ba(t,["stopSequences"],b);const w=wa(e,["temperature"]);null!=w&&ba(t,["temperature"],w);const x=wa(e,["thinkingConfig"]);null!=x&&ba(t,["thinkingConfig"],x);const C=wa(e,["topK"]);null!=C&&ba(t,["topK"],C);const E=wa(e,["topP"]);if(null!=E&&ba(t,["topP"],E),void 0!==wa(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const r=wa(e,["responseModalities"]);void 0!==t&&null!=r&&ba(t,["setup","generationConfig","responseModalities"],r);const o=wa(e,["temperature"]);void 0!==t&&null!=o&&ba(t,["setup","generationConfig","temperature"],o);const i=wa(e,["topP"]);void 0!==t&&null!=i&&ba(t,["setup","generationConfig","topP"],i);const a=wa(e,["topK"]);void 0!==t&&null!=a&&ba(t,["setup","generationConfig","topK"],a);const s=wa(e,["maxOutputTokens"]);void 0!==t&&null!=s&&ba(t,["setup","generationConfig","maxOutputTokens"],s);const l=wa(e,["mediaResolution"]);void 0!==t&&null!=l&&ba(t,["setup","generationConfig","mediaResolution"],l);const c=wa(e,["seed"]);void 0!==t&&null!=c&&ba(t,["setup","generationConfig","seed"],c);const u=wa(e,["speechConfig"]);void 0!==t&&null!=u&&ba(t,["setup","generationConfig","speechConfig"],Cc(u));const d=wa(e,["thinkingConfig"]);void 0!==t&&null!=d&&ba(t,["setup","generationConfig","thinkingConfig"],d);const f=wa(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&ba(t,["setup","generationConfig","enableAffectiveDialog"],f);const p=wa(e,["systemInstruction"]);void 0!==t&&null!=p&&ba(t,["setup","systemInstruction"],gc(p));const h=wa(e,["tools"]);if(void 0!==t&&null!=h){let e=_c(h);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["retrieval"]);null!=n&&ba(t,["retrieval"],n);const r=wa(e,["computerUse"]);if(null!=r&&ba(t,["computerUse"],r),void 0!==wa(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=wa(e,["codeExecution"]);null!=o&&ba(t,["codeExecution"],o);const i=wa(e,["enterpriseWebSearch"]);null!=i&&ba(t,["enterpriseWebSearch"],i);const a=wa(e,["functionDeclarations"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["description"]);null!=n&&ba(t,["description"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["parameters"]);null!=o&&ba(t,["parameters"],o);const i=wa(e,["parametersJsonSchema"]);null!=i&&ba(t,["parametersJsonSchema"],i);const a=wa(e,["response"]);null!=a&&ba(t,["response"],a);const s=wa(e,["responseJsonSchema"]);if(null!=s&&ba(t,["responseJsonSchema"],s),void 0!==wa(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return t}(e))),ba(t,["functionDeclarations"],e)}const s=wa(e,["googleMaps"]);null!=s&&ba(t,["googleMaps"],s);const l=wa(e,["googleSearch"]);null!=l&&ba(t,["googleSearch"],l);const c=wa(e,["googleSearchRetrieval"]);null!=c&&ba(t,["googleSearchRetrieval"],c);const u=wa(e,["urlContext"]);return null!=u&&ba(t,["urlContext"],u),t}(Ec(e)))),ba(t,["setup","tools"],e)}const m=wa(e,["sessionResumption"]);void 0!==t&&null!=m&&ba(t,["setup","sessionResumption"],m);const g=wa(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&ba(t,["setup","inputAudioTranscription"],g);const y=wa(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ba(t,["setup","outputAudioTranscription"],y);const v=wa(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&ba(t,["setup","realtimeInputConfig"],v);const b=wa(e,["contextWindowCompression"]);void 0!==t&&null!=b&&ba(t,["setup","contextWindowCompression"],b);const w=wa(e,["proactivity"]);void 0!==t&&null!=w&&ba(t,["setup","proactivity"],w);const x=wa(e,["explicitVadSignal"]);return void 0!==t&&null!=x&&ba(t,["setup","explicitVadSignal"],x),{}}(o,n)),n}(this.apiClient,C):function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["setup","model"],ic(e,r));const o=wa(t,["config"]);return null!=o&&ba(n,["config"],ou(o,n)),n}(this.apiClient,C),delete b.config,y.send(JSON.stringify(b)),new Bu(y,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const Lu={turnComplete:!0};class Bu{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=vc(t.turns),e.isVertexAI()||(r=r.map(e=>su(e)))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!=typeof r||null===r||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Lu),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:au(e)}:{realtimeInput:iu(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Fu(e){var t,n,r;if(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let o=!1;for(const a of null!==(n=null==e?void 0:e.tools)&&void 0!==n?n:[])if(Uu(a)){o=!0;break}if(!o)return!0;const i=null===(r=null==e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function Uu(e){return"callTool"in e&&"function"==typeof e.callTool}function Hu(e){var t;const n=[];return(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach((e,t)=>{if(Uu(e))return;const r=e;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(t)}),n):n}function Vu(e){var t;return!(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gu extends ya{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,o,i;const a=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),null===(c=null===(l=null===(s=e.config)||void 0===s?void 0:s.tools)||void 0===l?void 0:l.some(e=>Uu(e)))||void 0===c||!c||Fu(e.config))return await this.generateContentInternal(a);var s,l,c;const u=Hu(e);if(u.length>0){const e=u.map(e=>`tools[${e}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let d,f;const p=vc(a.contents),h=null!==(r=null===(n=null===(t=a.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let m=0;for(;m<h&&(d=await this.generateContentInternal(a),d.functionCalls&&0!==d.functionCalls.length);){const t=d.candidates[0].content,n=[];for(const r of null!==(i=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==i?i:[])if(Uu(r)){const e=r,t=await e.callTool(d.functionCalls);n.push(...t)}m++,f={role:"user",parts:n},a.contents=vc(a.contents),a.contents.push(t),a.contents.push(f),Vu(a.config)&&(p.push(t),p.push(f))}return Vu(a.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async e=>{var t,n,r,o,i;if(this.maybeMoveToResponseJsonSchem(e),Fu(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const a=Hu(e);if(a.length>0){const e=a.map(e=>`tools[${e}]`).join(", ");throw new Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const s=null===(r=null===(n=null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===r?void 0:r.streamFunctionCallArguments,l=null===(i=null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(s&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const r=[];if(null==e?void 0:e.generatedImages)for(const i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&"Positive Prompt"===(null===(t=null==i?void 0:i.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==i?void 0:i.safetyAttributes:r.push(i);let o;return o=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},o}),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new Vc(Tl.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,r,o,i,a;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(o=null===(r=e.source)||void 0===r?void 0:r.video)||void 0===o?void 0:o.uri)&&(null===(a=null===(i=e.source)||void 0===i?void 0:i.video)||void 0===a?void 0:a.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const o=null===(t=e.config)||void 0===t?void 0:t.tools;if(!o)return e;const i=await Promise.all(o.map(async e=>{if(Uu(e)){const t=e;return await t.tool()}return e})),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(a.config.tools=i,e.config&&e.config.tools&&Tu(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let o=Object.assign({},t);0===Object.keys(o).length&&(o=this.apiClient.getDefaultHeaders()),Ou(o),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:o})}return a}async initAfcToolsMap(e){var t,n,r;const o=new Map;for(const i of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Uu(i)){const e=i,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(o.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);o.set(n.name,e)}}return o}async processAfcStream(e){var t,n,r;const o=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let i=!1,a=0;return function(e,t,n){return Yc(this,arguments,function*(){for(var r,s,l,c,u,d;a<o;){i&&(a++,i=!1);const g=yield Xc(e.processParamsMaybeAddMcpUsage(n)),y=yield Xc(e.generateContentStreamInternal(g)),v=[],b=[];try{for(var f,p=!0,h=(s=void 0,$c(y));!(r=(f=yield Xc(h.next())).done);p=!0){c=f.value,p=!1;const e=c;if(yield yield Xc(e),e.candidates&&(null===(u=e.candidates[0])||void 0===u?void 0:u.content)){b.push(e.candidates[0].content);for(const n of null!==(d=e.candidates[0].content.parts)&&void 0!==d?d:[])if(a<o&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${n.functionCall.name}`);{const e=yield Xc(t.get(n.functionCall.name).callTool([n.functionCall]));v.push(...e)}}}}}catch(m){s={error:m}}finally{try{p||r||!(l=h.return)||(yield Xc(l.call(h)))}finally{if(s)throw s.error}}if(!(v.length>0))break;{i=!0;const e=new kl;e.candidates=[{content:{role:"user",parts:v}}],yield yield Xc(e);const t=[];t.push(...b),t.push({role:"user",parts:v});const r=vc(n.contents).concat(t);n.contents=r}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=cu(this.apiClient,e);return a=va("{model}:generateContent",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=du(e),n=new kl;return Object.assign(n,t),n})}{const t=lu(this.apiClient,e);return a=va("{model}:generateContent",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=uu(e),n=new kl;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=cu(this.apiClient,e);return a=va("{model}:streamGenerateContent?alt=sse",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.requestStream({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),i.then(function(e){return Yc(this,arguments,function*(){var t,n,r,o;try{for(var i,a=!0,s=$c(e);!(t=(i=yield Xc(s.next())).done);a=!0){o=i.value,a=!1;const e=o,t=du(yield Xc(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new kl;Object.assign(n,t),yield yield Xc(n)}}catch(l){n={error:l}}finally{try{a||t||!(r=s.return)||(yield Xc(r.call(s)))}finally{if(n)throw n.error}}})})}{const t=lu(this.apiClient,e);return a=va("{model}:streamGenerateContent?alt=sse",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.requestStream({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),i.then(function(e){return Yc(this,arguments,function*(){var t,n,r,o;try{for(var i,a=!0,s=$c(e);!(t=(i=yield Xc(s.next())).done);a=!0){o=i.value,a=!1;const e=o,t=uu(yield Xc(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new kl;Object.assign(n,t),yield yield Xc(n)}}catch(l){n={error:l}}finally{try{a||t||!(r=s.return)||(yield Xc(r.call(s)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let t=yc(e,o);Array.isArray(t)&&(t=t.map(e=>e)),ba(n,["instances[]","content"],t)}const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["taskType"]);void 0!==t&&null!=n&&ba(t,["instances[]","task_type"],n);const r=wa(e,["title"]);void 0!==t&&null!=r&&ba(t,["instances[]","title"],r);const o=wa(e,["outputDimensionality"]);void 0!==t&&null!=o&&ba(t,["parameters","outputDimensionality"],o);const i=wa(e,["mimeType"]);void 0!==t&&null!=i&&ba(t,["instances[]","mimeType"],i);const a=wa(e,["autoTruncate"]);void 0!==t&&null!=a&&ba(t,["parameters","autoTruncate"],a)}(i,n),n}(this.apiClient,e);return a=va("{model}:predict",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["values"]);null!=n&&ba(t,["values"],n);const r=wa(e,["statistics"]);return null!=r&&ba(t,["statistics"],function(e){const t={},n=wa(e,["truncated"]);null!=n&&ba(t,["truncated"],n);const r=wa(e,["token_count"]);return null!=r&&ba(t,["tokenCount"],r),t}(r)),t}(e))),ba(t,["embeddings"],e)}const o=wa(e,["metadata"]);return null!=o&&ba(t,["metadata"],o),t}(e),n=new Pl;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let t=yc(e,o);Array.isArray(t)&&(t=t.map(e=>e)),ba(n,["requests[]","content"],t)}const i=wa(t,["config"]);null!=i&&function(e,t){const n=wa(e,["taskType"]);void 0!==t&&null!=n&&ba(t,["requests[]","taskType"],n);const r=wa(e,["title"]);void 0!==t&&null!=r&&ba(t,["requests[]","title"],r);const o=wa(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&ba(t,["requests[]","outputDimensionality"],o),void 0!==wa(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==wa(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(i,n);const a=wa(t,["model"]);return void 0!==a&&ba(n,["requests[]","model"],ic(e,a)),n}(this.apiClient,e);return a=va("{model}:batchEmbedContents",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["embeddings"],e)}const o=wa(e,["metadata"]);return null!=o&&ba(t,["metadata"],o),t}(e),n=new Pl;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["prompt"]);null!=o&&ba(n,["instances[0]","prompt"],o);const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["outputGcsUri"]);void 0!==t&&null!=n&&ba(t,["parameters","storageUri"],n);const r=wa(e,["negativePrompt"]);void 0!==t&&null!=r&&ba(t,["parameters","negativePrompt"],r);const o=wa(e,["numberOfImages"]);void 0!==t&&null!=o&&ba(t,["parameters","sampleCount"],o);const i=wa(e,["aspectRatio"]);void 0!==t&&null!=i&&ba(t,["parameters","aspectRatio"],i);const a=wa(e,["guidanceScale"]);void 0!==t&&null!=a&&ba(t,["parameters","guidanceScale"],a);const s=wa(e,["seed"]);void 0!==t&&null!=s&&ba(t,["parameters","seed"],s);const l=wa(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&ba(t,["parameters","safetySetting"],l);const c=wa(e,["personGeneration"]);void 0!==t&&null!=c&&ba(t,["parameters","personGeneration"],c);const u=wa(e,["includeSafetyAttributes"]);void 0!==t&&null!=u&&ba(t,["parameters","includeSafetyAttributes"],u);const d=wa(e,["includeRaiReason"]);void 0!==t&&null!=d&&ba(t,["parameters","includeRaiReason"],d);const f=wa(e,["language"]);void 0!==t&&null!=f&&ba(t,["parameters","language"],f);const p=wa(e,["outputMimeType"]);void 0!==t&&null!=p&&ba(t,["parameters","outputOptions","mimeType"],p);const h=wa(e,["outputCompressionQuality"]);void 0!==t&&null!=h&&ba(t,["parameters","outputOptions","compressionQuality"],h);const m=wa(e,["addWatermark"]);void 0!==t&&null!=m&&ba(t,["parameters","addWatermark"],m);const g=wa(e,["labels"]);void 0!==t&&null!=g&&ba(t,["labels"],g);const y=wa(e,["imageSize"]);void 0!==t&&null!=y&&ba(t,["parameters","sampleImageSize"],y);const v=wa(e,["enhancePrompt"]);void 0!==t&&null!=v&&ba(t,["parameters","enhancePrompt"],v)}(i,n),n}(this.apiClient,e);return a=va("{model}:predict",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>hu(e))),ba(t,["generatedImages"],e)}const o=wa(e,["positivePromptSafetyAttributes"]);return null!=o&&ba(t,["positivePromptSafetyAttributes"],xu(o)),t}(e),n=new jl;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["prompt"]);null!=o&&ba(n,["instances[0]","prompt"],o);const i=wa(t,["config"]);return null!=i&&function(e,t){if(void 0!==wa(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==wa(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=wa(e,["numberOfImages"]);void 0!==t&&null!=n&&ba(t,["parameters","sampleCount"],n);const r=wa(e,["aspectRatio"]);void 0!==t&&null!=r&&ba(t,["parameters","aspectRatio"],r);const o=wa(e,["guidanceScale"]);if(void 0!==t&&null!=o&&ba(t,["parameters","guidanceScale"],o),void 0!==wa(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=wa(e,["safetyFilterLevel"]);void 0!==t&&null!=i&&ba(t,["parameters","safetySetting"],i);const a=wa(e,["personGeneration"]);void 0!==t&&null!=a&&ba(t,["parameters","personGeneration"],a);const s=wa(e,["includeSafetyAttributes"]);void 0!==t&&null!=s&&ba(t,["parameters","includeSafetyAttributes"],s);const l=wa(e,["includeRaiReason"]);void 0!==t&&null!=l&&ba(t,["parameters","includeRaiReason"],l);const c=wa(e,["language"]);void 0!==t&&null!=c&&ba(t,["parameters","language"],c);const u=wa(e,["outputMimeType"]);void 0!==t&&null!=u&&ba(t,["parameters","outputOptions","mimeType"],u);const d=wa(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&ba(t,["parameters","outputOptions","compressionQuality"],d),void 0!==wa(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==wa(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const f=wa(e,["imageSize"]);if(void 0!==t&&null!=f&&ba(t,["parameters","sampleImageSize"],f),void 0!==wa(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,n),n}(this.apiClient,e);return a=va("{model}:predict",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["_self"]);null!=n&&ba(t,["image"],function(e){const t={},n=wa(e,["bytesBase64Encoded"]);null!=n&&ba(t,["imageBytes"],Nc(n));const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(n));const r=wa(e,["raiFilteredReason"]);null!=r&&ba(t,["raiFilteredReason"],r);const o=wa(e,["_self"]);return null!=o&&ba(t,["safetyAttributes"],wu(o)),t}(e))),ba(t,["generatedImages"],e)}const o=wa(e,["positivePromptSafetyAttributes"]);return null!=o&&ba(t,["positivePromptSafetyAttributes"],wu(o)),t}(e),n=new jl;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["prompt"]);null!=o&&ba(n,["instances[0]","prompt"],o);const i=wa(t,["referenceImages"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["referenceImage"]);null!=n&&ba(t,["referenceImage"],yu(n));const r=wa(e,["referenceId"]);null!=r&&ba(t,["referenceId"],r);const o=wa(e,["referenceType"]);null!=o&&ba(t,["referenceType"],o);const i=wa(e,["maskImageConfig"]);null!=i&&ba(t,["maskImageConfig"],function(e){const t={},n=wa(e,["maskMode"]);null!=n&&ba(t,["maskMode"],n);const r=wa(e,["segmentationClasses"]);null!=r&&ba(t,["maskClasses"],r);const o=wa(e,["maskDilation"]);return null!=o&&ba(t,["dilation"],o),t}(i));const a=wa(e,["controlImageConfig"]);null!=a&&ba(t,["controlImageConfig"],function(e){const t={},n=wa(e,["controlType"]);null!=n&&ba(t,["controlType"],n);const r=wa(e,["enableControlImageComputation"]);return null!=r&&ba(t,["computeControl"],r),t}(a));const s=wa(e,["styleImageConfig"]);null!=s&&ba(t,["styleImageConfig"],s);const l=wa(e,["subjectImageConfig"]);return null!=l&&ba(t,["subjectImageConfig"],l),t}(e))),ba(n,["instances[0]","referenceImages"],e)}const a=wa(t,["config"]);return null!=a&&function(e,t){const n=wa(e,["outputGcsUri"]);void 0!==t&&null!=n&&ba(t,["parameters","storageUri"],n);const r=wa(e,["negativePrompt"]);void 0!==t&&null!=r&&ba(t,["parameters","negativePrompt"],r);const o=wa(e,["numberOfImages"]);void 0!==t&&null!=o&&ba(t,["parameters","sampleCount"],o);const i=wa(e,["aspectRatio"]);void 0!==t&&null!=i&&ba(t,["parameters","aspectRatio"],i);const a=wa(e,["guidanceScale"]);void 0!==t&&null!=a&&ba(t,["parameters","guidanceScale"],a);const s=wa(e,["seed"]);void 0!==t&&null!=s&&ba(t,["parameters","seed"],s);const l=wa(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&ba(t,["parameters","safetySetting"],l);const c=wa(e,["personGeneration"]);void 0!==t&&null!=c&&ba(t,["parameters","personGeneration"],c);const u=wa(e,["includeSafetyAttributes"]);void 0!==t&&null!=u&&ba(t,["parameters","includeSafetyAttributes"],u);const d=wa(e,["includeRaiReason"]);void 0!==t&&null!=d&&ba(t,["parameters","includeRaiReason"],d);const f=wa(e,["language"]);void 0!==t&&null!=f&&ba(t,["parameters","language"],f);const p=wa(e,["outputMimeType"]);void 0!==t&&null!=p&&ba(t,["parameters","outputOptions","mimeType"],p);const h=wa(e,["outputCompressionQuality"]);void 0!==t&&null!=h&&ba(t,["parameters","outputOptions","compressionQuality"],h);const m=wa(e,["addWatermark"]);void 0!==t&&null!=m&&ba(t,["parameters","addWatermark"],m);const g=wa(e,["labels"]);void 0!==t&&null!=g&&ba(t,["labels"],g);const y=wa(e,["editMode"]);void 0!==t&&null!=y&&ba(t,["parameters","editMode"],y);const v=wa(e,["baseSteps"]);void 0!==t&&null!=v&&ba(t,["parameters","editConfig","baseSteps"],v)}(a,n),n}(this.apiClient,e);return o=va("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>hu(e))),ba(t,["generatedImages"],e)}return t}(e),n=new Dl;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["image"]);null!=o&&ba(n,["instances[0]","image"],yu(o));const i=wa(t,["upscaleFactor"]);null!=i&&ba(n,["parameters","upscaleConfig","upscaleFactor"],i);const a=wa(t,["config"]);return null!=a&&function(e,t){const n=wa(e,["outputGcsUri"]);void 0!==t&&null!=n&&ba(t,["parameters","storageUri"],n);const r=wa(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&ba(t,["parameters","safetySetting"],r);const o=wa(e,["personGeneration"]);void 0!==t&&null!=o&&ba(t,["parameters","personGeneration"],o);const i=wa(e,["includeRaiReason"]);void 0!==t&&null!=i&&ba(t,["parameters","includeRaiReason"],i);const a=wa(e,["outputMimeType"]);void 0!==t&&null!=a&&ba(t,["parameters","outputOptions","mimeType"],a);const s=wa(e,["outputCompressionQuality"]);void 0!==t&&null!=s&&ba(t,["parameters","outputOptions","compressionQuality"],s);const l=wa(e,["enhanceInputImage"]);void 0!==t&&null!=l&&ba(t,["parameters","upscaleConfig","enhanceInputImage"],l);const c=wa(e,["imagePreservationFactor"]);void 0!==t&&null!=c&&ba(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const u=wa(e,["labels"]);void 0!==t&&null!=u&&ba(t,["labels"],u);const d=wa(e,["numberOfImages"]);void 0!==t&&null!=d&&ba(t,["parameters","sampleCount"],d);const f=wa(e,["mode"]);void 0!==t&&null!=f&&ba(t,["parameters","mode"],f)}(a,n),n}(this.apiClient,e);return o=va("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>hu(e))),ba(t,["generatedImages"],e)}return t}(e),n=new Ml;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["source"]);null!=o&&function(e,t){const n=wa(e,["prompt"]);void 0!==t&&null!=n&&ba(t,["instances[0]","prompt"],n);const r=wa(e,["personImage"]);void 0!==t&&null!=r&&ba(t,["instances[0]","personImage","image"],yu(r));const o=wa(e,["productImages"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["productImage"]);return null!=n&&ba(t,["image"],yu(n)),t}(e))),ba(t,["instances[0]","productImages"],e)}}(o,n);const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["numberOfImages"]);void 0!==t&&null!=n&&ba(t,["parameters","sampleCount"],n);const r=wa(e,["baseSteps"]);void 0!==t&&null!=r&&ba(t,["parameters","baseSteps"],r);const o=wa(e,["outputGcsUri"]);void 0!==t&&null!=o&&ba(t,["parameters","storageUri"],o);const i=wa(e,["seed"]);void 0!==t&&null!=i&&ba(t,["parameters","seed"],i);const a=wa(e,["safetyFilterLevel"]);void 0!==t&&null!=a&&ba(t,["parameters","safetySetting"],a);const s=wa(e,["personGeneration"]);void 0!==t&&null!=s&&ba(t,["parameters","personGeneration"],s);const l=wa(e,["addWatermark"]);void 0!==t&&null!=l&&ba(t,["parameters","addWatermark"],l);const c=wa(e,["outputMimeType"]);void 0!==t&&null!=c&&ba(t,["parameters","outputOptions","mimeType"],c);const u=wa(e,["outputCompressionQuality"]);void 0!==t&&null!=u&&ba(t,["parameters","outputOptions","compressionQuality"],u);const d=wa(e,["enhancePrompt"]);void 0!==t&&null!=d&&ba(t,["parameters","enhancePrompt"],d);const f=wa(e,["labels"]);void 0!==t&&null!=f&&ba(t,["labels"],f)}(i,n),n}(this.apiClient,e);return o=va("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>hu(e))),ba(t,["generatedImages"],e)}return t}(e),n=new Ll;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["source"]);null!=o&&function(e,t){const n=wa(e,["prompt"]);void 0!==t&&null!=n&&ba(t,["instances[0]","prompt"],n);const r=wa(e,["image"]);void 0!==t&&null!=r&&ba(t,["instances[0]","image"],yu(r));const o=wa(e,["scribbleImage"]);void 0!==t&&null!=o&&ba(t,["instances[0]","scribble"],function(e){const t={},n=wa(e,["image"]);return null!=n&&ba(t,["image"],yu(n)),t}(o))}(o,n);const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["mode"]);void 0!==t&&null!=n&&ba(t,["parameters","mode"],n);const r=wa(e,["maxPredictions"]);void 0!==t&&null!=r&&ba(t,["parameters","maxPredictions"],r);const o=wa(e,["confidenceThreshold"]);void 0!==t&&null!=o&&ba(t,["parameters","confidenceThreshold"],o);const i=wa(e,["maskDilation"]);void 0!==t&&null!=i&&ba(t,["parameters","maskDilation"],i);const a=wa(e,["binaryColorThreshold"]);void 0!==t&&null!=a&&ba(t,["parameters","binaryColorThreshold"],a);const s=wa(e,["labels"]);void 0!==t&&null!=s&&ba(t,["labels"],s)}(i,n),n}(this.apiClient,e);return o=va("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["_self"]);null!=n&&ba(t,["mask"],mu(n));const r=wa(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["labels"],e)}return t}(e))),ba(t,["generatedMasks"],e)}return t}(e),n=new Bl;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);return null!=r&&ba(n,["_url","name"],ic(e,r)),n}(this.apiClient,e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>bu(e))}{const t=function(e,t){const n={},r=wa(t,["model"]);return null!=r&&ba(n,["_url","name"],ic(e,r)),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>vu(e))}}async listInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["config"]);return null!=r&&function(e,t,n){const r=wa(t,["pageSize"]);void 0!==n&&null!=r&&ba(n,["_query","pageSize"],r);const o=wa(t,["pageToken"]);void 0!==n&&null!=o&&ba(n,["_query","pageToken"],o);const i=wa(t,["filter"]);void 0!==n&&null!=i&&ba(n,["_query","filter"],i);const a=wa(t,["queryBase"]);void 0!==n&&null!=a&&ba(n,["_url","models_url"],Tc(e,a))}(e,r,n),n}(this.apiClient,e);return a=va("{models_url}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["_self"]);if(null!=o){let e=Oc(o);Array.isArray(e)&&(e=e.map(e=>bu(e))),ba(t,["models"],e)}return t}(e),n=new Fl;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["config"]);return null!=r&&function(e,t,n){const r=wa(t,["pageSize"]);void 0!==n&&null!=r&&ba(n,["_query","pageSize"],r);const o=wa(t,["pageToken"]);void 0!==n&&null!=o&&ba(n,["_query","pageToken"],o);const i=wa(t,["filter"]);void 0!==n&&null!=i&&ba(n,["_query","filter"],i);const a=wa(t,["queryBase"]);void 0!==n&&null!=a&&ba(n,["_url","models_url"],Tc(e,a))}(e,r,n),n}(this.apiClient,e);return a=va("{models_url}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["_self"]);if(null!=o){let e=Oc(o);Array.isArray(e)&&(e=e.map(e=>vu(e))),ba(t,["models"],e)}return t}(e),n=new Fl;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["displayName"]);void 0!==t&&null!=n&&ba(t,["displayName"],n);const r=wa(e,["description"]);void 0!==t&&null!=r&&ba(t,["description"],r);const o=wa(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&ba(t,["defaultCheckpointId"],o)}(o,n),n}(this.apiClient,e);return a=va("{model}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>bu(e))}{const t=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","name"],ic(e,r));const o=wa(t,["config"]);return null!=o&&function(e,t){const n=wa(e,["displayName"]);void 0!==t&&null!=n&&ba(t,["displayName"],n);const r=wa(e,["description"]);void 0!==t&&null!=r&&ba(t,["description"],r);const o=wa(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&ba(t,["defaultCheckpointId"],o)}(o,n),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>vu(e))}}async delete(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);return null!=r&&ba(n,["_url","name"],ic(e,r)),n}(this.apiClient,e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Ul;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["model"]);return null!=r&&ba(n,["_url","name"],ic(e,r)),n}(this.apiClient,e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Ul;return Object.assign(n,t),n})}}async countTokens(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>e)),ba(n,["contents"],e)}const i=wa(t,["config"]);return null!=i&&function(e,t){const n=wa(e,["systemInstruction"]);void 0!==t&&null!=n&&ba(t,["systemInstruction"],gc(n));const r=wa(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Cu(e))),ba(t,["tools"],e)}const o=wa(e,["generationConfig"]);void 0!==t&&null!=o&&ba(t,["generationConfig"],function(e){const t={},n=wa(e,["modelSelectionConfig"]);null!=n&&ba(t,["modelConfig"],n);const r=wa(e,["responseJsonSchema"]);null!=r&&ba(t,["responseJsonSchema"],r);const o=wa(e,["audioTimestamp"]);null!=o&&ba(t,["audioTimestamp"],o);const i=wa(e,["candidateCount"]);null!=i&&ba(t,["candidateCount"],i);const a=wa(e,["enableAffectiveDialog"]);null!=a&&ba(t,["enableAffectiveDialog"],a);const s=wa(e,["frequencyPenalty"]);null!=s&&ba(t,["frequencyPenalty"],s);const l=wa(e,["logprobs"]);null!=l&&ba(t,["logprobs"],l);const c=wa(e,["maxOutputTokens"]);null!=c&&ba(t,["maxOutputTokens"],c);const u=wa(e,["mediaResolution"]);null!=u&&ba(t,["mediaResolution"],u);const d=wa(e,["presencePenalty"]);null!=d&&ba(t,["presencePenalty"],d);const f=wa(e,["responseLogprobs"]);null!=f&&ba(t,["responseLogprobs"],f);const p=wa(e,["responseMimeType"]);null!=p&&ba(t,["responseMimeType"],p);const h=wa(e,["responseModalities"]);null!=h&&ba(t,["responseModalities"],h);const m=wa(e,["responseSchema"]);null!=m&&ba(t,["responseSchema"],m);const g=wa(e,["routingConfig"]);null!=g&&ba(t,["routingConfig"],g);const y=wa(e,["seed"]);null!=y&&ba(t,["seed"],y);const v=wa(e,["speechConfig"]);null!=v&&ba(t,["speechConfig"],v);const b=wa(e,["stopSequences"]);null!=b&&ba(t,["stopSequences"],b);const w=wa(e,["temperature"]);null!=w&&ba(t,["temperature"],w);const x=wa(e,["thinkingConfig"]);null!=x&&ba(t,["thinkingConfig"],x);const C=wa(e,["topK"]);null!=C&&ba(t,["topK"],C);const E=wa(e,["topP"]);if(null!=E&&ba(t,["topP"],E),void 0!==wa(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(o))}(i,n),n}(this.apiClient,e);return a=va("{model}:countTokens",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["totalTokens"]);return null!=r&&ba(t,["totalTokens"],r),t}(e),n=new Hl;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>su(e))),ba(n,["contents"],e)}const i=wa(t,["config"]);return null!=i&&function(e){if(void 0!==wa(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==wa(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==wa(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),n}(this.apiClient,e);return a=va("{model}:countTokens",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["totalTokens"]);null!=r&&ba(t,["totalTokens"],r);const o=wa(e,["cachedContentTokenCount"]);return null!=o&&ba(t,["cachedContentTokenCount"],o),t}(e),n=new Hl;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["_url","model"],ic(e,r));const o=wa(t,["contents"]);if(null!=o){let e=vc(o);Array.isArray(e)&&(e=e.map(e=>e)),ba(n,["contents"],e)}return n}(this.apiClient,e);return o=va("{model}:computeTokens",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["tokensInfo"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["tokensInfo"],e)}return t}(e),n=new Vl;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=pu(this.apiClient,e);return a=va("{model}:predictLongRunning",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["_self"]);return null!=n&&ba(t,["video"],function(e){const t={},n=wa(e,["gcsUri"]);null!=n&&ba(t,["uri"],n);const r=wa(e,["bytesBase64Encoded"]);null!=r&&ba(t,["videoBytes"],Nc(r));const o=wa(e,["mimeType"]);return null!=o&&ba(t,["mimeType"],o),t}(n)),t}(e))),ba(t,["generatedVideos"],e)}const r=wa(e,["raiMediaFilteredCount"]);null!=r&&ba(t,["raiMediaFilteredCount"],r);const o=wa(e,["raiMediaFilteredReasons"]);return null!=o&&ba(t,["raiMediaFilteredReasons"],o),t}(a)),t}(e),n=new Gl;return Object.assign(n,t),n})}{const t=fu(this.apiClient,e);return a=va("{model}:predictLongRunning",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>{const t=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response","generateVideoResponse"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["video"]);return null!=n&&ba(t,["video"],function(e){const t={},n=wa(e,["uri"]);null!=n&&ba(t,["uri"],n);const r=wa(e,["encodedVideo"]);null!=r&&ba(t,["videoBytes"],Nc(r));const o=wa(e,["encoding"]);return null!=o&&ba(t,["mimeType"],o),t}(n)),t}(e))),ba(t,["generatedVideos"],e)}const r=wa(e,["raiMediaFilteredCount"]);null!=r&&ba(t,["raiMediaFilteredCount"],r);const o=wa(e,["raiMediaFilteredReasons"]);return null!=o&&ba(t,["raiMediaFilteredReasons"],o),t}(a)),t}(e),n=new Gl;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zu extends ya{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["operationName"]);return null!=n&&ba(t,["_url","operationName"],n),t}(e);return a=va("{operationName}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i}{const t=function(e){const t={},n=wa(e,["operationName"]);return null!=n&&ba(t,["_url","operationName"],n),t}(e);return a=va("{operationName}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i}}async fetchPredictVideosOperationInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e){const t={},n=wa(e,["operationName"]);null!=n&&ba(t,["operationName"],n);const r=wa(e,["resourceName"]);return null!=r&&ba(t,["_url","resourceName"],r),t}(e);return o=va("{resourceName}:fetchPredictOperation",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qu(e,t,n){const r=wa(t,["expireTime"]);void 0!==n&&null!=r&&ba(n,["expireTime"],r);const o=wa(t,["newSessionExpireTime"]);void 0!==n&&null!=o&&ba(n,["newSessionExpireTime"],o);const i=wa(t,["uses"]);void 0!==n&&null!=i&&ba(n,["uses"],i);const a=wa(t,["liveConnectConstraints"]);void 0!==n&&null!=a&&ba(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=wa(t,["model"]);null!=r&&ba(n,["setup","model"],ic(e,r));const o=wa(t,["config"]);return null!=o&&ba(n,["config"],function(e,t){const n=wa(e,["generationConfig"]);void 0!==t&&null!=n&&ba(t,["setup","generationConfig"],n);const r=wa(e,["responseModalities"]);void 0!==t&&null!=r&&ba(t,["setup","generationConfig","responseModalities"],r);const o=wa(e,["temperature"]);void 0!==t&&null!=o&&ba(t,["setup","generationConfig","temperature"],o);const i=wa(e,["topP"]);void 0!==t&&null!=i&&ba(t,["setup","generationConfig","topP"],i);const a=wa(e,["topK"]);void 0!==t&&null!=a&&ba(t,["setup","generationConfig","topK"],a);const s=wa(e,["maxOutputTokens"]);void 0!==t&&null!=s&&ba(t,["setup","generationConfig","maxOutputTokens"],s);const l=wa(e,["mediaResolution"]);void 0!==t&&null!=l&&ba(t,["setup","generationConfig","mediaResolution"],l);const c=wa(e,["seed"]);void 0!==t&&null!=c&&ba(t,["setup","generationConfig","seed"],c);const u=wa(e,["speechConfig"]);void 0!==t&&null!=u&&ba(t,["setup","generationConfig","speechConfig"],Cc(u));const d=wa(e,["thinkingConfig"]);void 0!==t&&null!=d&&ba(t,["setup","generationConfig","thinkingConfig"],d);const f=wa(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&ba(t,["setup","generationConfig","enableAffectiveDialog"],f);const p=wa(e,["systemInstruction"]);void 0!==t&&null!=p&&ba(t,["setup","systemInstruction"],function(e){const t={},n=wa(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wa(e,["mediaResolution"]);null!=n&&ba(t,["mediaResolution"],n);const r=wa(e,["codeExecutionResult"]);null!=r&&ba(t,["codeExecutionResult"],r);const o=wa(e,["executableCode"]);null!=o&&ba(t,["executableCode"],o);const i=wa(e,["fileData"]);null!=i&&ba(t,["fileData"],function(e){const t={};if(void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wa(e,["fileUri"]);null!=n&&ba(t,["fileUri"],n);const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(i));const a=wa(e,["functionCall"]);null!=a&&ba(t,["functionCall"],function(e){const t={},n=wa(e,["id"]);null!=n&&ba(t,["id"],n);const r=wa(e,["args"]);null!=r&&ba(t,["args"],r);const o=wa(e,["name"]);if(null!=o&&ba(t,["name"],o),void 0!==wa(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wa(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(a));const s=wa(e,["functionResponse"]);null!=s&&ba(t,["functionResponse"],s);const l=wa(e,["inlineData"]);null!=l&&ba(t,["inlineData"],function(e){const t={},n=wa(e,["data"]);if(null!=n&&ba(t,["data"],n),void 0!==wa(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=wa(e,["mimeType"]);return null!=r&&ba(t,["mimeType"],r),t}(l));const c=wa(e,["text"]);null!=c&&ba(t,["text"],c);const u=wa(e,["thought"]);null!=u&&ba(t,["thought"],u);const d=wa(e,["thoughtSignature"]);null!=d&&ba(t,["thoughtSignature"],d);const f=wa(e,["videoMetadata"]);return null!=f&&ba(t,["videoMetadata"],f),t}(e))),ba(t,["parts"],e)}const r=wa(e,["role"]);return null!=r&&ba(t,["role"],r),t}(gc(p)));const h=wa(e,["tools"]);if(void 0!==t&&null!=h){let e=_c(h);Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wa(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const n=wa(e,["computerUse"]);null!=n&&ba(t,["computerUse"],n);const r=wa(e,["fileSearch"]);null!=r&&ba(t,["fileSearch"],r);const o=wa(e,["codeExecution"]);if(null!=o&&ba(t,["codeExecution"],o),void 0!==wa(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=wa(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["functionDeclarations"],e)}const a=wa(e,["googleMaps"]);null!=a&&ba(t,["googleMaps"],function(e){const t={};if(void 0!==wa(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wa(e,["enableWidget"]);return null!=n&&ba(t,["enableWidget"],n),t}(a));const s=wa(e,["googleSearch"]);null!=s&&ba(t,["googleSearch"],function(e){const t={};if(void 0!==wa(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wa(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wa(e,["timeRangeFilter"]);return null!=n&&ba(t,["timeRangeFilter"],n),t}(s));const l=wa(e,["googleSearchRetrieval"]);null!=l&&ba(t,["googleSearchRetrieval"],l);const c=wa(e,["urlContext"]);return null!=c&&ba(t,["urlContext"],c),t}(Ec(e)))),ba(t,["setup","tools"],e)}const m=wa(e,["sessionResumption"]);void 0!==t&&null!=m&&ba(t,["setup","sessionResumption"],function(e){const t={},n=wa(e,["handle"]);if(null!=n&&ba(t,["handle"],n),void 0!==wa(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(m));const g=wa(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&ba(t,["setup","inputAudioTranscription"],g);const y=wa(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&ba(t,["setup","outputAudioTranscription"],y);const v=wa(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&ba(t,["setup","realtimeInputConfig"],v);const b=wa(e,["contextWindowCompression"]);void 0!==t&&null!=b&&ba(t,["setup","contextWindowCompression"],b);const w=wa(e,["proactivity"]);if(void 0!==t&&null!=w&&ba(t,["setup","proactivity"],w),void 0!==wa(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(o,n)),n}(e,a));const s=wa(t,["lockAdditionalFields"]);return void 0!==n&&null!=s&&ba(n,["fieldMask"],s),{}}class Wu extends ya{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=function(e,t){const n={},r=wa(t,["config"]);return null!=r&&ba(n,["config"],qu(e,r,n)),n}(this.apiClient,e);o=va("auth_tokens",a._url),i=a._query,delete a.config,delete a._url,delete a._query;const s=function(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"==typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"==typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&0===(null==t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==o&&Array.isArray(o)&&o.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];o.length>0&&(n=o.map(e=>t.includes(e)?`generationConfig.${e}`:e));const i=[];r&&i.push(r),n.length>0&&i.push(...n),i.length>0?e.fieldMask=i.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==o&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}(a,e.config);return r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Xu extends ya{constructor(e){super(),this.apiClient=e,this.list=async e=>new Vc(Tl.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return o=va("{name}",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["_url","name"],n);const r=wa(e,["config"]);return null!=r&&function(e,t){const n=wa(e,["force"]);void 0!==t&&null!=n&&ba(t,["_query","force"],n)}(r,t),t}(e);r=va("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["parent"]);null!=n&&ba(t,["_url","parent"],n);const r=wa(e,["config"]);return null!=r&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r)}(r,t),t}(e);return o=va("{parent}/documents",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["documents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["documents"],e)}return t}(e),n=new Yl;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yu extends ya{constructor(e,t=new Xu(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new Vc(Tl.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["displayName"]);void 0!==t&&null!=n&&ba(t,["displayName"],n)}(n,t),t}(e);return o=va("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return o=va("{name}",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["_url","name"],n);const r=wa(e,["config"]);return null!=r&&function(e,t){const n=wa(e,["force"]);void 0!==t&&null!=n&&ba(t,["_query","force"],n)}(r,t),t}(e);r=va("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r)}(n,t),t}(e);return o=va("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["fileSearchStores"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["fileSearchStores"],e)}return t}(e),n=new $l;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["fileSearchStoreName"]);null!=n&&ba(t,["_url","file_search_store_name"],n);const r=wa(e,["config"]);return null!=r&&Au(r,t),t}(e);return o=va("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new Kl;return Object.assign(n,t),n})}}async importFile(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["fileSearchStoreName"]);null!=n&&ba(t,["_url","file_search_store_name"],n);const r=wa(e,["fileName"]);null!=r&&ba(t,["fileName"],r);const o=wa(e,["config"]);return null!=o&&function(e,t){const n=wa(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["customMetadata"],e)}const r=wa(e,["chunkingConfig"]);void 0!==t&&null!=r&&ba(t,["chunkingConfig"],r)}(o,t),t}(e);return o=va("{file_search_store_name}:importFile",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["name"],n);const r=wa(e,["metadata"]);null!=r&&ba(t,["metadata"],r);const o=wa(e,["done"]);null!=o&&ba(t,["done"],o);const i=wa(e,["error"]);null!=i&&ba(t,["error"],i);const a=wa(e,["response"]);return null!=a&&ba(t,["response"],function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["parent"]);null!=r&&ba(t,["parent"],r);const o=wa(e,["documentName"]);return null!=o&&ba(t,["documentName"],o),t}(a)),t}(e),n=new Jl;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $u=function(){const{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return $u=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ku(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Ju=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(Ae){}try{return new Error(JSON.stringify(e))}catch(t){}}return new Error(e)};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zu extends Error{}class Qu extends Zu{constructor(e,t,n,r){super(`${Qu.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,n){const r=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new td({message:n,cause:Ju(t)});const o=t;return 400===e?new rd(e,o,n,r):401===e?new od(e,o,n,r):403===e?new id(e,o,n,r):404===e?new ad(e,o,n,r):409===e?new sd(e,o,n,r):422===e?new ld(e,o,n,r):429===e?new cd(e,o,n,r):e>=500?new ud(e,o,n,r):new Qu(e,o,n,r)}}class ed extends Qu{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class td extends Qu{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class nd extends td{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class rd extends Qu{}class od extends Qu{}class id extends Qu{}class ad extends Qu{}class sd extends Qu{}class ld extends Qu{}class cd extends Qu{}class ud extends Qu{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dd=/^[a-z][a-z0-9+.-]*:/i;let fd=e=>(fd=Array.isArray,fd(e));const pd=fd,hd="0.0.1",md=()=>{var e,t,n,r,o;const i="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hd,"X-Stainless-OS":yd(Deno.build.os),"X-Stainless-Arch":gd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(t=null===(e=Deno.version)||void 0===e?void 0:e.deno)&&void 0!==t?t:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hd,"X-Stainless-OS":yd(null!==(n=globalThis.process.platform)&&void 0!==n?n:"unknown"),"X-Stainless-Arch":gd(null!==(r=globalThis.process.arch)&&void 0!==r?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(o=globalThis.process.version)&&void 0!==o?o:"unknown"};const a=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":hd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},gd=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",yd=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let vd;function bd(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function wd(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return bd({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function xd(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cd=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),Ed=()=>{var e;if("undefined"==typeof File){const{process:t}=globalThis,n="string"==typeof(null===(e=null==t?void 0:t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _d(e,t,n){return Ed(),new File(e,null!=t?t:"unknown_file",n)}const Ad=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Sd(e){var t,n,r,o,i;let a=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)a.push(e);else if(Ad(e))a.push(e instanceof Blob?e:await e.arrayBuffer());else{if(null==(u=e)||"object"!=typeof u||"function"!=typeof u[Symbol.asyncIterator]){const t=null===(i=null==e?void 0:e.constructor)||void 0===i?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}try{for(var s,l=!0,c=$c(e);!(t=(s=await c.next()).done);l=!0){o=s.value,l=!1;const e=o;a.push(...await Sd(e))}}catch(d){n={error:d}}finally{try{l||t||!(r=c.return)||await r.call(c)}finally{if(n)throw n.error}}}var u;return a}class Nd{constructor(e){this._client=e}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Id(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}Nd._key=[];const Td=Object.freeze(Object.create(null)),Od=((e=Id)=>function(t,...n){if(1===t.length)return t[0];let r=!1;const o=[],i=t.reduce((t,i,a)=>{var s,l,c;/[?#]/.test(i)&&(r=!0);const u=n[a];let d=(r?encodeURIComponent:e)(""+u);return a!==n.length&&(null==u||"object"==typeof u&&u.toString===(null===(c=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(s=u.hasOwnProperty)&&void 0!==s?s:Td))&&void 0!==l?l:Td))||void 0===c?void 0:c.toString))&&(d=u+"",o.push({start:t.length+i.length,length:d.length,error:`Value of type ${Object.prototype.toString.call(u).slice(8,-1)} is not a valid path parameter`})),t+i+(a===n.length?"":d)},""),a=i.split(/[?#]/,1)[0],s=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;null!==(l=s.exec(a));)o.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(o.sort((e,t)=>e.start-t.start),o.length>0){let e=0;const t=o.reduce((t,n)=>{const r=" ".repeat(n.start-e),o="^".repeat(n.length);return e=n.start+n.length,t+r+o},"");throw new Zu(`Path parameters result in path with invalid segments:\n${o.map(e=>e.error).join("\n")}\n${i}\n${t}`)}return i})(Id);
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rd extends Nd{create(e,t){var n;const{api_version:r=this._client.apiVersion}=e,o=Wc(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Zu("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Zu("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Od`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:null!==(n=e.stream)&&void 0!==n&&n}))}delete(e,t={},n){const{api_version:r=this._client.apiVersion}=null!=t?t:{};return this._client.delete(Od`/${r}/interactions/${e}`,n)}cancel(e,t={},n){const{api_version:r=this._client.apiVersion}=null!=t?t:{};return this._client.post(Od`/${r}/interactions/${e}/cancel`,n)}get(e,t={},n){var r;const o=null!=t?t:{},{api_version:i=this._client.apiVersion}=o,a=Wc(o,["api_version"]);return this._client.get(Od`/${i}/interactions/${e}`,Object.assign(Object.assign({query:a},n),{stream:null!==(r=null==t?void 0:t.stream)&&void 0!==r&&r}))}}Rd._key=Object.freeze(["interactions"]);class kd extends Rd{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pd,jd;function Dd(e){let t;return(null!=Pd?Pd:(t=new globalThis.TextEncoder,Pd=t.encode.bind(t)))(e)}function Md(e){let t;return(null!=jd?jd:(t=new globalThis.TextDecoder,jd=t.decode.bind(t)))(e)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?Dd(e):e;this.buffer=function(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}([this.buffer,t]);const n=[];let r;for(;null!=(r=Bd(this.buffer,this.carriageReturnIndex));){if(r.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=r.index;continue}if(null!=this.carriageReturnIndex&&(r.index!==this.carriageReturnIndex+1||r.carriage)){n.push(Md(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const e=null!==this.carriageReturnIndex?r.preceding-1:r.preceding,t=Md(this.buffer.subarray(0,e));n.push(t),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode("\n"):[]}}function Bd(e,t){for(let n=null!=t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Fd(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Ld.NEWLINE_CHARS=new Set(["\n","\r"]),Ld.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const Ud={off:0,error:200,warn:300,info:400,debug:500},Hd=(e,t,n)=>{var r,o;if(e)return r=Ud,o=e,Object.prototype.hasOwnProperty.call(r,o)?e:void Wd(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ud))}`)};function Vd(){}function Gd(e,t,n){return!t||Ud[e]>Ud[n]?Vd:t[e].bind(t)}const zd={error:Vd,warn:Vd,info:Vd,debug:Vd};let qd=new WeakMap;function Wd(e){var t;const n=e.logger,r=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!n)return zd;const o=qd.get(n);if(o&&o[0]===r)return o[1];const i={error:Gd("error",n,r),warn:Gd("warn",n,r),info:Gd("info",n,r),debug:Gd("debug",n,r)};return qd.set(n,[r,i]),i}const Xd=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yd{constructor(e,t,n){this.iterator=e,this.controller=t,this.client=n}static fromSSEResponse(e,t,n){let r=!1;const o=n?Wd(n):console;return new Yd(function(){return Yc(this,arguments,function*(){var n,i,a,s;if(r)throw new Zu("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{try{for(var c,u=!0,d=$c(function(e,t){return Yc(this,arguments,function*(){var n,r,o,i;if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new Zu("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new Zu("Attempted to iterate over a response with no body")}const a=new $d,s=new Ld,l=xd(e.body);try{for(var c,u=!0,d=$c(function(e){return Yc(this,arguments,function*(){var t,n,r,o;let i=new Uint8Array;try{for(var a,s=!0,l=$c(e);!(t=(a=yield Xc(l.next())).done);s=!0){o=a.value,s=!1;const e=o;if(null==e)continue;const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?Dd(e):e;let n,r=new Uint8Array(i.length+t.length);for(r.set(i),r.set(t,i.length),i=r;-1!==(n=Fd(i));)yield yield Xc(i.slice(0,n)),i=i.slice(n)}}catch(c){n={error:c}}finally{try{s||t||!(r=l.return)||(yield Xc(r.call(l)))}finally{if(n)throw n.error}}i.length>0&&(yield yield Xc(i))})}(l));!(n=(c=yield Xc(d.next())).done);u=!0){i=c.value,u=!1;const e=i;for(const t of s.decode(e)){const e=a.decode(t);e&&(yield yield Xc(e))}}}catch(f){r={error:f}}finally{try{u||n||!(o=d.return)||(yield Xc(o.call(d)))}finally{if(r)throw r.error}}for(const e of s.flush()){const t=a.decode(e);t&&(yield yield Xc(t))}})}(e,t));!(n=(c=yield Xc(d.next())).done);u=!0){s=c.value,u=!1;const e=s;if(!l)if(e.data.startsWith("[DONE]"))l=!0;else try{yield yield Xc(JSON.parse(e.data))}catch(f){throw o.error("Could not parse message into JSON:",e.data),o.error("From chunk:",e.raw),f}}}catch(p){i={error:p}}finally{try{u||n||!(a=d.return)||(yield Xc(a.call(d)))}finally{if(i)throw i.error}}l=!0}catch(f){if(Ku(f))return yield Xc(void 0);throw f}finally{l||t.abort()}})},t,n)}static fromReadableStream(e,t,n){let r=!1;return new Yd(function(){return Yc(this,arguments,function*(){var n,o,i,a;if(r)throw new Zu("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{try{for(var l,c=!0,u=$c(function(){return Yc(this,arguments,function*(){var t,n,r,o;const i=new Ld,a=xd(e);try{for(var s,l=!0,c=$c(a);!(t=(s=yield Xc(c.next())).done);l=!0){o=s.value,l=!1;const e=o;for(const t of i.decode(e))yield yield Xc(t)}}catch(u){n={error:u}}finally{try{l||t||!(r=c.return)||(yield Xc(r.call(c)))}finally{if(n)throw n.error}}for(const e of i.flush())yield yield Xc(e)})}());!(n=(l=yield Xc(u.next())).done);c=!0){a=l.value,c=!1;const e=a;s||e&&(yield yield Xc(JSON.parse(e)))}}catch(d){o={error:d}}finally{try{c||n||!(i=u.return)||(yield Xc(i.call(u)))}finally{if(o)throw o.error}}s=!0}catch(f){if(Ku(f))return yield Xc(void 0);throw f}finally{s||t.abort()}})},t,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Yd(()=>r(e),this.controller,this.client),new Yd(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return bd({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:r}=await t.next();if(r)return e.close();const o=Dd(JSON.stringify(n)+"\n");e.enqueue(o)}catch(n){e.error(n)}},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}}class $d{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function Kd(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=t,a=await(async()=>{var r;if(t.options.stream)return Wd(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Yd.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const o=n.headers.get("content-type"),i=null===(r=null==o?void 0:o.split(";")[0])||void 0===r?void 0:r.trim();return(null==i?void 0:i.includes("application/json"))||(null==i?void 0:i.endsWith("+json"))?await n.json():await n.text()})();return Wd(e).debug(`[${r}] response parsed`,Xd({retryOfRequestLogID:o,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */}class Jd extends Promise{constructor(e,t,n=Kd){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new Jd(this.client,this.responsePromise,async(t,n)=>e(await this.parseResponse(t,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zd=Symbol("brand.privateNullableHeaders");function*Qd(e){if(!e)return;if(Zd in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():pd(e)?t=e:(n=!0,t=Object.entries(null!=e?e:{}));for(let r of t){const e=r[0];if("string"!=typeof e)throw new TypeError("expected header name to be a string");const t=pd(r[1])?r[1]:[r[1]];let o=!1;for(const r of t)void 0!==r&&(n&&!o&&(o=!0,yield[e,null]),yield[e,r])}}const ef=e=>{const t=new Headers,n=new Set;for(const r of e){const e=new Set;for(const[o,i]of Qd(r)){const r=o.toLowerCase();e.has(r)||(t.delete(o),e.add(r)),null===i?(t.delete(o),n.add(r)):(t.append(o,i),n.delete(r))}}return{[Zd]:!0,values:t,nulls:n}},tf=e=>{var t,n,r,o,i,a;return void 0!==globalThis.process?null!==(r=null===(n=null===(t=ga)||void 0===t?void 0:t[e])||void 0===n?void 0:n.trim())&&void 0!==r?r:void 0:void 0!==globalThis.Deno?null===(a=null===(i=null===(o=globalThis.Deno.env)||void 0===o?void 0:o.get)||void 0===i?void 0:i.call(o,e))||void 0===a?void 0:a.trim():void 0};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nf;class rf{constructor(e){var t,n,r,o,i,a,s,{baseURL:l=tf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(null!==(t=tf("GEMINI_API_KEY"))&&void 0!==t?t:null),apiVersion:u="v1beta"}=e,d=Wc(e,["baseURL","apiKey","apiVersion"]);const f=Object.assign(Object.assign({apiKey:c,apiVersion:u},d),{baseURL:l||"https://generativelanguage.googleapis.com"});this.baseURL=f.baseURL,this.timeout=null!==(n=f.timeout)&&void 0!==n?n:rf.DEFAULT_TIMEOUT,this.logger=null!==(r=f.logger)&&void 0!==r?r:console;const p="warn";this.logLevel=p,this.logLevel=null!==(i=null!==(o=Hd(f.logLevel,"ClientOptions.logLevel",this))&&void 0!==o?o:Hd(tf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))&&void 0!==i?i:p,this.fetchOptions=f.fetchOptions,this.maxRetries=null!==(a=f.maxRetries)&&void 0!==a?a:2,this.fetch=null!==(s=f.fetch)&&void 0!==s?s:
/**
       * @license
       * Copyright 2025 Google LLC
       * SPDX-License-Identifier: Apache-2.0
       */function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=Cd,this._options=f,this.apiKey=c,this.apiVersion=u,this.clientAdapter=f.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!e.has("authorization")&&!e.has("x-goog-api-key")&&!(this.apiKey&&e.get("x-goog-api-key")||t.has("x-goog-api-key")))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=ef([e.headers]);if(!t.values.has("authorization")&&!t.values.has("x-goog-api-key"))return this.apiKey?ef([{"x-goog-api-key":this.apiKey}]):this.clientAdapter.isVertexAI()?ef([await this.clientAdapter.getAuthHeaders()]):void 0}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Zu(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${hd}`}defaultIdempotencyKey(){return`stainless-node-retry-${$u()}`}makeStatusError(e,t,n,r){return Qu.generate(e,t,n,r)}buildURL(e,t,n){const r=!this.baseURLOverridden()&&n||this.baseURL,o=(a=e,dd.test(a)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e))),i=this.defaultQuery();var a;return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(i)||(t=Object.assign(Object.assign({},i),t)),"object"==typeof t&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>Object.assign({method:e,path:t},n)))}request(e,t=null){return new Jd(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var r,o,i;const a=await e,s=null!==(r=a.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=s),await this.prepareOptions(a);const{req:l,url:c,timeout:u}=await this.buildRequest(a,{retryCount:s-t});await this.prepareRequest(l,{url:c,options:a});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=void 0===n?"":`, retryOf: ${n}`,p=Date.now();if(Wd(this).debug(`[${d}] sending request`,Xd({retryOfRequestLogID:n,method:a.method,url:c,options:a,headers:l.headers})),null===(o=a.signal)||void 0===o?void 0:o.aborted)throw new ed;const h=new AbortController,m=await this.fetchWithTimeout(c,l,u,h).catch(Ju),g=Date.now();if(m instanceof globalThis.Error){const e=`retrying, ${t} attempts remaining`;if(null===(i=a.signal)||void 0===i?void 0:i.aborted)throw new ed;const r=Ku(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return Wd(this).info(`[${d}] connection ${r?"timed out":"failed"} - ${e}`),Wd(this).debug(`[${d}] connection ${r?"timed out":"failed"} (${e})`,Xd({retryOfRequestLogID:n,url:c,durationMs:g-p,message:m.message})),this.retryRequest(a,t,null!=n?n:d);if(Wd(this).info(`[${d}] connection ${r?"timed out":"failed"} - error; no more retries left`),Wd(this).debug(`[${d}] connection ${r?"timed out":"failed"} (error; no more retries left)`,Xd({retryOfRequestLogID:n,url:c,durationMs:g-p,message:m.message})),r)throw new nd;throw new td({cause:m})}const y=`[${d}${f}] ${l.method} ${c} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${g-p}ms`;if(!m.ok){const e=await this.shouldRetry(m);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await async function(e){var t,n;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void(await(null===(n=(t=e[Symbol.asyncIterator]()).return)||void 0===n?void 0:n.call(t)));const r=e.getReader(),o=r.cancel();r.releaseLock(),await o}(m.body),Wd(this).info(`${y} - ${e}`),Wd(this).debug(`[${d}] response error (${e})`,Xd({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:g-p})),this.retryRequest(a,t,null!=n?n:d,m.headers)}const r=e?"error; no more retries left":"error; not retryable";Wd(this).info(`${y} - ${r}`);const o=await m.text().catch(e=>Ju(e).message),i=(e=>{try{return JSON.parse(e)}catch(t){return}})(o),s=i?void 0:o;throw Wd(this).debug(`[${d}] response error (${r})`,Xd({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:s,durationMs:Date.now()-p})),this.makeStatusError(m.status,i,s,m.headers)}return Wd(this).info(y),Wd(this).debug(`[${d}] response start`,Xd({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:g-p})),{response:m,options:a,controller:h,requestLogID:d,retryOfRequestLogID:n,startTime:p}}async fetchWithTimeout(e,t,n,r){const o=t||{},{signal:i,method:a}=o,s=Wc(o,["signal","method"]);i&&i.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),n),c=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,u=Object.assign(Object.assign(Object.assign({signal:r.signal},c?{duplex:"half"}:{}),{method:"GET"}),s);a&&(u.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(l)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n,r){var o;let i;const a=null==r?void 0:r.get("retry-after-ms");if(a){const e=parseFloat(a);Number.isNaN(e)||(i=e)}const s=null==r?void 0:r.get("retry-after");if(s&&!i){const e=parseFloat(s);i=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){const n=null!==(o=e.maxRetries)&&void 0!==o?o:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){var n,r,o;const i=Object.assign({},e),{method:a,path:s,query:l,defaultBaseURL:c}=i,u=this.buildURL(s,l,c);"timeout"in i&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Zu(`${e} must be an integer`);if(t<0)throw new Zu(`${e} must be a positive integer`)})("timeout",i.timeout),i.timeout=null!==(n=i.timeout)&&void 0!==n?n:this.timeout;const{bodyHeaders:d,body:f}=this.buildBody({options:i}),p=await this.buildHeaders({options:e,method:a,bodyHeaders:d,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:p},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"}),f&&{body:f}),null!==(r=this.fetchOptions)&&void 0!==r?r:{}),null!==(o=i.fetchOptions)&&void 0!==o?o:{}),url:u,timeout:i.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:r}){let o={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const i=await this.authHeaders(e);let a=ef([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=vd?vd:vd=md()),this._options.defaultHeaders,n,e.headers,i]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=ef([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:wd(e)}:this.encoder({body:e,headers:n})}}rf.DEFAULT_TIMEOUT=6e4;class of extends rf{constructor(){super(...arguments),this.interactions=new kd(this)}}function af(e,t){const n={},r=wa(e,["sdkHttpResponse"]);null!=r&&ba(n,["sdkHttpResponse"],r);const o=wa(e,["name"]);null!=o&&ba(n,["name"],o);const i=wa(e,["state"]);null!=i&&ba(n,["state"],Sc(i));const a=wa(e,["createTime"]);null!=a&&ba(n,["createTime"],a);const s=wa(e,["tuningTask","startTime"]);null!=s&&ba(n,["startTime"],s);const l=wa(e,["tuningTask","completeTime"]);null!=l&&ba(n,["endTime"],l);const c=wa(e,["updateTime"]);null!=c&&ba(n,["updateTime"],c);const u=wa(e,["description"]);null!=u&&ba(n,["description"],u);const d=wa(e,["baseModel"]);null!=d&&ba(n,["baseModel"],d);const f=wa(e,["_self"]);return null!=f&&ba(n,["tunedModel"],function(e){const t={},n=wa(e,["name"]);null!=n&&ba(t,["model"],n);const r=wa(e,["name"]);return null!=r&&ba(t,["endpoint"],r),t}(f)),n}function sf(e,t){const n={},r=wa(e,["sdkHttpResponse"]);null!=r&&ba(n,["sdkHttpResponse"],r);const o=wa(e,["name"]);null!=o&&ba(n,["name"],o);const i=wa(e,["state"]);null!=i&&ba(n,["state"],Sc(i));const a=wa(e,["createTime"]);null!=a&&ba(n,["createTime"],a);const s=wa(e,["startTime"]);null!=s&&ba(n,["startTime"],s);const l=wa(e,["endTime"]);null!=l&&ba(n,["endTime"],l);const c=wa(e,["updateTime"]);null!=c&&ba(n,["updateTime"],c);const u=wa(e,["error"]);null!=u&&ba(n,["error"],u);const d=wa(e,["description"]);null!=d&&ba(n,["description"],d);const f=wa(e,["baseModel"]);null!=f&&ba(n,["baseModel"],f);const p=wa(e,["tunedModel"]);null!=p&&ba(n,["tunedModel"],p);const h=wa(e,["preTunedModel"]);null!=h&&ba(n,["preTunedModel"],h);const m=wa(e,["supervisedTuningSpec"]);null!=m&&ba(n,["supervisedTuningSpec"],m);const g=wa(e,["preferenceOptimizationSpec"]);null!=g&&ba(n,["preferenceOptimizationSpec"],g);const y=wa(e,["tuningDataStats"]);null!=y&&ba(n,["tuningDataStats"],y);const v=wa(e,["encryptionSpec"]);null!=v&&ba(n,["encryptionSpec"],v);const b=wa(e,["partnerModelTuningSpec"]);null!=b&&ba(n,["partnerModelTuningSpec"],b);const w=wa(e,["customBaseModel"]);null!=w&&ba(n,["customBaseModel"],w);const x=wa(e,["experiment"]);null!=x&&ba(n,["experiment"],x);const C=wa(e,["labels"]);null!=C&&ba(n,["labels"],C);const E=wa(e,["outputUri"]);null!=E&&ba(n,["outputUri"],E);const _=wa(e,["pipelineJob"]);null!=_&&ba(n,["pipelineJob"],_);const A=wa(e,["serviceAccount"]);null!=A&&ba(n,["serviceAccount"],A);const S=wa(e,["tunedModelDisplayName"]);null!=S&&ba(n,["tunedModelDisplayName"],S);const N=wa(e,["veoTuningSpec"]);return null!=N&&ba(n,["veoTuningSpec"],N),n}function lf(e,t){const n={},r=wa(e,["gcsUri"]);null!=r&&ba(n,["validationDatasetUri"],r);const o=wa(e,["vertexDatasetResource"]);return null!=o&&ba(n,["validationDatasetUri"],o),n
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */}nf=of,of.GeminiNextGenAPIClient=nf,of.GeminiNextGenAPIClientError=Zu,of.APIError=Qu,of.APIConnectionError=td,of.APIConnectionTimeoutError=nd,of.APIUserAbortError=ed,of.NotFoundError=ad,of.ConflictError=sd,of.RateLimitError=cd,of.BadRequestError=rd,of.AuthenticationError=od,of.InternalServerError=ud,of.PermissionDeniedError=id,of.UnprocessableEntityError=ld,of.toFile=async function(e,t,n){if(Ed(),null!=(r=e=await e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&Ad(r))return e instanceof File?e:_d([await e.arrayBuffer()],e.name);var r;if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),_d(await Sd(r),t,n)}const o=await Sd(e);if(t||(t=function(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}(e)),!(null==n?void 0:n.type)){const e=o.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n=Object.assign(Object.assign({},n),{type:e}))}return _d(o,t,n)},of.Interactions=kd;class cf extends ya{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Vc(Tl.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:n});return r.baseModel=void 0,await this.tuneInternal(r)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";return void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]),{name:r,state:ws.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return a=va("{name}",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>sf(e))}{const t=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return a=va("{name}",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>af(e))}}async listInternal(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r);const o=wa(e,["filter"]);void 0!==t&&null!=o&&ba(t,["_query","filter"],o)}(n,t),t}(e);return a=va("tuningJobs",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["tuningJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>sf(e))),ba(t,["tuningJobs"],e)}return t}(e),n=new zl;return Object.assign(n,t),n})}{const t=function(e){const t={},n=wa(e,["config"]);return null!=n&&function(e,t){const n=wa(e,["pageSize"]);void 0!==t&&null!=n&&ba(t,["_query","pageSize"],n);const r=wa(e,["pageToken"]);void 0!==t&&null!=r&&ba(t,["_query","pageToken"],r);const o=wa(e,["filter"]);void 0!==t&&null!=o&&ba(t,["_query","filter"],o)}(n,t),t}(e);return a=va("tunedModels",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["nextPageToken"]);null!=r&&ba(t,["nextPageToken"],r);const o=wa(e,["tunedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>af(e))),ba(t,["tuningJobs"],e)}return t}(e),n=new zl;return Object.assign(n,t),n})}}async cancel(e){var t,n,r,o;let i,a="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return a=va("{name}:cancel",r._url),s=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new ql;return Object.assign(n,t),n})}{const t=
/**
         * @license
         * Copyright 2025 Google LLC
         * SPDX-License-Identifier: Apache-2.0
         */function(e){const t={},n=wa(e,["name"]);return null!=n&&ba(t,["_url","name"],n),t}(e);return a=va("{name}:cancel",t._url),s=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wa(e,["sdkHttpResponse"]);return null!=n&&ba(t,["sdkHttpResponse"],n),t}(e),n=new ql;return Object.assign(n,t),n})}}async tuneInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const a=function(e,t){const n={},r=wa(e,["baseModel"]);null!=r&&ba(n,["baseModel"],r);const o=wa(e,["preTunedModel"]);null!=o&&ba(n,["preTunedModel"],o);const i=wa(e,["trainingDataset"]);null!=i&&function(e,t,n){let r=wa(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=wa(e,["gcsUri"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===r){const n=wa(e,["gcsUri"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let o=wa(n,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const n=wa(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=wa(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==wa(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,n,t);const a=wa(e,["config"]);return null!=a&&function(e,t,n){let r=wa(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=wa(e,["validationDataset"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec"],lf(n))}else if("PREFERENCE_TUNING"===r){const n=wa(e,["validationDataset"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec"],lf(n))}const o=wa(e,["tunedModelDisplayName"]);void 0!==t&&null!=o&&ba(t,["tunedModelDisplayName"],o);const i=wa(e,["description"]);void 0!==t&&null!=i&&ba(t,["description"],i);let a=wa(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=wa(e,["epochCount"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===a){const n=wa(e,["epochCount"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let s=wa(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=wa(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===s){const n=wa(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let l=wa(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=wa(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===l){const n=wa(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let c=wa(n,["config","method"]);if(void 0===c&&(c="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===c){const n=wa(e,["adapterSize"]);void 0!==t&&null!=n&&ba(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===c){const n=wa(e,["adapterSize"]);void 0!==t&&null!=n&&ba(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==wa(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==wa(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const u=wa(e,["labels"]);void 0!==t&&null!=u&&ba(t,["labels"],u);const d=wa(e,["beta"]);void 0!==t&&null!=d&&ba(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(a,n,t),n}(e,e);return o=va("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>sf(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=function(e){const t={},n=wa(e,["baseModel"]);null!=n&&ba(t,["baseModel"],n);const r=wa(e,["preTunedModel"]);null!=r&&ba(t,["preTunedModel"],r);const o=wa(e,["trainingDataset"]);null!=o&&function(e){const t={};if(void 0!==wa(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==wa(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=wa(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),ba(t,["examples","examples"],e)}}(o);const i=wa(e,["config"]);return null!=i&&function(e,t){if(void 0!==wa(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const n=wa(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=n&&ba(t,["displayName"],n),void 0!==wa(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const r=wa(e,["epochCount"]);void 0!==t&&null!=r&&ba(t,["tuningTask","hyperparameters","epochCount"],r);const o=wa(e,["learningRateMultiplier"]);if(null!=o&&ba({},["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==wa(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==wa(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==wa(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const i=wa(e,["batchSize"]);void 0!==t&&null!=i&&ba(t,["tuningTask","hyperparameters","batchSize"],i);const a=wa(e,["learningRate"]);if(void 0!==t&&null!=a&&ba(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==wa(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==wa(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(i,t),t}(e);return o=va("tunedModels",a._url),i=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>function(e){const t={},n=wa(e,["sdkHttpResponse"]);null!=n&&ba(t,["sdkHttpResponse"],n);const r=wa(e,["name"]);null!=r&&ba(t,["name"],r);const o=wa(e,["metadata"]);null!=o&&ba(t,["metadata"],o);const i=wa(e,["done"]);null!=i&&ba(t,["done"],i);const a=wa(e,["error"]);return null!=a&&ba(t,["error"],a),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const df="x-goog-upload-status";async function ff(e,t,n){var r,o;let i=0,a=0,s=new Rl(new Response),l="upload";for(i=e.size;a<i;){const c=Math.min(8388608,i-a),u=e.slice(a,a+c);a+c>=i&&(l+=", finalize");let d=0,f=1e3;for(;d<3&&(s=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(null===(r=null==s?void 0:s.headers)||void 0===r?void 0:r[df]));)d++,await pf(f),f*=2;if(a+=c,"active"!==(null===(o=null==s?void 0:s.headers)||void 0===o?void 0:o[df]))break;if(i<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}function pf(e){return new Promise(t=>setTimeout(t,e))}class hf{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await ff(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(r=null==o?void 0:o.headers)||void 0===r?void 0:r[df]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await ff(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(r=null==o?void 0:o.headers)||void 0===r?void 0:r[df]))throw new Error("Failed to upload file: Upload status is not finalized.");const a=Ea(i),s=new oc;return Object.assign(s,a),s}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mf{create(e,t,n){return new gf(e,t,n)}}class gf{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yf="x-goog-api-key";class vf{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(yf)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yf,this.apiKey)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */new class{get interactions(){if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;(null==e?void 0:e.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new of({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==e?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=function(e,t,n,r){var o,i;if(!(null==e?void 0:e.baseUrl)){const e={geminiUrl:void 0,vertexUrl:void 0};return t?null!==(o=e.vertexUrl)&&void 0!==o?o:n:null!==(i=e.geminiUrl)&&void 0!==i?i:r}return e.baseUrl}(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new vf(this.apiKey);this.apiClient=new Nu({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new hf,downloader:new uf}),this.models=new Gu(this.apiClient),this.live=new Mu(this.apiClient,r,new mf),this.batches=new Gc(this.apiClient),this.chats=new Qc(this.models,this.apiClient),this.caches=new qc(this.apiClient),this.files=new nu(this.apiClient),this.operations=new zu(this.apiClient),this.authTokens=new Wu(this.apiClient),this.tunings=new cf(this.apiClient),this.fileSearchStores=new Yu(this.apiClient)}}({apiKey:""});const bf="scan2oblio_persons",wf=()=>{const e={issuers:[],deputies:[],salesAgents:[]};try{const t=localStorage.getItem(bf);if(console.log("[DEBUG] Raw localStorage value:",t),!t)return e;const n=JSON.parse(t);return{...e,...n}}catch(Ae){return console.error("Error loading persons from localStorage:",Ae),e}},xf=e=>{try{localStorage.setItem(bf,JSON.stringify(e))}catch(Ae){console.error("Error saving persons to localStorage:",Ae)}},Cf=e=>{switch(e){case"issuer":return"issuers";case"deputy":return"deputies";case"salesAgent":return"salesAgents"}},Ef=({type:e,label:t,value:n,onChange:r,onFieldsChange:o,placeholder:i="Selecteaz sau adaug..."})=>{var a;const[l,c]=s.useState([]),[u,d]=s.useState(""),[f,p]=s.useState(!1),[h,m]=s.useState(!1),[g,y]=s.useState({name:"",cnp:"",identityCard:"",auto:""});s.useEffect(()=>{v()},[e]);const v=()=>{const t=wf();console.log("[DEBUG] FULL LOCAL STORAGE content:",t);const n=(r=e,wf()[Cf(r)].sort((e,t)=>{const n=e.lastUsed?new Date(e.lastUsed).getTime():0;return(t.lastUsed?new Date(t.lastUsed).getTime():0)-n}));var r;console.log(`[DEBUG] Loaded persons for current type '${e}':`,n),c(n)},b=l.filter(e=>e&&e.name&&e.name.toLowerCase().includes(u.toLowerCase())),w=t=>{r(t),((e,t)=>{const n=wf(),r=Cf(t),o=n[r].findIndex(t=>t.id===e);o>=0&&(n[r][o].lastUsed=(new Date).toISOString(),xf(n))})(t.id,e);const n={};"issuer"===e&&t.cnp?n.issuerId=t.cnp:"deputy"===e&&(t.identityCard&&(n.deputyIdentityCard=t.identityCard),t.auto&&(n.deputyAuto=t.auto)),Object.keys(n).length>0&&o(n),p(!1),d("")};return ui.jsxs("div",{className:"relative "+(f?"z-50":"z-auto"),children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:t}),n?ui.jsxs("div",{className:"bg-slate-900 border border-emerald-600 rounded-lg px-4 py-2.5 flex items-center justify-between",children:[ui.jsxs("div",{className:"flex items-center gap-2",children:[ui.jsx(aa,{className:"w-4 h-4 text-emerald-400"}),ui.jsx("span",{className:"text-white font-medium",children:n.name}),"issuer"===e&&n.cnp&&ui.jsxs("span",{className:"text-xs text-slate-400",children:["CNP: ",n.cnp]})]}),ui.jsx("button",{onClick:()=>{r(null),o("issuer"===e?{issuerId:""}:"deputy"===e?{deputyIdentityCard:"",deputyAuto:""}:{})},className:"text-slate-400 hover:text-white transition-colors",children:ui.jsx(sa,{className:"w-4 h-4"})})]}):ui.jsxs(ui.Fragment,{children:[ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"text",value:u,onChange:e=>{d(e.target.value),p(!0)},onFocus:()=>p(!0),placeholder:i,className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 pr-10 focus:ring-2 focus:ring-emerald-500 outline-none"}),ui.jsx(Zi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),f&&ui.jsxs(ui.Fragment,{children:[ui.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),ui.jsxs("div",{className:"absolute z-20 mt-2 w-full bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:[ui.jsxs("button",{onClick:()=>{m(!0),p(!1)},className:"w-full px-4 py-3 text-left hover:bg-slate-700 transition-colors border-b border-slate-700 flex items-center gap-2 text-emerald-400",children:[ui.jsx(Xi,{className:"w-4 h-4"}),ui.jsxs("span",{className:"font-medium",children:["Adaug ",t," Nou"]})]}),b.length>0?b.map(t=>ui.jsxs("div",{onClick:()=>w(t),className:"px-4 py-3 hover:bg-slate-700 transition-colors cursor-pointer flex items-center justify-between group",children:[ui.jsxs("div",{children:[ui.jsx("div",{className:"text-white font-medium",children:t.name}),"issuer"===e&&t.cnp&&ui.jsxs("div",{className:"text-xs text-slate-400",children:["CNP: ",t.cnp]}),"deputy"===e&&ui.jsxs("div",{className:"text-xs text-slate-400",children:[t.identityCard&&`CI: ${t.identityCard}`,t.identityCard&&t.auto&&"  ",t.auto&&`Auto: ${t.auto}`]})]}),ui.jsx("button",{onClick:o=>((t,o)=>{o.stopPropagation(),confirm("Sigur vrei s tergi aceast persoan?")&&(((e,t)=>{const n=wf(),r=Cf(t);n[r]=n[r].filter(t=>t.id!==e),xf(n)})(t,e),v(),(null==n?void 0:n.id)===t&&r(null))})(t.id,o),className:"opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition-opacity",children:ui.jsx(ra,{className:"w-4 h-4"})})]},t.id)):ui.jsx("div",{className:"px-4 py-8 text-center text-slate-400",children:u?`Nu s-au gsit rezultate (${l.length} salvate)`:`Nicio persoan salvat (${l.length})`})]})]})]}),h&&ui.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:ui.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[ui.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ui.jsxs("h3",{className:"text-lg font-bold text-white",children:["Adaug ",t," Nou"]}),ui.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-white transition-colors",children:ui.jsx(sa,{className:"w-5 h-5"})})]}),ui.jsxs("div",{className:"space-y-4",children:[ui.jsxs("div",{children:[ui.jsxs("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:["Nume ",t," *"]}),ui.jsx("input",{type:"text",value:g.name||"",onChange:e=>y(t=>({...t,name:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Ex: Ion Popescu",autoFocus:!0})]}),"issuer"===e&&ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"CNP"}),ui.jsx("input",{type:"text",value:g.cnp||"",onChange:e=>y(t=>({...t,cnp:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"1234567890123",maxLength:13})]}),"deputy"===e&&ui.jsxs(ui.Fragment,{children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"CI Delegat"}),ui.jsx("input",{type:"text",value:g.identityCard||"",onChange:e=>y(t=>({...t,identityCard:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Ex: CT 123456"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Auto Delegat"}),ui.jsx("input",{type:"text",value:g.auto||"",onChange:e=>y(t=>({...t,auto:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Ex: CT 12 ABC"})]})]})]}),ui.jsxs("div",{className:"mt-6 flex gap-3",children:[ui.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Anuleaz"}),ui.jsx("button",{onClick:()=>{var t,n,r,o;if(!(null==(t=g.name)?void 0:t.trim()))return;const i={id:`person_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:g.name.trim(),type:e,cnp:(null==(n=g.cnp)?void 0:n.trim())||void 0,identityCard:(null==(r=g.identityCard)?void 0:r.trim())||void 0,auto:(null==(o=g.auto)?void 0:o.trim())||void 0};(e=>{const t=wf(),n=Cf(e.type),r=t[n].findIndex(t=>t.name.toLowerCase()===e.name.toLowerCase());r>=0?t[n][r]={...e,lastUsed:(new Date).toISOString()}:t[n].push({...e,lastUsed:(new Date).toISOString()}),xf(t)})(i),v(),w(i),y({name:"",cnp:"",identityCard:"",auto:""}),m(!1)},disabled:!(null==(a=g.name)?void 0:a.trim()),className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Adaug"})]})]})})]})},_f=({config:e,onClose:t,onSuccess:n,initialData:r})=>{const[o,i]=s.useState({name:(null==r?void 0:r.name)||"",cif:(null==r?void 0:r.cif)||"",rc:(null==r?void 0:r.rc)||"",address:(null==r?void 0:r.address)||"",city:(null==r?void 0:r.city)||"",state:(null==r?void 0:r.state)||"",country:(null==r?void 0:r.country)||"Romania",email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||"",iban:(null==r?void 0:r.iban)||"",bank:(null==r?void 0:r.bank)||"",contact:(null==r?void 0:r.contact)||"",vatPayer:(null==r?void 0:r.vatPayer)||!1}),[a,l]=s.useState(!1),[c,u]=s.useState(null),[d,f]=s.useState(!1),p=async e=>{var r,i;if(e.preventDefault(),null==(r=o.name)?void 0:r.trim())if(d||(null==(i=o.cif)?void 0:i.trim())){l(!0),u(null);try{const e={id:`temp_${Date.now()}`,name:o.name,cif:o.cif||"",rc:o.rc||"",address:o.address||"",city:o.city||"",state:o.state||"",country:o.country||"Romania",email:o.email||"",phone:o.phone||"",iban:o.iban||"",bank:o.bank||"",contact:o.contact||"",vatPayer:o.vatPayer||!1};n(e),t()}catch(a){u(a.message||"Eroare la procesarea datelor clientului")}finally{l(!1)}}else u("CIF-ul este obligatoriu (sau bifai Fr CNP).");else u("Numele este obligatoriu.")},h=(e,t)=>{i(n=>({...n,[e]:t}))};return ui.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4 overflow-y-auto",children:ui.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-700 w-full max-w-4xl shadow-2xl flex flex-col max-h-[90vh]",children:[ui.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-800 bg-slate-900 sticky top-0 z-10 rounded-t-xl",children:[ui.jsxs("div",{className:"flex items-center gap-3",children:[ui.jsx(aa,{className:"w-6 h-6 text-emerald-400"}),ui.jsx("h2",{className:"text-xl font-bold text-white",children:"Adaug Client Nou"})]}),ui.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors p-2 hover:bg-slate-800 rounded-lg",children:ui.jsx(sa,{className:"w-6 h-6"})})]}),ui.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[c&&ui.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 text-red-200 text-sm",children:c}),ui.jsxs("form",{id:"client-form",onSubmit:p,className:"space-y-8",children:[ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-semibold text-emerald-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[ui.jsx(_i,{className:"w-4 h-4"}),"Date Identificare"]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Nume Client *"}),ui.jsx("input",{type:"text",value:o.name,onChange:e=>h("name",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nume Companie sau Persoan",autoFocus:!0})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"CIF / CNP *"}),ui.jsx("input",{type:"text",value:o.cif,onChange:e=>h("cif",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"RO123456",disabled:d}),ui.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[ui.jsx("input",{type:"checkbox",id:"defaultCnp",checked:d,onChange:e=>{const t=e.target.checked;f(t),t&&h("cif","")},className:"w-4 h-4 rounded border-slate-700 bg-slate-800 text-emerald-500 focus:ring-emerald-500"}),ui.jsx("label",{htmlFor:"defaultCnp",className:"text-xs text-slate-400",children:"Fr CNP / Persoan Fizic"})]})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Nr. Reg. Com."}),ui.jsx("input",{type:"text",value:o.rc||"",onChange:e=>h("rc",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"J40/123/2023"})]}),ui.jsxs("div",{className:"flex items-center gap-2",children:[ui.jsx("input",{type:"checkbox",id:"vatPayer",checked:o.vatPayer||!1,onChange:e=>h("vatPayer",e.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-800 text-emerald-500 focus:ring-emerald-500"}),ui.jsx("label",{htmlFor:"vatPayer",className:"text-sm text-slate-300",children:"Pltitor de TVA"})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-semibold text-emerald-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[ui.jsx(zi,{className:"w-4 h-4"}),"Adres"]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Adres complet"}),ui.jsx("textarea",{value:o.address||"",onChange:e=>h("address",e.target.value),rows:2,className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none resize-none",placeholder:"Strada, Numr, Bloc, etc."})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Jude"}),ui.jsx("input",{type:"text",value:o.state||"",onChange:e=>h("state",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Bucureti"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Ora"}),ui.jsx("input",{type:"text",value:o.city||"",onChange:e=>h("city",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Sector 1"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"ar"}),ui.jsx("input",{type:"text",value:o.country||"Romania",onChange:e=>h("country",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-semibold text-emerald-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[ui.jsx(Gi,{className:"w-4 h-4"}),"Contact"]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Email"}),ui.jsx("input",{type:"email",value:o.email||"",onChange:e=>h("email",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"contact@firma.ro"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Telefon"}),ui.jsx("input",{type:"text",value:o.phone||"",onChange:e=>h("phone",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"07xxxxxxxx"})]}),ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Persoan de contact"}),ui.jsx("input",{type:"text",value:o.contact||"",onChange:e=>h("contact",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nume Prenume"})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-semibold text-emerald-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[ui.jsx(Mi,{className:"w-4 h-4"}),"Date Financiare"]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Banca"}),ui.jsx("input",{type:"text",value:o.bank||"",onChange:e=>h("bank",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nume Banc"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Cont IBAN"}),ui.jsx("input",{type:"text",value:o.iban||"",onChange:e=>h("iban",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"RO00BANC..."})]})]})]})]})]}),ui.jsxs("div",{className:"p-6 border-t border-slate-800 bg-slate-900 sticky bottom-0 z-10 rounded-b-xl flex justify-end gap-3",children:[ui.jsx("button",{onClick:t,disabled:a,className:"px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Anuleaz"}),ui.jsx("button",{onClick:p,disabled:a,className:"px-8 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-bold transition-colors disabled:opacity-50 flex items-center gap-2",children:a?ui.jsxs(ui.Fragment,{children:[ui.jsx(Hi,{className:"w-5 h-5 animate-spin"}),"Se salveaz..."]}):ui.jsxs(ui.Fragment,{children:[ui.jsx(Ki,{className:"w-5 h-5"}),"Salveaz Client"]})})]})]})})},Af=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],Sf=["Lu","Ma","Mi","Jo","Vi","S","Du"],Nf=({value:e,onChange:t,label:n,placeholder:r="ZZ.LL.AAAA",className:o=""})=>{const[i,a]=s.useState(!1),[l,c]=s.useState(new Date),u=s.useRef(null);s.useEffect(()=>{if(e){const t=new Date(e);isNaN(t.getTime())||c(t)}},[e]),s.useEffect(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const d=e=>{const t=new Date(l);t.setMonth(t.getMonth()+e),c(t)},f=(p=l.getFullYear(),h=l.getMonth(),new Date(p,h+1,0).getDate());var p,h;const m=((e,t)=>{const n=new Date(e,t,1).getDay();return 0===n?6:n-1})(l.getFullYear(),l.getMonth()),g=Array.from({length:f},(e,t)=>t+1),y=Array.from({length:m},(e,t)=>t);return ui.jsxs("div",{className:`relative ${o}`,ref:u,children:[n&&ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:n}),ui.jsxs("div",{onClick:()=>a(!i),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 flex items-center justify-between cursor-pointer hover:border-slate-600 transition-colors focus-within:ring-2 focus-within:ring-emerald-500",children:[ui.jsx("span",{className:e?"text-white":"text-slate-500",children:e?(e=>{if(!e)return"";const[t,n,r]=e.split("-");return t&&n&&r?`${r}.${n}.${t}`:e})(e):r}),ui.jsx(Ai,{className:"w-4 h-4 text-slate-400"})]}),i&&ui.jsxs("div",{className:"absolute z-50 top-full mt-2 left-0 w-72 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl p-4 animate-in fade-in zoom-in-95 duration-100",children:[ui.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ui.jsx("button",{onClick:e=>{e.stopPropagation(),d(-1)},className:"p-1 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-colors",children:ui.jsx(Ti,{className:"w-5 h-5"})}),ui.jsxs("span",{className:"font-semibold text-white",children:[Af[l.getMonth()]," ",l.getFullYear()]}),ui.jsx("button",{onClick:e=>{e.stopPropagation(),d(1)},className:"p-1 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-colors",children:ui.jsx(Ii,{className:"w-5 h-5"})})]}),ui.jsx("div",{className:"grid grid-cols-7 mb-2",children:Sf.map(e=>ui.jsx("div",{className:"h-8 flex items-center justify-center text-xs font-medium text-slate-500",children:e},e))}),ui.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[y.map(e=>ui.jsx("div",{},`blank-${e}`)),g.map(n=>{const r=e===`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`,o=(new Date).toDateString()===new Date(l.getFullYear(),l.getMonth(),n).toDateString();return ui.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{const n=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;t(n),a(!1)})(n)},className:`\n                                        h-8 w-8 rounded-lg text-sm flex items-center justify-center transition-all\n                                        ${r?"bg-emerald-600 text-white font-bold shadow-lg shadow-emerald-600/20":o?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/30":"text-slate-300 hover:bg-slate-700 hover:text-white"}\n                                    `,children:n},n)})]}),e&&ui.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700",children:ui.jsxs("button",{onClick:e=>{e.stopPropagation(),t(""),a(!1)},className:"w-full py-1 text-xs text-slate-400 hover:text-red-400 transition-colors flex items-center justify-center gap-1",children:[ui.jsx(sa,{className:"w-3 h-3"}),"terge data"]})})]})]})},If=({config:e,selectedStation:t,onSelect:n})=>{const[r,o]=s.useState([]),[i,a]=s.useState(!1);return s.useEffect(()=>{(async()=>{if(e.cif){a(!0);try{const t=await(async e=>await(async(e,t)=>{if(!e.email||!e.apiSecret||!e.cif)return console.warn("Credentials missing for nomenclature fetch"),[];const n=encodeURIComponent(e.cif.trim()),r=encodeURIComponent(e.email.trim()),o=encodeURIComponent(e.apiSecret.trim()),i=encodeURIComponent(t),s=`${ha}?action=nomenclature&email=${r}&apiSecret=${o}&cif=${n}&type=${i}`;try{const e=await fetch(s),n=await e.json();return n.success?n.data||[]:(console.warn(`Failed to fetch nomenclature ${t}:`,n.error),[])}catch(a){return console.error(`Error fetching nomenclature ${t}:`,a),[]}})(e,"management"))(e);console.log("[DEBUG] ManagementUnits fetched:",t),o(t)}catch(t){console.error("Failed to load management units",t)}finally{a(!1)}}})()},[e.cif,e.email]),r&&0!==r.length?ui.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 rounded-lg p-2 border border-slate-700",children:[ui.jsx(Ei,{className:"w-4 h-4 text-emerald-400"}),ui.jsxs("div",{className:"flex flex-col",children:[ui.jsx("span",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wider leading-none mb-0.5",children:"Gestiune / Punct Lucru"}),ui.jsx("select",{value:t,onChange:e=>n(e.target.value),className:"bg-slate-800 text-sm font-bold text-white outline-none border-none p-0 cursor-pointer hover:text-emerald-400 transition-colors w-full min-w-[120px]",disabled:i,children:i?ui.jsx("option",{children:"Se ncarc..."}):ui.jsx(ui.Fragment,{children:r.map((e,t)=>{const n=e.name||e.management||e.workStation||`Gestiune ${t+1}`;return ui.jsx("option",{value:e.name||n,className:"bg-slate-900 text-white",children:n},t)})})})]})]}):null},Tf=({config:e,initialProducts:t,onClose:n,onSuccess:r})=>{const[o,i]=s.useState([]),[a,c]=s.useState(!1),[u,d]=s.useState(""),[f,p]=s.useState(!1),[h,m]=s.useState(!1),[g,y]=s.useState(null),v=l.useRef(null),[b,w]=s.useState(null),[x,C]=s.useState(null),[E,_]=s.useState(null),[A,S]=s.useState({client:null,issueDate:(new Date).toISOString().split("T")[0],dueDate:"",deliveryDate:"",collectDate:"",seriesName:e.seriesName||"",workStation:e.workStation||"Sediu",language:"RO",currency:"RON",products:t,mentions:"",internalNote:"",issuerName:"",issuerId:"",deputyName:"",deputyIdentityCard:"",deputyAuto:"",salesAgent:"",noticeNumber:""}),[N,I]=s.useState(!1),[T,O]=s.useState(null);s.useEffect(()=>{R()},[]);const R=async()=>{c(!0),O(null);try{const t=await(async e=>{if(console.log("Fetching clients from Oblio via PHP backend..."),!e.email||!e.apiSecret||!e.cif)throw new Error("Credeniale Oblio lips (Email, Secret, CIF).");const t=encodeURIComponent(e.cif.trim()),n=encodeURIComponent(e.email.trim()),r=encodeURIComponent(e.apiSecret.trim()),o=`${ha}?action=clients&email=${n}&apiSecret=${r}&cif=${t}`;try{const e=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();if(!t.success)throw new Error(t.error||"Eroare la obinerea clienilor din Oblio.");return t.data&&Array.isArray(t.data)?(console.log("Clients fetched:",t.data.length),t.data):(console.warn("Unexpected API response format:",t),[])}catch(i){if(console.error("Oblio Clients Fetch Error:",i),i.message.includes("Failed to fetch"))throw new Error("Eroare Conexiune. Verificai c backend-ul PHP este accesibil.");throw i}})(e);i(t)}catch(t){O(t.message||"Eroare la ncrcarea clienilor")}finally{c(!1)}},k=o.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.cif.toLowerCase().includes(u.toLowerCase())),P=(e,t,n)=>{S(r=>({...r,products:r.products.map((r,o)=>o===e?{...r,[t]:n}:r)}))};return ui.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 overflow-y-auto",children:[ui.jsx("div",{className:"sticky top-0 z-10 bg-slate-900/95 backdrop-blur-md border-b border-slate-700 px-6 py-4",children:ui.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[ui.jsxs("div",{className:"flex items-center gap-3",children:[ui.jsx(Fi,{className:"w-6 h-6 text-emerald-400"}),ui.jsx("h1",{className:"text-2xl font-bold text-white",children:"Creare Factur"})]}),ui.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:ui.jsx(sa,{className:"w-6 h-6"})})]})}),ui.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8 space-y-8",children:[T&&ui.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-4 flex items-start gap-3",children:[ui.jsx(Oi,{className:"w-5 h-5 text-red-400 shrink-0 mt-0.5"}),ui.jsx("div",{className:"flex-1",children:ui.jsx("p",{className:"text-red-200 text-sm",children:T})}),ui.jsx("button",{onClick:()=>O(null),className:"text-red-400 hover:text-red-300",children:ui.jsx(sa,{className:"w-4 h-4"})})]}),ui.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ui.jsx(aa,{className:"w-5 h-5 text-emerald-400"}),ui.jsx("h2",{className:"text-lg font-bold text-white",children:"Client"})]}),A.client?ui.jsx("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:ui.jsxs("div",{className:"flex items-start justify-between",children:[ui.jsxs("div",{className:"space-y-2",children:[ui.jsx("h3",{className:"font-semibold text-white text-lg",children:A.client.name}),ui.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 text-sm",children:[ui.jsxs("div",{children:[ui.jsx("span",{className:"text-slate-400",children:"CIF:"})," ",ui.jsx("span",{className:"text-white",children:A.client.cif})]}),A.client.rc&&ui.jsxs("div",{children:[ui.jsx("span",{className:"text-slate-400",children:"RC:"})," ",ui.jsx("span",{className:"text-white",children:A.client.rc})]}),A.client.address&&ui.jsxs("div",{className:"col-span-2",children:[ui.jsx("span",{className:"text-slate-400",children:"Adres:"})," ",ui.jsx("span",{className:"text-white",children:A.client.address})]}),A.client.city&&ui.jsxs("div",{children:[ui.jsx("span",{className:"text-slate-400",children:"Ora:"})," ",ui.jsx("span",{className:"text-white",children:A.client.city})]}),A.client.email&&ui.jsxs("div",{children:[ui.jsx("span",{className:"text-slate-400",children:"Email:"})," ",ui.jsx("span",{className:"text-white",children:A.client.email})]}),A.client.phone&&ui.jsxs("div",{children:[ui.jsx("span",{className:"text-slate-400",children:"Telefon:"})," ",ui.jsx("span",{className:"text-white",children:A.client.phone})]})]})]}),ui.jsx("button",{onClick:()=>S(e=>({...e,client:null})),className:"text-slate-400 hover:text-white transition-colors",children:ui.jsx(sa,{className:"w-5 h-5"})})]})}):ui.jsxs("div",{className:"space-y-3",children:[ui.jsx("input",{type:"text",placeholder:"Caut client dup nume sau CIF...",value:u,onChange:e=>d(e.target.value),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-3 focus:ring-2 focus:ring-emerald-500 outline-none"}),ui.jsxs("div",{className:"flex gap-3",children:[ui.jsxs("button",{onClick:()=>{y(null),p(!0)},className:"flex-1 py-3 bg-slate-900/50 border border-dashed border-slate-600 text-slate-400 hover:text-white hover:border-emerald-500 hover:bg-slate-800 rounded-lg transition-all flex items-center justify-center gap-2 group",children:[ui.jsx(Xi,{className:"w-5 h-5 group-hover:text-emerald-400"}),ui.jsx("span",{children:"Adaug Client Nou"})]}),ui.jsxs("button",{onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},disabled:h,className:"flex-1 py-3 bg-slate-900/50 border border-dashed border-slate-600 text-slate-400 hover:text-white hover:border-emerald-500 hover:bg-slate-800 rounded-lg transition-all flex items-center justify-center gap-2 group disabled:opacity-50",children:[h?ui.jsx(Hi,{className:"w-5 h-5 animate-spin text-emerald-400"}):ui.jsx(Si,{className:"w-5 h-5 group-hover:text-emerald-400"}),ui.jsx("span",{children:h?"Se proceseaz...":"Adaug prin Imagine/CI"})]}),ui.jsx("input",{type:"file",ref:v,onChange:async e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(n){m(!0),O(null);try{const e=new FileReader,t=new Promise(t=>{e.onload=()=>{const n=e.result.split(",")[1];t(n)}});e.readAsDataURL(n),await t;const r=await(async()=>(console.warn("Gemini API Key is missing."),null))();r?(y({name:r.name,cif:r.cif,address:r.address,city:r.city,state:r.state}),p(!0)):(O("Nu s-au putut extrage datele din imagine. V rugm s introducei datele manual."),p(!0))}catch(r){console.error("Error processing CI image:",r),O("Eroare la procesarea imaginii.")}finally{m(!1),v.current&&(v.current.value="")}}},accept:"image/*",capture:"environment",className:"hidden"})]}),a?ui.jsxs("div",{className:"flex items-center justify-center py-8",children:[ui.jsx(Hi,{className:"w-6 h-6 text-emerald-400 animate-spin"}),ui.jsx("span",{className:"ml-2 text-slate-400",children:"Se ncarc clienii..."})]}):u&&k.length>0?ui.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 bg-slate-900 rounded-lg border border-slate-700 p-2",children:k.map(e=>ui.jsxs("button",{onClick:()=>{return t=e,S(e=>({...e,client:t})),void d("");var t},className:"w-full text-left px-4 py-3 hover:bg-slate-800 rounded-lg transition-colors",children:[ui.jsx("div",{className:"font-semibold text-white",children:e.name}),ui.jsxs("div",{className:"text-sm text-slate-400",children:["CIF: ",e.cif]})]},e.id))}):u?ui.jsx("div",{className:"text-center py-8 text-slate-400",children:"Nu s-au gsit clieni"}):null]})]}),f&&ui.jsx(_f,{config:e,initialData:g||void 0,onClose:()=>{p(!1),y(null)},onSuccess:e=>{i(t=>[...t,e]),S(t=>({...t,client:e})),p(!1),y(null)}}),ui.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ui.jsx(Ai,{className:"w-5 h-5 text-emerald-400"}),ui.jsx("h2",{className:"text-lg font-bold text-white",children:"Detalii Factur"})]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ui.jsx("div",{children:ui.jsx(Nf,{label:"Data Emiterii *",value:A.issueDate,onChange:e=>S(t=>({...t,issueDate:e}))})}),ui.jsx("div",{children:ui.jsx(Nf,{label:"Data Scaden",value:A.dueDate||"",onChange:e=>S(t=>({...t,dueDate:e}))})}),ui.jsx("div",{children:ui.jsx(Nf,{label:"Data Livrare",value:A.deliveryDate||"",onChange:e=>S(t=>({...t,deliveryDate:e}))})}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Serie Factur"}),ui.jsx("input",{type:"text",value:A.seriesName,onChange:e=>S(t=>({...t,seriesName:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Ex: FCT"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Gestiune"}),ui.jsx(If,{config:e,selectedStation:A.workStation,onSelect:e=>S(t=>({...t,workStation:e}))})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Limba"}),ui.jsxs("select",{value:A.language,onChange:e=>S(t=>({...t,language:e.target.value})),className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none",children:[ui.jsx("option",{value:"RO",children:"Romn"}),ui.jsx("option",{value:"EN",children:"Englez"}),ui.jsx("option",{value:"FR",children:"Francez"}),ui.jsx("option",{value:"DE",children:"German"})]})]})]}),ui.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[ui.jsx("div",{className:"md:col-span-2",children:ui.jsx(Ef,{type:"issuer",label:"Emitent",value:b,onChange:e=>{w(e),S(t=>({...t,issuerName:(null==e?void 0:e.name)||"",issuerId:(null==e?void 0:e.cnp)||""}))},onFieldsChange:e=>{S(t=>({...t,...e}))},placeholder:"Selecteaz emitent sau adaug nou..."})}),ui.jsx("div",{className:"md:col-span-2",children:ui.jsx(Ef,{type:"deputy",label:"Delegat",value:x,onChange:e=>{C(e),S(t=>({...t,deputyName:(null==e?void 0:e.name)||"",deputyIdentityCard:(null==e?void 0:e.identityCard)||"",deputyAuto:(null==e?void 0:e.auto)||""}))},onFieldsChange:e=>{S(t=>({...t,...e}))},placeholder:"Selecteaz delegat sau adaug nou..."})}),ui.jsx("div",{className:"md:col-span-2",children:ui.jsx(Ef,{type:"salesAgent",label:"Agent Vnzri",value:E,onChange:e=>{_(e),S(t=>({...t,salesAgent:(null==e?void 0:e.name)||""}))},onFieldsChange:e=>{S(t=>({...t,...e}))},placeholder:"Selecteaz agent vnzri sau adaug nou..."})})]}),ui.jsxs("div",{className:"mt-4 space-y-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Meniuni"}),ui.jsx("textarea",{value:A.mentions,onChange:e=>S(t=>({...t,mentions:e.target.value})),rows:2,className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none resize-none",placeholder:"Meniuni vizibile pe factur..."})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Not Intern"}),ui.jsx("textarea",{value:A.internalNote,onChange:e=>S(t=>({...t,internalNote:e.target.value})),rows:2,className:"w-full bg-slate-900 border border-slate-700 text-white rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-emerald-500 outline-none resize-none",placeholder:"Not intern (nu apare pe factur)..."})]})]})]}),ui.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ui.jsx(qi,{className:"w-5 h-5 text-emerald-400"}),ui.jsxs("h2",{className:"text-lg font-bold text-white",children:["Produse (",A.products.length,")"]})]}),ui.jsx("div",{className:"space-y-3",children:A.products.map((e,t)=>ui.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[ui.jsxs("div",{className:"flex items-start gap-4",children:[ui.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-3",children:[ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Produs"}),ui.jsx("input",{type:"text",value:e.name,onChange:e=>P(t,"name",e.target.value),className:"w-full bg-slate-800 border border-slate-700 text-white rounded px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Cantitate"}),ui.jsx("input",{type:"number",value:e.quantity,onChange:e=>P(t,"quantity",parseFloat(e.target.value)||0),min:"0",step:"0.01",className:"w-full bg-slate-800 border border-slate-700 text-white rounded px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Pre"}),ui.jsx("input",{type:"number",value:e.price,onChange:e=>P(t,"price",parseFloat(e.target.value)||0),min:"0",step:"0.01",className:"w-full bg-slate-800 border border-slate-700 text-white rounded px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"TVA %"}),ui.jsx("input",{type:"number",value:e.vatPercentage,onChange:e=>P(t,"vatPercentage",parseFloat(e.target.value)||0),min:"0",max:"100",className:"w-full bg-slate-800 border border-slate-700 text-white rounded px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"})]})]}),ui.jsx("button",{onClick:()=>{return e=t,void S(t=>({...t,products:t.products.filter((t,n)=>n!==e)}));var e},className:"mt-6 p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",children:ui.jsx(sa,{className:"w-5 h-5"})})]}),ui.jsxs("div",{className:"mt-2 text-right text-sm",children:[ui.jsx("span",{className:"text-slate-400",children:"Total: "}),ui.jsxs("span",{className:"text-white font-semibold",children:[(e.price*e.quantity).toFixed(2)," RON"]})]})]},e.id))}),ui.jsx("div",{className:"mt-6 bg-gradient-to-r from-emerald-900/20 to-emerald-800/20 rounded-lg p-4 border border-emerald-700/30",children:ui.jsxs("div",{className:"flex justify-between items-center",children:[ui.jsx("span",{className:"text-lg font-medium text-slate-300",children:"Total Factur"}),ui.jsxs("span",{className:"text-2xl font-bold text-white",children:[A.products.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2)," ",ui.jsx("span",{className:"text-emerald-400",children:"RON"})]})]})})]})]}),ui.jsx("div",{className:"sticky bottom-0 bg-slate-900/95 backdrop-blur-md border-t border-slate-700 px-6 py-4",children:ui.jsxs("div",{className:"max-w-5xl mx-auto flex gap-4 justify-end",children:[ui.jsx("button",{onClick:n,disabled:N,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anuleaz"}),ui.jsx("button",{onClick:async()=>{if(A.client)if(0!==A.products.length){I(!0),O(null);try{const t={client:A.client?{cif:A.client.cif,name:A.client.name,rc:A.client.rc||"",address:A.client.address||"",city:A.client.city||"",state:A.client.state||"",country:A.client.country||"",email:A.client.email||"",phone:A.client.phone||"",iban:A.client.iban||"",bank:A.client.bank||"",contact:A.client.contact||"",vatPayer:A.client.vatPayer||!1}:void 0,issueDate:A.issueDate,dueDate:A.dueDate||void 0,deliveryDate:A.deliveryDate||void 0,collectDate:A.collectDate||void 0,seriesName:A.seriesName,workStation:A.workStation,language:A.language,currency:A.currency,products:A.products,mentions:A.mentions||void 0,internalNote:A.internalNote||void 0,issuerName:A.issuerName||void 0,issuerId:A.issuerId||void 0,deputyName:A.deputyName||void 0,deputyIdentityCard:A.deputyIdentityCard||void 0,deputyAuto:A.deputyAuto||void 0,salesAgent:A.salesAgent||void 0,noticeNumber:A.noticeNumber||void 0};console.log("=== INVOICE DATA BEING SENT ==="),console.log("deliveryDate:",t.deliveryDate),console.log("Full invoice data:",t),await(async(e,t)=>{var n,r;const o={email:e.email.trim(),apiSecret:e.apiSecret.trim(),cif:e.cif.trim(),seriesName:t.seriesName||(null==(n=e.seriesName)?void 0:n.trim())||"",workStation:t.workStation||(null==(r=e.workStation)?void 0:r.trim())||"Sediu",products:t.products.map(e=>({name:e.name,barcode:e.barcode,unit:e.unit,quantity:e.quantity,price:e.price,vatPercentage:e.vatPercentage}))};t.client&&(o.client=t.client),t.issueDate&&(o.issueDate=t.issueDate),t.dueDate&&(o.dueDate=t.dueDate),t.deliveryDate&&(o.deliveryDate=t.deliveryDate),t.collectDate&&(o.collectDate=t.collectDate),t.language&&(o.language=t.language),t.currency&&(o.currency=t.currency),t.mentions&&(o.mentions=t.mentions),t.internalNote&&(o.internalNote=t.internalNote),t.issuerName&&(o.issuerName=t.issuerName),t.issuerId&&(o.issuerId=t.issuerId),t.deputyName&&(o.deputyName=t.deputyName),t.deputyIdentityCard&&(o.deputyIdentityCard=t.deputyIdentityCard),t.deputyAuto&&(o.deputyAuto=t.deputyAuto),t.salesAgent&&(o.salesAgent=t.salesAgent),t.noticeNumber&&(o.noticeNumber=t.noticeNumber);try{const e=await fetch(ha,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"invoice",...o})}),t=await e.json();if(!t.success)throw new Error(t.error||"Eroare la generarea facturii.");return{status:t.status||200,message:t.message||"Factura a fost emis cu succes!",link:t.link}}catch(i){if(console.error("Oblio Invoice Create Error:",i),i.message.includes("Failed to fetch"))throw new Error("Eroare Conexiune. Verificai c backend-ul PHP este accesibil.");throw i}})(e,t),r()}catch(t){O(t.message||"Eroare la trimiterea facturii")}finally{I(!1)}}else O("Adugai cel puin un produs");else O("Selectai un client")},disabled:N||!A.client||0===A.products.length,className:"px-8 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N?ui.jsxs(ui.Fragment,{children:[ui.jsx(Hi,{className:"w-5 h-5 animate-spin"}),"Se trimite..."]}):ui.jsxs(ui.Fragment,{children:[ui.jsx(Ki,{className:"w-5 h-5"}),"Trimite Factura"]})})]})})]})},Of="api.php",Rf=async()=>{try{const e=await fetch(`${Of}?action=get_stocks_file`),t=await e.json();if(t.success)return t.data||[];throw new Error(t.message||"Eroare la ncrcarea stocurilor.")}catch(la){throw console.error("Fetch stocks error:",la),la}},kf=async e=>{try{const t=await fetch(Of,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"save_stocks_file",data:e})}),n=await t.json();if(!n.success)throw new Error(n.message||"Eroare la salvarea stocurilor.")}catch(Ae){throw console.error("Save stocks error:",Ae),Ae}},Pf=()=>`${Of}?action=export_stocks_xls`,jf=()=>{let e="200";for(let r=0;r<9;r++)e+=Math.floor(10*Math.random());let t=0;for(let r=0;r<12;r++){const n=parseInt(e[r]);t+=r%2==0?1*n:3*n}const n=t%10;return e+(0===n?0:10-n)},Df=e=>e.map(e=>{var t;return{ID:"","Denumire produs":e.name,"Cod produs":e.productCode||e.code||"",Pret:Number(e.price)||0,"Pretul contine TVA (DA/NU)":"DA","Unitate masura":e.measuringUnit||"BUC","UM in SPV":"BUC"===(null==(t=e.measuringUnit)?void 0:t.toUpperCase())?"H87":"",Moneda:e.currency||"RON","Cota TVA":Number(e.vatPercentage)||19,Descriere:e.description||"","Cod NC":"","Cod CPV":e.code||"","Garantie SGR (DA/NU)":"NU","Grup produse":"",Stoc:Number(e.stock)||0}}),Mf=e=>{var t;const n=[e.furnizor||"",e.material||"",e.woodColor||"",e.sizeClass||"",e.weightCapacityMax?`${e.weightCapacityMax} kg`:"",e.isSmallLabel?"SMALL: DA":"SMALL: NU"].join("\n"),r=e.rawStockData||{};return{...r,"Denumire produs":e.modelName,"Cod produs":e.code,Pret:Number(e.price)||0,"Pretul contine TVA (DA/NU)":r["Pretul contine TVA (DA/NU)"]||"DA","Unitate masura":r["Unitate masura"]||e.measuringUnit||"BUC","UM in SPV":r["UM in SPV"]||(null==(t=e.measuringUnit)||t.toUpperCase(),"H87"),Moneda:e.currency||"RON","Cota TVA":void 0!==r["Cota TVA"]?r["Cota TVA"]:Number(e.vatPercentage)||19,Descriere:n,Stoc:void 0!==r.Stoc?r.Stoc:Number(e.stock)||0,lastEdit:(new Date).toLocaleString("ro-RO").replace(",","")}},Lf=({config:e,onSuccess:t,onError:n})=>{const[r,o]=s.useState(!1);return ui.jsxs("button",{onClick:async()=>{var r;if(!e.email||!e.apiSecret||!e.cif)return void(null==n||n("Configurare Oblio incomplet (Email, Secret, CIF)."));const i=(null==(r=e.workStation)?void 0:r.trim())||"Sediu";if(confirm(`Atenie! Aceast aciune va prelua produsele din Oblio pentru gestiunea "${i}" i va actualiza baza de date local. Dorii s continuai?`)){o(!0);try{const n=await ma(e),r=Df(n);await kf(r),null==t||t(n),alert(`Sincronizare efectuat cu succes! ${n.length} produse procesate.`)}catch(a){console.error("Sync error:",a);const e=`Eroare la sincronizare: ${a.message}`;null==n||n(e),alert(e)}finally{o(!1)}}},disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600/10 hover:bg-blue-600/20 disabled:bg-slate-800 text-blue-400 border border-blue-500/30 rounded-lg transition-all shadow-sm font-bold text-xs h-[42px] uppercase tracking-wider",children:[r?ui.jsx(Hi,{className:"w-4 h-4 animate-spin"}):ui.jsx($i,{className:"w-4 h-4"}),ui.jsx("span",{className:"truncate",children:"Sincronizare Oblio"})]})};var Bf=ti();const Ff=({label:e,value:t,onChange:n,options:r,placeholder:o="Selecteaz sau scrie...",className:i=""})=>{const[a,l]=s.useState(!1),[c,u]=s.useState(t),d=s.useRef(null);s.useEffect(()=>{u(t||"")},[t]),s.useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const f=(r||[]).filter(e=>{if(!e)return!1;const t=String(e),n=String(c||"");return t.toLowerCase().includes(n.toLowerCase())&&t!==n}),p=e=>{u(e),n(e),l(!1)};return ui.jsxs("div",{className:`relative ${i}`,ref:d,children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:e}),ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"text",value:c,onChange:e=>{const t=e.target.value;u(t),n(t),l(!0)},onFocus:()=>l(!0),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 pr-8 text-white focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:o}),ui.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[c&&ui.jsx("button",{onClick:e=>{e.stopPropagation(),u(""),n(""),l(!0)},className:"text-slate-500 hover:text-white",type:"button",children:ui.jsx(sa,{className:"w-3 h-3"})}),ui.jsx(Ni,{className:"w-4 h-4 text-slate-500 transition-transform "+(a?"rotate-180":"")})]})]}),a&&ui.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:[f.length>0?f.map((e,t)=>ui.jsx("button",{type:"button",onClick:()=>p(e),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors",children:e},t)):ui.jsx("div",{className:"px-3 py-2 text-xs text-slate-500 italic",children:c?"Valoare nou":"ncepe s scrii..."}),c&&!r.includes(c)&&ui.jsxs("button",{type:"button",onClick:()=>p(c),className:"w-full text-left px-3 py-2 text-sm text-emerald-400 hover:bg-slate-700 transition-colors flex items-center gap-2 border-t border-slate-700/50",children:[ui.jsx(Xi,{className:"w-3 h-3"}),'Adaug "',c,'"']})]})]})},Uf=({product:e,isNew:t,onClose:n,onSave:r,onDelete:o,options:i})=>{const a={"Denumire produs":"","Cod produs":"",Pret:0,"Pretul contine TVA (DA/NU)":"DA","Unitate masura":"BUC","UM in SPV":"H87",Moneda:"RON","Cota TVA":19,Descriere:"",ID:"","Cod NC":"","Cod CPV":"","Garantie SGR (DA/NU)":"NU","Grup produse":"",Stoc:0},[l,c]=s.useState(a),[u,d]=s.useState(""),[f,p]=s.useState({furnizor:"",material:"BRAD",woodColor:"NUC",size:"L",weight:""});s.useEffect(()=>{if(e){c(e),d(e["Cod produs"]);const t=(e.Descriere||"").split("\n").map(e=>e.trim());p({furnizor:t[0]||"",material:t[1]||"BRAD",woodColor:t[2]||"NUC",size:t[3]||"L",weight:t[4]||""})}else c(a),d("")},[e]);const h=(e,t)=>{c(n=>({...n,[e]:t}))},m=(e,t)=>{p(n=>({...n,[e]:t}))},g=(e,t)=>{if(""===t)return void h(e,"");const n=parseFloat(t);h(e,isNaN(n)?t:n)};return ui.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:ui.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-xl shadow-2xl",children:[ui.jsxs("div",{className:"sticky top-0 bg-slate-900 border-b border-slate-800 p-4 flex justify-between items-center z-10",children:[ui.jsxs("div",{className:"flex flex-col",children:[ui.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Adaug Produs Nou (Format Oblio)":"Editare Produs (Format Oblio)"}),(null==e?void 0:e.lastEdit)&&ui.jsxs("span",{className:"text-xs text-slate-500 italic",children:["Ultima editare: ",e.lastEdit]})]}),ui.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors",children:ui.jsx(sa,{className:"w-5 h-5"})})]}),ui.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=[f.furnizor,f.material,f.woodColor,f.size,f.weight].join("\n"),n={...l,Descriere:t};["Stoc","Pret","Cota TVA"].forEach(e=>{"string"==typeof n[e]&&(n[e]=parseFloat(n[e])||0)}),r(n,u)},className:"p-6 space-y-4",children:[ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"Denumire Produs (sau Model)"}),ui.jsx("input",{type:"text",value:l["Denumire produs"],onChange:e=>h("Denumire produs",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white focus:ring-2 focus:ring-emerald-500 outline-none",required:!0})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"Cod Produs (EAN13)"}),ui.jsxs("div",{className:"flex gap-2",children:[ui.jsx("input",{type:"text",value:l["Cod produs"],onChange:e=>h("Cod produs",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white focus:ring-2 focus:ring-emerald-500 outline-none font-mono",required:!0}),ui.jsx("button",{type:"button",onClick:()=>{const e=jf();h("Cod produs",e)},className:"px-3 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors text-xs font-bold",children:"GEN"})]})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"Grup Produse / ID Oblio"}),ui.jsxs("div",{className:"flex gap-2",children:[ui.jsx("input",{type:"text",placeholder:"Grup (ex: CRUCI)",value:l["Grup produse"]||"",onChange:e=>h("Grup produse",e.target.value),className:"w-1/2 bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white outline-none"}),ui.jsx("input",{type:"text",placeholder:"ID",value:l.ID||"",onChange:e=>h("ID",e.target.value),className:"w-1/2 bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white outline-none"})]})]})]}),ui.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 border-t border-slate-800 pt-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-amber-400 mb-1 uppercase tracking-widest",children:"Pre Vnzare"}),ui.jsx("input",{type:"number",value:l.Pret,onChange:e=>g("Pret",e.target.value),className:"w-full bg-amber-900/10 border border-amber-900/30 rounded-lg p-2.5 text-amber-200 focus:ring-2 focus:ring-amber-500 outline-none font-bold"})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"Moned"}),ui.jsxs("select",{value:l.Moneda,onChange:e=>h("Moneda",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white outline-none",children:[ui.jsx("option",{value:"RON",children:"RON"}),ui.jsx("option",{value:"EUR",children:"EUR"})]})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"TVA Inclus"}),ui.jsxs("select",{value:l["Pretul contine TVA (DA/NU)"],onChange:e=>h("Pretul contine TVA (DA/NU)",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white outline-none",children:[ui.jsx("option",{value:"DA",children:"DA"}),ui.jsx("option",{value:"NU",children:"NU"})]})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1 uppercase tracking-wider",children:"Cota TVA (%)"}),ui.jsx("input",{type:"number",value:l["Cota TVA"],onChange:e=>g("Cota TVA",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-white outline-none"})]})]}),ui.jsxs("div",{className:"grid grid-cols-3 gap-4 border-t border-slate-800 pt-4 text-emerald-400",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-emerald-500/80 mb-1 uppercase tracking-wider",children:"Stoc Real"}),ui.jsx("input",{type:"number",value:l.Stoc,onChange:e=>g("Stoc",e.target.value),className:"w-full bg-emerald-900/10 border border-emerald-900/30 rounded-lg p-2.5 text-emerald-200 outline-none font-black"})]}),ui.jsx("div",{children:ui.jsx(Ff,{label:"Unitate Msur",value:l["Unitate masura"]||"BUC",onChange:e=>h("Unitate masura",e),options:["BUC","KG","SET"]})}),ui.jsxs("div",{children:[ui.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1 uppercase tracking-wider",children:"UM in SPV"}),ui.jsx("input",{type:"text",value:l["UM in SPV"]||"H87",onChange:e=>h("UM in SPV",e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2.5 text-slate-300 outline-none text-center font-mono"})]})]}),ui.jsxs("div",{className:"bg-slate-800/40 p-4 rounded-xl border border-slate-700/50 space-y-4",children:[ui.jsx("label",{className:"block text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] mb-2",children:"Configuraie Etichet (Descriere Oblio)"}),ui.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[ui.jsx("div",{children:ui.jsx(Ff,{label:"Furnizor (Linia 1)",value:f.furnizor,onChange:e=>m("furnizor",e),options:(null==i?void 0:i.furnizor)||[]})}),ui.jsx("div",{children:ui.jsx(Ff,{label:"Material (Linia 2)",value:f.material,onChange:e=>m("material",e),options:(null==i?void 0:i.material)||["BRAD","STEJAR","FAG"]})}),ui.jsx("div",{children:ui.jsx(Ff,{label:"Culoare (Linia 3)",value:f.woodColor,onChange:e=>m("woodColor",e),options:(null==i?void 0:i.woodColor)||["NUC","MAHON","CIRE"]})}),ui.jsx("div",{children:ui.jsx(Ff,{label:"Mrime / Dim. (Linia 4)",value:f.size,onChange:e=>m("size",e),options:["XL","L","M","S"]})}),ui.jsxs("div",{className:"md:col-span-2",children:[ui.jsx("label",{className:"block text-[10px] font-bold text-slate-500 mb-1 uppercase",children:"Sarcina Max (Linia 5)"}),ui.jsx("input",{type:"text",placeholder:"ex: 150 kg",value:f.weight,onChange:e=>m("weight",e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-white outline-none text-xs"})]})]}),ui.jsxs("div",{className:"mt-2 text-[10px] text-slate-500 italic",children:["Previzualizare descriere: ",f.furnizor," | ",f.material," | ",f.woodColor," | ",f.size," | ",f.weight]})]}),ui.jsxs("div",{className:"flex justify-between pt-6 mt-4 border-t border-slate-800",children:[!t&&o?ui.jsx("button",{type:"button",onClick:()=>{confirm("Sigur dorii s tergei acest produs din list?")&&o(l["Cod produs"])},className:"flex items-center justify-center p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 transition-colors",children:ui.jsx(ra,{className:"w-5 h-5"})}):ui.jsx("div",{}),ui.jsxs("div",{className:"flex gap-3",children:[ui.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 bg-slate-800 text-slate-300 rounded-lg hover:bg-slate-700 transition-colors font-medium",children:"Anuleaz"}),ui.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-8 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-500 transition-colors font-bold shadow-lg shadow-emerald-500/20",children:[ui.jsx(Ki,{className:"w-4 h-4"})," Salveaz n JSON"]})]})]})]})]})})},Hf=({config:e})=>{var t;const[n,r]=s.useState([]),[o,i]=s.useState(!1),[a,l]=s.useState(null),[c,u]=s.useState(""),[d,f]=s.useState(null),[p,h]=s.useState(!1),[m,g]=s.useState(!1),[y,v]=s.useState(!1),[b,w]=s.useState(!1),[x,C]=s.useState(!1),[E,_]=s.useState("all"),[A,S]=s.useState(new Set),[N,I]=s.useState([]),[T,O]=s.useState({}),[R,k]=s.useState({}),[P,j]=s.useState([]),[D,M]=s.useState([]),[L,B]=s.useState(!1),[F,U]=s.useState(null),[H,V]=s.useState(null),[G,z]=s.useState(""),[q,W]=s.useState(0),[X,Y]=s.useState(null),[$,K]=s.useState("none"),J=()=>{const e=new Date;return`${String(e.getDate()).padStart(2,"0")}:${String(e.getMonth()+1).padStart(2,"0")}:${String(e.getFullYear()).slice(-2)} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},Z=(null==(t=e.workStation)?void 0:t.trim())||"Sediu",Q=e=>{var t,n;const r=null==(t=e.productCode)?void 0:t.trim();if(r)return r;return(null==(n=e.code)?void 0:n.trim())||e.name},ee=s.useMemo(()=>{if(!G.trim())return[];const e=G.toLowerCase();return N.filter(t=>{var n,r;return t.name.toLowerCase().includes(e)||(null==(n=t.code)?void 0:n.toLowerCase().includes(e))||(null==(r=t.productCode)?void 0:r.toLowerCase().includes(e))}).slice(0,5)},[N,G]),te={new:{label:"Stoc 0  apare",className:"bg-emerald-500/10 text-emerald-300 border-emerald-500/30"},more:{label:"Mai multe",className:"bg-emerald-500/10 text-emerald-300 border-emerald-500/30"},less:{label:"Mai puine",className:"bg-amber-500/10 text-amber-300 border-amber-500/30"},missing:{label:"Lips",className:"bg-red-500/10 text-red-300 border-red-500/30"},unknown:{label:"Cod necunoscut",className:"bg-slate-500/10 text-slate-300 border-slate-500/30"}};s.useEffect(()=>{ne()},[]);const ne=async()=>{i(!0),l(null);try{const e=await Rf();r(e)}catch(e){l(e.message||"Eroare la ncrcarea stocurilor.")}finally{i(!1)}},re=e=>{K(e),setTimeout(()=>{window.print(),K("none")},300)},oe=e=>{const t=e.trim();if(!t)return;if(0===N.length)return void l("Inventarul Oblio nu este ncrcat.");const n=((e,t)=>{const n=e.trim();return t.find(e=>e.productCode&&e.productCode.trim()===n||e.code&&e.code.trim()===n)})(t,N);if(n){const e=Q(n);O(t=>{const n=(t[e]||0)+1;return W(n),{...t,[e]:n}}),V(n),z("")}else k(e=>{const n=e[t]||0;return{...e,[t]:n+1}}),U({name:"Cod necunoscut",code:t});navigator.vibrate&&navigator.vibrate(50)},ie=async e=>{try{const t=n.filter(t=>t["Cod produs"]!==e);if(r(t),f(null),A.has(e)){const t=new Set(A);t.delete(e),S(t)}await kf(t)}catch(t){l(`Eroare la tergere: ${t.message}`),ne()}},{furnizorOptions:ae,materialOptions:se,woodColorOptions:le,sidesTypeOptions:ce,umOptions:ue,vatRateOptions:de}=s.useMemo(()=>{const e=new Set,t=new Set,r=new Set,o=new Set,i=new Set,a=new Set;return n.forEach(n=>{n.Furnizor&&e.add(String(n.Furnizor)),n.material&&t.add(String(n.material)),n.woodColor&&r.add(String(n.woodColor)),n.sidesType&&o.add(String(n.sidesType)),n["Unitate masura"]&&i.add(String(n["Unitate masura"])),void 0!==n["Cota TVA"]&&a.add(String(n["Cota TVA"]))}),{furnizorOptions:Array.from(e).sort(),materialOptions:Array.from(t).sort(),woodColorOptions:Array.from(r).sort(),sidesTypeOptions:Array.from(o).sort(),umOptions:Array.from(i).sort(),vatRateOptions:Array.from(a).sort((e,t)=>parseFloat(e)-parseFloat(t))}},[n]),fe=s.useMemo(()=>{const e=Object.values(T).reduce((e,t)=>e+t,0),t=Object.values(R).reduce((e,t)=>e+t,0);return{totalScanned:e+t,uniqueScanned:Object.keys(T).length+Object.keys(R).length,totalKnown:e,totalUnknown:t}},[T,R]),pe=s.useMemo(()=>P.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e.total+=1,e),{total:0,new:0,more:0,less:0,missing:0,unknown:0}),[P]),he=s.useMemo(()=>{let e=n;if(c){const t=c.toLowerCase();e=e.filter(e=>e["Denumire produs"].toLowerCase().includes(t)||e["Cod produs"].toLowerCase().includes(t)||e.Descriere&&e.Descriere.toLowerCase().includes(t))}return"in_stock"===E?e=e.filter(e=>e.Stoc>0):"out_of_stock"===E&&(e=e.filter(e=>e.Stoc<=0)),[...e].sort((e,t)=>e["Denumire produs"].localeCompare(t["Denumire produs"],"ro",{sensitivity:"base"}))},[n,c,E]);return ui.jsxs("div",{className:"flex flex-col h-full space-y-4",children:[ui.jsxs("div",{className:"bg-slate-800 p-3 sm:p-4 rounded-xl border border-slate-700 flex flex-col gap-4 shadow-lg",children:[ui.jsxs("div",{className:"flex gap-2 w-full",children:[ui.jsxs("div",{className:"relative flex-1",children:[ui.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 w-4 h-4"}),ui.jsx("input",{type:"text",placeholder:"Caut produse (Nume, Cod, Furnizor)...",value:c,onChange:e=>u(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:ring-2 focus:ring-emerald-500 outline-none placeholder:text-slate-600"})]}),ui.jsx("button",{onClick:()=>g(!0),disabled:y,className:"bg-slate-700 text-white p-2 rounded-lg border border-slate-600 transition-colors "+(y?"opacity-50 cursor-not-allowed":"hover:bg-slate-600"),title:y?"Inventar activ: scanarea este folosit pentru inventar":"Scaneaz pentru cutare",children:ui.jsx(Ji,{className:"w-5 h-5"})})]}),ui.jsxs("div",{className:"flex gap-2 w-full overflow-x-auto pb-1 md:pb-0",children:[ui.jsxs("button",{onClick:y?()=>{v(!1),w(!1);const e=((e,t,n)=>{const r=[],o=[];return e.forEach(e=>{var n,i;const a=Q(e),s=Number(e.stock)||0,l=t[a]||0,c={key:a,name:e.name,code:(null==(n=e.productCode)?void 0:n.trim())||(null==(i=e.code)?void 0:i.trim())||"",expected:s,counted:l,delta:l-s,status:"unknown"};if(l===s)o.push(c);else{let e="less";0===s&&l>0?e="new":l>s?e="more":0===l&&(e="missing"),c.status=e,r.push(c)}}),Object.entries(n).forEach(([e,t])=>{t>0&&r.push({key:e,name:"Cod necunoscut",code:e,expected:0,counted:t,delta:t,status:"unknown"})}),{diffs:r.sort((e,t)=>Math.abs(t.delta)-Math.abs(e.delta)),matches:o.sort((e,t)=>e.name.localeCompare(t.name))}})(N,T,R);j(e.diffs),M(e.matches),B(!0),Y(new Date)}:async()=>{if(e.email&&e.apiSecret&&e.cif){if(confirm(`Se va porni inventarul pentru gestiunea "${Z}". Continuai?`)){C(!0),l(null),O({}),k({}),j([]),B(!1),U(null);try{const t=await ma(e);I(t),v(!0),w(!0)}catch(t){console.error("Inventory start error:",t),l(`Eroare la pornirea inventarului: ${t.message}`)}finally{C(!1)}}}else l("Configurare Oblio incomplet (Email, Secret, CIF).")},disabled:x,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-colors whitespace-nowrap border "+(y?"bg-red-600/20 text-red-300 border-red-500/30 hover:bg-red-600/30":"bg-emerald-600/20 text-emerald-300 border-emerald-500/30 hover:bg-emerald-600/30"),children:[x?ui.jsx(Hi,{className:"w-4 h-4 animate-spin"}):y?ui.jsx(ki,{className:"w-4 h-4"}):ui.jsx(ji,{className:"w-4 h-4"}),y?"Stop inventar":"Start inventar"]}),ui.jsxs("button",{onClick:()=>{if(0===A.size)return void alert("V rugm s selectai produsele pe care dorii s le exportai din list.");const e=Array.from(A).join(",");window.location.href=`${Pf()}&codes=${encodeURIComponent(e)}`},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-700/50 text-emerald-100 border border-emerald-600/50 rounded-lg hover:bg-emerald-600/50 transition-colors whitespace-nowrap",title:"Descarc format Excel",children:[ui.jsx(Bi,{className:"w-4 h-4"}),"Export XLS"]}),ui.jsx("input",{type:"file",accept:".json",id:"json-upload",className:"hidden",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;const o=new FileReader;o.onload=async t=>{var n;try{const o=null==(n=t.target)?void 0:n.result,a=JSON.parse(o);let s=[];if(Array.isArray(a))s=a;else{if(!a.data||!Array.isArray(a.data))throw new Error("Format JSON invalid. Se ateapt un array de produse.");s=a.data}if(!confirm(`Suntei sigur c dorii s importai ${s.length} produse? Aceasta va suprascrie stocul existent.`))return void(e.target.value="");i(!0),await kf(s),r(s),alert("Stocuri importate cu succes!")}catch(o){console.error("Upload error:",o),alert(`Eroare la import: ${o.message}`)}finally{i(!1),e.target.value=""}},o.readAsText(n)}}),ui.jsxs("label",{htmlFor:"json-upload",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg hover:bg-slate-600 transition-colors whitespace-nowrap cursor-pointer",children:[ui.jsx(ia,{className:"w-4 h-4"}),"Upload JSON"]}),ui.jsxs("button",{onClick:()=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({data:n},null,2)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","stocuri.json"),document.body.appendChild(t),t.click(),t.remove()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-700 text-slate-300 border border-slate-600 rounded-lg hover:bg-slate-600 transition-colors whitespace-nowrap",title:"Descarc format JSON",children:[ui.jsx(Bi,{className:"w-4 h-4"}),"Export JSON"]})]}),ui.jsxs("div",{className:"flex flex-col md:flex-row gap-2 justify-between items-center bg-slate-700/30 p-2 rounded-lg",children:[ui.jsxs("div",{className:"flex gap-1 w-full md:w-auto overflow-x-auto",children:[ui.jsxs("button",{onClick:()=>_("all"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap "+("all"===E?"bg-slate-600 text-white shadow":"text-slate-400 hover:bg-slate-700/50"),children:["Toate (",n.length,")"]}),ui.jsx("button",{onClick:()=>_("in_stock"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap "+("in_stock"===E?"bg-emerald-600/50 text-emerald-100 shadow":"text-slate-400 hover:bg-slate-700/50"),children:"n Stoc"}),ui.jsx("button",{onClick:()=>_("out_of_stock"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap "+("out_of_stock"===E?"bg-red-600/50 text-red-100 shadow":"text-slate-400 hover:bg-slate-700/50"),children:"Fr Stoc"})]}),A.size>0?ui.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end animate-in fade-in bg-blue-900/20 px-3 py-1 rounded-md border border-blue-900/30",children:[ui.jsxs("span",{className:"text-xs text-blue-200 font-semibold",children:[A.size," selectate"]}),ui.jsx("button",{onClick:()=>S(new Set),className:"text-xs text-blue-300 hover:text-white underline decoration-blue-500/50 underline-offset-4 transition-colors px-2 py-1",children:"Reseteaz"}),ui.jsx("div",{className:"w-px h-4 bg-blue-900/40 mx-1"}),ui.jsxs("button",{onClick:async()=>{if(0!==A.size&&confirm(`Sigur dorii s tergei ${A.size} produse selectate?`))try{const e=n.filter(e=>!A.has(e["Cod produs"]));r(e),S(new Set),await kf(e)}catch(e){l(`Eroare la tergere multipl: ${e.message}`),ne()}},className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-500 text-sm transition-colors shadow-lg shadow-red-900/20",children:[ui.jsx(ra,{className:"w-3.5 h-3.5"}),"terge Selectate"]})]}):he.length>0&&ui.jsxs("button",{onClick:()=>{if(A.size===he.length)S(new Set);else{const e=new Set(he.map(e=>e["Cod produs"]));S(e)}},className:"hidden md:flex items-center gap-2 px-3 py-1.5 text-slate-400 hover:text-white transition-colors text-sm",children:[A.size===he.length?ui.jsx(ta,{className:"w-4 h-4"}):ui.jsx(na,{className:"w-4 h-4"}),"Selecteaz Tot"]})]}),y&&ui.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center bg-amber-900/20 border border-amber-700/30 rounded-lg p-3",children:[ui.jsxs("div",{className:"flex-1",children:[ui.jsx("div",{className:"text-amber-200 text-sm font-semibold",children:"Inventar activ"}),ui.jsxs("div",{className:"text-xs text-amber-200/80",children:["Gestiune: ",Z,"  Scanate: ",fe.totalScanned," (",fe.uniqueScanned," unice)",fe.totalUnknown>0&&`  Necunoscute: ${fe.totalUnknown}`]}),F&&ui.jsxs("div",{className:"text-[11px] text-amber-200/80 mt-1",children:["Ultimul: ",F.name," (",F.code,")"]})]}),ui.jsxs("button",{onClick:()=>w(!0),disabled:b,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-semibold border transition-colors "+(b?"bg-amber-900/40 text-amber-200 border-amber-700/40 cursor-not-allowed":"bg-amber-600/20 text-amber-200 border-amber-500/30 hover:bg-amber-600/30"),children:[ui.jsx(Ji,{className:"w-4 h-4"}),b?"Scanner activ":"Scaneaz inventar"]})]}),ui.jsxs("button",{onClick:()=>{f(null),h(!0),f({})},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-500 transition-colors font-bold shadow-lg shadow-emerald-500/20",children:[ui.jsx(Xi,{className:"w-5 h-5"}),"Produs Nou"]})]}),a&&ui.jsx("div",{className:"bg-red-500/10 border border-red-500/50 p-4 rounded-xl text-red-200 text-sm",children:a}),L&&ui.jsxs("div",{className:"bg-slate-800/60 border border-slate-700 rounded-xl p-4",children:[ui.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[ui.jsxs("div",{className:"flex items-center gap-2",children:[ui.jsx(ji,{className:"w-5 h-5 text-emerald-400"}),ui.jsx("div",{className:"text-white font-semibold",children:"Diferene inventar"}),ui.jsxs("span",{className:"text-xs bg-slate-700 text-slate-300 px-2 py-0.5 rounded-full border border-slate-600",children:[pe.total," poziii"]})]}),ui.jsxs("div",{className:"flex bg-slate-700/50 rounded-lg p-1 border border-slate-600 shadow-inner",children:[ui.jsxs("button",{onClick:()=>re("diffs"),className:"px-3 py-1 text-[11px] font-bold text-slate-300 hover:text-white flex items-center gap-1.5 transition-all active:scale-95",title:"Printeaz doar diferenele",children:[ui.jsx(Yi,{className:"w-3.5 h-3.5"})," Diferene"]}),ui.jsx("div",{className:"w-[1px] bg-slate-600 mx-1"}),ui.jsxs("button",{onClick:()=>re("matches"),className:"px-3 py-1 text-[11px] font-bold text-slate-300 hover:text-white flex items-center gap-1.5 transition-all active:scale-95",title:"Printeaz doar produsele corecte",children:[ui.jsx(Yi,{className:"w-3.5 h-3.5"})," Corecte"]}),ui.jsx("div",{className:"w-[1px] bg-slate-600 mx-1"}),ui.jsxs("button",{onClick:()=>re("all"),className:"px-3 py-1 text-[11px] font-bold text-emerald-400 hover:text-emerald-300 flex items-center gap-1.5 transition-all active:scale-95",title:"Printeaz tot raportul",children:[ui.jsx(Yi,{className:"w-3.5 h-3.5"})," TOT"]})]})]}),0===P.length?ui.jsx("div",{className:"text-sm text-slate-400 mt-3",children:"Nu exist diferene fa de stocul din Oblio."}):ui.jsxs("div",{className:"mt-3 space-y-2",children:[P.map(e=>{const t=te[e.status],n=e.code||e.key;return ui.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 bg-slate-900/60 border border-slate-700/50 rounded-lg p-3",children:[ui.jsxs("div",{className:"min-w-0",children:[ui.jsx("div",{className:"text-sm text-white truncate",children:e.name}),ui.jsx("div",{className:"text-xs text-slate-400 font-mono",children:n})]}),ui.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-between md:justify-end",children:[ui.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded-full border ${t.className}`,children:t.label}),ui.jsxs("div",{className:"text-xs text-slate-400",children:["Oblio: ",ui.jsx("span",{className:"text-slate-200 font-semibold",children:e.expected})]}),ui.jsxs("div",{className:"text-xs text-slate-400",children:["Inventar: ",ui.jsx("span",{className:"text-slate-200 font-semibold",children:e.counted})]}),ui.jsx("div",{className:"text-sm font-semibold "+(e.delta>=0?"text-emerald-400":"text-red-400"),children:e.delta>0?`+${e.delta}`:e.delta})]})]},`${e.key}-${e.status}`)}),ui.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700/50 flex justify-end",children:ui.jsxs("button",{onClick:()=>re("diffs"),className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-500 transition-colors font-bold text-sm shadow-lg shadow-emerald-900/40",children:[ui.jsx(Yi,{className:"w-4 h-4"})," Imprim Tabel Diferene"]})})]}),D.length>0&&ui.jsxs("div",{className:"mt-8",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ui.jsx(Ri,{className:"w-5 h-5 text-emerald-500"}),ui.jsx("div",{className:"text-white font-semibold",children:"Produse corecte (fr diferene)"}),ui.jsxs("span",{className:"text-xs bg-slate-700 text-slate-300 px-2 py-0.5 rounded-full border border-slate-600",children:[D.length," poziii"]})]}),ui.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:D.map(e=>ui.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 bg-slate-900/40 border border-slate-700/30 rounded-lg p-3 opacity-80 hover:opacity-100 transition-opacity",children:[ui.jsxs("div",{className:"min-w-0",children:[ui.jsx("div",{className:"text-sm text-slate-300 truncate",children:e.name}),ui.jsx("div",{className:"text-xs text-slate-500 font-mono",children:e.code||e.key})]}),ui.jsxs("div",{className:"flex items-center gap-4 justify-between md:justify-end",children:[ui.jsxs("div",{className:"text-xs text-slate-500",children:["Stoc: ",ui.jsx("span",{className:"text-emerald-500/80 font-semibold",children:e.counted})]}),ui.jsx("div",{className:"text-xs bg-emerald-500/10 text-emerald-500/70 px-2 py-0.5 rounded border border-emerald-500/20",children:"CONFIRMAT"})]})]},e.key))})]})]}),ui.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700/50",children:o?ui.jsx("div",{className:"flex items-center justify-center h-64",children:ui.jsx(Hi,{className:"w-8 h-8 text-emerald-500 animate-spin"})}):0===he.length?ui.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[ui.jsx("p",{children:"Nu exist produse."}),ui.jsx("p",{className:"text-sm mt-1",children:"Importai din Oblio sau adugai manual."})]}):ui.jsx("div",{className:"divide-y divide-slate-700/50",children:he.map((e,t)=>ui.jsxs("div",{className:"p-1 sm:p-2 hover:bg-slate-700/50 transition-colors flex items-center justify-between group",children:[ui.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{f(e),h(!1)},children:[ui.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[ui.jsx("div",{onClick:t=>((e,t)=>{t.stopPropagation();const n=new Set(A);n.has(e)?n.delete(e):n.add(e),S(n)})(e["Cod produs"],t),className:"text-slate-500 hover:text-slate-300 transition-colors cursor-pointer",children:A.has(e["Cod produs"])?ui.jsx(ta,{className:"w-5 h-5 text-emerald-500"}):ui.jsx(na,{className:"w-5 h-5"})}),ui.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[ui.jsx("span",{className:"font-semibold text-lg truncate "+(e.verified?"text-emerald-400":"text-white"),children:e["Denumire produs"]}),e.verified&&ui.jsx(Ri,{className:"w-4 h-4 text-emerald-500"})]}),ui.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-bold "+(e.Stoc>0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"),children:[e.Stoc," ",e["U.M."]]})]}),ui.jsxs("div",{className:"flex gap-4 text-xs text-slate-400",children:[ui.jsx("span",{className:"font-mono bg-slate-900 px-1.5 rounded",children:e["Cod produs"]}),ui.jsxs("span",{children:["Pre de vnzare: ",ui.jsxs("span",{className:"text-emerald-300 font-bold",children:[e["Pret vanzare"]," ",e["Moneda vanzare"]]})]}),ui.jsxs("span",{children:["Pre achiziie: ",ui.jsxs("span",{className:"text-blue-300 font-bold",children:[e["Cost achizitie fara TVA"]," ",e["Moneda achizitie"]]})]}),e.lastEdit&&ui.jsxs("span",{className:"text-slate-500 italic",children:["Editat: ",e.lastEdit]})]})]}),ui.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 px-2",children:[ui.jsx("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();const o=n.map(t=>t["Cod produs"]===e?{...t,verified:!t.verified}:t);r(o);try{await kf(o)}catch(i){l(`Eroare la salvare status: ${i.message}`),ne()}})(e["Cod produs"],t),className:"p-2 rounded-lg transition-colors "+(e.verified?"text-emerald-500 hover:bg-emerald-500/10":"text-slate-600 hover:bg-slate-600 hover:text-slate-300"),title:e.verified?"Debifeaz ca verificat":"Bifeaz ca verificat",children:e.verified?ui.jsx(Ri,{className:"w-4 h-4 fill-emerald-500/20"}):ui.jsx(Pi,{className:"w-4 h-4"})}),ui.jsx("button",{onClick:()=>{f(e),h(!1)},className:"p-2 hover:bg-slate-600 rounded-lg text-slate-400 hover:text-white transition-colors",title:"Editeaz",children:ui.jsx(Wi,{className:"w-4 h-4"})}),ui.jsx("button",{onClick:t=>{t.stopPropagation(),confirm("Sigur dorii s tergei acest produs?")&&ie(e["Cod produs"])},className:"p-2 hover:bg-red-500/20 rounded-lg text-slate-400 hover:text-red-400 transition-colors",title:"terge",children:ui.jsx(ra,{className:"w-4 h-4"})})]})]},t))})}),d&&ui.jsx(Uf,{product:d,isNew:p,onClose:()=>f(null),onSave:async(e,t)=>{try{const o={...e,lastEdit:J()};let i=[...n];const a=t||e["Cod produs"];let s=-1;if(p)n.some(t=>t["Cod produs"]===e["Cod produs"]),i.push(o),s=i.length-1;else{if(s=i.findIndex(e=>e["Cod produs"]===a),-1===s)return console.error("Could not find original product to update:",a),void l("Eroare intern: Produsul original nu a fost gsit pentru actualizare.");i[s]=o}const c=o["Cod produs"];let u=0;i=i.map((e,t)=>t!==s&&e["Cod produs"]===c?(u++,{...e,"Cod produs":jf(),lastEdit:J()}):e),u>0&&alert(`Atenie: Au fost gsite ${u} alte produse cu acelai cod (${c}). Acestea au fost actualizate automat cu coduri EAN13 noi pentru a elimina duplicatele.`),r(i),f(null),await kf(i)}catch(o){l(`Eroare la salvare: ${o.message}`),ne()}},onDelete:ie,options:{furnizor:ae,material:se,woodColor:le,sidesType:ce,um:ue,vatRate:de}}),(m||b)&&ui.jsx(ua,{onScan:b?oe:e=>{u(e),g(!1),navigator.vibrate&&navigator.vibrate(50)},onClose:()=>{g(!1),w(!1),V(null)},allowDuplicates:b,duplicateDelayMs:2e3,children:b&&ui.jsxs("div",{className:"w-full flex flex-col gap-3",children:[!H&&ui.jsxs("div",{className:"relative w-full max-w-sm mx-auto",children:[ui.jsxs("div",{className:"relative",children:[ui.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 w-4 h-4"}),ui.jsx("input",{type:"text",placeholder:"Caut/Adaug: Nume, Cod, Furnizor...",value:G,onChange:e=>z(e.target.value),className:"w-full bg-slate-900/90 backdrop-blur border border-slate-700 rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-emerald-500 outline-none text-sm"}),G&&ui.jsx("button",{onClick:()=>z(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white",children:ui.jsx(sa,{className:"w-4 h-4"})})]}),ee.length>0&&ui.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl overflow-hidden max-h-48 overflow-y-auto animate-in slide-in-from-bottom-2 duration-200",children:ee.map(e=>ui.jsxs("button",{onClick:()=>oe(e.productCode||e.code||e.name),className:"w-full text-left p-3 hover:bg-slate-700 transition-colors border-b border-slate-700 last:border-0 flex flex-col gap-0.5",children:[ui.jsx("span",{className:"text-xs font-bold text-white truncate",children:e.name}),ui.jsx("span",{className:"text-[10px] text-slate-400 font-mono italic",children:e.productCode||e.code})]},Q(e)))})]}),H&&ui.jsxs("div",{className:"w-full max-w-sm mx-auto bg-slate-800 border border-slate-700 rounded-2xl p-4 shadow-2xl animate-in zoom-in duration-200",children:[ui.jsxs("div",{className:"flex justify-between items-start mb-3",children:[ui.jsxs("div",{className:"min-w-0 pr-4",children:[ui.jsx("h3",{className:"text-emerald-400 font-bold text-sm leading-tight truncate",children:H.name}),ui.jsx("div",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:H.productCode||H.code})]}),ui.jsx("button",{onClick:()=>V(null),className:"text-slate-500 hover:text-white p-1",children:ui.jsx(sa,{className:"w-4 h-4"})})]}),ui.jsxs("div",{className:"flex items-center justify-between gap-4",children:[ui.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 p-1.5 rounded-xl border border-slate-700",children:[ui.jsx("button",{onClick:()=>W(Math.max(0,q-1)),className:"w-10 h-10 flex items-center justify-center bg-slate-800 rounded-lg hover:bg-slate-700 text-slate-300",children:"-"}),ui.jsx("input",{type:"number",value:q,onChange:e=>W(Number(e.target.value)),className:"w-14 bg-transparent text-center font-bold text-white outline-none text-lg",onFocus:e=>e.target.select()}),ui.jsx("button",{onClick:()=>W(q+1),className:"w-10 h-10 flex items-center justify-center bg-slate-800 rounded-lg hover:bg-slate-700 text-slate-300",children:"+"})]}),ui.jsx("button",{onClick:()=>{var e,t;if(!H)return;const n=Q(H);O(e=>({...e,[n]:q})),U({name:H.name,code:(null==(e=H.productCode)?void 0:e.trim())||(null==(t=H.code)?void 0:t.trim())||""}),V(null)},className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-3 px-4 rounded-xl font-bold transition-all shadow-lg shadow-emerald-900/20",children:"SALVEAZ"})]}),ui.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[ui.jsx("button",{onClick:()=>W(e=>e+1),className:"text-[10px] bg-slate-700/50 hover:bg-slate-700 py-1.5 rounded text-slate-300 transition-colors uppercase font-bold",children:"+1 buc"}),ui.jsx("button",{onClick:()=>W(e=>e+5),className:"text-[10px] bg-slate-700/50 hover:bg-slate-700 py-1.5 rounded text-slate-300 transition-colors uppercase font-bold",children:"+5 buc"})]})]})]})}),"none"!==$&&ui.jsx(Vf,{diffs:P,matches:D,mode:$,finishedAt:X})]})},Vf=({diffs:e,matches:t,mode:n,finishedAt:r})=>{if("none"===n)return null;const o="diffs"===n||"all"===n,i="matches"===n||"all"===n,a=r?r.toLocaleString("ro-RO"):(new Date).toLocaleString("ro-RO");return Bf.createPortal(ui.jsxs("div",{className:"print-area inventory-print-report",children:[ui.jsxs("div",{className:"report-header",children:[ui.jsx("h1",{children:"Raport Inventar"}),ui.jsx("div",{className:"report-meta",children:ui.jsxs("div",{children:[ui.jsx("strong",{children:"Data i ora finalizrii:"})," ",a]})})]}),o&&e.length>0&&ui.jsxs("div",{className:"report-section",children:[ui.jsx("h2",{children:"Diferene detectate"}),ui.jsxs("table",{children:[ui.jsx("thead",{children:ui.jsxs("tr",{children:[ui.jsx("th",{children:"Produs"}),ui.jsx("th",{children:"Cod"}),ui.jsx("th",{children:"Status"}),ui.jsx("th",{children:"Oblio"}),ui.jsx("th",{children:"Inventar"}),ui.jsx("th",{children:"Dif."})]})}),ui.jsx("tbody",{children:e.map(e=>ui.jsxs("tr",{children:[ui.jsx("td",{children:e.name}),ui.jsx("td",{children:e.code||e.key}),ui.jsx("td",{className:"font-bold",children:"new"===e.status?"STOC 0  APARE":"more"===e.status?"MAI MULTE":"less"===e.status?"MAI PUINE":"missing"===e.status?"LIPS":"unknown"===e.status?"COD NECUNOSCUT":e.status.toUpperCase()}),ui.jsx("td",{children:e.expected}),ui.jsx("td",{className:"font-bold",children:e.counted}),ui.jsx("td",{className:"font-bold "+(e.delta>0?"text-green":"text-red"),children:e.delta>0?`+${e.delta}`:e.delta})]},e.key))})]})]}),i&&t.length>0&&ui.jsxs("div",{className:"report-section",children:[ui.jsx("h2",{children:"Produse conforme (stoc corect)"}),ui.jsxs("table",{children:[ui.jsx("thead",{children:ui.jsxs("tr",{children:[ui.jsx("th",{children:"Produs"}),ui.jsx("th",{children:"Cod"}),ui.jsx("th",{children:"Cantitate"}),ui.jsx("th",{children:"Status"})]})}),ui.jsx("tbody",{children:t.map(e=>ui.jsxs("tr",{children:[ui.jsx("td",{children:e.name}),ui.jsx("td",{children:e.code||e.key}),ui.jsx("td",{className:"font-bold",children:e.counted}),ui.jsx("td",{className:"text-green font-bold",children:"OK"})]},e.key))})]})]})]}),document.body)};var Gf=(e=>(e.CLASSIC="CLASSIC",e.MODERN="MODERN",e.MINIMAL="MINIMAL",e.ELEGANT="ELEGANT",e.ROYAL="ROYAL",e.VINTAGE="VINTAGE",e.PRESTIGE="PRESTIGE",e.ORNAMENTAL="ORNAMENTAL",e))(Gf||{});const zf=[{id:"S",label:"SOCIAL (S)",dims:{length:180,width:55,height:45},weight:100},{id:"M",label:"STANDARD (M)",dims:{length:190,width:60,height:45},weight:100},{id:"L",label:"LARGE (L)",dims:{length:195,width:60,height:50},weight:120},{id:"XL",label:"EXTRA LARGE (XL)",dims:{length:200,width:65,height:50},weight:130},{id:"XXL",label:"GIANT (XXL)",dims:{length:210,width:75,height:55},weight:150}],qf={id:"new",code:"",modelName:"",sidesType:"",woodColor:"",material:"",furnizor:"",price:0,lidFeature:"RESPET",accessories:["PERN","ORAR MIC I MARE","PNZ FA"],crossOptions:[{type:"BRAD",price:250},{type:"FAG",price:350},{type:"TRIFOI",price:350}],accessoriesPrice:250,crucifixPrice:100,dimensions:{length:195,width:60,height:50},weightCapacityMin:100,weightCapacityMax:120,currency:"RON",imageUrl:"https://funerare24.ro/wp-content/smush-webp/s03-f24-1500-lei.jpg.webp",showCompleteEchipat:!0,showDetaliiInterior:!0,sizeClass:"L"},Wf=({product:e,onSave:t,onClose:n})=>{const[r,o]=s.useState({...e}),[i,a]=s.useState(e.accessories.join(", ")),l=e=>{const{name:t,value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");o(o=>({...o,[e]:{...o[e],[r]:t.startsWith("dimensions.")||t.startsWith("weight")?Number(n):n}}))}else if("checkbox"===e.target.type){const{checked:n}=e.target;o(e=>({...e,[t]:n}))}else o(e=>({...e,[t]:"price"===t||"accessoriesPrice"===t||"crucifixPrice"===t||t.startsWith("weight")?Number(n):n}))},c=(e,t,n)=>{const i=[...r.crossOptions];i[e]={...i[e],[t]:"price"===t?Number(n):n},o(e=>({...e,crossOptions:i}))},u=e=>{e.preventDefault();const n={...r,accessories:i.split(",").map(e=>e.trim()).filter(e=>""!==e)};t(n)},d="w-full bg-gray-50 text-gray-900 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all",f="block text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider";return ui.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:ui.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-2xl shadow-2xl flex flex-col animate-in zoom-in-95 duration-200",children:[ui.jsxs("header",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[ui.jsxs("div",{className:"flex items-center gap-3",children:[ui.jsx("div",{className:"bg-blue-600 text-white w-10 h-10 rounded-lg flex items-center justify-center shadow-md",children:ui.jsx("i",{className:"fa-solid fa-pen-nib text-lg"})}),ui.jsxs("div",{children:[ui.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Editare Etichet"}),ui.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["Model: ",e.modelName,"  Cod: ",e.code]})]})]}),ui.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full",children:ui.jsx("i",{className:"fa-solid fa-xmark text-2xl"})})]}),ui.jsxs("form",{onSubmit:u,className:"overflow-y-auto p-6 space-y-8 bg-white",children:[ui.jsxs("section",{children:[ui.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-gray-100 pb-2",children:ui.jsxs("h3",{className:"text-sm font-black text-blue-600 uppercase tracking-widest flex items-center gap-2",children:[ui.jsx("i",{className:"fa-solid fa-tag"})," Date Generale"]})}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Nume Model"}),ui.jsx("input",{type:"text",name:"modelName",value:r.modelName,onChange:l,className:d,required:!0})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Cod EAN / Bare"}),ui.jsx("input",{type:"text",name:"code",value:r.code,onChange:l,className:d,required:!0})]}),ui.jsxs("div",{children:[ui.jsxs("label",{className:f,children:["Pre (",r.currency,")"]}),ui.jsx("input",{type:"number",name:"price",value:r.price,onChange:l,className:`${d} font-bold text-blue-700`,required:!0})]})]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4 "+(r.isSmallLabel?"opacity-40 grayscale pointer-events-none":""),children:[ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Tip Laturi"}),ui.jsx("input",{type:"text",name:"sidesType",value:r.sidesType,onChange:l,className:d,disabled:r.isSmallLabel})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Culoare Lemn"}),ui.jsx("input",{type:"text",name:"woodColor",value:r.woodColor,onChange:l,className:d,disabled:r.isSmallLabel})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Material"}),ui.jsx("input",{type:"text",name:"material",value:r.material,onChange:l,className:`${d} font-bold`})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Furnizor"}),ui.jsx("input",{type:"text",name:"furnizor",value:r.furnizor,onChange:l,className:d})]})]}),ui.jsxs("div",{className:"mt-6 flex flex-wrap gap-6 bg-blue-50/50 p-4 rounded-xl border border-blue-100",children:[ui.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"checkbox",name:"isSmallLabel",checked:r.isSmallLabel,onChange:l,className:"sr-only"}),ui.jsx("div",{className:"w-10 h-6 rounded-full transition-colors "+(r.isSmallLabel?"bg-indigo-600":"bg-gray-300")}),ui.jsx("div",{className:"absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform "+(r.isSmallLabel?"translate-x-4":"")})]}),ui.jsx("span",{className:"text-sm font-black text-indigo-700 uppercase tracking-tighter",children:"ETICHET MIC (4/pag)"})]}),!r.isSmallLabel&&ui.jsxs(ui.Fragment,{children:[ui.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"checkbox",name:"showCompleteEchipat",checked:r.showCompleteEchipat,onChange:l,className:"sr-only"}),ui.jsx("div",{className:"w-10 h-6 rounded-full transition-colors "+(r.showCompleteEchipat?"bg-blue-600":"bg-gray-300")}),ui.jsx("div",{className:"absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform "+(r.showCompleteEchipat?"translate-x-4":"")})]}),ui.jsx("span",{className:"text-xs font-bold text-gray-700 uppercase tracking-tight",children:"SICRIU COMPLET ECHIPAT"})]}),ui.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[ui.jsxs("div",{className:"relative",children:[ui.jsx("input",{type:"checkbox",name:"showDetaliiInterior",checked:r.showDetaliiInterior,onChange:l,className:"sr-only"}),ui.jsx("div",{className:"w-10 h-6 rounded-full transition-colors "+(r.showDetaliiInterior?"bg-blue-600":"bg-gray-300")}),ui.jsx("div",{className:"absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform "+(r.showDetaliiInterior?"translate-x-4":"")})]}),ui.jsx("span",{className:"text-xs font-bold text-gray-700 uppercase tracking-tight",children:"DETALII INTERIOR"})]})]})]})]}),!r.isSmallLabel&&ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-black text-emerald-600 uppercase tracking-widest mb-4 flex items-center gap-2 border-b border-gray-100 pb-2",children:[ui.jsx("i",{className:"fa-solid fa-couch"})," Interior & Accesorii"]}),ui.jsxs("div",{className:"space-y-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Tip Capitonaj Capac"}),ui.jsx("input",{type:"text",name:"lidFeature",value:r.lidFeature,onChange:l,className:`${d} font-medium`})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Accesorii (separate prin virgul)"}),ui.jsx("textarea",{value:i,onChange:e=>a(e.target.value),rows:3,className:`${d} resize-none`})]}),ui.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Pre Accesorii Extra"}),ui.jsx("input",{type:"number",name:"accessoriesPrice",value:r.accessoriesPrice,onChange:l,className:d})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Pre Crucifix"}),ui.jsx("input",{type:"number",name:"crucifixPrice",value:r.crucifixPrice,onChange:l,className:d})]})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h3",{className:"text-sm font-black text-amber-600 uppercase tracking-widest mb-4 flex items-center gap-2 border-b border-gray-100 pb-2",children:[ui.jsx("i",{className:"fa-solid fa-cross"})," Opiuni Cruce"]}),ui.jsx("div",{className:"space-y-3",children:r.crossOptions.map((e,t)=>ui.jsxs("div",{className:"flex gap-2 group",children:[ui.jsx("input",{type:"text",value:e.type,onChange:e=>c(t,"type",e.target.value),className:`${d} flex-1 py-1.5 text-sm`,placeholder:"Tip Lemn"}),ui.jsx("input",{type:"number",value:e.price,onChange:e=>c(t,"price",e.target.value),className:`${d} w-24 py-1.5 text-sm font-bold`,placeholder:"Pret"})]},t))})]})]}),ui.jsxs("section",{className:"bg-gray-50 p-5 rounded-2xl border border-gray-200 shadow-inner",children:[ui.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-gray-200/50 pb-2",children:[ui.jsxs("h3",{className:"text-sm font-black text-slate-600 uppercase tracking-widest flex items-center gap-2",children:[ui.jsx("i",{className:"fa-solid fa-ruler-combined"})," Dimensiuni & Imagine"]}),ui.jsxs("div",{className:"flex items-center gap-2 bg-white/60 p-1.5 rounded-xl border border-gray-200 shadow-sm",children:[ui.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase ml-1",children:"Configurare Rapid:"}),ui.jsx("div",{className:"flex gap-1",children:zf.map(e=>ui.jsx("button",{type:"button",onClick:()=>(e=>{const t=zf.find(t=>t.id===e);t&&o(n=>({...n,sizeClass:e,dimensions:{...t.dims},weightCapacityMax:t.weight}))})(e.id),title:e.label,className:"px-2.5 py-1 text-[11px] font-black rounded-lg transition-all "+(r.sizeClass===e.id?"bg-blue-600 text-white shadow-md scale-105":"text-gray-500 hover:text-blue-600 hover:bg-white"),children:e.id},e.id))})]})]}),ui.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Lungime (cm)"}),ui.jsx("input",{type:"number",name:"dimensions.length",value:r.dimensions.length,onChange:l,className:d})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Lime (cm)"}),ui.jsx("input",{type:"number",name:"dimensions.width",value:r.dimensions.width,onChange:l,className:d})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"nlime (cm)"}),ui.jsx("input",{type:"number",name:"dimensions.height",value:r.dimensions.height,onChange:l,className:d})]}),ui.jsxs("div",{children:[ui.jsx("label",{className:f,children:"Greutate Max (kg)"}),ui.jsx("input",{type:"number",name:"weightCapacityMax",value:r.weightCapacityMax,onChange:l,className:`${d} font-bold text-slate-700`})]})]}),ui.jsxs("div",{className:"mt-4",children:[ui.jsx("label",{className:f,children:"URL Imagine Produs"}),ui.jsxs("div",{className:"flex gap-2",children:[ui.jsx("input",{type:"text",name:"imageUrl",value:r.imageUrl||"",onChange:l,placeholder:"https://...",className:`${d} text-xs text-blue-600 flex-1`}),r.imageUrl&&ui.jsx("div",{className:"w-10 h-10 rounded border bg-white flex items-center justify-center overflow-hidden shrink-0 shadow-sm",children:ui.jsx("img",{src:r.imageUrl,alt:"Thumb",className:"w-full h-full object-contain"})})]})]})]})]}),ui.jsxs("footer",{className:"px-6 py-4 border-t border-gray-100 flex justify-between items-center bg-gray-50/50",children:[ui.jsx("div",{className:"text-xs text-gray-400 font-medium italic",children:"* Modificrile sunt salvate doar n sesiunea curent."}),ui.jsxs("div",{className:"flex gap-3",children:[ui.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 text-sm font-bold text-gray-500 hover:text-gray-700 transition-colors uppercase tracking-wider",children:"ANULEAZ"}),ui.jsx("button",{onClick:u,className:"px-8 py-2 bg-blue-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-blue-700 transition-all hover:scale-[1.02] active:scale-95 uppercase tracking-wider",children:"SALVEAZ MODIFICRILE"})]})]})]})})},Xf=()=>{let e="594";for(let t=0;t<9;t++)e+=Math.floor(10*Math.random());return e+(e=>{let t=0;for(let r=0;r<12;r++){const n=parseInt(e[r]);if(isNaN(n))return-1;t+=r%2==0?1*n:3*n}const n=t%10;return 0===n?0:10-n})(e)},Yf=e=>{if(!e)return"";const t=String(e).trim();return/^\d+$/.test(t)?(13===t.length||t.length,t):t},$f=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsxs("div",{className:"w-[180mm] h-[130mm] border-4 border-double border-gray-800 p-3 relative bg-gray-50 text-gray-900 font-serif flex flex-col justify-between shadow-sm overflow-hidden box-border",children:[ui.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#000 1px, transparent 1px)",backgroundSize:"20px 20px"}}),ui.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[ui.jsxs("div",{className:"flex flex-row h-3/4",children:[ui.jsxs("div",{className:(n?"w-1/3":"w-1/2")+" flex flex-col items-center text-center border-r-2 border-dotted border-gray-400 pr-2",children:[ui.jsx("div",{className:(n?"h-20":"h-24")+" w-full flex items-center justify-center mb-1",children:t?ui.jsx("img",{src:t,alt:"Logo",className:"max-h-full max-w-full object-contain"}):ui.jsx("div",{className:"border-2 border-dashed border-gray-300 w-16 h-16 flex items-center justify-center text-gray-400 text-xs",children:"LOGO"})}),ui.jsx("h2",{className:(n?"text-xl":"text-4xl")+" font-bold uppercase mt-1 font-['Cinzel'] tracking-wider leading-tight",children:e.modelName}),ui.jsx("h3",{className:(n?"text-md":"text-2xl")+" font-bold uppercase mt-1 text-gray-700 font-['Playfair_Display']",children:e.sidesType}),ui.jsxs("p",{className:(n?"text-xs":"text-lg")+" uppercase text-gray-500 mt-1 font-sans font-bold",children:["Furnizor: ",e.furnizor]}),ui.jsxs("div",{className:"mt-auto mb-2 w-full",children:[ui.jsxs("h2",{className:(n?"text-2xl":"text-5xl")+" font-black mt-2 border-t-2 border-b-2 border-gray-800 py-1",children:[e.price," ",e.currency]}),ui.jsxs("div",{className:"mt-2",children:[ui.jsx("h3",{className:(n?"text-lg":"text-3xl")+" font-bold uppercase tracking-widest text-gray-800 leading-none",children:e.woodColor}),ui.jsx("p",{className:(n?"text-2xl":"text-5xl")+" font-black uppercase text-gray-900 mt-1",children:e.material})]})]})]}),n&&ui.jsxs("div",{className:"w-1/3 flex flex-col items-center text-center border-r-2 border-dotted border-gray-400 px-2 pt-1",children:[e.imageUrl&&ui.jsx("div",{className:"w-full h-24 mb-2 flex items-center justify-center",children:ui.jsx("img",{src:e.imageUrl,alt:e.modelName,className:"max-h-full max-w-full object-contain border border-gray-200 p-1 bg-white"})}),ui.jsx("h4",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-1 w-full",children:"Capitonaj Capac"}),ui.jsx("p",{className:"text-lg font-bold uppercase mb-2",children:e.lidFeature}),ui.jsx("div",{className:"flex flex-col gap-1 mt-1",children:e.accessories.map((e,t)=>ui.jsx("p",{className:"text-sm font-semibold uppercase leading-tight",children:e},t))})]}),ui.jsxs("div",{className:(n?"w-1/3":"w-1/2")+" flex flex-col items-center text-center pl-2 pt-2",children:[!n&&ui.jsxs("div",{className:"mb-4 w-full border-b-2 border-gray-300 pb-2",children:[ui.jsxs("h4",{className:"text-xl font-bold uppercase text-gray-500",children:["Capitonaj: ",ui.jsx("span",{className:"text-black",children:e.lidFeature})]}),ui.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-1",children:e.accessories.map((e,t)=>ui.jsx("span",{className:"text-lg font-bold uppercase border border-gray-400 px-2",children:e},t))})]}),ui.jsx("h4",{className:(n?"text-sm":"text-xl")+" font-bold uppercase border-b border-gray-400 pb-1 mb-2 w-full",children:"Cruce Inscripionat:"}),ui.jsx("ul",{className:"w-full",children:e.crossOptions.map((e,t)=>ui.jsxs("li",{className:`flex justify-between ${n?"text-sm":"text-xl"} font-bold uppercase px-1 mb-1`,children:[ui.jsx("span",{children:e.type}),ui.jsxs("span",{children:[e.price," LEI"]})]},t))}),ui.jsxs("div",{className:"mt-auto w-full mb-2",children:[ui.jsxs("div",{className:`flex justify-between ${n?"text-sm":"text-xl"} font-bold uppercase px-1 mb-1`,children:[ui.jsx("span",{children:"ACCESORII:"}),ui.jsxs("span",{children:[e.accessoriesPrice," LEI"]})]}),ui.jsxs("div",{className:`flex justify-between ${n?"text-sm":"text-xl"} font-bold uppercase px-1`,children:[ui.jsx("span",{children:"CRUCIFIX:"}),ui.jsxs("span",{children:[e.crucifixPrice," LEI"]})]}),ui.jsx("div",{className:"mt-2 text-right opacity-80 flex flex-col items-end",children:ui.jsx("div",{style:{transform:n?"scaleX(2)":"scale(2.5) translateX(-20%)",transformOrigin:"right bottom"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:(n?"text-5xl":"text-6xl")+" leading-none",children:r})})})]})]})]}),ui.jsxs("div",{className:"h-1/4 border-t-2 border-gray-800 flex mt-1 pt-1",children:[ui.jsxs("div",{className:"w-1/2 flex flex-col items-center justify-center border-r border-gray-400",children:[ui.jsx("h5",{className:(n?"text-sm":"text-xl")+" font-bold uppercase mb-1 text-gray-600",children:"Dimensiuni:"}),ui.jsxs("p",{className:(n?"text-2xl":"text-4xl")+" font-black uppercase",children:[[e.dimensions.length>0?`L-${e.dimensions.length}`:null,e.dimensions.width>0?`l-${e.dimensions.width}`:null,e.dimensions.height>0?`H-${e.dimensions.height}`:null].filter(Boolean).join(", ")," CM"]})]}),ui.jsxs("div",{className:"w-1/2 flex flex-col items-center justify-center",children:[ui.jsx("h5",{className:(n?"text-sm":"text-xl")+" font-bold uppercase mb-1 text-gray-600",children:"Greutate Suportat:"}),ui.jsxs("p",{className:(n?"text-2xl":"text-4xl")+" font-black",children:["Pn la: ",e.weightCapacityMin,"-",e.weightCapacityMax," KG"]})]})]})]})]})},Kf=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsxs("div",{className:"w-[180mm] h-[130mm] bg-white border border-gray-200 text-slate-800 font-sans flex flex-row overflow-hidden shadow-sm relative",children:[ui.jsxs("div",{className:(n?"w-[60mm]":"w-[80mm]")+" bg-slate-900 text-white p-4 flex flex-col justify-between shrink-0 transition-all",children:[ui.jsx("div",{className:"h-20 w-full flex items-center justify-center mb-4 bg-white/10 rounded-lg p-2",children:t?ui.jsx("img",{src:t,alt:"Logo",className:"max-h-full max-w-full object-contain"}):ui.jsx("span",{className:"text-gray-400 text-xs",children:"LOGO"})}),ui.jsxs("div",{children:[ui.jsx("h2",{className:(n?"text-2xl":"text-4xl")+" font-bold uppercase tracking-wide leading-none",children:e.modelName}),ui.jsx("p",{className:"text-slate-400 uppercase tracking-widest text-xs mt-1",children:e.sidesType}),ui.jsxs("div",{className:"mt-4",children:[ui.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"Culoare"}),ui.jsx("p",{className:(n?"text-lg":"text-3xl")+" font-semibold text-amber-500 leading-tight",children:e.woodColor}),ui.jsx("p",{className:"text-[10px] text-slate-400 uppercase mt-2",children:"Material"}),ui.jsx("p",{className:(n?"text-2xl":"text-5xl")+" font-black text-white uppercase",children:e.material}),ui.jsx("p",{className:"text-[10px] text-slate-400 uppercase mt-2",children:"Furnizor"}),ui.jsx("p",{className:(n?"text-sm":"text-xl")+" font-bold text-gray-300 uppercase",children:e.furnizor})]})]}),ui.jsxs("div",{className:"mt-auto",children:[ui.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"Pre Final"}),ui.jsxs("p",{className:(n?"text-3xl":"text-6xl")+" font-bold text-white mb-2",children:[e.price," ",ui.jsx("span",{className:(n?"text-sm":"text-xl")+" font-normal",children:e.currency})]}),ui.jsx("div",{className:"bg-white p-1 rounded flex flex-col items-center overflow-hidden",children:ui.jsx("div",{style:{transform:n?"scaleX(1.5)":"scaleX(2)",transformOrigin:"center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl text-black leading-none block",children:r})})})]})]}),ui.jsxs("div",{className:"flex-grow p-4 flex flex-col",children:[ui.jsxs("div",{className:"flex gap-4 mb-4 "+(n?"h-24":"h-auto flex-grow"),children:[n&&e.imageUrl&&ui.jsx("div",{className:"w-1/3 bg-slate-50 rounded border border-slate-100 flex items-center justify-center p-1",children:ui.jsx("img",{src:e.imageUrl,alt:e.modelName,className:"max-h-full max-w-full object-contain mix-blend-multiply"})}),ui.jsxs("div",{className:"flex-grow flex flex-col justify-center",children:[ui.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Capitonaj"}),ui.jsx("p",{className:(n?"font-semibold text-base":"font-bold text-3xl")+" mb-2",children:e.lidFeature}),ui.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Include"}),ui.jsx("div",{className:(n?"text-xs":"text-xl font-medium")+" space-y-0.5",children:e.accessories.map((e,t)=>ui.jsxs("span",{className:`inline-block mr-2 bg-slate-100 px-1 rounded text-slate-600 ${!n&&"p-2 mb-1"}`,children:[" ",e]},t))})]})]}),ui.jsxs("div",{className:"grid grid-cols-2 gap-4 "+(n?"h-full":"h-1/2"),children:[ui.jsxs("div",{className:"flex flex-col",children:[ui.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Opiuni Cruce"}),ui.jsx("div",{className:"space-y-1 flex-grow",children:e.crossOptions.map((e,t)=>ui.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 "+(n?"pb-0.5":"pb-2"),children:[ui.jsx("span",{className:n?"font-medium text-xs":"font-bold text-xl",children:e.type}),ui.jsxs("span",{className:(n?"font-bold text-xs":"font-black text-xl")+" text-slate-900",children:[e.price," LEI"]})]},t))}),ui.jsxs("div",{className:"bg-slate-50 p-2 rounded border border-slate-100 mt-2",children:[ui.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[ui.jsx("span",{className:(n?"":"text-lg")+" text-slate-500",children:"Accesorii"}),ui.jsxs("span",{className:n?"font-bold":"font-black text-xl",children:[e.accessoriesPrice," LEI"]})]}),ui.jsxs("div",{className:"flex justify-between text-xs",children:[ui.jsx("span",{className:(n?"":"text-lg")+" text-slate-500",children:"Crucifix"}),ui.jsxs("span",{className:n?"font-bold":"font-black text-xl",children:[e.crucifixPrice," LEI"]})]})]})]}),ui.jsx("div",{className:"flex flex-col justify-end",children:ui.jsxs("div",{className:"grid grid-cols-1 gap-2 text-center",children:[ui.jsxs("div",{className:"bg-slate-100 p-2 rounded",children:[ui.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Dimensiuni (cm)"}),ui.jsx("p",{className:(n?"text-xl":"text-2xl")+" font-bold leading-tight",children:[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join(" x ")})]}),ui.jsxs("div",{className:"bg-slate-100 p-2 rounded",children:[ui.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Greutate (kg)"}),ui.jsxs("p",{className:(n?"text-xl":"text-2xl")+" font-bold leading-tight",children:[e.weightCapacityMin," - ",e.weightCapacityMax]})]})]})})]})]})]})},Jf=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsxs("div",{className:"w-[180mm] h-[130mm] bg-white border-2 border-gray-900 p-6 text-gray-900 font-mono flex flex-col justify-between relative box-border overflow-hidden",children:[ui.jsxs("div",{className:"flex justify-between items-start border-b-2 border-gray-900 pb-2 mb-2",children:[ui.jsxs("div",{className:"w-2/3",children:[ui.jsx("h1",{className:(n?"text-3xl":"text-5xl")+" font-black uppercase tracking-tighter leading-none",children:e.modelName}),ui.jsxs("div",{className:"flex gap-4 items-baseline mt-2",children:[ui.jsx("span",{className:"text-sm uppercase font-bold",children:e.sidesType}),ui.jsx("span",{className:"text-sm uppercase font-bold text-gray-600",children:e.woodColor}),ui.jsx("span",{className:(n?"text-2xl":"text-4xl")+" uppercase font-black bg-gray-900 text-white px-2",children:e.material})]})]}),ui.jsxs("div",{className:"text-right w-1/3 flex flex-col items-end",children:[ui.jsxs("h2",{className:(n?"text-3xl":"text-6xl")+" font-bold",children:[e.price," ",e.currency]}),t?ui.jsx("img",{src:t,alt:"Logo",className:"h-8 object-contain mt-1 ml-auto grayscale"}):ui.jsx("span",{className:"text-[10px] uppercase border border-gray-400 px-1 mt-1 inline-block",children:"Logo"}),ui.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-500 mt-1",children:["Furnizor: ",e.furnizor]})]})]}),ui.jsxs("div",{className:"grid grid-cols-2 gap-6 flex-grow",children:[ui.jsxs("div",{className:"flex flex-col gap-4 justify-center",children:[ui.jsxs("div",{children:[ui.jsx("span",{className:"bg-gray-900 text-white px-1.5 py-0.5 text-xs font-bold uppercase",children:"Capitonaj"}),ui.jsx("p",{className:(n?"text-lg":"text-3xl")+" font-bold mt-1",children:e.lidFeature})]}),ui.jsxs("div",{children:[ui.jsx("span",{className:"bg-gray-200 text-gray-900 px-1.5 py-0.5 text-xs font-bold uppercase",children:"Include"}),ui.jsx("ul",{className:"mt-1 space-y-0.5 list-disc list-inside font-semibold "+(n?"text-sm":"text-xl"),children:e.accessories.map((e,t)=>ui.jsx("li",{children:e},t))})]})]}),ui.jsxs("div",{className:"flex flex-col h-full",children:[n&&e.imageUrl?ui.jsx("div",{className:"w-full h-24 border border-gray-200 mb-2 flex items-center justify-center p-1",children:ui.jsx("img",{src:e.imageUrl,alt:"Product",className:"max-h-full max-w-full object-contain grayscale"})}):!n&&ui.jsx("div",{className:"flex-grow"}),ui.jsxs("div",{className:"mt-auto",children:[ui.jsx("span",{className:"bg-gray-200 text-gray-900 px-1.5 py-0.5 text-xs font-bold uppercase",children:"Opiuni Cruce"}),ui.jsx("ul",{className:"mt-1 space-y-1 "+(n?"text-sm":"text-lg"),children:e.crossOptions.map((e,t)=>ui.jsxs("li",{className:"flex justify-between border-b border-gray-300 border-dashed pb-0.5",children:[ui.jsx("span",{children:e.type}),ui.jsx("span",{className:"font-bold",children:e.price})]},t))}),ui.jsxs("div",{className:`flex justify-between items-center ${n?"text-xs":"text-lg"} font-bold mt-2`,children:[ui.jsx("span",{children:"ACCESORII EXTRA:"}),ui.jsxs("span",{children:[e.accessoriesPrice," LEI"]})]}),ui.jsxs("div",{className:`flex justify-between items-center ${n?"text-xs":"text-lg"} font-bold`,children:[ui.jsx("span",{children:"CRUCIFIX:"}),ui.jsxs("span",{children:[e.crucifixPrice," LEI"]})]})]})]})]}),ui.jsxs("div",{className:"border-t-2 border-gray-900 pt-2 flex justify-between items-center bg-gray-50 p-3 -mx-6 -mb-6 mt-2",children:[ui.jsxs("div",{className:(n?"text-xl":"text-3xl")+" font-black uppercase text-center",children:[[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join("x")," CM"]}),ui.jsx("div",{className:"text-right flex flex-col items-center",children:ui.jsx("div",{style:{transform:n?"scaleX(2)":"scale(2.5)",transformOrigin:"center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:(n?"text-5xl":"text-6xl")+" leading-none block",children:r})})}),ui.jsxs("div",{className:(n?"text-xl":"text-3xl")+" font-black uppercase",children:["MAX ",e.weightCapacityMax," KG"]})]})]})},Zf=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code),o=[];e.dimensions.length>0&&o.push(e.dimensions.length),e.dimensions.width>0&&o.push(e.dimensions.width),e.dimensions.height>0&&o.push(e.dimensions.height);const i=o.length>0?o.join("x")+" CM":"";return e.isSmallLabel?ui.jsxs("div",{className:"w-[140mm] h-[100mm] bg-[#fffbf0] border-[6px] border-double border-[#8B5A2B] pt-4 px-6 pb-6 text-[#3e2723] flex flex-col box-border relative overflow-hidden",children:[ui.jsx("div",{className:"absolute top-1.5 left-1.5 w-8 h-8 border-t-2 border-l-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute top-1.5 right-1.5 w-8 h-8 border-t-2 border-r-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute bottom-1.5 left-1.5 w-8 h-8 border-b-2 border-l-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute bottom-1.5 right-1.5 w-8 h-8 border-b-2 border-r-2 border-[#8B5A2B] opacity-40"}),ui.jsxs("div",{className:"flex justify-between items-start mb-1 h-20",children:[ui.jsxs("div",{className:"w-[60%] flex flex-col items-center justify-center h-full",children:[ui.jsx("h1",{className:"text-2xl font-serif text-[#8B5A2B] tracking-wide font-bold leading-tight text-center uppercase",children:e.modelName}),ui.jsx("p",{className:"text-[14px] font-bold uppercase tracking-widest text-[#8B5A2B] mt-1",children:e.material})]}),ui.jsx("div",{className:"w-[40%] h-full flex items-center justify-center p-1",children:t&&"null"!==t&&ui.jsx("img",{src:t,alt:"Logo",className:"max-h-full max-w-full object-contain"})})]}),ui.jsxs("div",{className:"flex-grow flex flex-col justify-center items-center py-2",children:[ui.jsxs("div",{className:"flex items-center gap-2 bg-[#8B5A2B]/5 px-3 py-1 border-t border-b border-[#8B5A2B]/20 mb-1",children:[ui.jsx("p",{className:"text-xl uppercase text-[#3e2723] font-black tracking-widest leading-none",children:i}),e.sizeClass&&ui.jsx("div",{className:"bg-[#8B5A2B] text-white px-2 py-0.5 rounded text-sm font-black",children:e.sizeClass})]}),ui.jsxs("p",{className:"text-[12px] font-bold text-[#8B5A2B] uppercase",children:["Producator: ",e.furnizor]})]}),ui.jsxs("div",{className:"flex items-end justify-between mt-auto",children:[ui.jsxs("div",{className:"flex items-baseline gap-1",children:[ui.jsx("p",{className:"text-4xl font-serif font-bold text-[#8B5A2B] leading-none",children:e.price}),ui.jsx("span",{className:"text-2xl font-serif font-bold text-[#8B5A2B]",children:e.currency})]}),ui.jsxs("div",{className:"flex flex-col items-center justify-end",children:[ui.jsx("div",{style:{transform:"scale(1.4, 0.8)",transformOrigin:"bottom center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none block",children:r})}),ui.jsx("p",{className:"text-sm font-bold tracking-[0.2em] text-black font-mono mt-1",children:e.code})]})]})]}):ui.jsxs("div",{className:"w-[190mm] h-[130mm] bg-[#fffbf0] border-[8px] border-double border-[#8B5A2B] pt-2 px-10 pb-10 text-[#3e2723] flex flex-col box-border relative overflow-hidden",children:[ui.jsx("div",{className:"absolute top-2 left-2 w-12 h-12 border-t-2 border-l-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute top-2 right-2 w-12 h-12 border-t-2 border-r-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute bottom-2 left-2 w-12 h-12 border-b-2 border-l-2 border-[#8B5A2B] opacity-40"}),ui.jsx("div",{className:"absolute bottom-2 right-2 w-12 h-12 border-b-2 border-r-2 border-[#8B5A2B] opacity-40"}),ui.jsxs("div",{className:"flex items-center justify-between my-1 relative z-10 pb-2 h-36",children:[ui.jsxs("div",{className:"w-1/2 flex flex-col items-center justify-center pr-1 h-full py-1",children:[ui.jsx("h1",{className:(n?"text-3xl":"text-4xl")+" font-serif text-[#8B5A2B] tracking-wide font-bold leading-[.9] text-center uppercase",children:e.modelName}),ui.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1.5 text-base uppercase tracking-widest font-bold text-center",children:[e.sidesType&&ui.jsx("span",{children:e.sidesType}),e.sidesType&&e.woodColor&&ui.jsx("span",{className:"w-1 h-1 rounded-full bg-[#8B5A2B]"}),e.woodColor&&ui.jsx("span",{children:e.woodColor}),e.woodColor&&e.material&&ui.jsx("span",{className:"w-1 h-1 rounded-full bg-[#8B5A2B]"}),e.material&&ui.jsx("span",{children:e.material})]}),e.showCompleteEchipat&&ui.jsx("h2",{className:"font-serif italic text-xl text-[#8B5A2B]",children:"SICRIU COMPLET ECHIPAT"})]}),ui.jsx("div",{className:"w-1/2 flex items-center justify-center h-full",children:t&&"null"!==t?ui.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",children:ui.jsx("img",{src:t,alt:"Logo",className:"max-h-full max-w-full object-contain",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='<span class="text-[#8B5A2B] font-serif text-xl italic">Logo Firm</span>'}})}):ui.jsx("div",{className:"border-2 border-dashed border-[#8B5A2B]/20 p-1 rounded-xl flex items-center justify-center",children:ui.jsx("span",{className:"text-[#8B5A2B] font-serif text-lg italic",children:"Fr Logo"})})})]}),ui.jsxs("div",{className:`flex-grow grid ${n?"grid-cols-3":"grid-cols-2"} gap-4 relative z-10 px-2`,children:[ui.jsxs("div",{className:"flex flex-col items-center text-center pr-2 h-full",children:[ui.jsxs("div",{className:"flex-grow flex flex-col justify-center w-full",children:[e.showDetaliiInterior&&ui.jsx("h2",{className:"font-serif italic text-xl text-[#8B5A2B] mb-1.5 text-center",children:"DETALII INTERIOR"}),ui.jsx("p",{className:"text-xl font-medium mb-1 leading-none",children:e.lidFeature}),ui.jsx("div",{className:"space-y-0.5 mt-1.1",children:e.accessories.map((e,t)=>ui.jsx("p",{className:"text-[#5D4037] font-medium text-xl",children:e},t))})]}),ui.jsxs("div",{className:"pt-1 shrink-0 w-full mb-1",children:[!n&&(i||e.sizeClass)&&ui.jsxs("div",{className:"mb-1 border-t border-b border-[#8B5A2B]/30 py-1 bg-[#8B5A2B]/5",children:[ui.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i&&ui.jsx("p",{className:"text-2xl uppercase text-[#3e2723] font-black tracking-widest leading-none",children:i}),e.sizeClass&&ui.jsx("div",{className:"flex items-center justify-center bg-[#8B5A2B] text-white px-3 py-1 rounded-md",children:ui.jsx("span",{className:"text-xl font-black",children:e.sizeClass})})]}),e.weightCapacityMax>0&&ui.jsxs("p",{className:"text-xl uppercase text-[#8B5A2B] font-bold tracking-widest mt-1",children:["Max ",e.weightCapacityMax," kg"]})]}),ui.jsxs("p",{className:"text-[16px] font-bold text-[#8B5A2B] uppercase",children:["Producator: ",e.furnizor]}),ui.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[ui.jsx("p",{className:(n?"text-2xl":"text-5xl")+" font-serif font-bold text-[#8B5A2B] leading-none",children:e.price}),ui.jsx("span",{className:(n?"text-lg":"text-4xl")+" font-serif font-bold text-[#8B5A2B]",children:e.currency})]})]})]}),n&&ui.jsxs("div",{className:"flex flex-col items-center justify-center px-1",children:[e.imageUrl&&ui.jsx("div",{className:"w-full h-32 border-[4px] border-[#8B5A2B]/10 p-1 bg-white mb-4",children:ui.jsx("img",{src:e.imageUrl,alt:e.modelName,className:"w-full h-full object-contain"})}),i&&ui.jsxs("div",{className:"bg-[#8B5A2B]/5 p-2 w-full text-center",children:[ui.jsxs("div",{className:"flex items-center justify-center gap-2",children:[ui.jsx("p",{className:"text-xl uppercase text-[#8B5A2B] font-black tracking-widest text-center leading-tight",children:i}),e.sizeClass&&ui.jsx("div",{className:"bg-[#8B5A2B] text-white px-2 py-0.5 rounded text-sm font-bold",children:e.sizeClass})]}),e.weightCapacityMax>0&&ui.jsxs("p",{className:"text-xl uppercase text-[#8B5A2B] font-black tracking-widest text-center leading-tight mt-1",children:["Max ",e.weightCapacityMax," kg"]})]})]}),ui.jsxs("div",{className:"flex flex-col pl-1 overflow-hidden h-full",children:[ui.jsx("div",{className:"flex-grow flex flex-col justify-center w-full",children:e.crossOptions.some(e=>e.price>0)&&ui.jsxs(ui.Fragment,{children:[ui.jsx("h2",{className:"font-serif italic text-xl text-[#8B5A2B] mb-2 text-center",children:"CRUCE INSCRIPTIONATA"}),ui.jsx("div",{className:`space-y-1 ${n?"text-xs":"text-lg font-bold"} w-[80%] mx-auto`,children:e.crossOptions.filter(e=>e.price>0).map((e,t)=>ui.jsxs("div",{className:"flex justify-between items-end",children:[ui.jsx("span",{className:"font-bold uppercase text-[#5D4037]",children:e.type}),ui.jsx("span",{className:"border-b border-dotted border-[#8B5A2B] flex-grow mx-1 mb-1"}),ui.jsxs("span",{className:"font-bold",children:[e.price," Lei"]})]},t))})]})}),ui.jsxs("div",{className:`pt-2 border-t border-[#8B5A2B]/20 space-y-1.5 ${n?"text-sm":"text-xl"} shrink-0 mt-2 w-[80%] mx-auto`,children:[e.accessoriesPrice>0&&ui.jsxs("div",{className:"flex justify-between",children:[ui.jsx("span",{className:"text-[#8B5A2B] italic",children:"Accesorii:"}),ui.jsxs("span",{className:"font-bold",children:[e.accessoriesPrice," Lei"]})]}),e.crucifixPrice>0&&ui.jsxs("div",{className:"flex justify-between",children:[ui.jsx("span",{className:"text-[#8B5A2B] italic",children:"Crucifix:"}),ui.jsxs("span",{className:"font-bold",children:[e.crucifixPrice," Lei"]})]}),ui.jsx("div",{className:"text-center pt-2 flex flex-col items-center justify-end relative min-h-[100px]",children:ui.jsxs("div",{className:"flex flex-col items-center justify-center",children:[ui.jsx("div",{style:{transform:n?"scale(2.2, 1)":"scale(2.1, 1)",transformOrigin:"bottom center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-6xl leading-none block",children:r})}),ui.jsx("p",{className:"text-lg font-bold tracking-[0.1em] text-black font-mono",children:e.code})]})})]})]})]})]})},Qf=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsx("div",{className:"w-[180mm] h-[130mm] bg-white border-[8px] border-[#1a237e] p-1 text-[#1a237e] flex flex-col box-border relative overflow-hidden",children:ui.jsxs("div",{className:"w-full h-full border-[2px] border-[#ffd700] p-4 flex flex-col relative",children:[ui.jsxs("div",{className:"flex flex-col items-center border-b-2 border-[#1a237e] pb-2 mb-2",children:[ui.jsx("div",{className:"h-16 w-full flex items-center justify-center mb-1",children:t?ui.jsx("img",{src:t,alt:"Logo",className:"max-h-full max-w-full object-contain"}):ui.jsx("div",{className:"text-2xl font-serif font-bold text-[#1a237e] uppercase tracking-widest",children:"Royal Funeral"})}),ui.jsx("h1",{className:(n?"text-4xl":"text-6xl")+" font-['Cinzel'] font-bold uppercase tracking-wide leading-none text-center",children:e.modelName}),ui.jsxs("div",{className:"flex gap-6 mt-2 items-baseline",children:[ui.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:e.sidesType}),ui.jsx("span",{className:"w-2 h-2 rounded-full bg-[#ffd700]"}),ui.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:e.woodColor}),ui.jsx("span",{className:"w-2 h-2 rounded-full bg-[#ffd700]"}),ui.jsx("span",{className:(n?"text-2xl":"text-5xl")+" font-black uppercase text-[#1a237e]",children:e.material})]})]}),ui.jsxs("div",{className:`flex-grow grid ${n?"grid-cols-3":"grid-cols-2"} gap-4`,children:[ui.jsxs("div",{className:"flex flex-col justify-center text-center space-y-2",children:[ui.jsxs("div",{children:[ui.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-1",children:"Capitonaj"}),ui.jsx("p",{className:`font-serif ${n?"text-lg":"text-3xl"} font-bold`,children:e.lidFeature})]}),ui.jsxs("div",{children:[ui.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-1",children:"Accesorii Incluse"}),ui.jsx("ul",{className:(n?"text-xs":"text-base")+" font-bold space-y-0.5",children:e.accessories.map((e,t)=>ui.jsx("li",{children:e},t))})]}),ui.jsxs("div",{className:"mt-2 p-2 border border-[#1a237e] rounded",children:[ui.jsx("p",{className:(n?"text-3xl":"text-6xl")+" font-black",children:e.price}),ui.jsx("p",{className:"text-xs font-bold",children:e.currency})]})]}),n&&ui.jsx("div",{className:"flex items-center justify-center p-2",children:e.imageUrl?ui.jsx("img",{src:e.imageUrl,className:"max-h-32 object-contain drop-shadow-xl"}):ui.jsx("span",{className:"text-xs text-gray-300",children:"FOTO"})}),ui.jsxs("div",{className:"flex flex-col justify-center text-center space-y-2",children:[ui.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-1",children:"Opiuni Cruce"}),ui.jsx("ul",{className:(n?"text-xs":"text-base")+" space-y-1 w-full",children:e.crossOptions.map((e,t)=>ui.jsxs("li",{className:"flex justify-between border-b border-gray-200 pb-0.5",children:[ui.jsx("span",{className:"font-bold",children:e.type}),ui.jsx("span",{children:e.price})]},t))}),ui.jsxs("div",{className:`mt-auto ${n?"text-xs":"text-sm"} space-y-1 pt-2`,children:[ui.jsxs("div",{className:"flex justify-between font-bold",children:[ui.jsx("span",{children:"Accesorii:"}),ui.jsx("span",{children:e.accessoriesPrice})]}),ui.jsxs("div",{className:"flex justify-between font-bold",children:[ui.jsx("span",{children:"Crucifix:"}),ui.jsx("span",{children:e.crucifixPrice})]})]})]})]}),ui.jsxs("div",{className:"mt-2 bg-[#1a237e] text-white p-2 flex justify-between items-center -mx-4 -mb-4",children:[ui.jsxs("div",{className:"text-center w-1/2",children:[ui.jsxs("span",{className:`block ${n?"text-xl":"text-3xl"} font-bold uppercase tracking-wider`,children:[[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join(" x ")," cm"]}),ui.jsxs("span",{className:`block ${n?"text-xl":"text-3xl"} font-bold uppercase tracking-wider text-[#ffd700]`,children:["Cap: ",e.weightCapacityMax," KG"]}),ui.jsxs("span",{className:"block text-xs uppercase tracking-widest text-gray-300 mt-0.5",children:["Furnizor: ",e.furnizor]})]}),ui.jsx("div",{className:"bg-white text-black px-2 py-1 rounded w-1/2 text-center flex flex-col items-center justify-center",children:ui.jsx("div",{style:{transform:n?"scaleX(2)":"scale(2.5)",transformOrigin:"center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none block",children:r})})})]})]})})},ep=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsx("div",{className:"w-[180mm] h-[130mm] bg-[#fdfbf7] p-3 box-border overflow-hidden relative text-[#4a4a4a]",children:ui.jsx("div",{className:"w-full h-full border-4 border-double border-[#8d6e63] rounded-lg p-1 relative",children:ui.jsxs("div",{className:"w-full h-full border border-[#8d6e63] rounded p-3 flex flex-col relative",children:[ui.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-[#8d6e63] rounded-tl-lg"}),ui.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-[#8d6e63] rounded-tr-lg"}),ui.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-[#8d6e63] rounded-bl-lg"}),ui.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-[#8d6e63] rounded-br-lg"}),ui.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-[#d7ccc8] pb-2",children:[ui.jsxs("div",{className:"w-1/4",children:[t?ui.jsx("img",{src:t,alt:"Logo",className:"max-h-14 max-w-full object-contain grayscale opacity-80"}):ui.jsx("div",{className:"text-[10px] text-center border p-1 italic",children:"Logo"}),ui.jsx("div",{className:"text-[9px] uppercase font-bold text-[#8d6e63] mt-1 text-center",children:e.furnizor})]}),ui.jsxs("div",{className:"text-center w-1/2",children:[ui.jsx("h1",{className:`font-serif ${n?"text-3xl":"text-5xl"} text-[#5d4037] font-bold tracking-tight uppercase leading-none`,children:e.modelName}),ui.jsxs("p",{className:"font-serif italic text-[#8d6e63] text-sm",children:[e.woodColor,"  ",e.sidesType]}),ui.jsx("p",{className:`font-bold uppercase text-[#3e2723] ${n?"text-xl":"text-3xl"} mt-1`,children:e.material})]}),ui.jsx("div",{className:"w-1/4 text-right",children:ui.jsxs("div",{className:"inline-block border-2 border-[#5d4037] p-1.5 rounded transform rotate-[-2deg] bg-[#efebe9]",children:[ui.jsx("p",{className:(n?"text-xl":"text-4xl")+" font-bold leading-none",children:e.price}),ui.jsx("p",{className:"text-[10px] font-bold text-center",children:e.currency})]})})]}),ui.jsxs("div",{className:"flex-grow grid grid-cols-12 gap-4",children:[ui.jsxs("div",{className:n?"col-span-4":"col-span-6",children:[ui.jsx("h3",{className:"font-bold border-b border-[#8d6e63] mb-1 text-[#5d4037] uppercase text-xs",children:"Specificaii"}),ui.jsxs("div",{className:"pl-2 border-l-2 border-[#d7ccc8]",children:[ui.jsx("p",{className:`font-serif ${n?"text-lg":"text-2xl"} mb-1`,children:e.lidFeature}),ui.jsx("ul",{className:(n?"text-xs":"text-sm font-semibold")+" list-disc list-inside space-y-0.5 italic text-gray-700",children:e.accessories.map((e,t)=>ui.jsx("li",{children:e},t))})]}),ui.jsxs("div",{className:"mt-4",children:[ui.jsx("h3",{className:"font-bold border-b border-[#8d6e63] mb-1 text-[#5d4037] uppercase text-xs",children:"Extra"}),ui.jsx("div",{className:n?"text-xs":"text-sm font-semibold",children:e.crossOptions.map((e,t)=>ui.jsxs("div",{className:"flex justify-between",children:[ui.jsx("span",{children:e.type}),ui.jsxs("span",{className:"font-bold",children:[e.price," Lei"]})]},t))})]})]}),n&&ui.jsx("div",{className:"col-span-4 flex flex-col items-center justify-center",children:e.imageUrl&&ui.jsx("div",{className:"bg-white p-2 shadow-md border border-[#d7ccc8] transform rotate-1",children:ui.jsx("img",{src:e.imageUrl,alt:"Product",className:"w-full h-auto max-h-32 object-contain sepia-[.3]"})})}),ui.jsxs("div",{className:n?"col-span-4 text-right":"col-span-6 text-right",children:[ui.jsx("h3",{className:"font-bold border-b border-[#8d6e63] mb-1 text-[#5d4037] uppercase text-xs",children:"Totaluri"}),ui.jsx("table",{className:"w-full "+(n?"text-xs":"text-sm"),children:ui.jsxs("tbody",{children:[ui.jsxs("tr",{children:[ui.jsx("td",{className:"py-1 italic pt-2",children:"Accesorii"}),ui.jsxs("td",{className:"text-right pt-2 font-bold",children:[e.accessoriesPrice," Lei"]})]}),ui.jsxs("tr",{children:[ui.jsx("td",{className:"py-1 italic",children:"Crucifix"}),ui.jsxs("td",{className:"text-right font-bold",children:[e.crucifixPrice," Lei"]})]})]})}),ui.jsxs("div",{className:"mt-4 border border-[#d7ccc8] p-2 bg-[#efebe9] text-center shadow-sm relative",children:[ui.jsx("p",{className:"text-[10px] uppercase text-[#8d6e63]",children:"Dimensiuni & Greutate"}),ui.jsxs("p",{className:`font-black ${n?"text-lg":"text-2xl"} text-[#3e2723] leading-none mb-1`,children:[[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join(" x ")," cm"]}),ui.jsxs("p",{className:`font-black ${n?"text-lg":"text-2xl"} text-[#3e2723] leading-none`,children:[e.weightCapacityMin,"-",e.weightCapacityMax," kg"]})]}),ui.jsx("div",{className:"mt-2 opacity-80 transform rotate-1 text-right flex flex-col items-end",children:ui.jsx("div",{style:{transform:n?"scaleX(2)":"scale(2.5) translateX(-20%)",transformOrigin:"right"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none",children:r})})})]})]})]})})})},tp=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsxs("div",{className:"w-[180mm] h-[130mm] bg-white text-gray-800 font-sans p-6 box-border overflow-hidden relative flex flex-col",children:[ui.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gray-800"}),ui.jsx("div",{className:"absolute top-3 left-0 w-full h-px bg-gray-300"}),ui.jsxs("div",{className:"flex justify-between items-end mb-4 mt-2",children:[ui.jsxs("div",{children:[ui.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-400 mb-0.5",children:"Sicriu Model"}),ui.jsx("h1",{className:(n?"text-4xl":"text-6xl")+" font-light tracking-tight text-gray-900",children:e.modelName})]}),ui.jsx("div",{className:"text-right",children:t?ui.jsx("img",{src:t,alt:"Logo",className:"h-12 object-contain"}):ui.jsx("span",{className:"text-lg font-serif italic text-gray-400",children:"Brand Logo"})})]}),ui.jsxs("div",{className:"grid grid-cols-12 gap-4 flex-grow border-t border-b border-gray-200 py-4",children:[ui.jsxs("div",{className:(n?"col-span-3":"col-span-5")+" border-r border-gray-100 pr-2 flex flex-col justify-center",children:[ui.jsx("h3",{className:"text-[10px] font-bold uppercase text-gray-400 mb-1",children:"Detalii"}),ui.jsx("p",{className:(n?"text-md":"text-2xl")+" font-bold mb-0.5",children:e.woodColor}),ui.jsx("p",{className:(n?"text-sm":"text-xl")+" text-gray-600 mb-2",children:e.sidesType}),ui.jsx("h3",{className:"text-[10px] font-bold uppercase text-gray-400 mb-1",children:"Material"}),ui.jsx("p",{className:(n?"text-xl":"text-4xl")+" font-black text-gray-800 mb-4",children:e.material}),ui.jsx("h3",{className:"text-[10px] font-bold uppercase text-gray-400 mb-1",children:"Furnizor"}),ui.jsx("p",{className:"text-sm font-bold text-gray-800 mb-2",children:e.furnizor}),ui.jsx("h3",{className:"text-[10px] font-bold uppercase text-gray-400 mb-1 mt-auto",children:"Pre Total"}),ui.jsxs("p",{className:(n?"text-2xl":"text-5xl")+" font-bold text-gray-900",children:[e.price," ",ui.jsx("span",{className:"text-xs font-normal text-gray-500",children:e.currency})]})]}),ui.jsxs("div",{className:`${n?"col-span-5":"col-span-7"} ${n?"border-r border-gray-100":""} pr-2 pl-2`,children:[ui.jsx("h3",{className:"text-[10px] font-bold uppercase text-gray-400 mb-2",children:"Configuraie"}),ui.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ui.jsxs("div",{className:"space-y-2",children:[ui.jsxs("div",{children:[ui.jsx("span",{className:`block ${n?"text-xs":"text-xl"} font-semibold text-gray-900`,children:e.lidFeature}),ui.jsx("span",{className:"text-[10px] text-gray-500",children:"Capitonaj Capac"})]}),ui.jsx("ul",{className:(n?"text-xs":"text-sm font-medium")+" space-y-0.5 text-gray-700 mt-2",children:e.accessories.map((e,t)=>ui.jsxs("li",{children:[" ",e]},t))})]}),ui.jsxs("ul",{className:"space-y-1 "+(n?"text-xs":"text-sm font-medium"),children:[e.crossOptions.map((e,t)=>ui.jsxs("li",{className:"flex justify-between",children:[ui.jsx("span",{children:e.type}),ui.jsx("span",{className:"font-semibold",children:e.price})]},t)),ui.jsxs("li",{className:"flex justify-between pt-1 border-t border-gray-100 mt-1",children:[ui.jsx("span",{className:"text-gray-500",children:"Accesorii"}),ui.jsx("span",{children:e.accessoriesPrice})]}),ui.jsxs("li",{className:"flex justify-between",children:[ui.jsx("span",{className:"text-gray-500",children:"Crucifix"}),ui.jsx("span",{children:e.crucifixPrice})]})]})]}),!n&&ui.jsx("div",{className:"mt-8 flex justify-end",children:ui.jsx("div",{style:{transform:"scale(2.5)",transformOrigin:"right bottom"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none block",children:r})})})]}),n&&ui.jsxs("div",{className:"col-span-4 pl-2 flex flex-col items-center justify-center",children:[e.imageUrl?ui.jsx("img",{src:e.imageUrl,className:"max-h-32 object-contain"}):ui.jsx("div",{className:"w-full h-32 bg-gray-50 flex items-center justify-center text-xs text-gray-400",children:"FOTO"}),ui.jsx("div",{className:"mt-4 flex flex-col items-center",children:ui.jsx("div",{style:{transform:"scaleX(2)",transformOrigin:"center"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none block",children:r})})})]})]}),ui.jsxs("div",{className:`mt-2 flex justify-between ${n?"text-lg":"text-2xl"} font-bold uppercase tracking-wider text-gray-700`,children:[ui.jsxs("span",{children:["Dimensiuni: ",[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join(" x ")," cm"]}),ui.jsxs("span",{children:["Sarcin Maxim: ",e.weightCapacityMax," kg"]})]})]})},np=({product:e,logoUrl:t,showImages:n})=>{const r=Yf(e.code);return ui.jsx("div",{className:"w-[180mm] h-[130mm] bg-white p-2 box-border overflow-hidden relative text-slate-800",children:ui.jsx("div",{className:"w-full h-full border-[1px] border-slate-300 p-1",children:ui.jsxs("div",{className:"w-full h-full border-[3px] border-slate-800 flex flex-col p-3 relative",children:[ui.jsxs("div",{className:"flex flex-col items-center mb-2 pb-2 border-b border-slate-200",children:[ui.jsx("div",{className:"h-10 mb-1",children:t?ui.jsx("img",{src:t,className:"h-full object-contain"}):ui.jsx("i",{className:"fa-solid fa-cross text-2xl text-slate-400"})}),ui.jsx("h1",{className:`font-serif ${n?"text-2xl":"text-5xl"} font-bold uppercase tracking-wider leading-none`,children:e.modelName}),ui.jsxs("div",{className:"flex gap-4 text-xs font-bold text-slate-500 uppercase mt-0.5 items-center",children:[ui.jsx("span",{className:n?"":"text-xl",children:e.woodColor}),ui.jsx("span",{children:""}),ui.jsx("span",{className:n?"":"text-xl",children:e.sidesType}),ui.jsx("span",{children:""}),ui.jsx("span",{className:(n?"text-xl":"text-4xl")+" font-black text-slate-800",children:e.material})]}),!n&&ui.jsxs("div",{className:"mt-2 text-4xl font-black text-slate-900 border-2 border-slate-800 px-4 py-1",children:[e.price," ",e.currency]})]}),ui.jsxs("div",{className:`grid ${n?"grid-cols-3":"grid-cols-2"} gap-2 flex-grow items-center`,children:[ui.jsxs("div",{className:"text-center space-y-1",children:[ui.jsx("h3",{className:"font-serif italic font-bold text-sm text-slate-700",children:"Interior"}),ui.jsx("div",{className:"w-6 h-0.5 bg-slate-800 mx-auto"}),ui.jsx("p",{className:"font-bold "+(n?"text-sm":"text-2xl"),children:e.lidFeature}),ui.jsx("div",{className:(n?"text-xs":"text-base font-semibold")+" text-slate-600 space-y-0.5",children:e.accessories.map((e,t)=>ui.jsx("p",{children:e},t))}),ui.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase mt-2",children:["Furnizor: ",e.furnizor]})]}),n&&ui.jsx("div",{className:"h-full flex flex-col justify-center items-center relative z-10",children:ui.jsxs("div",{className:"w-32 h-32 rounded-full border-4 border-slate-100 overflow-hidden flex items-center justify-center bg-slate-50 relative",children:[e.imageUrl?ui.jsx("img",{src:e.imageUrl,className:"w-full h-full object-contain"}):ui.jsx("span",{className:"text-xs text-slate-300",children:"FOTO"}),ui.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-900 text-white w-14 h-14 rounded-full flex flex-col items-center justify-center shadow-md border-2 border-white",children:[ui.jsx("span",{className:"text-xs font-bold leading-none",children:e.price}),ui.jsx("span",{className:"text-[8px] leading-none",children:e.currency})]})]})}),ui.jsxs("div",{className:"text-center space-y-1",children:[ui.jsx("h3",{className:"font-serif italic font-bold text-sm text-slate-700",children:"Extra"}),ui.jsx("div",{className:"w-6 h-0.5 bg-slate-800 mx-auto"}),ui.jsx("div",{className:(n?"text-xs":"text-base")+" space-y-0.5",children:e.crossOptions.map((e,t)=>ui.jsxs("p",{children:[ui.jsx("strong",{children:e.type}),": ",e.price]},t))}),ui.jsxs("p",{className:"text-[10px] text-slate-500 pt-1 border-t border-slate-200 w-3/4 mx-auto mt-1",children:["+ Accesorii: ",e.accessoriesPrice+e.crucifixPrice]})]})]}),ui.jsxs("div",{className:"absolute bottom-1 left-0 w-full flex justify-between px-4 items-end",children:[ui.jsxs("div",{className:`text-left bg-white px-2 ${n?"text-lg":"text-2xl"} font-bold uppercase tracking-widest text-slate-600`,children:[[e.dimensions.length>0?e.dimensions.length:null,e.dimensions.width>0?e.dimensions.width:null,e.dimensions.height>0?e.dimensions.height:null].filter(Boolean).join(" x ")," cm",ui.jsx("br",{})," Max ",e.weightCapacityMax," kg"]}),ui.jsx("div",{className:"text-right flex flex-col items-end",children:ui.jsx("div",{style:{transform:n?"scaleX(2)":"scale(2.5) translateX(-20%)",transformOrigin:"right"},children:ui.jsx("span",{style:{fontFamily:"'Libre Barcode EAN13 Text'"},className:"text-5xl leading-none block",children:r})})})]})]})})})},rp=({products:e,template:t,logoUrl:n,showImages:r})=>{const o=[];let i=0;for(;i<e.length;){const t=e[i].isSmallLabel?4:2;o.push(e.slice(i,i+t)),i+=t}return Bf.createPortal(ui.jsx("div",{className:"print-area",children:o.map((e,o)=>{var i;const a=null==(i=e[0])?void 0:i.isSmallLabel;return ui.jsx("div",{className:"label-page",style:{gridTemplateRows:"1fr 1fr",gridTemplateColumns:a?"1fr 1fr":"1fr",gap:a?"5mm":"17mm",padding:a?"5mm":"10mm"},children:e.map(e=>ui.jsx("div",{className:"label-container",children:(()=>{const o={product:e,logoUrl:n,showImages:r};switch(t){case Gf.MODERN:return ui.jsx(Kf,{...o});case Gf.MINIMAL:return ui.jsx(Jf,{...o});case Gf.ELEGANT:return ui.jsx(Zf,{...o});case Gf.ROYAL:return ui.jsx(Qf,{...o});case Gf.VINTAGE:return ui.jsx(ep,{...o});case Gf.PRESTIGE:return ui.jsx(tp,{...o});case Gf.ORNAMENTAL:return ui.jsx(np,{...o});case Gf.CLASSIC:default:return ui.jsx($f,{...o})}})()},e.id))},o)})}),document.body)},op=["BRAD","FAG","STEJAR","FRASIN","PIN","TEI","CIRES","WENGE","ALB","NEGRU"],ip=["4 LATURI","6 LATURI","8 LATURI","PATRU LATURI","SASE LATURI"],ap=()=>ui.jsx("i",{className:"fa-solid fa-print text-lg"}),sp=()=>ui.jsx("i",{className:"fa-solid fa-file-pdf"}),lp=()=>ui.jsx("i",{className:"fa-solid fa-download"}),cp=()=>ui.jsx("i",{className:"fa-solid fa-id-card text-blue-500"}),up=()=>ui.jsx("i",{className:"fa-solid fa-cloud-arrow-down"}),dp=()=>ui.jsx("i",{className:"fa-solid fa-upload"}),fp=()=>ui.jsx("i",{className:"fa-solid fa-database text-amber-500"}),pp=()=>ui.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),hp=()=>ui.jsx("i",{className:"fa-solid fa-file-import"}),mp=()=>ui.jsx("i",{className:"fa-solid fa-clock-rotate-left"}),gp=()=>ui.jsx("i",{className:"fa-solid fa-palette text-pink-500"}),yp=()=>ui.jsx("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),vp=()=>ui.jsx("i",{className:"fa-solid fa-barcode text-[8px]"}),bp=()=>ui.jsx("i",{className:"fa-solid fa-minus text-xs"}),wp=()=>ui.jsx("i",{className:"fa-solid fa-plus text-xs"}),xp=()=>ui.jsx("i",{className:"fa-solid fa-pen-to-square"}),Cp=()=>ui.jsx("i",{className:"fa-solid fa-copy"}),Ep=()=>ui.jsx("i",{className:"fa-solid fa-trash"}),_p=()=>ui.jsx("i",{className:"fa-solid fa-x"}),Ap=()=>ui.jsx("i",{className:"fa-solid fa-cog"}),Sp=({inventory:e})=>{const[t,n]=s.useState([]),[r,o]=s.useState({}),[i,a]=s.useState("https://ai24stiri.ro/scan/public/logo-transparent.png"),[l,c]=s.useState(Gf.ELEGANT),[u,d]=s.useState(!1),[f,p]=s.useState(""),[h,m]=s.useState(null),[g,y]=s.useState(!1),[v,b]=s.useState("https://ai24stiri.ro/scan/public/logo-transparent.png"),w=s.useRef(null),x=s.useRef(null),C=s.useRef(null),E=s.useCallback((e,t)=>{if(!Array.isArray(e))return{processed:[],duplicatesSkipped:0};const n=new Set(t.map(e=>e.code)),r=new Set,o=[];let i=0;return e.forEach((e,t)=>{let a=e.productCode||e.code||e["Cod produs"];const s=a?String(a).replace(/\s/g,""):Xf();if(n.has(s)||r.has(s))return void i++;r.add(s);const l=e.name||e["Denumire produs"]||e.modelName||"",c=Number(e.Pret||e.price||e["Pret vanzare"]||0),u=e.Moneda||e.currency||e["Moneda vanzare"]||"RON",d=l.toUpperCase();let f=e.material||op.find(e=>d.includes(e))||"BRAD",p=e.sidesType||ip.find(e=>d.includes(e))||"4 LATURI",h=e.woodColor||(d.includes("MAHON")?"MAHON":"NUC"),m=e.furnizor||"Diverse",g=e.sizeClass||"L",y=Number(e.weightCapacityMax||0),v={...qf.dimensions};const b=e.Descriere||e.description;if(b){const t=b.split("\n").map(e=>e.trim()).filter(e=>""!==e);if(t.length>=1&&(m=t[0]),t.length>=2&&(f=t[1]),t.length>=3&&(h=t[2]),t.length>=4){const e=t[3].trim(),n=e.match(/^(\d+)\s*[xX]\s*(\d+)\s*[xX]\s*(\d+)$/);if(n)v={length:parseInt(n[1]),width:parseInt(n[2]),height:parseInt(n[3])},g="";else{const t=e.toUpperCase(),n=zf.find(e=>e.id===t);n?(g=n.id,v={...n.dims},y=n.weight):g=e}}if(t.length>=5){const e=parseFloat(t[4].replace(/[^\d.]/g,""));isNaN(e)||(y=e)}t.length>=6&&(e.isSmallLabel=t[5].includes("SMALL: DA"))}const w=`id-${Date.now()}-${t}-${Math.random().toString(36).substr(2,5)}`;o.push({...qf,...e,modelName:l,price:c,furnizor:m,currency:u,code:s,id:w,sidesType:p,woodColor:h,material:f,sizeClass:g,weightCapacityMax:y,dimensions:v,isSmallLabel:e.isSmallLabel||!1,rawStockData:e})}),{processed:o,duplicatesSkipped:i}},[]);s.useEffect(()=>{(async()=>{let t=[];try{t=await Rf()}catch(o){console.error("Could not fetch server stocks:",o)}const r=E(t,[]).processed;if(e.length>0){const{processed:t}=E(e,r);n([...r,...t])}else r.length>0&&n(r)})()},[e,E]);const _=e=>{o(t=>{const n={...t};return void 0!==n[e]?delete n[e]:n[e]=1,n})},A=(e,t)=>{o(n=>{const r=n[e]||0,o=Math.max(0,r+t),i={...n};return 0===o?delete i[e]:i[e]=o,i})},S=t.filter(e=>{var t;const n=f.toLowerCase();return e.modelName.toLowerCase().includes(n)||e.code.toLowerCase().includes(n)||(null==(t=e.furnizor)?void 0:t.toLowerCase().includes(n))}),N=[];t.forEach(e=>{const t=r[e.id]||0;for(let n=0;n<t;n++)N.push(e)});const I=Object.values(r).reduce((e,t)=>e+t,0);return ui.jsxs("div",{className:"flex flex-col font-sans text-gray-900 bg-gray-50/50 min-h-full",children:[ui.jsx("div",{className:"no-print p-3 sm:p-6 max-w-[1920px] mx-auto w-full space-y-6 sm:space-y-8",children:ui.jsxs("div",{className:(g?"grid":"flex flex-col")+" grid-cols-1 xl:grid-cols-12 gap-8",children:[ui.jsx("aside",{className:(g?"xl:col-span-3 min-w-[320px]":"hidden")+" space-y-6 transition-all duration-300",children:ui.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-2xl shadow-sm border border-gray-200",children:[ui.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-3",children:[ui.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex items-center gap-2 uppercase tracking-tighter",children:[ui.jsx(Ap,{})," Setri"]}),ui.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 xl:hidden",children:ui.jsx(_p,{})})]}),ui.jsxs("div",{className:"space-y-8",children:[ui.jsxs("section",{children:[ui.jsxs("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[ui.jsx(cp,{})," Logo Firm"]}),ui.jsxs("div",{className:"space-y-4",children:[i&&ui.jsxs("div",{className:"w-full h-24 bg-gray-50 rounded-xl border border-gray-100 p-2 flex items-center justify-center mb-4 relative group",children:[ui.jsx("img",{src:i,alt:"Logo",className:"max-h-full max-w-full object-contain"}),ui.jsx("button",{onClick:()=>a(null),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full text-[10px] opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:ui.jsx(_p,{})})]}),ui.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100 space-y-3",children:[ui.jsx("label",{className:"text-[10px] font-black text-blue-700 uppercase tracking-widest block",children:"URL Logo Server"}),ui.jsxs("div",{className:"flex gap-1",children:[ui.jsx("input",{type:"text",value:v,onChange:e=>b(e.target.value),className:"flex-1 px-3 py-2 text-xs border border-blue-200 rounded-lg outline-none bg-white"}),ui.jsx("button",{onClick:()=>{v&&a(v)},className:"w-10 h-10 flex items-center justify-center rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-all shadow-sm",children:ui.jsx(up,{})})]})]}),ui.jsx("input",{type:"file",ref:C,onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(n){const e=new FileReader;e.onloadend=()=>a(e.result),e.readAsDataURL(n)}},accept:"image/*",className:"hidden"}),ui.jsxs("button",{onClick:()=>{var e;return null==(e=C.current)?void 0:e.click()},className:"w-full py-3 px-4 bg-gray-50 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-100 transition font-black flex justify-between items-center text-xs uppercase tracking-widest",children:[ui.jsx("span",{children:"ncarc Logo Local"})," ",ui.jsx(dp,{})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[ui.jsx(fp,{})," Scule Date"]}),ui.jsxs("div",{className:"space-y-3",children:[ui.jsx("input",{type:"file",ref:w,onChange:e=>{var r;const o=null==(r=e.target.files)?void 0:r[0];if(!o)return;const i=new FileReader;i.onload=e=>{var r;try{const o=JSON.parse(null==(r=e.target)?void 0:r.result),{processed:i}=E(o,t);i.length>0&&n(e=>[...e,...i])}catch(o){}},i.readAsText(o)},accept:".json",className:"hidden"}),ui.jsxs("button",{onClick:()=>{var e;return null==(e=w.current)?void 0:e.click()},className:"w-full py-3 px-4 bg-gray-50 text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-100 transition font-bold flex justify-between items-center text-xs uppercase tracking-widest",children:[ui.jsx("span",{children:"Import Fiier JSON"})," ",ui.jsx(hp,{})]}),ui.jsxs("button",{onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},className:"w-full py-3 px-4 bg-red-50 text-red-700 border border-red-100 rounded-xl hover:bg-red-100 transition font-black flex justify-between items-center text-xs uppercase tracking-widest",children:[ui.jsx("span",{children:"Recupereaz din HTML"})," ",ui.jsx(mp,{})]}),ui.jsx("input",{type:"file",ref:x,onChange:async e=>{const r=e.target.files;if(!r||0===r.length)return;let o=[];for(let t=0;t<r.length;t++){const e=await r[t].text(),n=(new DOMParser).parseFromString(e,"text/html").getElementById("label-metadata");if(n)try{const e=JSON.parse(n.textContent||"[]");o=[...o,...e]}catch(a){}}const{processed:i}=E(o,t);i.length>0&&n(e=>[...e,...i])},accept:".html",multiple:!0,className:"hidden"}),ui.jsxs("button",{onClick:()=>{if(0===t.length)return;const e=t.map(e=>{var t;return{"Denumire produs":e.modelName,"Cod produs":e.code,Pret:e.price,Moneda:e.currency,Descriere:(null==(t=e.rawStockData)?void 0:t.Descriere)||""}}),n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=`gestiune_${(new Date).toISOString().slice(0,10)}.json`,o.click(),URL.revokeObjectURL(r)},className:"w-full py-3 px-4 bg-indigo-50 text-indigo-700 border border-indigo-100 rounded-xl hover:bg-indigo-100 transition font-black flex justify-between items-center text-xs uppercase tracking-widest",children:[ui.jsx("span",{children:"Export Workspace JSON"})," ",ui.jsx(lp,{})]})]})]}),ui.jsxs("section",{children:[ui.jsxs("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[ui.jsx(gp,{})," Stil Vizual"]}),ui.jsxs("div",{className:"space-y-4",children:[ui.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-xl border border-gray-200",children:[ui.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Afieaz Imagine"}),ui.jsx("button",{onClick:()=>d(!u),className:"relative w-12 h-6 rounded-full transition-colors duration-300 "+(u?"bg-indigo-600":"bg-gray-300"),children:ui.jsx("span",{className:"absolute top-1 left-1 bg-white w-4 h-4 rounded-full shadow transition-transform duration-300 "+(u?"translate-x-6":"translate-x-0")})})]}),ui.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.values(Gf).map(e=>ui.jsx("button",{onClick:()=>c(e),className:"py-2 px-1 text-[10px] font-black uppercase rounded-lg border-2 transition-all "+(l===e?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-100"),children:e},e))})]})]})]})]})}),ui.jsxs("main",{className:(g?"xl:col-span-9":"xl:col-span-12")+" bg-white rounded-2xl border border-gray-200 p-4 sm:p-6 flex flex-col shadow-sm min-h-[600px] transition-all duration-300",children:[ui.jsxs("div",{className:"flex flex-col gap-6 mb-8 border-b border-gray-100 pb-6",children:[ui.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[ui.jsxs("div",{className:"flex items-center gap-4",children:[ui.jsx("button",{onClick:()=>y(!g),className:"w-10 h-10 flex items-center justify-center rounded-xl border transition-all "+(g?"bg-indigo-600 text-white border-indigo-600":"bg-white text-indigo-600 border-indigo-200 hover:bg-indigo-50"),children:ui.jsx(Ap,{})}),ui.jsxs("h2",{className:"text-xl font-black text-gray-800 tracking-tight uppercase",children:["Workspace ",ui.jsxs("span",{className:"text-indigo-500 ml-2 font-normal text-sm lowercase italic",children:["(",t.length," modele)"]})]})]}),ui.jsxs("div",{className:"flex flex-wrap gap-2",children:[ui.jsxs("button",{onClick:async()=>{if(0!==e.length&&confirm(`Importai ${e.length} produse din Oblio?`))try{const t=await Rf(),r=Df(e),o=[...t];r.forEach(e=>{const t=o.findIndex(t=>t["Cod produs"]===e["Cod produs"]);-1!==t?o[t]={...o[t],Stoc:e.Stoc,Pret:e.Pret,"Denumire produs":e["Denumire produs"],"Cota TVA":e["Cota TVA"]}:o.push(e)}),await kf(o);const{processed:i}=E(o,[]);n(i),alert("Sincronizare finalizat!")}catch(t){alert("Eroare: "+t.message)}},className:"px-4 py-2 rounded-lg font-bold text-emerald-600 border border-emerald-100 hover:bg-emerald-50 transition-colors flex items-center gap-2 text-xs",children:[ui.jsx("i",{className:"fa-solid fa-cloud-arrow-down"})," Import Oblio pe Server"]}),ui.jsxs("button",{onClick:async()=>{if(0!==t.length&&confirm("Sigur dorii s actualizai descrierile de pe server cu datele din acest Workspace?"))try{const e=[...await Rf()];t.forEach(t=>{const n=Mf(t),r=e.findIndex(e=>e["Cod produs"]===t.code);-1!==r?e[r]={...e[r],...n,Stoc:e[r].Stoc}:e.push(n)}),await kf(e),alert("Datele au fost salvate pe server!")}catch(e){alert("Eroare la salvare: "+e.message)}},className:"px-4 py-2 rounded-lg font-bold text-amber-600 border border-amber-100 hover:bg-amber-50 transition-colors flex items-center gap-2 text-xs",children:[ui.jsx("i",{className:"fa-solid fa-floppy-disk"})," Salveaz Workspace pe Server"]}),ui.jsxs("button",{onClick:()=>window.location.href=Pf(),className:"px-4 py-2 rounded-lg font-bold text-blue-600 border border-blue-100 hover:bg-blue-50 transition-colors flex items-center gap-2 text-xs",children:[ui.jsx("i",{className:"fa-solid fa-file-excel"})," Export XLS (Oblio)"]}),ui.jsx("div",{className:"w-px h-8 bg-gray-200 mx-2 hidden md:block"}),ui.jsxs("button",{onClick:()=>{const e=document.querySelector(".print-area");if(!e)return;const n=t.filter(e=>(r[e.id]||0)>0),o=`<!DOCTYPE html><html lang="ro"><head><meta charset="UTF-8"><title>Export Etichete</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto:wght@300;400;700&family=Libre+Barcode+EAN13&family=Libre+Barcode+EAN13+Text&display=swap" rel="stylesheet"><style>@media print {@page {size: A4; margin: 0; } body {margin: 0; padding: 0; -webkit-print-color-adjust: exact; } } body {background: white; font-family: 'Roboto', sans-serif; } .label-page {page-break-after: always; height: 297mm; width: 210mm; display: grid; grid-template-rows: 1fr 1fr; padding: 10mm; gap: 17mm; box-sizing: border-box; } .label-container {display: flex; align-items: center; justify-content: center; overflow: hidden; width: 100%; height: 100%; } .label-container:nth-child(1) {border-bottom: none; } * {-webkit-print-color-adjust: exact !important; }</style></head><body><script id="label-metadata" type="application/json">${JSON.stringify(n)}<\/script><div class="print-area">${e.innerHTML}</div><script>window.onload = function() {setTimeout(function () { window.print(); }, 1000); };<\/script></body></html>`,i=new Blob([o],{type:"text/html"}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=`etichete_${(new Date).toISOString().slice(0,10)}.html`,s.click(),URL.revokeObjectURL(a)},className:"px-4 py-2 rounded-lg font-bold text-indigo-600 border border-indigo-100 hover:bg-indigo-50 flex items-center gap-2 text-xs "+(0===I?"opacity-50":""),children:[ui.jsx(sp,{})," Export HTML"]}),ui.jsxs("button",{onClick:()=>{0!==Object.keys(r).length&&window.print()},className:"px-6 py-2 rounded-xl font-black shadow-xl transition-all flex items-center justify-center gap-3 text-sm uppercase tracking-widest "+(0===I?"bg-gray-200 text-gray-400":"bg-indigo-600 hover:bg-indigo-700 text-white shadow-indigo-200"),children:[ui.jsx(ap,{})," IMPRIM (",I,")"]})]})]}),ui.jsxs("div",{className:"relative flex-1",children:[ui.jsx(yp,{}),ui.jsx("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"Caut model, cod...",className:"w-full pl-12 pr-4 py-3.5 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-indigo-500 transition-all font-medium text-gray-700"})]})]}),ui.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 max-h-[800px] pr-2 custom-scrollbar",children:0===t.length?ui.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-indigo-500 py-20",children:[ui.jsx(pp,{}),ui.jsx("p",{className:"font-bold mt-4",children:"Nu exist produse."})]}):S.map(e=>{const t=r[e.id]||0,i=t>0;return ui.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-4 p-4 rounded-2xl border transition-all "+(i?"bg-indigo-50/30 border-indigo-100":"bg-white border-gray-100 hover:border-indigo-100"),children:[ui.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[ui.jsx("input",{type:"checkbox",checked:i,onChange:()=>_(e.id),className:"w-6 h-6 rounded-lg text-indigo-600 cursor-pointer border-gray-300 mt-0.5"}),ui.jsxs("div",{className:"flex-1",onClick:()=>!i&&_(e.id),children:[ui.jsx("p",{className:"font-black text-gray-900 uppercase tracking-tight text-sm sm:text-base",children:e.modelName}),ui.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 text-[10px] font-bold text-gray-400 uppercase mt-1.5",children:[ui.jsxs("span",{className:"text-indigo-500 font-mono",children:[ui.jsx(vp,{})," ",e.code]}),ui.jsxs("span",{className:"text-emerald-600",children:[e.price," ",e.currency]}),ui.jsx("span",{className:"bg-gray-100 px-1.5 rounded text-gray-500",children:e.material})]})]})]}),ui.jsxs("div",{className:"flex items-center justify-between lg:justify-end gap-3 mt-1 lg:mt-0",children:[ui.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-xl p-1 border-gray-100",children:[ui.jsx("button",{onClick:()=>A(e.id,-1),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-50 text-gray-400 hover:text-red-500",children:ui.jsx(bp,{})}),ui.jsx("span",{className:"w-8 text-center font-black text-sm "+(i?"text-indigo-600":"text-gray-400"),children:t}),ui.jsx("button",{onClick:()=>A(e.id,1),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-50 text-gray-400 hover:text-indigo-600",children:ui.jsx(wp,{})})]}),ui.jsxs("div",{className:"flex gap-1",children:[ui.jsx("button",{onClick:()=>m(e),className:"w-9 h-9 flex items-center justify-center rounded-xl bg-white text-indigo-500 border border-indigo-50 hover:bg-indigo-500 hover:text-white transition-all",children:ui.jsx(xp,{})}),ui.jsx("button",{onClick:()=>(e=>{const t=`clone-${Date.now()}`,r={...e,id:t,code:Xf()};n(e=>[...e,r]),o(e=>({...e,[t]:1}))})(e),className:"w-9 h-9 flex items-center justify-center rounded-xl bg-white text-emerald-500 border border-emerald-50 hover:bg-emerald-500 hover:text-white transition-all",children:ui.jsx(Cp,{})}),ui.jsx("button",{onClick:()=>{return t=e.id,n(e=>e.filter(e=>e.id!==t)),void o(e=>{const n={...e};return delete n[t],n});var t},className:"w-9 h-9 flex items-center justify-center rounded-xl bg-white text-red-500 border border-red-50 hover:bg-red-500 hover:text-white transition-all",children:ui.jsx(Ep,{})})]})]})]},e.id)})})]})]})}),ui.jsx(rp,{products:N,template:l,logoUrl:i,showImages:u}),h&&ui.jsx(Wf,{product:h,onSave:async e=>{n(t=>t.map(t=>t.id===e.id?e:t)),m(null);try{const t=await Rf(),n=Mf(e),r=t.findIndex(t=>t["Cod produs"]===e.code);-1!==r?t[r]={...t[r],...n}:t.push(n),await kf(t)}catch(t){}},onClose:()=>m(null)})]})},Np="oblio_config",Ip={email:"",apiSecret:"",cif:"",seriesName:"",workStation:""},Tp=document.getElementById("root");if(!Tp)throw new Error("Could not find root element to mount to");mi.createRoot(Tp).render(ui.jsx(l.StrictMode,{children:ui.jsx(()=>{const[e,t]=s.useState(()=>{try{const e=localStorage.getItem(Np);return e?{...Ip,...JSON.parse(e)}:Ip}catch(e){return console.error("Eroare la ncrcarea configurrii din localStorage:",e),Ip}}),[n,r]=s.useState([]),[o,i]=s.useState([]),[a,l]=s.useState(!1),[c,u]=s.useState(!1),[d,f]=s.useState(!1),[p,h]=s.useState(!1),[m,g]=s.useState(!1),[y,v]=s.useState(null),[b,w]=s.useState(!1),[x,C]=s.useState(ca.IDLE),[E,_]=s.useState(""),[A,S]=s.useState(""),[N,I]=s.useState(null),[T,O]=s.useState("INVOICE"),[R,k]=s.useState(0);s.useEffect(()=>{localStorage.setItem(Np,JSON.stringify(e))},[e]),s.useEffect(()=>{(async()=>{const t=[];if(e.email||t.push("Email"),e.apiSecret||t.push("API Secret"),e.cif||t.push("CIF"),t.length>0)return I(`Configurare incomplet. Lipsesc: ${t.join(", ")}.`),void i([]);I(null),l(!0);try{const t=[...await ma(e)].sort((e,t)=>e.name.localeCompare(t.name,"ro",{sensitivity:"base"}));i(t),console.log("Inventory loaded and sorted:",t.length,"items")}catch(n){console.error("Failed to load inventory",n),C(ca.ERROR),I(n.message||"Eroare necunoscut la conectarea cu Oblio."),i([])}finally{l(!1)}})()},[e]);const P=(e,t,n=3e3)=>{C(e),_(t),n>0&&setTimeout(()=>{C(ca.IDLE),_("")},n)},j=s.useCallback(e=>{const t=e.trim();if(console.log("handleScan called with code:",e,"trimmed:",t),console.log("Inventory length:",o.length),o.length>0){const e=o[0];console.log("First product sample:",{name:e.name,code:e.code,productCode:e.productCode,codeType:typeof e.code,productCodeType:typeof e.productCode}),"10000000000001"===t&&(console.log("Searching for code 10000000000001 in inventory..."),o.forEach((e,n)=>{var r,o;console.log(`Product ${n}:`,{name:e.name,code:e.code,productCode:e.productCode,codeMatch:e.code===t,productCodeMatch:e.productCode===t,codeTrimMatch:(null==(r=e.code)?void 0:r.trim())===t,productCodeTrimMatch:(null==(o=e.productCode)?void 0:o.trim())===t})}))}const i=o.find(e=>{const n=e.productCode&&e.productCode.trim()===t,r=e.code&&e.code.trim()===t&&e.code!==e.productCode;return n||r});if(console.log("Product found:",i?i.name:"NOT FOUND"),!i)return navigator.vibrate&&navigator.vibrate([200,100,200]),void P(ca.ERROR,`Codul ${e} nu a fost gsit n inventarul Oblio.`);const a=i.stock<=0,s=n.findIndex(t=>t.barcode===e||i.productCode&&t.barcode===i.productCode||i.code&&t.barcode===i.code);if(s>=0)r(e=>{const t=[...e];return t[s].quantity+=1,t}),a?(navigator.vibrate&&navigator.vibrate([100,50,100]),P(ca.WARNING,"Cantitate actualizat (Atenie: Stoc 0 n Oblio)",4e3)):(navigator.vibrate&&navigator.vibrate(50),P(ca.SUCCESS,"Cantitate actualizat (+1)"));else{const e={id:Date.now().toString(),name:i.name,barcode:i.productCode||i.code,quantity:1,price:i.price,vatPercentage:i.vatPercentage,unit:i.measuringUnit};r(t=>[...t,e]),h(!1),a?(navigator.vibrate&&navigator.vibrate([100,50,100]),P(ca.WARNING,"Produs adugat (Atenie: Stoc 0 n Oblio)",4e3)):(navigator.vibrate&&navigator.vibrate([50,50,50]),P(ca.SUCCESS,"Produs adugat din stoc"))}},[n,o,P]),D=()=>{A.trim()&&(j(A.trim()),S(""))},M=(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,quantity:Math.max(1,n.quantity+t)}:n))};return ui.jsxs("div",{className:"min-h-screen bg-slate-900 pb-24 relative overflow-hidden font-sans",children:[ui.jsxs("header",{className:"no-print sticky top-0 z-40 bg-slate-900/90 backdrop-blur-md border-b border-slate-800 px-4 py-3 flex flex-col gap-2 shadow-md",children:[ui.jsxs("div",{className:"flex justify-between items-center w-full relative",children:[ui.jsxs("div",{className:"flex items-center gap-3",children:[ui.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg shadow-emerald-500/20 shadow-lg",children:ui.jsx(Ji,{className:"w-5 h-5 text-white"})}),ui.jsxs("div",{children:[ui.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:"Scan2Oblio"}),"INVOICE"===T&&ui.jsxs("div",{onClick:()=>o.length>0&&u(!0),className:"flex items-center gap-1.5 mt-1 transition-all active:scale-95 "+(o.length>0?"cursor-pointer hover:opacity-80":"opacity-70"),children:[ui.jsx("div",{className:"w-2 h-2 rounded-full "+(a?"bg-yellow-400 animate-pulse":o.length>0?"bg-emerald-400":"bg-red-400")}),ui.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-semibold",children:a?"Se ncarc...":o.length>0?`${o.length} PRODUSE`:"Deconectat"}),o.length>0&&ui.jsx("span",{className:"text-[9px] text-slate-600 ml-1",children:"(Vezi)"})]})]})]}),ui.jsxs("div",{className:"flex items-center gap-2",children:[ui.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 border border-slate-700 shadow-xl",children:[ui.jsx("button",{onClick:()=>O("INVOICE"),className:"px-3 py-1.5 rounded-md text-xs font-bold transition-all "+("INVOICE"===T?"bg-emerald-600 text-white shadow-lg":"text-slate-400 hover:text-white"),children:"Facturare"}),ui.jsx("button",{onClick:()=>O("STOCKS"),className:"px-3 py-1.5 rounded-md text-xs font-bold transition-all "+("STOCKS"===T?"bg-blue-600 text-white shadow-lg":"text-slate-400 hover:text-white"),children:"Stocuri"}),ui.jsx("button",{onClick:()=>O("LABELS"),className:"px-3 py-1.5 rounded-md text-xs font-bold transition-all "+("LABELS"===T?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"),children:"Etichete"})]}),ui.jsx("button",{onClick:()=>w(!b),className:"p-2 text-slate-400 hover:text-white transition-colors bg-slate-800 rounded-full hover:bg-slate-700",children:ui.jsx(Qi,{className:"w-5 h-5"})})]})]}),("INVOICE"===T||"STOCKS"===T||"LABELS"===T)&&!a&&ui.jsxs("div",{className:"flex gap-2 px-4 pb-2",children:[ui.jsx("div",{className:"flex-1",children:ui.jsx(If,{config:e,selectedStation:e.workStation||"",onSelect:n=>{const r={...e,workStation:n};t(r),localStorage.setItem("oblio_config",JSON.stringify(r))}})}),ui.jsx("div",{className:"flex-1 md:flex-initial md:min-w-[200px]",children:ui.jsx(Lf,{config:e,onSuccess:e=>{i(e),k(Date.now())},onError:e=>I(e)})})]})]}),ui.jsxs("main",{className:"p-2 sm:p-4 mx-auto space-y-4",children:[b&&ui.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:ui.jsx(fa,{config:e,onSave:e=>{t(e),w(!1)},onClose:()=>w(!1)})}),"STOCKS"===T?ui.jsx(Hf,{config:e},R):"LABELS"===T?ui.jsx(Sp,{inventory:o}):ui.jsxs(ui.Fragment,{children:[c&&ui.jsx(pa,{inventory:o,onClose:()=>u(!1),onAddToCart:(e,t)=>{const o=e.stock<=0,i=e.productCode||e.code,a=n.findIndex(t=>t.barcode===i||t.barcode===e.code||t.barcode===e.productCode);if(a>=0)r(e=>{const n=[...e];return n[a].quantity+=t,n}),P(ca.SUCCESS,`Cantitate actualizat (+${t})`);else{const n={id:Date.now().toString(),name:e.name,barcode:e.productCode||e.code,quantity:t,price:e.price,vatPercentage:e.vatPercentage,unit:e.measuringUnit};r(e=>[...e,n]),P(ca.SUCCESS,`Produs adugat n co (+${t})`)}o&&setTimeout(()=>{P(ca.WARNING,"Atenie: Stoc 0 n Oblio",3e3)},1500)}}),y&&ui.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in zoom-in duration-200",children:ui.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl p-6 w-full max-w-sm shadow-2xl relative",children:[ui.jsx("button",{onClick:()=>v(null),className:"absolute top-4 right-4 p-1 hover:bg-slate-800 rounded-full transition-colors text-slate-400",children:ui.jsx(sa,{className:"w-5 h-5"})}),ui.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[ui.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center",children:ui.jsx(Ci,{className:"w-8 h-8 text-blue-400"})}),ui.jsxs("div",{children:[ui.jsx("h3",{className:"text-white text-lg font-bold mb-1",children:"Rezultat Scanare Test"}),ui.jsx("p",{className:"text-slate-400 text-sm",children:"Acesta este numrul decodat din imagine:"})]}),ui.jsxs("div",{className:"bg-black/50 border border-slate-700 rounded-lg p-4 w-full flex items-center justify-between gap-3",children:[ui.jsx("code",{className:"text-emerald-400 font-mono text-xl font-bold tracking-wider truncate",children:y}),ui.jsx("button",{onClick:()=>{navigator.clipboard.writeText(y),P(ca.SUCCESS,"Copiat!",1500)},className:"p-2 hover:bg-slate-800 rounded text-slate-500 hover:text-white transition-colors",children:ui.jsx(Di,{className:"w-4 h-4"})})]}),ui.jsx("button",{onClick:()=>v(null),className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-semibold transition-colors mt-2",children:"nchide"})]})]})}),N&&ui.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-4 flex items-start gap-3 shadow-lg",children:[ui.jsx("div",{className:"bg-red-500/20 p-2 rounded-full shrink-0",children:ui.jsx(oa,{className:"w-5 h-5 text-red-400"})}),ui.jsxs("div",{className:"flex-1",children:[ui.jsx("h3",{className:"text-red-200 font-bold text-sm",children:"Eroare Conexiune Oblio"}),ui.jsx("p",{className:"text-red-300/80 text-xs mt-1 leading-relaxed",children:N}),ui.jsx("button",{onClick:()=>w(!0),className:"mt-3 text-xs font-semibold bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-400 transition-colors shadow-lg shadow-red-900/20",children:"Verific Setrile"})]})]}),0===n.length?ui.jsxs("div",{className:"flex flex-col items-center justify-center mt-8 text-slate-500 gap-6 px-8 text-center",children:[ui.jsxs("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mb-2 relative",children:[ui.jsx(ea,{className:"w-10 h-10 text-slate-600"}),ui.jsx("div",{className:"absolute bottom-0 right-0 p-2 rounded-full border-4 border-slate-900 "+(N?"bg-red-500":"bg-emerald-500"),children:N?ui.jsx(oa,{className:"w-4 h-4 text-white"}):ui.jsx(Li,{className:"w-4 h-4 text-white"})})]}),ui.jsxs("div",{children:[ui.jsx("h3",{className:"text-white text-lg font-medium mb-2",children:"Coul este gol"}),ui.jsx("p",{className:"text-sm",children:N?"Rezolvai eroarea de conexiune pentru a continua.":"Scanai produse pentru a le cuta n inventarul Oblio."})]}),ui.jsxs("button",{onClick:()=>h(!0),disabled:0===o.length,className:`mt-2 px-8 py-3.5 rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 transform active:scale-95 w-full max-w-xs justify-center\n                 ${o.length>0?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-500/20":"bg-slate-700 text-slate-400 cursor-not-allowed"}\n              `,children:[ui.jsx(Ji,{className:"w-5 h-5"}),o.length>0?"ncepe Scanarea":"Conectare necesar"]}),ui.jsxs("button",{onClick:()=>g(!0),className:"w-full max-w-xs py-2 px-4 rounded-lg border border-blue-500/30 bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[ui.jsx(Ci,{className:"w-4 h-4"}),"Test Scanner (Fr Oblio)"]}),o.length>0&&ui.jsxs("div",{className:"flex items-center gap-2 w-full max-w-xs",children:[ui.jsxs("div",{className:"relative flex-1",children:[ui.jsx("input",{type:"text",value:A,onChange:e=>S(e.target.value),onKeyDown:e=>"Enter"===e.key&&D(),placeholder:"Sau introdu cod manual...",className:"w-full bg-slate-800 border border-slate-700 text-white rounded-lg py-3 pl-10 pr-4 focus:ring-2 focus:ring-emerald-500 outline-none placeholder:text-slate-500 text-sm"}),ui.jsx(Ui,{className:"w-4 h-4 text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"})]}),ui.jsx("button",{onClick:D,disabled:!A,className:"bg-slate-700 hover:bg-slate-600 text-white p-3 rounded-lg border border-slate-600 transition-colors disabled:opacity-50",children:ui.jsx(Xi,{className:"w-5 h-5"})})]})]}):ui.jsxs("div",{className:"space-y-3 pb-8",children:[ui.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-slate-800/80 backdrop-blur p-2 rounded-xl border border-slate-700 shadow-sm sticky top-0 z-10",children:[ui.jsx(Ui,{className:"w-5 h-5 text-emerald-500 ml-2"}),ui.jsx("input",{value:A,onChange:e=>S(e.target.value),onKeyDown:e=>"Enter"===e.key&&D(),placeholder:"Adaug rapid un produs dup cod...",className:"flex-1 bg-transparent text-white border-none focus:outline-none placeholder:text-slate-500 text-sm h-8"}),ui.jsx("button",{onClick:D,disabled:!A,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 text-white p-1.5 rounded-lg transition-colors",children:ui.jsx(Xi,{className:"w-5 h-5"})})]}),n.map(e=>ui.jsxs("div",{className:"group bg-slate-800 hover:bg-slate-750 transition-colors rounded-xl p-4 flex items-center justify-between shadow-lg border border-slate-700/50",children:[ui.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[ui.jsx("div",{className:"flex items-start justify-between mb-1",children:ui.jsx("h3",{className:"font-semibold text-white truncate text-base leading-tight",children:e.name})}),ui.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.barcode?ui.jsx("span",{className:"bg-slate-900 px-1.5 py-0.5 rounded text-slate-300 font-mono tracking-wide",children:e.barcode}):ui.jsx("span",{className:"bg-emerald-500/10 text-emerald-300 px-1.5 py-0.5 rounded flex items-center gap-1",children:"Manual"}),ui.jsx("span",{children:"|"}),ui.jsxs("span",{children:[e.price," RON"]}),ui.jsx("span",{children:"|"}),ui.jsxs("span",{children:["TVA ",e.vatPercentage,"%"]})]})]}),ui.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[ui.jsxs("div",{className:"flex items-center bg-slate-900 rounded-lg border border-slate-700 h-9",children:[ui.jsx("button",{onClick:()=>M(e.id,-1),className:"w-8 h-full flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded-l-lg transition-colors",children:"-"}),ui.jsx("span",{className:"w-8 text-center text-sm font-bold text-white tabular-nums",children:e.quantity}),ui.jsx("button",{onClick:()=>M(e.id,1),className:"w-8 h-full flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded-r-lg transition-colors",children:"+"})]}),ui.jsx("button",{onClick:()=>{return t=e.id,void r(e=>e.filter(e=>e.id!==t));var t},className:"w-9 h-9 flex items-center justify-center text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 rounded-lg transition-colors",children:ui.jsx(ra,{className:"w-4 h-4"})})]})]},e.id)),ui.jsx("div",{className:"mt-6 bg-gradient-to-r from-slate-800 to-slate-800/80 rounded-xl p-5 border border-slate-700 shadow-xl",children:ui.jsxs("div",{className:"flex justify-between items-center",children:[ui.jsx("span",{className:"text-slate-400 font-medium",children:"Total Estimativ"}),ui.jsxs("span",{className:"text-2xl font-bold text-white tracking-tight",children:[n.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2)," ",ui.jsx("span",{className:"text-sm font-normal text-emerald-400",children:"RON"})]})]})})]})]})]}),"INVOICE"===T&&ui.jsx("div",{className:"no-print fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur-md border-t border-slate-800 p-4 safe-area-pb z-30",children:ui.jsxs("div",{className:"max-w-2xl mx-auto flex gap-3",children:[ui.jsxs("button",{onClick:()=>h(!0),disabled:0===o.length,className:`flex-1 py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98] border border-slate-700\n                    ${o.length>0?"bg-slate-800 text-white hover:bg-slate-700":"bg-slate-800/50 text-slate-600 cursor-not-allowed"}\n                `,children:[ui.jsx(Ji,{className:"w-5 h-5 "+(o.length>0?"text-emerald-400":"text-slate-600")}),"Scan"]}),ui.jsx("button",{onClick:()=>{if(0===o.length)return void P(ca.ERROR,"Inventarul nu este ncrcat.");const e=prompt("Caut produs n stoc (Nume sau Cod):");if(!e)return;const t=e.toLowerCase(),i=o.find(n=>{const r=n.productCode&&n.productCode.trim()===e.trim(),o=n.code&&n.code.trim()===e.trim()&&n.code!==n.productCode,i=n.name.toLowerCase().includes(t);return r||o||i});if(i){const e=i.stock<=0,t=i.productCode||i.code,o=n.findIndex(e=>e.barcode===t||e.barcode===i.code||e.barcode===i.productCode);if(o>=0)r(e=>{const t=[...e];return t[o].quantity+=1,t}),e?P(ca.WARNING,"Cantitate actualizat (Atenie: Stoc 0)",4e3):P(ca.SUCCESS,"Cantitate actualizat (+1)");else{const t={id:Date.now().toString(),name:i.name,barcode:i.productCode||i.code,quantity:1,price:i.price,vatPercentage:i.vatPercentage,unit:i.measuringUnit};r(e=>[...e,t]),e?P(ca.WARNING,"Produs adugat (Atenie: Stoc 0)",4e3):P(ca.SUCCESS,"Produs adugat din stoc")}}else alert(`Produsul "${e}" nu a fost gsit n stocul Oblio. V rugm s verificai inventarul.`)},className:"px-4 bg-slate-800 text-white rounded-xl font-medium border border-slate-700 hover:bg-slate-700 flex items-center justify-center transition-all active:scale-[0.98]","aria-label":"Adaug Manual",children:ui.jsx(Xi,{className:"w-6 h-6 text-slate-300"})}),ui.jsxs("button",{onClick:()=>{0!==n.length&&(e.email&&e.apiSecret?f(!0):w(!0))},disabled:0===n.length,className:`flex-[2] py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98]\n                    ${0===n.length?"bg-slate-800 text-slate-600 cursor-not-allowed border border-slate-700":"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-500/25 border border-emerald-500"}\n                `,children:[ui.jsx(Fi,{className:"w-5 h-5"}),"Creeaz Factur"]})]})}),(p||m)&&ui.jsx(ua,{onScan:m?e=>{console.log("handleTestScan called with code:",e),navigator.vibrate&&navigator.vibrate([50,50,50]),g(!1),v(e)}:j,onClose:()=>{h(!1),g(!1)}}),d&&ui.jsx(Tf,{config:e,initialProducts:n,onClose:()=>f(!1),onSuccess:()=>{f(!1),P(ca.SUCCESS,"Factura a fost emis cu succes!",5e3),setTimeout(()=>{r([])},2e3)}}),x!==ca.IDLE&&x!==ca.SENDING_OBLIO&&ui.jsx("div",{className:"no-print fixed top-20 left-1/2 -translate-x-1/2 z-[60] flex justify-center w-full px-4 pointer-events-none",children:ui.jsxs("div",{className:`\n                pointer-events-auto max-w-sm w-full p-4 rounded-xl shadow-2xl flex items-center gap-3 backdrop-blur-md border animate-in slide-in-from-top-5 fade-in duration-300\n                ${x===ca.SUCCESS?"bg-emerald-900/90 border-emerald-500/50 text-emerald-50":""}\n                ${x===ca.WARNING?"bg-amber-900/90 border-amber-500/50 text-amber-50":""}\n                ${x===ca.ERROR?"bg-red-900/90 border-red-500/50 text-red-50":""}\n            `,children:[x===ca.SUCCESS&&ui.jsx(Ri,{className:"w-6 h-6 text-emerald-400 shrink-0"}),x===ca.WARNING&&ui.jsx(Oi,{className:"w-6 h-6 text-amber-400 shrink-0"}),x===ca.ERROR&&ui.jsx(oa,{className:"w-6 h-6 text-red-400 shrink-0"}),ui.jsx("div",{className:"flex-1",children:ui.jsx("p",{className:"text-sm font-medium leading-snug",children:E})})]})})]})},{})}));
